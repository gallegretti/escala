var BP=Object.defineProperty;var TP=(r,e,t)=>e in r?BP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ti=(r,e,t)=>TP(r,typeof e!="symbol"?e+"":e,t);function CP(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in r)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var o0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dv={exports:{}},kg={},Av={exports:{}},xi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function NP(){if(MS)return xi;MS=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function v(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,T={};function C(z,Z,pe){this.props=z,this.context=Z,this.refs=T,this.updater=pe||S}C.prototype.isReactComponent={},C.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function L(){}L.prototype=C.prototype;function O(z,Z,pe){this.props=z,this.context=Z,this.refs=T,this.updater=pe||S}var I=O.prototype=new L;I.constructor=O,B(I,C.prototype),I.isPureReactComponent=!0;var V=Array.isArray,P=Object.prototype.hasOwnProperty,G={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function J(z,Z,pe){var We,Ie={},Ue=null,Ee=null;if(Z!=null)for(We in Z.ref!==void 0&&(Ee=Z.ref),Z.key!==void 0&&(Ue=""+Z.key),Z)P.call(Z,We)&&!W.hasOwnProperty(We)&&(Ie[We]=Z[We]);var Qe=arguments.length-2;if(Qe===1)Ie.children=pe;else if(1<Qe){for(var Oe=Array(Qe),et=0;et<Qe;et++)Oe[et]=arguments[et+2];Ie.children=Oe}if(z&&z.defaultProps)for(We in Qe=z.defaultProps,Qe)Ie[We]===void 0&&(Ie[We]=Qe[We]);return{$$typeof:r,type:z,key:Ue,ref:Ee,props:Ie,_owner:G.current}}function re(z,Z){return{$$typeof:r,type:z.type,key:Z,ref:z.ref,props:z.props,_owner:z._owner}}function j(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function oe(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return Z[pe]})}var ge=/\/+/g;function he(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?oe(""+z.key):Z.toString(36)}function ve(z,Z,pe,We,Ie){var Ue=typeof z;(Ue==="undefined"||Ue==="boolean")&&(z=null);var Ee=!1;if(z===null)Ee=!0;else switch(Ue){case"string":case"number":Ee=!0;break;case"object":switch(z.$$typeof){case r:case e:Ee=!0}}if(Ee)return Ee=z,Ie=Ie(Ee),z=We===""?"."+he(Ee,0):We,V(Ie)?(pe="",z!=null&&(pe=z.replace(ge,"$&/")+"/"),ve(Ie,Z,pe,"",function(et){return et})):Ie!=null&&(j(Ie)&&(Ie=re(Ie,pe+(!Ie.key||Ee&&Ee.key===Ie.key?"":(""+Ie.key).replace(ge,"$&/")+"/")+z)),Z.push(Ie)),1;if(Ee=0,We=We===""?".":We+":",V(z))for(var Qe=0;Qe<z.length;Qe++){Ue=z[Qe];var Oe=We+he(Ue,Qe);Ee+=ve(Ue,Z,pe,Oe,Ie)}else if(Oe=v(z),typeof Oe=="function")for(z=Oe.call(z),Qe=0;!(Ue=z.next()).done;)Ue=Ue.value,Oe=We+he(Ue,Qe++),Ee+=ve(Ue,Z,pe,Oe,Ie);else if(Ue==="object")throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Ee}function Be(z,Z,pe){if(z==null)return z;var We=[],Ie=0;return ve(z,We,"","",function(Ue){return Z.call(pe,Ue,Ie++)}),We}function te(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var ue={current:null},ne={transition:null},Se={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:ne,ReactCurrentOwner:G};return xi.Children={map:Be,forEach:function(z,Z,pe){Be(z,function(){Z.apply(this,arguments)},pe)},count:function(z){var Z=0;return Be(z,function(){Z++}),Z},toArray:function(z){return Be(z,function(Z){return Z})||[]},only:function(z){if(!j(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},xi.Component=C,xi.Fragment=t,xi.Profiler=n,xi.PureComponent=O,xi.StrictMode=i,xi.Suspense=h,xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,xi.cloneElement=function(z,Z,pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var We=B({},z.props),Ie=z.key,Ue=z.ref,Ee=z._owner;if(Z!=null){if(Z.ref!==void 0&&(Ue=Z.ref,Ee=G.current),Z.key!==void 0&&(Ie=""+Z.key),z.type&&z.type.defaultProps)var Qe=z.type.defaultProps;for(Oe in Z)P.call(Z,Oe)&&!W.hasOwnProperty(Oe)&&(We[Oe]=Z[Oe]===void 0&&Qe!==void 0?Qe[Oe]:Z[Oe])}var Oe=arguments.length-2;if(Oe===1)We.children=pe;else if(1<Oe){Qe=Array(Oe);for(var et=0;et<Oe;et++)Qe[et]=arguments[et+2];We.children=Qe}return{$$typeof:r,type:z.type,key:Ie,ref:Ue,props:We,_owner:Ee}},xi.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},xi.createElement=J,xi.createFactory=function(z){var Z=J.bind(null,z);return Z.type=z,Z},xi.createRef=function(){return{current:null}},xi.forwardRef=function(z){return{$$typeof:c,render:z}},xi.isValidElement=j,xi.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:te}},xi.memo=function(z,Z){return{$$typeof:p,type:z,compare:Z===void 0?null:Z}},xi.startTransition=function(z){var Z=ne.transition;ne.transition={};try{z()}finally{ne.transition=Z}},xi.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},xi.useCallback=function(z,Z){return ue.current.useCallback(z,Z)},xi.useContext=function(z){return ue.current.useContext(z)},xi.useDebugValue=function(){},xi.useDeferredValue=function(z){return ue.current.useDeferredValue(z)},xi.useEffect=function(z,Z){return ue.current.useEffect(z,Z)},xi.useId=function(){return ue.current.useId()},xi.useImperativeHandle=function(z,Z,pe){return ue.current.useImperativeHandle(z,Z,pe)},xi.useInsertionEffect=function(z,Z){return ue.current.useInsertionEffect(z,Z)},xi.useLayoutEffect=function(z,Z){return ue.current.useLayoutEffect(z,Z)},xi.useMemo=function(z,Z){return ue.current.useMemo(z,Z)},xi.useReducer=function(z,Z,pe){return ue.current.useReducer(z,Z,pe)},xi.useRef=function(z){return ue.current.useRef(z)},xi.useState=function(z){return ue.current.useState(z)},xi.useSyncExternalStore=function(z,Z,pe){return ue.current.useSyncExternalStore(z,Z,pe)},xi.useTransition=function(){return ue.current.useTransition()},xi.version="18.2.0",xi}var DS;function ub(){return DS||(DS=1,Av.exports=NP()),Av.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function PP(){if(AS)return kg;AS=1;var r=ub(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(c,h,p){var g,b={},v=null,S=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(S=h.ref);for(g in h)i.call(h,g)&&!s.hasOwnProperty(g)&&(b[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)b[g]===void 0&&(b[g]=h[g]);return{$$typeof:e,type:c,key:v,ref:S,props:b,_owner:n.current}}return kg.Fragment=t,kg.jsx=o,kg.jsxs=o,kg}var VS;function EP(){return VS||(VS=1,Dv.exports=PP()),Dv.exports}var w=EP(),F=ub();const Mn=lx(F),Fw=CP({__proto__:null,default:Mn},[F]);var Vv={exports:{}},Ls={},zv={exports:{}},Wv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function RP(){return zS||(zS=1,function(r){function e(ne,Se){var z=ne.length;ne.push(Se);e:for(;0<z;){var Z=z-1>>>1,pe=ne[Z];if(0<n(pe,Se))ne[Z]=Se,ne[z]=pe,z=Z;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var Se=ne[0],z=ne.pop();if(z!==Se){ne[0]=z;e:for(var Z=0,pe=ne.length,We=pe>>>1;Z<We;){var Ie=2*(Z+1)-1,Ue=ne[Ie],Ee=Ie+1,Qe=ne[Ee];if(0>n(Ue,z))Ee<pe&&0>n(Qe,Ue)?(ne[Z]=Qe,ne[Ee]=z,Z=Ee):(ne[Z]=Ue,ne[Ie]=z,Z=Ie);else if(Ee<pe&&0>n(Qe,z))ne[Z]=Qe,ne[Ee]=z,Z=Ee;else break e}}return Se}function n(ne,Se){var z=ne.sortIndex-Se.sortIndex;return z!==0?z:ne.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();r.unstable_now=function(){return o.now()-c}}var h=[],p=[],g=1,b=null,v=3,S=!1,B=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ne){for(var Se=t(p);Se!==null;){if(Se.callback===null)i(p);else if(Se.startTime<=ne)i(p),Se.sortIndex=Se.expirationTime,e(h,Se);else break;Se=t(p)}}function V(ne){if(T=!1,I(ne),!B)if(t(h)!==null)B=!0,te(P);else{var Se=t(p);Se!==null&&ue(V,Se.startTime-ne)}}function P(ne,Se){B=!1,T&&(T=!1,L(J),J=-1),S=!0;var z=v;try{for(I(Se),b=t(h);b!==null&&(!(b.expirationTime>Se)||ne&&!oe());){var Z=b.callback;if(typeof Z=="function"){b.callback=null,v=b.priorityLevel;var pe=Z(b.expirationTime<=Se);Se=r.unstable_now(),typeof pe=="function"?b.callback=pe:b===t(h)&&i(h),I(Se)}else i(h);b=t(h)}if(b!==null)var We=!0;else{var Ie=t(p);Ie!==null&&ue(V,Ie.startTime-Se),We=!1}return We}finally{b=null,v=z,S=!1}}var G=!1,W=null,J=-1,re=5,j=-1;function oe(){return!(r.unstable_now()-j<re)}function ge(){if(W!==null){var ne=r.unstable_now();j=ne;var Se=!0;try{Se=W(!0,ne)}finally{Se?he():(G=!1,W=null)}}else G=!1}var he;if(typeof O=="function")he=function(){O(ge)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Be=ve.port2;ve.port1.onmessage=ge,he=function(){Be.postMessage(null)}}else he=function(){C(ge,0)};function te(ne){W=ne,G||(G=!0,he())}function ue(ne,Se){J=C(function(){ne(r.unstable_now())},Se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){B||S||(B=!0,te(P))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(ne){switch(v){case 1:case 2:case 3:var Se=3;break;default:Se=v}var z=v;v=Se;try{return ne()}finally{v=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,Se){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var z=v;v=ne;try{return Se()}finally{v=z}},r.unstable_scheduleCallback=function(ne,Se,z){var Z=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,ne){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=z+pe,ne={id:g++,callback:Se,priorityLevel:ne,startTime:z,expirationTime:pe,sortIndex:-1},z>Z?(ne.sortIndex=z,e(p,ne),t(h)===null&&ne===t(p)&&(T?(L(J),J=-1):T=!0,ue(V,z-Z))):(ne.sortIndex=pe,e(h,ne),B||S||(B=!0,te(P))),ne},r.unstable_shouldYield=oe,r.unstable_wrapCallback=function(ne){var Se=v;return function(){var z=v;v=Se;try{return ne.apply(this,arguments)}finally{v=z}}}}(Wv)),Wv}var WS;function LP(){return WS||(WS=1,zv.exports=RP()),zv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function IP(){if(HS)return Ls;HS=1;var r=ub(),e=LP();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,n={};function s(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(n[a]=l,a=0;a<l.length;a++)i.add(l[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},b={};function v(a){return h.call(b,a)?!0:h.call(g,a)?!1:p.test(a)?b[a]=!0:(g[a]=!0,!1)}function S(a,l,f,m){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function B(a,l,f,m){if(l===null||typeof l>"u"||S(a,l,f,m))return!0;if(m)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function T(a,l,f,m,x,k,R){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=f,this.propertyName=a,this.type=l,this.sanitizeURL=k,this.removeEmptyString=R}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){C[a]=new T(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];C[l]=new T(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){C[a]=new T(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){C[a]=new T(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){C[a]=new T(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){C[a]=new T(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){C[a]=new T(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){C[a]=new T(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){C[a]=new T(a,5,!1,a.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function O(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(L,O);C[l]=new T(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(L,O);C[l]=new T(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(L,O);C[l]=new T(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){C[a]=new T(a,1,!1,a.toLowerCase(),null,!1,!1)}),C.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){C[a]=new T(a,1,!1,a.toLowerCase(),null,!0,!0)});function I(a,l,f,m){var x=C.hasOwnProperty(l)?C[l]:null;(x!==null?x.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(B(l,f,x,m)&&(f=null),m||x===null?v(l)&&(f===null?a.removeAttribute(l):a.setAttribute(l,""+f)):x.mustUseProperty?a[x.propertyName]=f===null?x.type===3?!1:"":f:(l=x.attributeName,m=x.attributeNamespace,f===null?a.removeAttribute(l):(x=x.type,f=x===3||x===4&&f===!0?"":""+f,m?a.setAttributeNS(m,l,f):a.setAttribute(l,f))))}var V=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),G=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),oe=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),Be=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),ne=Symbol.iterator;function Se(a){return a===null||typeof a!="object"?null:(a=ne&&a[ne]||a["@@iterator"],typeof a=="function"?a:null)}var z=Object.assign,Z;function pe(a){if(Z===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Z=l&&l[1]||""}return`
`+Z+a}var We=!1;function Ie(a,l){if(!a||We)return"";We=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(fe){var m=fe}Reflect.construct(a,[],l)}else{try{l.call()}catch(fe){m=fe}a.call(l.prototype)}else{try{throw Error()}catch(fe){m=fe}a()}}catch(fe){if(fe&&m&&typeof fe.stack=="string"){for(var x=fe.stack.split(`
`),k=m.stack.split(`
`),R=x.length-1,H=k.length-1;1<=R&&0<=H&&x[R]!==k[H];)H--;for(;1<=R&&0<=H;R--,H--)if(x[R]!==k[H]){if(R!==1||H!==1)do if(R--,H--,0>H||x[R]!==k[H]){var q=`
`+x[R].replace(" at new "," at ");return a.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",a.displayName)),q}while(1<=R&&0<=H);break}}}finally{We=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?pe(a):""}function Ue(a){switch(a.tag){case 5:return pe(a.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return a=Ie(a.type,!1),a;case 11:return a=Ie(a.type.render,!1),a;case 1:return a=Ie(a.type,!0),a;default:return""}}function Ee(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case W:return"Fragment";case G:return"Portal";case re:return"Profiler";case J:return"StrictMode";case he:return"Suspense";case ve:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case oe:return(a.displayName||"Context")+".Consumer";case j:return(a._context.displayName||"Context")+".Provider";case ge:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Be:return l=a.displayName||null,l!==null?l:Ee(a.type)||"Memo";case te:l=a._payload,a=a._init;try{return Ee(a(l))}catch{}}return null}function Qe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(l);case 8:return l===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Oe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function et(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function wt(a){var l=et(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),m=""+a[l];if(!a.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,k=f.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return x.call(this)},set:function(R){m=""+R,k.call(this,R)}}),Object.defineProperty(a,l,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(R){m=""+R},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function pt(a){a._valueTracker||(a._valueTracker=wt(a))}function ei(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),m="";return a&&(m=et(a)?a.checked?"true":"false":a.value),a=m,a!==f?(l.setValue(a),!0):!1}function gi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function At(a,l){var f=l.checked;return z({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function Bi(a,l){var f=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;f=Oe(l.value!=null?l.value:f),a._wrapperState={initialChecked:m,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ai(a,l){l=l.checked,l!=null&&I(a,"checked",l,!1)}function $t(a,l){Ai(a,l);var f=Oe(l.value),m=l.type;if(f!=null)m==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Xi(a,l.type,f):l.hasOwnProperty("defaultValue")&&Xi(a,l.type,Oe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Ki(a,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,f||l===a.value||(a.value=l),a.defaultValue=l}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function Xi(a,l,f){(l!=="number"||gi(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var zt=Array.isArray;function Wt(a,l,f,m){if(a=a.options,l){l={};for(var x=0;x<f.length;x++)l["$"+f[x]]=!0;for(f=0;f<a.length;f++)x=l.hasOwnProperty("$"+a[f].value),a[f].selected!==x&&(a[f].selected=x),x&&m&&(a[f].defaultSelected=!0)}else{for(f=""+Oe(f),l=null,x=0;x<a.length;x++){if(a[x].value===f){a[x].selected=!0,m&&(a[x].defaultSelected=!0);return}l!==null||a[x].disabled||(l=a[x])}l!==null&&(l.selected=!0)}}function Li(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return z({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Qi(a,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(t(92));if(zt(f)){if(1<f.length)throw Error(t(93));f=f[0]}l=f}l==null&&(l=""),f=l}a._wrapperState={initialValue:Oe(f)}}function Ve(a,l){var f=Oe(l.value),m=Oe(l.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),l.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),m!=null&&(a.defaultValue=""+m)}function qe(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function bt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xe(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?bt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var se,Re=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,m,x){MSApp.execUnsafeLocalFunction(function(){return a(l,f,m,x)})}:a}(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(se=se||document.createElement("div"),se.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=se.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function ke(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(a){Ht.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Je[l]=Je[a]})});function Xt(a,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||Je.hasOwnProperty(a)&&Je[a]?(""+l).trim():l+"px"}function Ji(a,l){a=a.style;for(var f in l)if(l.hasOwnProperty(f)){var m=f.indexOf("--")===0,x=Xt(f,l[f],m);f==="float"&&(f="cssFloat"),m?a.setProperty(f,x):a[f]=x}}var jn=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bl(a,l){if(l){if(jn[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Hs(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vl=null;function _c(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ua=null,Gs=null,jr=null;function vo(a){if(a=kn(a)){if(typeof Ua!="function")throw Error(t(280));var l=a.stateNode;l&&(l=pd(l),Ua(a.stateNode,a.type,l))}}function Vh(a){Gs?jr?jr.push(a):jr=[a]:Gs=a}function wo(){if(Gs){var a=Gs,l=jr;if(jr=Gs=null,vo(a),l)for(a=0;a<l.length;a++)vo(l[a])}}function pu(a,l){return a(l)}function gu(){}var mu=!1;function Bc(a,l,f){if(mu)return a(l,f);mu=!0;try{return pu(a,l,f)}finally{mu=!1,(Gs!==null||jr!==null)&&(gu(),wo())}}function xo(a,l){var f=a.stateNode;if(f===null)return null;var m=pd(f);if(m===null)return null;f=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,l,typeof f));return f}var wl=!1;if(c)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){wl=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{wl=!1}function Tc(a,l,f,m,x,k,R,H,q){var fe=Array.prototype.slice.call(arguments,3);try{l.apply(f,fe)}catch(Me){this.onError(Me)}}var Sl=!1,ai=null,Er=!1,yu=null,Fb={onError:function(a){Sl=!0,ai=a}};function Ob(a,l,f,m,x,k,R,H,q){Sl=!1,ai=null,Tc.apply(Fb,arguments)}function Mb(a,l,f,m,x,k,R,H,q){if(Ob.apply(this,arguments),Sl){if(Sl){var fe=ai;Sl=!1,ai=null}else throw Error(t(198));Er||(Er=!0,yu=fe)}}function kl(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,l.flags&4098&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function ep(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function Em(a){if(kl(a)!==a)throw Error(t(188))}function Db(a){var l=a.alternate;if(!l){if(l=kl(a),l===null)throw Error(t(188));return l!==a?null:a}for(var f=a,m=l;;){var x=f.return;if(x===null)break;var k=x.alternate;if(k===null){if(m=x.return,m!==null){f=m;continue}break}if(x.child===k.child){for(k=x.child;k;){if(k===f)return Em(x),a;if(k===m)return Em(x),l;k=k.sibling}throw Error(t(188))}if(f.return!==m.return)f=x,m=k;else{for(var R=!1,H=x.child;H;){if(H===f){R=!0,f=x,m=k;break}if(H===m){R=!0,m=x,f=k;break}H=H.sibling}if(!R){for(H=k.child;H;){if(H===f){R=!0,f=k,m=x;break}if(H===m){R=!0,m=k,f=x;break}H=H.sibling}if(!R)throw Error(t(189))}}if(f.alternate!==m)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:l}function Rm(a){return a=Db(a),a!==null?Lm(a):null}function Lm(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Lm(a);if(l!==null)return l;a=a.sibling}return null}var Im=e.unstable_scheduleCallback,Fm=e.unstable_cancelCallback,zh=e.unstable_shouldYield,Ab=e.unstable_requestPaint,hr=e.unstable_now,Vb=e.unstable_getCurrentPriorityLevel,tp=e.unstable_ImmediatePriority,Om=e.unstable_UserBlockingPriority,Cc=e.unstable_NormalPriority,Mm=e.unstable_LowPriority,ip=e.unstable_IdlePriority,Wh=null,fa=null;function zb(a){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Wh,a,void 0,(a.current.flags&128)===128)}catch{}}var Us=Math.clz32?Math.clz32:Vm,Dm=Math.log,Am=Math.LN2;function Vm(a){return a>>>=0,a===0?32:31-(Dm(a)/Am|0)|0}var bu=64,Hh=4194304;function vu(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function _l(a,l){var f=a.pendingLanes;if(f===0)return 0;var m=0,x=a.suspendedLanes,k=a.pingedLanes,R=f&268435455;if(R!==0){var H=R&~x;H!==0?m=vu(H):(k&=R,k!==0&&(m=vu(k)))}else R=f&~x,R!==0?m=vu(R):k!==0&&(m=vu(k));if(m===0)return 0;if(l!==0&&l!==m&&!(l&x)&&(x=m&-m,k=l&-l,x>=k||x===16&&(k&4194240)!==0))return l;if(m&4&&(m|=f&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=m;0<l;)f=31-Us(l),x=1<<f,m|=a[f],l&=~x;return m}function zm(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wb(a,l){for(var f=a.suspendedLanes,m=a.pingedLanes,x=a.expirationTimes,k=a.pendingLanes;0<k;){var R=31-Us(k),H=1<<R,q=x[R];q===-1?(!(H&f)||H&m)&&(x[R]=zm(H,l)):q<=l&&(a.expiredLanes|=H),k&=~H}}function Gh(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function rp(){var a=bu;return bu<<=1,!(bu&4194240)&&(bu=64),a}function Nc(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function Pc(a,l,f){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-Us(l),a[l]=f}function Wm(a,l){var f=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<f;){var x=31-Us(f),k=1<<x;l[x]=0,m[x]=-1,a[x]=-1,f&=~k}}function Ec(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var m=31-Us(f),x=1<<m;x&l|a[m]&l&&(a[m]|=l),f&=~x}}var Ii=0;function Bl(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var np,Uh,Hm,sp,ap,$h=!1,Rc=[],So=null,ko=null,_o=null,wu=new Map,Lc=new Map,Bo=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gm(a,l){switch(a){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":wu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(l.pointerId)}}function Tl(a,l,f,m,x,k){return a===null||a.nativeEvent!==k?(a={blockedOn:l,domEventName:f,eventSystemFlags:m,nativeEvent:k,targetContainers:[x]},l!==null&&(l=kn(l),l!==null&&Uh(l)),a):(a.eventSystemFlags|=m,l=a.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),a)}function Gb(a,l,f,m,x){switch(l){case"focusin":return So=Tl(So,a,l,f,m,x),!0;case"dragenter":return ko=Tl(ko,a,l,f,m,x),!0;case"mouseover":return _o=Tl(_o,a,l,f,m,x),!0;case"pointerover":var k=x.pointerId;return wu.set(k,Tl(wu.get(k)||null,a,l,f,m,x)),!0;case"gotpointercapture":return k=x.pointerId,Lc.set(k,Tl(Lc.get(k)||null,a,l,f,m,x)),!0}return!1}function Um(a){var l=ya(a.target);if(l!==null){var f=kl(l);if(f!==null){if(l=f.tag,l===13){if(l=ep(f),l!==null){a.blockedOn=l,ap(a.priority,function(){Hm(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function jh(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=Xh(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);vl=m,f.target.dispatchEvent(m),vl=null}else return l=kn(f),l!==null&&Uh(l),a.blockedOn=f,!1;l.shift()}return!0}function $m(a,l,f){jh(a)&&f.delete(l)}function Ub(){$h=!1,So!==null&&jh(So)&&(So=null),ko!==null&&jh(ko)&&(ko=null),_o!==null&&jh(_o)&&(_o=null),wu.forEach($m),Lc.forEach($m)}function Vi(a,l){a.blockedOn===l&&(a.blockedOn=null,$h||($h=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ub)))}function Oi(a){function l(x){return Vi(x,a)}if(0<Rc.length){Vi(Rc[0],a);for(var f=1;f<Rc.length;f++){var m=Rc[f];m.blockedOn===a&&(m.blockedOn=null)}}for(So!==null&&Vi(So,a),ko!==null&&Vi(ko,a),_o!==null&&Vi(_o,a),wu.forEach(l),Lc.forEach(l),f=0;f<Bo.length;f++)m=Bo[f],m.blockedOn===a&&(m.blockedOn=null);for(;0<Bo.length&&(f=Bo[0],f.blockedOn===null);)Um(f),f.blockedOn===null&&Bo.shift()}var xu=V.ReactCurrentBatchConfig,Yh=!0;function $b(a,l,f,m){var x=Ii,k=xu.transition;xu.transition=null;try{Ii=1,op(a,l,f,m)}finally{Ii=x,xu.transition=k}}function jb(a,l,f,m){var x=Ii,k=xu.transition;xu.transition=null;try{Ii=4,op(a,l,f,m)}finally{Ii=x,xu.transition=k}}function op(a,l,f,m){if(Yh){var x=Xh(a,l,f,m);if(x===null)_p(a,l,m,qh,f),Gm(a,m);else if(Gb(x,a,l,f,m))m.stopPropagation();else if(Gm(a,m),l&4&&-1<Hb.indexOf(a)){for(;x!==null;){var k=kn(x);if(k!==null&&np(k),k=Xh(a,l,f,m),k===null&&_p(a,l,m,qh,f),k===x)break;x=k}x!==null&&m.stopPropagation()}else _p(a,l,m,null,f)}}var qh=null;function Xh(a,l,f,m){if(qh=null,a=_c(m),a=ya(a),a!==null)if(l=kl(a),l===null)a=null;else if(f=l.tag,f===13){if(a=ep(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return qh=a,null}function jm(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vb()){case tp:return 1;case Om:return 4;case Cc:case Mm:return 16;case ip:return 536870912;default:return 16}default:return 16}}var dr=null,Ic=null,pa=null;function lp(){if(pa)return pa;var a,l=Ic,f=l.length,m,x="value"in dr?dr.value:dr.textContent,k=x.length;for(a=0;a<f&&l[a]===x[a];a++);var R=f-a;for(m=1;m<=R&&l[f-m]===x[k-m];m++);return pa=x.slice(a,1<m?1-m:void 0)}function Su(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Dn(){return!0}function up(){return!1}function Yn(a){function l(f,m,x,k,R){this._reactName=f,this._targetInst=x,this.type=m,this.nativeEvent=k,this.target=R,this.currentTarget=null;for(var H in a)a.hasOwnProperty(H)&&(f=a[H],this[H]=f?f(k):k[H]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Dn:up,this.isPropagationStopped=up,this}return z(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Dn)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Dn)},persist:function(){},isPersistent:Dn}),l}var Cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kh=Yn(Cl),ku=z({},Cl,{view:0,detail:0}),Ym=Yn(ku),An,cp,xn,Qh=z({},ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gp,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==xn&&(xn&&a.type==="mousemove"?(An=a.screenX-xn.screenX,cp=a.screenY-xn.screenY):cp=An=0,xn=a),An)},movementY:function(a){return"movementY"in a?a.movementY:cp}}),hp=Yn(Qh),To=z({},Qh,{dataTransfer:0}),Jh=Yn(To),dp=z({},ku,{relatedTarget:0}),Zi=Yn(dp),Co=z({},Cl,{animationName:0,elapsedTime:0,pseudoElement:0}),fp=Yn(Co),Yb=z({},Cl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),pp=Yn(Yb),qb=z({},Cl,{data:0}),qm=Yn(qb),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Zh[a])?!!l[a]:!1}function gp(){return _u}var Km=z({},ku,{key:function(a){if(a.key){var l=Xb[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Su(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Xm[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gp,charCode:function(a){return a.type==="keypress"?Su(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Su(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Qm=Yn(Km),mp=z({},Qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=Yn(mp),Jm=z({},ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gp}),Kb=Yn(Jm),yp=z({},Cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),bp=Yn(yp),Qb=z({},Qh,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zm=Yn(Qb),ts=[9,13,27,32],Fc=c&&"CompositionEvent"in window,$a=null;c&&"documentMode"in document&&($a=document.documentMode);var ey=c&&"TextEvent"in window&&!$a,vp=c&&(!Fc||$a&&8<$a&&11>=$a),ty=" ",iy=!1;function ry(a,l){switch(a){case"keyup":return ts.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ny(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Bu=!1;function Tu(a,l){switch(a){case"compositionend":return ny(l);case"keypress":return l.which!==32?null:(iy=!0,ty);case"textInput":return a=l.data,a===ty&&iy?null:a;default:return null}}function Jb(a,l){if(Bu)return a==="compositionend"||!Fc&&ry(a,l)?(a=lp(),pa=Ic=dr=null,Bu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return vp&&l.locale!=="ko"?null:l.data;default:return null}}var Zb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Zb[a.type]:l==="textarea"}function wp(a,l,f,m){Vh(m),l=cd(l,"onChange"),0<l.length&&(f=new Kh("onChange","change",null,f,m),a.push({event:f,listeners:l}))}var ws=null,No=null;function ev(a){hy(a,0)}function id(a){var l=oi(a);if(ei(l))return a}function tv(a,l){if(a==="change")return l}var Nl=!1;if(c){var is;if(c){var rd="oninput"in document;if(!rd){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),rd=typeof sy.oninput=="function"}is=rd}else is=!1;Nl=is&&(!document.documentMode||9<document.documentMode)}function ay(){ws&&(ws.detachEvent("onpropertychange",oy),No=ws=null)}function oy(a){if(a.propertyName==="value"&&id(No)){var l=[];wp(l,No,a,_c(a)),Bc(ev,l)}}function iv(a,l,f){a==="focusin"?(ay(),ws=l,No=f,ws.attachEvent("onpropertychange",oy)):a==="focusout"&&ay()}function rv(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return id(No)}function Cu(a,l){if(a==="click")return id(l)}function ee(a,l){if(a==="input"||a==="change")return id(l)}function _e(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ce=typeof Object.is=="function"?Object.is:_e;function it(a,l){if(ce(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),m=Object.keys(l);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var x=f[m];if(!h.call(l,x)||!ce(a[x],l[x]))return!1}return!0}function Kt(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Pi(a,l){var f=Kt(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=l&&m>=l)return{node:f,offset:l-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Kt(f)}}function Dr(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Dr(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Hi(){for(var a=window,l=gi();l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=gi(a.document)}return l}function Oc(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function nv(a){var l=Hi(),f=a.focusedElem,m=a.selectionRange;if(l!==f&&f&&f.ownerDocument&&Dr(f.ownerDocument.documentElement,f)){if(m!==null&&Oc(f)){if(l=m.start,a=m.end,a===void 0&&(a=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(a,f.value.length);else if(a=(l=f.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var x=f.textContent.length,k=Math.min(m.start,x);m=m.end===void 0?k:Math.min(m.end,x),!a.extend&&k>m&&(x=m,m=k,k=x),x=Pi(f,k);var R=Pi(f,m);x&&R&&(a.rangeCount!==1||a.anchorNode!==x.node||a.anchorOffset!==x.offset||a.focusNode!==R.node||a.focusOffset!==R.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),a.removeAllRanges(),k>m?(a.addRange(l),a.extend(R.node,R.offset)):(l.setEnd(R.node,R.offset),a.addRange(l)))}}for(l=[],a=f;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)a=l[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var xs=c&&"documentMode"in document&&11>=document.documentMode,ja=null,xp=null,ga=null,Nu=!1;function Mc(a,l,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Nu||ja==null||ja!==gi(m)||(m=ja,"selectionStart"in m&&Oc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ga&&it(ga,m)||(ga=m,m=cd(xp,"onSelect"),0<m.length&&(l=new Kh("onSelect","select",null,l,f),a.push({event:l,listeners:m}),l.target=ja)))}function Ei(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var Pu={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionend:Ei("Transition","TransitionEnd")},nd={},Dc={};c&&(Dc=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function sd(a){if(nd[a])return nd[a];if(!Pu[a])return a;var l=Pu[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in Dc)return nd[a]=l[f];return a}var ly=sd("animationend"),uy=sd("animationiteration"),Ac=sd("animationstart"),Ya=sd("transitionend"),Vc=new Map,Sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(a,l){Vc.set(a,l),s(l,[a])}for(var ad=0;ad<Sp.length;ad++){var od=Sp[ad],ld=od.toLowerCase(),cy=od[0].toUpperCase()+od.slice(1);$s(ld,"on"+cy)}$s(ly,"onAnimationEnd"),$s(uy,"onAnimationIteration"),$s(Ac,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(Ya,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pl=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function zc(a,l,f){var m=a.type||"unknown-event";a.currentTarget=f,Mb(m,l,void 0,a),a.currentTarget=null}function hy(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],x=m.event;m=m.listeners;e:{var k=void 0;if(l)for(var R=m.length-1;0<=R;R--){var H=m[R],q=H.instance,fe=H.currentTarget;if(H=H.listener,q!==k&&x.isPropagationStopped())break e;zc(x,H,fe),k=q}else for(R=0;R<m.length;R++){if(H=m[R],q=H.instance,fe=H.currentTarget,H=H.listener,q!==k&&x.isPropagationStopped())break e;zc(x,H,fe),k=q}}}if(Er)throw a=yu,Er=!1,yu=null,a}function rr(a,l){var f=l[fd];f===void 0&&(f=l[fd]=new Set);var m=a+"__bubble";f.has(m)||(ud(l,a,2,!1),f.add(m))}function kp(a,l,f){var m=0;l&&(m|=4),ud(f,a,m,l)}var El="_reactListening"+Math.random().toString(36).slice(2);function Po(a){if(!a[El]){a[El]=!0,i.forEach(function(f){f!=="selectionchange"&&(Pl.has(f)||kp(f,!1,a),kp(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[El]||(l[El]=!0,kp("selectionchange",!1,l))}}function ud(a,l,f,m){switch(jm(l)){case 1:var x=$b;break;case 4:x=jb;break;default:x=op}f=x.bind(null,l,f,a),x=void 0,!wl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),m?x!==void 0?a.addEventListener(l,f,{capture:!0,passive:x}):a.addEventListener(l,f,!0):x!==void 0?a.addEventListener(l,f,{passive:x}):a.addEventListener(l,f,!1)}function _p(a,l,f,m,x){var k=m;if(!(l&1)&&!(l&2)&&m!==null)e:for(;;){if(m===null)return;var R=m.tag;if(R===3||R===4){var H=m.stateNode.containerInfo;if(H===x||H.nodeType===8&&H.parentNode===x)break;if(R===4)for(R=m.return;R!==null;){var q=R.tag;if((q===3||q===4)&&(q=R.stateNode.containerInfo,q===x||q.nodeType===8&&q.parentNode===x))return;R=R.return}for(;H!==null;){if(R=ya(H),R===null)return;if(q=R.tag,q===5||q===6){m=k=R;continue e}H=H.parentNode}}m=m.return}Bc(function(){var fe=k,Me=_c(f),ze=[];e:{var Fe=Vc.get(a);if(Fe!==void 0){var rt=Kh,ht=a;switch(a){case"keypress":if(Su(f)===0)break e;case"keydown":case"keyup":rt=Qm;break;case"focusin":ht="focus",rt=Zi;break;case"focusout":ht="blur",rt=Zi;break;case"beforeblur":case"afterblur":rt=Zi;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Kb;break;case ly:case uy:case Ac:rt=fp;break;case Ya:rt=bp;break;case"scroll":rt=Ym;break;case"wheel":rt=Zm;break;case"copy":case"cut":case"paste":rt=pp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=ed}var yt=(l&4)!==0,Rr=!yt&&a==="scroll",ae=yt?Fe!==null?Fe+"Capture":null:Fe;yt=[];for(var K=fe,le;K!==null;){le=K;var $e=le.stateNode;if(le.tag===5&&$e!==null&&(le=$e,ae!==null&&($e=xo(K,ae),$e!=null&&yt.push(Eu(K,$e,le)))),Rr)break;K=K.return}0<yt.length&&(Fe=new rt(Fe,ht,null,f,Me),ze.push({event:Fe,listeners:yt}))}}if(!(l&7)){e:{if(Fe=a==="mouseover"||a==="pointerover",rt=a==="mouseout"||a==="pointerout",Fe&&f!==vl&&(ht=f.relatedTarget||f.fromElement)&&(ya(ht)||ht[rs]))break e;if((rt||Fe)&&(Fe=Me.window===Me?Me:(Fe=Me.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,rt?(ht=f.relatedTarget||f.toElement,rt=fe,ht=ht?ya(ht):null,ht!==null&&(Rr=kl(ht),ht!==Rr||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(rt=null,ht=fe),rt!==ht)){if(yt=hp,$e="onMouseLeave",ae="onMouseEnter",K="mouse",(a==="pointerout"||a==="pointerover")&&(yt=ed,$e="onPointerLeave",ae="onPointerEnter",K="pointer"),Rr=rt==null?Fe:oi(rt),le=ht==null?Fe:oi(ht),Fe=new yt($e,K+"leave",rt,f,Me),Fe.target=Rr,Fe.relatedTarget=le,$e=null,ya(Me)===fe&&(yt=new yt(ae,K+"enter",ht,f,Me),yt.target=le,yt.relatedTarget=Rr,$e=yt),Rr=$e,rt&&ht)t:{for(yt=rt,ae=ht,K=0,le=yt;le;le=Ru(le))K++;for(le=0,$e=ae;$e;$e=Ru($e))le++;for(;0<K-le;)yt=Ru(yt),K--;for(;0<le-K;)ae=Ru(ae),le--;for(;K--;){if(yt===ae||ae!==null&&yt===ae.alternate)break t;yt=Ru(yt),ae=Ru(ae)}yt=null}else yt=null;rt!==null&&Ar(ze,Fe,rt,yt,!1),ht!==null&&Rr!==null&&Ar(ze,Rr,ht,yt,!0)}}e:{if(Fe=fe?oi(fe):window,rt=Fe.nodeName&&Fe.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Fe.type==="file")var vt=tv;else if(td(Fe))if(Nl)vt=ee;else{vt=rv;var Pt=iv}else(rt=Fe.nodeName)&&rt.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&(vt=Cu);if(vt&&(vt=vt(a,fe))){wp(ze,vt,f,Me);break e}Pt&&Pt(a,Fe,fe),a==="focusout"&&(Pt=Fe._wrapperState)&&Pt.controlled&&Fe.type==="number"&&Xi(Fe,"number",Fe.value)}switch(Pt=fe?oi(fe):window,a){case"focusin":(td(Pt)||Pt.contentEditable==="true")&&(ja=Pt,xp=fe,ga=null);break;case"focusout":ga=xp=ja=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,Mc(ze,f,Me);break;case"selectionchange":if(xs)break;case"keydown":case"keyup":Mc(ze,f,Me)}var Rt;if(Fc)e:{switch(a){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else Bu?ry(a,f)&&(jt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(jt="onCompositionStart");jt&&(vp&&f.locale!=="ko"&&(Bu||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&Bu&&(Rt=lp()):(dr=Me,Ic="value"in dr?dr.value:dr.textContent,Bu=!0)),Pt=cd(fe,jt),0<Pt.length&&(jt=new qm(jt,a,null,f,Me),ze.push({event:jt,listeners:Pt}),Rt?jt.data=Rt:(Rt=ny(f),Rt!==null&&(jt.data=Rt)))),(Rt=ey?Tu(a,f):Jb(a,f))&&(fe=cd(fe,"onBeforeInput"),0<fe.length&&(Me=new qm("onBeforeInput","beforeinput",null,f,Me),ze.push({event:Me,listeners:fe}),Me.data=Rt))}hy(ze,l)})}function Eu(a,l,f){return{instance:a,listener:l,currentTarget:f}}function cd(a,l){for(var f=l+"Capture",m=[];a!==null;){var x=a,k=x.stateNode;x.tag===5&&k!==null&&(x=k,k=xo(a,f),k!=null&&m.unshift(Eu(a,k,x)),k=xo(a,l),k!=null&&m.push(Eu(a,k,x))),a=a.return}return m}function Ru(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Ar(a,l,f,m,x){for(var k=l._reactName,R=[];f!==null&&f!==m;){var H=f,q=H.alternate,fe=H.stateNode;if(q!==null&&q===m)break;H.tag===5&&fe!==null&&(H=fe,x?(q=xo(f,k),q!=null&&R.unshift(Eu(f,q,H))):x||(q=xo(f,k),q!=null&&R.push(Eu(f,q,H)))),f=f.return}R.length!==0&&a.push({event:l,listeners:R})}var Sn=/\r\n?/g,sv=/\u0000|\uFFFD/g;function dy(a){return(typeof a=="string"?a:""+a).replace(Sn,`
`).replace(sv,"")}function Wc(a,l,f){if(l=dy(l),dy(a)!==l&&f)throw Error(t(425))}function hd(){}var Hc=null,Rl=null;function Gc(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Eo=typeof setTimeout=="function"?setTimeout:void 0,Uc=typeof clearTimeout=="function"?clearTimeout:void 0,Lu=typeof Promise=="function"?Promise:void 0,dd=typeof queueMicrotask=="function"?queueMicrotask:typeof Lu<"u"?function(a){return Lu.resolve(null).then(a).catch(Iu)}:Eo;function Iu(a){setTimeout(function(){throw a})}function Bp(a,l){var f=l,m=0;do{var x=f.nextSibling;if(a.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(m===0){a.removeChild(x),Oi(l);return}m--}else f!=="$"&&f!=="$?"&&f!=="$!"||m++;f=x}while(f);Oi(l)}function Ro(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function fy(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return a;l--}else f==="/$"&&l++}a=a.previousSibling}return null}var Fu=Math.random().toString(36).slice(2),ma="__reactFiber$"+Fu,Lo="__reactProps$"+Fu,rs="__reactContainer$"+Fu,fd="__reactEvents$"+Fu,M="__reactListeners$"+Fu,Ou="__reactHandles$"+Fu;function ya(a){var l=a[ma];if(l)return l;for(var f=a.parentNode;f;){if(l=f[rs]||f[ma]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=fy(a);a!==null;){if(f=a[ma])return f;a=fy(a)}return l}a=f,f=a.parentNode}return null}function kn(a){return a=a[ma]||a[rs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function oi(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function pd(a){return a[Lo]||null}var Tp=[],Mu=-1;function qn(a){return{current:a}}function nr(a){0>Mu||(a.current=Tp[Mu],Tp[Mu]=null,Mu--)}function er(a,l){Mu++,Tp[Mu]=a.current,a.current=l}var Io={},_n=qn(Io),Xn=qn(!1),Vn=Io;function Du(a,l){var f=a.type.contextTypes;if(!f)return Io;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var x={},k;for(k in f)x[k]=l[k];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=x),x}function Kn(a){return a=a.childContextTypes,a!=null}function gd(){nr(Xn),nr(_n)}function py(a,l,f){if(_n.current!==Io)throw Error(t(168));er(_n,l),er(Xn,f)}function gy(a,l,f){var m=a.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return f;m=m.getChildContext();for(var x in m)if(!(x in l))throw Error(t(108,Qe(a)||"Unknown",x));return z({},f,m)}function Ss(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Io,Vn=_n.current,er(_n,a),er(Xn,Xn.current),!0}function my(a,l,f){var m=a.stateNode;if(!m)throw Error(t(169));f?(a=gy(a,l,Vn),m.__reactInternalMemoizedMergedChildContext=a,nr(Xn),nr(_n),er(_n,a)):nr(Xn),er(Xn,f)}var Xa=null,md=!1,Cp=!1;function yy(a){Xa===null?Xa=[a]:Xa.push(a)}function Ll(a){md=!0,yy(a)}function Fo(){if(!Cp&&Xa!==null){Cp=!0;var a=0,l=Ii;try{var f=Xa;for(Ii=1;a<f.length;a++){var m=f[a];do m=m(!0);while(m!==null)}Xa=null,md=!1}catch(x){throw Xa!==null&&(Xa=Xa.slice(a+1)),Im(tp,Fo),x}finally{Ii=l,Cp=!1}}return null}var Au=[],Bn=0,yd=null,bd=0,ks=[],_s=0,Il=null,ba=1,va="";function Fl(a,l){Au[Bn++]=bd,Au[Bn++]=yd,yd=a,bd=l}function by(a,l,f){ks[_s++]=ba,ks[_s++]=va,ks[_s++]=Il,Il=a;var m=ba;a=va;var x=32-Us(m)-1;m&=~(1<<x),f+=1;var k=32-Us(l)+x;if(30<k){var R=x-x%5;k=(m&(1<<R)-1).toString(32),m>>=R,x-=R,ba=1<<32-Us(l)+x|f<<x|m,va=k+a}else ba=1<<k|f<<x|m,va=a}function $c(a){a.return!==null&&(Fl(a,1),by(a,1,0))}function Ol(a){for(;a===yd;)yd=Au[--Bn],Au[Bn]=null,bd=Au[--Bn],Au[Bn]=null;for(;a===Il;)Il=ks[--_s],ks[_s]=null,va=ks[--_s],ks[_s]=null,ba=ks[--_s],ks[_s]=null}var Tn=null,ns=null,sr=!1,js=null;function wa(a,l){var f=us(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=a,l=a.deletions,l===null?(a.deletions=[f],a.flags|=16):l.push(f)}function vd(a,l){switch(a.tag){case 5:var f=a.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,Tn=a,ns=Ro(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,Tn=a,ns=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=Il!==null?{id:ba,overflow:va}:null,a.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=us(18,null,null,0),f.stateNode=l,f.return=a,a.child=f,Tn=a,ns=null,!0):!1;default:return!1}}function Ka(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Qn(a){if(sr){var l=ns;if(l){var f=l;if(!vd(a,l)){if(Ka(a))throw Error(t(418));l=Ro(f.nextSibling);var m=Tn;l&&vd(a,l)?wa(m,f):(a.flags=a.flags&-4097|2,sr=!1,Tn=a)}}else{if(Ka(a))throw Error(t(418));a.flags=a.flags&-4097|2,sr=!1,Tn=a}}}function vy(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Tn=a}function jc(a){if(a!==Tn)return!1;if(!sr)return vy(a),sr=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Gc(a.type,a.memoizedProps)),l&&(l=ns)){if(Ka(a))throw Np(),Error(t(418));for(;l;)wa(a,l),l=Ro(l.nextSibling)}if(vy(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(l===0){ns=Ro(a.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}a=a.nextSibling}ns=null}}else ns=Tn?Ro(a.stateNode.nextSibling):null;return!0}function Np(){for(var a=ns;a;)a=Ro(a.nextSibling)}function xa(){ns=Tn=null,sr=!1}function Sa(a){js===null?js=[a]:js.push(a)}var wy=V.ReactCurrentBatchConfig;function Ys(a,l){if(a&&a.defaultProps){l=z({},l),a=a.defaultProps;for(var f in a)l[f]===void 0&&(l[f]=a[f]);return l}return l}var Ml=qn(null),wd=null,Dl=null,Yr=null;function Yc(){Yr=Dl=wd=null}function xd(a){var l=Ml.current;nr(Ml),a._currentValue=l}function Bs(a,l,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),a===f)break;a=a.return}}function Oo(a,l){wd=a,Yr=Dl=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&l&&(Pn=!0),a.firstContext=null)}function zn(a){var l=a._currentValue;if(Yr!==a)if(a={context:a,memoizedValue:l,next:null},Dl===null){if(wd===null)throw Error(t(308));Dl=a,wd.dependencies={lanes:0,firstContext:a}}else Dl=Dl.next=a;return l}var ss=null;function Sd(a){ss===null?ss=[a]:ss.push(a)}function Cn(a,l,f,m){var x=l.interleaved;return x===null?(f.next=f,Sd(l)):(f.next=x.next,x.next=f),l.interleaved=f,qs(a,m)}function qs(a,l){a.lanes|=l;var f=a.alternate;for(f!==null&&(f.lanes|=l),f=a,a=a.return;a!==null;)a.childLanes|=l,f=a.alternate,f!==null&&(f.childLanes|=l),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Mo=!1;function Pp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xy(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Xs(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Do(a,l,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,Ti&2){var x=m.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),m.pending=l,qs(a,f)}return x=m.interleaved,x===null?(l.next=l,Sd(m)):(l.next=x.next,x.next=l),m.interleaved=l,qs(a,f)}function Ao(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var m=l.lanes;m&=a.pendingLanes,f|=m,l.lanes=f,Ec(a,f)}}function Ep(a,l){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var x=null,k=null;if(f=f.firstBaseUpdate,f!==null){do{var R={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};k===null?x=k=R:k=k.next=R,f=f.next}while(f!==null);k===null?x=k=l:k=k.next=l}else x=k=l;f={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:k,shared:m.shared,effects:m.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}function kd(a,l,f,m){var x=a.updateQueue;Mo=!1;var k=x.firstBaseUpdate,R=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var q=H,fe=q.next;q.next=null,R===null?k=fe:R.next=fe,R=q;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,H=Me.lastBaseUpdate,H!==R&&(H===null?Me.firstBaseUpdate=fe:H.next=fe,Me.lastBaseUpdate=q))}if(k!==null){var ze=x.baseState;R=0,Me=fe=q=null,H=k;do{var Fe=H.lane,rt=H.eventTime;if((m&Fe)===Fe){Me!==null&&(Me=Me.next={eventTime:rt,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var ht=a,yt=H;switch(Fe=l,rt=f,yt.tag){case 1:if(ht=yt.payload,typeof ht=="function"){ze=ht.call(rt,ze,Fe);break e}ze=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=yt.payload,Fe=typeof ht=="function"?ht.call(rt,ze,Fe):ht,Fe==null)break e;ze=z({},ze,Fe);break e;case 2:Mo=!0}}H.callback!==null&&H.lane!==0&&(a.flags|=64,Fe=x.effects,Fe===null?x.effects=[H]:Fe.push(H))}else rt={eventTime:rt,lane:Fe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Me===null?(fe=Me=rt,q=ze):Me=Me.next=rt,R|=Fe;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;Fe=H,H=Fe.next,Fe.next=null,x.lastBaseUpdate=Fe,x.shared.pending=null}}while(!0);if(Me===null&&(q=ze),x.baseState=q,x.firstBaseUpdate=fe,x.lastBaseUpdate=Me,l=x.shared.interleaved,l!==null){x=l;do R|=x.lane,x=x.next;while(x!==l)}else k===null&&(x.shared.lanes=0);$o|=R,a.lanes=R,a.memoizedState=ze}}function Sy(a,l,f){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var m=a[l],x=m.callback;if(x!==null){if(m.callback=null,m=f,typeof x!="function")throw Error(t(191,x));x.call(m)}}}var Vu=new r.Component().refs;function Rp(a,l,f,m){l=a.memoizedState,f=f(m,l),f=f==null?l:z({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var _d={isMounted:function(a){return(a=a._reactInternals)?kl(a)===a:!1},enqueueSetState:function(a,l,f){a=a._reactInternals;var m=Gn(),x=Yo(a),k=Xs(m,x);k.payload=l,f!=null&&(k.callback=f),l=Do(a,k,x),l!==null&&(Zs(l,a,x,m),Ao(l,a,x))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var m=Gn(),x=Yo(a),k=Xs(m,x);k.tag=1,k.payload=l,f!=null&&(k.callback=f),l=Do(a,k,x),l!==null&&(Zs(l,a,x,m),Ao(l,a,x))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=Gn(),m=Yo(a),x=Xs(f,m);x.tag=2,l!=null&&(x.callback=l),l=Do(a,x,m),l!==null&&(Zs(l,a,m,f),Ao(l,a,m))}};function Bd(a,l,f,m,x,k,R){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,k,R):l.prototype&&l.prototype.isPureReactComponent?!it(f,m)||!it(x,k):!0}function Lp(a,l,f){var m=!1,x=Io,k=l.contextType;return typeof k=="object"&&k!==null?k=zn(k):(x=Kn(l)?Vn:_n.current,m=l.contextTypes,k=(m=m!=null)?Du(a,x):Io),l=new l(f,k),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=_d,a.stateNode=l,l._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=x,a.__reactInternalMemoizedMaskedChildContext=k),l}function ky(a,l,f,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,m),l.state!==a&&_d.enqueueReplaceState(l,l.state,null)}function Ip(a,l,f,m){var x=a.stateNode;x.props=f,x.state=a.memoizedState,x.refs=Vu,Pp(a);var k=l.contextType;typeof k=="object"&&k!==null?x.context=zn(k):(k=Kn(l)?Vn:_n.current,x.context=Du(a,k)),x.state=a.memoizedState,k=l.getDerivedStateFromProps,typeof k=="function"&&(Rp(a,l,k,f),x.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&_d.enqueueReplaceState(x,x.state,null),kd(a,f,x,m),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308)}function qc(a,l,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var m=f.stateNode}if(!m)throw Error(t(147,a));var x=m,k=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===k?l.ref:(l=function(R){var H=x.refs;H===Vu&&(H=x.refs={}),R===null?delete H[k]:H[k]=R},l._stringRef=k,l)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function Xc(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function Td(a){var l=a._init;return l(a._payload)}function _y(a){function l(ae,K){if(a){var le=ae.deletions;le===null?(ae.deletions=[K],ae.flags|=16):le.push(K)}}function f(ae,K){if(!a)return null;for(;K!==null;)l(ae,K),K=K.sibling;return null}function m(ae,K){for(ae=new Map;K!==null;)K.key!==null?ae.set(K.key,K):ae.set(K.index,K),K=K.sibling;return ae}function x(ae,K){return ae=Ko(ae,K),ae.index=0,ae.sibling=null,ae}function k(ae,K,le){return ae.index=le,a?(le=ae.alternate,le!==null?(le=le.index,le<K?(ae.flags|=2,K):le):(ae.flags|=2,K)):(ae.flags|=1048576,K)}function R(ae){return a&&ae.alternate===null&&(ae.flags|=2),ae}function H(ae,K,le,$e){return K===null||K.tag!==6?(K=mg(le,ae.mode,$e),K.return=ae,K):(K=x(K,le),K.return=ae,K)}function q(ae,K,le,$e){var vt=le.type;return vt===W?Me(ae,K,le.props.children,$e,le.key):K!==null&&(K.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===te&&Td(vt)===K.type)?($e=x(K,le.props),$e.ref=qc(ae,K,le),$e.return=ae,$e):($e=tf(le.type,le.key,le.props,null,ae.mode,$e),$e.ref=qc(ae,K,le),$e.return=ae,$e)}function fe(ae,K,le,$e){return K===null||K.tag!==4||K.stateNode.containerInfo!==le.containerInfo||K.stateNode.implementation!==le.implementation?(K=yg(le,ae.mode,$e),K.return=ae,K):(K=x(K,le.children||[]),K.return=ae,K)}function Me(ae,K,le,$e,vt){return K===null||K.tag!==7?(K=Ul(le,ae.mode,$e,vt),K.return=ae,K):(K=x(K,le),K.return=ae,K)}function ze(ae,K,le){if(typeof K=="string"&&K!==""||typeof K=="number")return K=mg(""+K,ae.mode,le),K.return=ae,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case P:return le=tf(K.type,K.key,K.props,null,ae.mode,le),le.ref=qc(ae,null,K),le.return=ae,le;case G:return K=yg(K,ae.mode,le),K.return=ae,K;case te:var $e=K._init;return ze(ae,$e(K._payload),le)}if(zt(K)||Se(K))return K=Ul(K,ae.mode,le,null),K.return=ae,K;Xc(ae,K)}return null}function Fe(ae,K,le,$e){var vt=K!==null?K.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return vt!==null?null:H(ae,K,""+le,$e);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case P:return le.key===vt?q(ae,K,le,$e):null;case G:return le.key===vt?fe(ae,K,le,$e):null;case te:return vt=le._init,Fe(ae,K,vt(le._payload),$e)}if(zt(le)||Se(le))return vt!==null?null:Me(ae,K,le,$e,null);Xc(ae,le)}return null}function rt(ae,K,le,$e,vt){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return ae=ae.get(le)||null,H(K,ae,""+$e,vt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case P:return ae=ae.get($e.key===null?le:$e.key)||null,q(K,ae,$e,vt);case G:return ae=ae.get($e.key===null?le:$e.key)||null,fe(K,ae,$e,vt);case te:var Pt=$e._init;return rt(ae,K,le,Pt($e._payload),vt)}if(zt($e)||Se($e))return ae=ae.get(le)||null,Me(K,ae,$e,vt,null);Xc(K,$e)}return null}function ht(ae,K,le,$e){for(var vt=null,Pt=null,Rt=K,jt=K=0,ln=null;Rt!==null&&jt<le.length;jt++){Rt.index>jt?(ln=Rt,Rt=null):ln=Rt.sibling;var Ri=Fe(ae,Rt,le[jt],$e);if(Ri===null){Rt===null&&(Rt=ln);break}a&&Rt&&Ri.alternate===null&&l(ae,Rt),K=k(Ri,K,jt),Pt===null?vt=Ri:Pt.sibling=Ri,Pt=Ri,Rt=ln}if(jt===le.length)return f(ae,Rt),sr&&Fl(ae,jt),vt;if(Rt===null){for(;jt<le.length;jt++)Rt=ze(ae,le[jt],$e),Rt!==null&&(K=k(Rt,K,jt),Pt===null?vt=Rt:Pt.sibling=Rt,Pt=Rt);return sr&&Fl(ae,jt),vt}for(Rt=m(ae,Rt);jt<le.length;jt++)ln=rt(Rt,ae,jt,le[jt],$e),ln!==null&&(a&&ln.alternate!==null&&Rt.delete(ln.key===null?jt:ln.key),K=k(ln,K,jt),Pt===null?vt=ln:Pt.sibling=ln,Pt=ln);return a&&Rt.forEach(function(Qo){return l(ae,Qo)}),sr&&Fl(ae,jt),vt}function yt(ae,K,le,$e){var vt=Se(le);if(typeof vt!="function")throw Error(t(150));if(le=vt.call(le),le==null)throw Error(t(151));for(var Pt=vt=null,Rt=K,jt=K=0,ln=null,Ri=le.next();Rt!==null&&!Ri.done;jt++,Ri=le.next()){Rt.index>jt?(ln=Rt,Rt=null):ln=Rt.sibling;var Qo=Fe(ae,Rt,Ri.value,$e);if(Qo===null){Rt===null&&(Rt=ln);break}a&&Rt&&Qo.alternate===null&&l(ae,Rt),K=k(Qo,K,jt),Pt===null?vt=Qo:Pt.sibling=Qo,Pt=Qo,Rt=ln}if(Ri.done)return f(ae,Rt),sr&&Fl(ae,jt),vt;if(Rt===null){for(;!Ri.done;jt++,Ri=le.next())Ri=ze(ae,Ri.value,$e),Ri!==null&&(K=k(Ri,K,jt),Pt===null?vt=Ri:Pt.sibling=Ri,Pt=Ri);return sr&&Fl(ae,jt),vt}for(Rt=m(ae,Rt);!Ri.done;jt++,Ri=le.next())Ri=rt(Rt,ae,jt,Ri.value,$e),Ri!==null&&(a&&Ri.alternate!==null&&Rt.delete(Ri.key===null?jt:Ri.key),K=k(Ri,K,jt),Pt===null?vt=Ri:Pt.sibling=Ri,Pt=Ri);return a&&Rt.forEach(function(Bv){return l(ae,Bv)}),sr&&Fl(ae,jt),vt}function Rr(ae,K,le,$e){if(typeof le=="object"&&le!==null&&le.type===W&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case P:e:{for(var vt=le.key,Pt=K;Pt!==null;){if(Pt.key===vt){if(vt=le.type,vt===W){if(Pt.tag===7){f(ae,Pt.sibling),K=x(Pt,le.props.children),K.return=ae,ae=K;break e}}else if(Pt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===te&&Td(vt)===Pt.type){f(ae,Pt.sibling),K=x(Pt,le.props),K.ref=qc(ae,Pt,le),K.return=ae,ae=K;break e}f(ae,Pt);break}else l(ae,Pt);Pt=Pt.sibling}le.type===W?(K=Ul(le.props.children,ae.mode,$e,le.key),K.return=ae,ae=K):($e=tf(le.type,le.key,le.props,null,ae.mode,$e),$e.ref=qc(ae,K,le),$e.return=ae,ae=$e)}return R(ae);case G:e:{for(Pt=le.key;K!==null;){if(K.key===Pt)if(K.tag===4&&K.stateNode.containerInfo===le.containerInfo&&K.stateNode.implementation===le.implementation){f(ae,K.sibling),K=x(K,le.children||[]),K.return=ae,ae=K;break e}else{f(ae,K);break}else l(ae,K);K=K.sibling}K=yg(le,ae.mode,$e),K.return=ae,ae=K}return R(ae);case te:return Pt=le._init,Rr(ae,K,Pt(le._payload),$e)}if(zt(le))return ht(ae,K,le,$e);if(Se(le))return yt(ae,K,le,$e);Xc(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,K!==null&&K.tag===6?(f(ae,K.sibling),K=x(K,le),K.return=ae,ae=K):(f(ae,K),K=mg(le,ae.mode,$e),K.return=ae,ae=K),R(ae)):f(ae,K)}return Rr}var Vo=_y(!0),Fp=_y(!1),zu={},Ks=qn(zu),zo=qn(zu),Kc=qn(zu);function Wo(a){if(a===zu)throw Error(t(174));return a}function Cd(a,l){switch(er(Kc,l),er(zo,a),er(Ks,zu),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Xe(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Xe(l,a)}nr(Ks),er(Ks,l)}function Wu(){nr(Ks),nr(zo),nr(Kc)}function Op(a){Wo(Kc.current);var l=Wo(Ks.current),f=Xe(l,a.type);l!==f&&(er(zo,a),er(Ks,f))}function Mp(a){zo.current===a&&(nr(Ks),nr(zo))}var ar=qn(0);function Qc(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Jc=[];function Dp(){for(var a=0;a<Jc.length;a++)Jc[a]._workInProgressVersionPrimary=null;Jc.length=0}var Hu=V.ReactCurrentDispatcher,li=V.ReactCurrentBatchConfig,Al=0,pr=null,gr=null,qr=null,Nd=!1,Zc=!1,Nn=0,av=0;function Xr(){throw Error(t(321))}function eh(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!ce(a[f],l[f]))return!1;return!0}function Pd(a,l,f,m,x,k){if(Al=k,pr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Hu.current=a===null||a.memoizedState===null?ih:lv,a=f(m,x),Zc){k=0;do{if(Zc=!1,Nn=0,25<=k)throw Error(t(301));k+=1,qr=gr=null,l.updateQueue=null,Hu.current=Ry,a=f(m,x)}while(Zc)}if(Hu.current=Za,l=gr!==null&&gr.next!==null,Al=0,qr=gr=pr=null,Nd=!1,l)throw Error(t(300));return a}function Ed(){var a=Nn!==0;return Nn=0,a}function wr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?pr.memoizedState=qr=a:qr=qr.next=a,qr}function Kr(){if(gr===null){var a=pr.alternate;a=a!==null?a.memoizedState:null}else a=gr.next;var l=qr===null?pr.memoizedState:qr.next;if(l!==null)qr=l,gr=a;else{if(a===null)throw Error(t(310));gr=a,a={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},qr===null?pr.memoizedState=qr=a:qr=qr.next=a}return qr}function Vl(a,l){return typeof l=="function"?l(a):l}function Rd(a){var l=Kr(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var m=gr,x=m.baseQueue,k=f.pending;if(k!==null){if(x!==null){var R=x.next;x.next=k.next,k.next=R}m.baseQueue=x=k,f.pending=null}if(x!==null){k=x.next,m=m.baseState;var H=R=null,q=null,fe=k;do{var Me=fe.lane;if((Al&Me)===Me)q!==null&&(q=q.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),m=fe.hasEagerState?fe.eagerState:a(m,fe.action);else{var ze={lane:Me,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};q===null?(H=q=ze,R=m):q=q.next=ze,pr.lanes|=Me,$o|=Me}fe=fe.next}while(fe!==null&&fe!==k);q===null?R=m:q.next=H,ce(m,l.memoizedState)||(Pn=!0),l.memoizedState=m,l.baseState=R,l.baseQueue=q,f.lastRenderedState=m}if(a=f.interleaved,a!==null){x=a;do k=x.lane,pr.lanes|=k,$o|=k,x=x.next;while(x!==a)}else x===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function Gu(a){var l=Kr(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var m=f.dispatch,x=f.pending,k=l.memoizedState;if(x!==null){f.pending=null;var R=x=x.next;do k=a(k,R.action),R=R.next;while(R!==x);ce(k,l.memoizedState)||(Pn=!0),l.memoizedState=k,l.baseQueue===null&&(l.baseState=k),f.lastRenderedState=k}return[k,m]}function Ap(){}function Ld(a,l){var f=pr,m=Kr(),x=l(),k=!ce(m.memoizedState,x);if(k&&(m.memoizedState=x,Pn=!0),m=m.queue,Wp(Fd.bind(null,f,m,a),[a]),m.getSnapshot!==l||k||qr!==null&&qr.memoizedState.tag&1){if(f.flags|=2048,Uu(9,Id.bind(null,f,m,x,l),void 0,null),on===null)throw Error(t(349));Al&30||Vp(f,l,x)}return x}function Vp(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=pr.updateQueue,l===null?(l={lastEffect:null,stores:null},pr.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function Id(a,l,f,m){l.value=f,l.getSnapshot=m,Qa(l)&&By(a)}function Fd(a,l,f){return f(function(){Qa(l)&&By(a)})}function Qa(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!ce(a,f)}catch{return!0}}function By(a){var l=qs(a,1);l!==null&&Zs(l,a,1,-1)}function Ja(a){var l=wr();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:a},l.queue=a,a=a.dispatch=Py.bind(null,pr,a),[l.memoizedState,a]}function Uu(a,l,f,m){return a={tag:a,create:l,destroy:f,deps:m,next:null},l=pr.updateQueue,l===null?(l={lastEffect:null,stores:null},pr.updateQueue=l,l.lastEffect=a.next=a):(f=l.lastEffect,f===null?l.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,l.lastEffect=a)),a}function zp(){return Kr().memoizedState}function $u(a,l,f,m){var x=wr();pr.flags|=a,x.memoizedState=Uu(1|l,f,void 0,m===void 0?null:m)}function Od(a,l,f,m){var x=Kr();m=m===void 0?null:m;var k=void 0;if(gr!==null){var R=gr.memoizedState;if(k=R.destroy,m!==null&&eh(m,R.deps)){x.memoizedState=Uu(l,f,k,m);return}}pr.flags|=a,x.memoizedState=Uu(1|l,f,k,m)}function Ty(a,l){return $u(8390656,8,a,l)}function Wp(a,l){return Od(2048,8,a,l)}function Hp(a,l){return Od(4,2,a,l)}function Gp(a,l){return Od(4,4,a,l)}function Cy(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Up(a,l,f){return f=f!=null?f.concat([a]):null,Od(4,4,Cy.bind(null,l,a),f)}function Md(){}function Wn(a,l){var f=Kr();l=l===void 0?null:l;var m=f.memoizedState;return m!==null&&l!==null&&eh(l,m[1])?m[0]:(f.memoizedState=[a,l],a)}function Qs(a,l){var f=Kr();l=l===void 0?null:l;var m=f.memoizedState;return m!==null&&l!==null&&eh(l,m[1])?m[0]:(a=a(),f.memoizedState=[a,l],a)}function Ny(a,l,f){return Al&21?(ce(f,l)||(f=rp(),pr.lanes|=f,$o|=f,a.baseState=!0),l):(a.baseState&&(a.baseState=!1,Pn=!0),a.memoizedState=f)}function ov(a,l){var f=Ii;Ii=f!==0&&4>f?f:4,a(!0);var m=li.transition;li.transition={};try{a(!1),l()}finally{Ii=f,li.transition=m}}function th(){return Kr().memoizedState}function ju(a,l,f){var m=Yo(a);if(f={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null},$p(a))Ey(l,f);else if(f=Cn(a,l,f,m),f!==null){var x=Gn();Zs(f,a,m,x),jp(f,l,m)}}function Py(a,l,f){var m=Yo(a),x={lane:m,action:f,hasEagerState:!1,eagerState:null,next:null};if($p(a))Ey(l,x);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=l.lastRenderedReducer,k!==null))try{var R=l.lastRenderedState,H=k(R,f);if(x.hasEagerState=!0,x.eagerState=H,ce(H,R)){var q=l.interleaved;q===null?(x.next=x,Sd(l)):(x.next=q.next,q.next=x),l.interleaved=x;return}}catch{}finally{}f=Cn(a,l,x,m),f!==null&&(x=Gn(),Zs(f,a,m,x),jp(f,l,m))}}function $p(a){var l=a.alternate;return a===pr||l!==null&&l===pr}function Ey(a,l){Zc=Nd=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function jp(a,l,f){if(f&4194240){var m=l.lanes;m&=a.pendingLanes,f|=m,l.lanes=f,Ec(a,f)}}var Za={readContext:zn,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},ih={readContext:zn,useCallback:function(a,l){return wr().memoizedState=[a,l===void 0?null:l],a},useContext:zn,useEffect:Ty,useImperativeHandle:function(a,l,f){return f=f!=null?f.concat([a]):null,$u(4194308,4,Cy.bind(null,l,a),f)},useLayoutEffect:function(a,l){return $u(4194308,4,a,l)},useInsertionEffect:function(a,l){return $u(4,2,a,l)},useMemo:function(a,l){var f=wr();return l=l===void 0?null:l,a=a(),f.memoizedState=[a,l],a},useReducer:function(a,l,f){var m=wr();return l=f!==void 0?f(l):l,m.memoizedState=m.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},m.queue=a,a=a.dispatch=ju.bind(null,pr,a),[m.memoizedState,a]},useRef:function(a){var l=wr();return a={current:a},l.memoizedState=a},useState:Ja,useDebugValue:Md,useDeferredValue:function(a){return wr().memoizedState=a},useTransition:function(){var a=Ja(!1),l=a[0];return a=ov.bind(null,a[1]),wr().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,f){var m=pr,x=wr();if(sr){if(f===void 0)throw Error(t(407));f=f()}else{if(f=l(),on===null)throw Error(t(349));Al&30||Vp(m,l,f)}x.memoizedState=f;var k={value:f,getSnapshot:l};return x.queue=k,Ty(Fd.bind(null,m,k,a),[a]),m.flags|=2048,Uu(9,Id.bind(null,m,k,f,l),void 0,null),f},useId:function(){var a=wr(),l=on.identifierPrefix;if(sr){var f=va,m=ba;f=(m&~(1<<32-Us(m)-1)).toString(32)+f,l=":"+l+"R"+f,f=Nn++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=av++,l=":"+l+"r"+f.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},lv={readContext:zn,useCallback:Wn,useContext:zn,useEffect:Wp,useImperativeHandle:Up,useInsertionEffect:Hp,useLayoutEffect:Gp,useMemo:Qs,useReducer:Rd,useRef:zp,useState:function(){return Rd(Vl)},useDebugValue:Md,useDeferredValue:function(a){var l=Kr();return Ny(l,gr.memoizedState,a)},useTransition:function(){var a=Rd(Vl)[0],l=Kr().memoizedState;return[a,l]},useMutableSource:Ap,useSyncExternalStore:Ld,useId:th,unstable_isNewReconciler:!1},Ry={readContext:zn,useCallback:Wn,useContext:zn,useEffect:Wp,useImperativeHandle:Up,useInsertionEffect:Hp,useLayoutEffect:Gp,useMemo:Qs,useReducer:Gu,useRef:zp,useState:function(){return Gu(Vl)},useDebugValue:Md,useDeferredValue:function(a){var l=Kr();return gr===null?l.memoizedState=a:Ny(l,gr.memoizedState,a)},useTransition:function(){var a=Gu(Vl)[0],l=Kr().memoizedState;return[a,l]},useMutableSource:Ap,useSyncExternalStore:Ld,useId:th,unstable_isNewReconciler:!1};function zl(a,l){try{var f="",m=l;do f+=Ue(m),m=m.return;while(m);var x=f}catch(k){x=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:l,stack:x,digest:null}}function Yu(a,l,f){return{value:a,source:null,stack:f??null,digest:l??null}}function Dd(a,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var Ad=typeof WeakMap=="function"?WeakMap:Map;function Vd(a,l,f){f=Xs(-1,f),f.tag=3,f.payload={element:null};var m=l.value;return f.callback=function(){Xd||(Xd=!0,og=m),Dd(a,l)},f}function rh(a,l,f){f=Xs(-1,f),f.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var x=l.value;f.payload=function(){return m(x)},f.callback=function(){Dd(a,l)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(f.callback=function(){Dd(a,l),typeof m!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})}),f}function Ly(a,l,f){var m=a.pingCache;if(m===null){m=a.pingCache=new Ad;var x=new Set;m.set(l,x)}else x=m.get(l),x===void 0&&(x=new Set,m.set(l,x));x.has(f)||(x.add(f),a=mv.bind(null,a,l,f),l.then(a,a))}function Yp(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function nh(a,l,f,m,x){return a.mode&1?(a.flags|=65536,a.lanes=x,a):(a===l?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=Xs(-1,1),l.tag=2,Do(f,l,1))),f.lanes|=1),a)}var Iy=V.ReactCurrentOwner,Pn=!1;function Hn(a,l,f,m){l.child=a===null?Fp(l,null,f,m):Vo(l,a.child,f,m)}function qp(a,l,f,m,x){f=f.render;var k=l.ref;return Oo(l,x),m=Pd(a,l,f,m,k,x),f=Ed(),a!==null&&!Pn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~x,Ba(a,l,x)):(sr&&f&&$c(l),l.flags|=1,Hn(a,l,m,x),l.child)}function ka(a,l,f,m,x){if(a===null){var k=f.type;return typeof k=="function"&&!gg(k)&&k.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=k,Xp(a,l,k,m,x)):(a=tf(f.type,null,m,l,l.mode,x),a.ref=l.ref,a.return=l,l.child=a)}if(k=a.child,!(a.lanes&x)){var R=k.memoizedProps;if(f=f.compare,f=f!==null?f:it,f(R,m)&&a.ref===l.ref)return Ba(a,l,x)}return l.flags|=1,a=Ko(k,m),a.ref=l.ref,a.return=l,l.child=a}function Xp(a,l,f,m,x){if(a!==null){var k=a.memoizedProps;if(it(k,m)&&a.ref===l.ref)if(Pn=!1,l.pendingProps=m=k,(a.lanes&x)!==0)a.flags&131072&&(Pn=!0);else return l.lanes=a.lanes,Ba(a,l,x)}return zd(a,l,f,m,x)}function Kp(a,l,f){var m=l.pendingProps,x=m.children,k=a!==null?a.memoizedState:null;if(m.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(Ju,ls),ls|=f;else{if(!(f&1073741824))return a=k!==null?k.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,er(Ju,ls),ls|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=k!==null?k.baseLanes:f,er(Ju,ls),ls|=m}else k!==null?(m=k.baseLanes|f,l.memoizedState=null):m=f,er(Ju,ls),ls|=m;return Hn(a,l,x,f),l.child}function Fy(a,l){var f=l.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function zd(a,l,f,m,x){var k=Kn(f)?Vn:_n.current;return k=Du(l,k),Oo(l,x),f=Pd(a,l,f,m,k,x),m=Ed(),a!==null&&!Pn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~x,Ba(a,l,x)):(sr&&m&&$c(l),l.flags|=1,Hn(a,l,f,x),l.child)}function Oy(a,l,f,m,x){if(Kn(f)){var k=!0;Ss(l)}else k=!1;if(Oo(l,x),l.stateNode===null)qu(a,l),Lp(l,f,m),Ip(l,f,m,x),m=!0;else if(a===null){var R=l.stateNode,H=l.memoizedProps;R.props=H;var q=R.context,fe=f.contextType;typeof fe=="object"&&fe!==null?fe=zn(fe):(fe=Kn(f)?Vn:_n.current,fe=Du(l,fe));var Me=f.getDerivedStateFromProps,ze=typeof Me=="function"||typeof R.getSnapshotBeforeUpdate=="function";ze||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==m||q!==fe)&&ky(l,R,m,fe),Mo=!1;var Fe=l.memoizedState;R.state=Fe,kd(l,m,R,x),q=l.memoizedState,H!==m||Fe!==q||Xn.current||Mo?(typeof Me=="function"&&(Rp(l,f,Me,m),q=l.memoizedState),(H=Mo||Bd(l,f,H,m,Fe,q,fe))?(ze||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(l.flags|=4194308)):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=q),R.props=m,R.state=q,R.context=fe,m=H):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{R=l.stateNode,xy(a,l),H=l.memoizedProps,fe=l.type===l.elementType?H:Ys(l.type,H),R.props=fe,ze=l.pendingProps,Fe=R.context,q=f.contextType,typeof q=="object"&&q!==null?q=zn(q):(q=Kn(f)?Vn:_n.current,q=Du(l,q));var rt=f.getDerivedStateFromProps;(Me=typeof rt=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==ze||Fe!==q)&&ky(l,R,m,q),Mo=!1,Fe=l.memoizedState,R.state=Fe,kd(l,m,R,x);var ht=l.memoizedState;H!==ze||Fe!==ht||Xn.current||Mo?(typeof rt=="function"&&(Rp(l,f,rt,m),ht=l.memoizedState),(fe=Mo||Bd(l,f,fe,m,Fe,ht,q)||!1)?(Me||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(m,ht,q),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(m,ht,q)),typeof R.componentDidUpdate=="function"&&(l.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof R.componentDidUpdate!="function"||H===a.memoizedProps&&Fe===a.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&Fe===a.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ht),R.props=m,R.state=ht,R.context=q,m=fe):(typeof R.componentDidUpdate!="function"||H===a.memoizedProps&&Fe===a.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&Fe===a.memoizedState||(l.flags|=1024),m=!1)}return Qp(a,l,f,m,k,x)}function Qp(a,l,f,m,x,k){Fy(a,l);var R=(l.flags&128)!==0;if(!m&&!R)return x&&my(l,f,!1),Ba(a,l,k);m=l.stateNode,Iy.current=l;var H=R&&typeof f.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,a!==null&&R?(l.child=Vo(l,a.child,null,k),l.child=Vo(l,null,H,k)):Hn(a,l,H,k),l.memoizedState=m.state,x&&my(l,f,!0),l.child}function _a(a){var l=a.stateNode;l.pendingContext?py(a,l.pendingContext,l.pendingContext!==l.context):l.context&&py(a,l.context,!1),Cd(a,l.containerInfo)}function Wd(a,l,f,m,x){return xa(),Sa(x),l.flags|=256,Hn(a,l,f,m),l.child}var sh={dehydrated:null,treeContext:null,retryLane:0};function ah(a){return{baseLanes:a,cachePool:null,transitions:null}}function oh(a,l,f){var m=l.pendingProps,x=ar.current,k=!1,R=(l.flags&128)!==0,H;if((H=R)||(H=a!==null&&a.memoizedState===null?!1:(x&2)!==0),H?(k=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(x|=1),er(ar,x&1),a===null)return Qn(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(l.mode&1?a.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(R=m.children,a=m.fallback,k?(m=l.mode,k=l.child,R={mode:"hidden",children:R},!(m&1)&&k!==null?(k.childLanes=0,k.pendingProps=R):k=rf(R,m,0,null),a=Ul(a,m,f,null),k.return=l,a.return=l,k.sibling=a,l.child=k,l.child.memoizedState=ah(f),l.memoizedState=sh,a):Ho(l,R));if(x=a.memoizedState,x!==null&&(H=x.dehydrated,H!==null))return Hd(a,l,R,m,H,x,f);if(k){k=m.fallback,R=l.mode,x=a.child,H=x.sibling;var q={mode:"hidden",children:m.children};return!(R&1)&&l.child!==x?(m=l.child,m.childLanes=0,m.pendingProps=q,l.deletions=null):(m=Ko(x,q),m.subtreeFlags=x.subtreeFlags&14680064),H!==null?k=Ko(H,k):(k=Ul(k,R,f,null),k.flags|=2),k.return=l,m.return=l,m.sibling=k,l.child=m,m=k,k=l.child,R=a.child.memoizedState,R=R===null?ah(f):{baseLanes:R.baseLanes|f,cachePool:null,transitions:R.transitions},k.memoizedState=R,k.childLanes=a.childLanes&~f,l.memoizedState=sh,m}return k=a.child,a=k.sibling,m=Ko(k,{mode:"visible",children:m.children}),!(l.mode&1)&&(m.lanes=f),m.return=l,m.sibling=null,a!==null&&(f=l.deletions,f===null?(l.deletions=[a],l.flags|=16):f.push(a)),l.child=m,l.memoizedState=null,m}function Ho(a,l){return l=rf({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Nt(a,l,f,m){return m!==null&&Sa(m),Vo(l,a.child,null,f),a=Ho(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Hd(a,l,f,m,x,k,R){if(f)return l.flags&256?(l.flags&=-257,m=Yu(Error(t(422))),Nt(a,l,R,m)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(k=m.fallback,x=l.mode,m=rf({mode:"visible",children:m.children},x,0,null),k=Ul(k,x,R,null),k.flags|=2,m.return=l,k.return=l,m.sibling=k,l.child=m,l.mode&1&&Vo(l,a.child,null,R),l.child.memoizedState=ah(R),l.memoizedState=sh,k);if(!(l.mode&1))return Nt(a,l,R,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var H=m.dgst;return m=H,k=Error(t(419)),m=Yu(k,m,void 0),Nt(a,l,R,m)}if(H=(R&a.childLanes)!==0,Pn||H){if(m=on,m!==null){switch(R&-R){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=x&(m.suspendedLanes|R)?0:x,x!==0&&x!==k.retryLane&&(k.retryLane=x,qs(a,x),Zs(m,a,x,-1))}return fg(),m=Yu(Error(t(421))),Nt(a,l,R,m)}return x.data==="$?"?(l.flags|=128,l.child=a.child,l=yv.bind(null,a),x._reactRetry=l,null):(a=k.treeContext,ns=Ro(x.nextSibling),Tn=l,sr=!0,js=null,a!==null&&(ks[_s++]=ba,ks[_s++]=va,ks[_s++]=Il,ba=a.id,va=a.overflow,Il=l),l=Ho(l,m.children),l.flags|=4096,l)}function Gd(a,l,f){a.lanes|=l;var m=a.alternate;m!==null&&(m.lanes|=l),Bs(a.return,l,f)}function eo(a,l,f,m,x){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:x}:(k.isBackwards=l,k.rendering=null,k.renderingStartTime=0,k.last=m,k.tail=f,k.tailMode=x)}function My(a,l,f){var m=l.pendingProps,x=m.revealOrder,k=m.tail;if(Hn(a,l,m.children,f),m=ar.current,m&2)m=m&1|2,l.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Gd(a,f,l);else if(a.tag===19)Gd(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(er(ar,m),!(l.mode&1))l.memoizedState=null;else switch(x){case"forwards":for(f=l.child,x=null;f!==null;)a=f.alternate,a!==null&&Qc(a)===null&&(x=f),f=f.sibling;f=x,f===null?(x=l.child,l.child=null):(x=f.sibling,f.sibling=null),eo(l,!1,x,f,k);break;case"backwards":for(f=null,x=l.child,l.child=null;x!==null;){if(a=x.alternate,a!==null&&Qc(a)===null){l.child=x;break}a=x.sibling,x.sibling=f,f=x,x=a}eo(l,!0,f,null,k);break;case"together":eo(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function qu(a,l){!(l.mode&1)&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ba(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),$o|=l.lanes,!(f&l.childLanes))return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,f=Ko(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=Ko(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function En(a,l,f){switch(l.tag){case 3:_a(l),xa();break;case 5:Op(l);break;case 1:Kn(l.type)&&Ss(l);break;case 4:Cd(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,x=l.memoizedProps.value;er(Ml,m._currentValue),m._currentValue=x;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(er(ar,ar.current&1),l.flags|=128,null):f&l.child.childLanes?oh(a,l,f):(er(ar,ar.current&1),a=Ba(a,l,f),a!==null?a.sibling:null);er(ar,ar.current&1);break;case 19:if(m=(f&l.childLanes)!==0,a.flags&128){if(m)return My(a,l,f);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),er(ar,ar.current),m)break;return null;case 22:case 23:return l.lanes=0,Kp(a,l,f)}return Ba(a,l,f)}var Dy,Jp,Zp,Ay;Dy=function(a,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Jp=function(){},Zp=function(a,l,f,m){var x=a.memoizedProps;if(x!==m){a=l.stateNode,Wo(Ks.current);var k=null;switch(f){case"input":x=At(a,x),m=At(a,m),k=[];break;case"select":x=z({},x,{value:void 0}),m=z({},m,{value:void 0}),k=[];break;case"textarea":x=Li(a,x),m=Li(a,m),k=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=hd)}bl(f,m);var R;f=null;for(fe in x)if(!m.hasOwnProperty(fe)&&x.hasOwnProperty(fe)&&x[fe]!=null)if(fe==="style"){var H=x[fe];for(R in H)H.hasOwnProperty(R)&&(f||(f={}),f[R]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(n.hasOwnProperty(fe)?k||(k=[]):(k=k||[]).push(fe,null));for(fe in m){var q=m[fe];if(H=x!=null?x[fe]:void 0,m.hasOwnProperty(fe)&&q!==H&&(q!=null||H!=null))if(fe==="style")if(H){for(R in H)!H.hasOwnProperty(R)||q&&q.hasOwnProperty(R)||(f||(f={}),f[R]="");for(R in q)q.hasOwnProperty(R)&&H[R]!==q[R]&&(f||(f={}),f[R]=q[R])}else f||(k||(k=[]),k.push(fe,f)),f=q;else fe==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,H=H?H.__html:void 0,q!=null&&H!==q&&(k=k||[]).push(fe,q)):fe==="children"?typeof q!="string"&&typeof q!="number"||(k=k||[]).push(fe,""+q):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(n.hasOwnProperty(fe)?(q!=null&&fe==="onScroll"&&rr("scroll",a),k||H===q||(k=[])):(k=k||[]).push(fe,q))}f&&(k=k||[]).push("style",f);var fe=k;(l.updateQueue=fe)&&(l.flags|=4)}},Ay=function(a,l,f,m){f!==m&&(l.flags|=4)};function Xu(a,l){if(!sr)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Rn(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(l)for(var x=a.child;x!==null;)f|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)f|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=m,a.childLanes=f,l}function uv(a,l,f){var m=l.pendingProps;switch(Ol(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(l),null;case 1:return Kn(l.type)&&gd(),Rn(l),null;case 3:return m=l.stateNode,Wu(),nr(Xn),nr(_n),Dp(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(jc(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,js!==null&&(cg(js),js=null))),Jp(a,l),Rn(l),null;case 5:Mp(l);var x=Wo(Kc.current);if(f=l.type,a!==null&&l.stateNode!=null)Zp(a,l,f,m,x),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(t(166));return Rn(l),null}if(a=Wo(Ks.current),jc(l)){m=l.stateNode,f=l.type;var k=l.memoizedProps;switch(m[ma]=l,m[Lo]=k,a=(l.mode&1)!==0,f){case"dialog":rr("cancel",m),rr("close",m);break;case"iframe":case"object":case"embed":rr("load",m);break;case"video":case"audio":for(x=0;x<qa.length;x++)rr(qa[x],m);break;case"source":rr("error",m);break;case"img":case"image":case"link":rr("error",m),rr("load",m);break;case"details":rr("toggle",m);break;case"input":Bi(m,k),rr("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!k.multiple},rr("invalid",m);break;case"textarea":Qi(m,k),rr("invalid",m)}bl(f,k),x=null;for(var R in k)if(k.hasOwnProperty(R)){var H=k[R];R==="children"?typeof H=="string"?m.textContent!==H&&(k.suppressHydrationWarning!==!0&&Wc(m.textContent,H,a),x=["children",H]):typeof H=="number"&&m.textContent!==""+H&&(k.suppressHydrationWarning!==!0&&Wc(m.textContent,H,a),x=["children",""+H]):n.hasOwnProperty(R)&&H!=null&&R==="onScroll"&&rr("scroll",m)}switch(f){case"input":pt(m),Ki(m,k,!0);break;case"textarea":pt(m),qe(m);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(m.onclick=hd)}m=x,l.updateQueue=m,m!==null&&(l.flags|=4)}else{R=x.nodeType===9?x:x.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=bt(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=R.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=R.createElement(f,{is:m.is}):(a=R.createElement(f),f==="select"&&(R=a,m.multiple?R.multiple=!0:m.size&&(R.size=m.size))):a=R.createElementNS(a,f),a[ma]=l,a[Lo]=m,Dy(a,l,!1,!1),l.stateNode=a;e:{switch(R=Hs(f,m),f){case"dialog":rr("cancel",a),rr("close",a),x=m;break;case"iframe":case"object":case"embed":rr("load",a),x=m;break;case"video":case"audio":for(x=0;x<qa.length;x++)rr(qa[x],a);x=m;break;case"source":rr("error",a),x=m;break;case"img":case"image":case"link":rr("error",a),rr("load",a),x=m;break;case"details":rr("toggle",a),x=m;break;case"input":Bi(a,m),x=At(a,m),rr("invalid",a);break;case"option":x=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},x=z({},m,{value:void 0}),rr("invalid",a);break;case"textarea":Qi(a,m),x=Li(a,m),rr("invalid",a);break;default:x=m}bl(f,x),H=x;for(k in H)if(H.hasOwnProperty(k)){var q=H[k];k==="style"?Ji(a,q):k==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&Re(a,q)):k==="children"?typeof q=="string"?(f!=="textarea"||q!=="")&&ke(a,q):typeof q=="number"&&ke(a,""+q):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(n.hasOwnProperty(k)?q!=null&&k==="onScroll"&&rr("scroll",a):q!=null&&I(a,k,q,R))}switch(f){case"input":pt(a),Ki(a,m,!1);break;case"textarea":pt(a),qe(a);break;case"option":m.value!=null&&a.setAttribute("value",""+Oe(m.value));break;case"select":a.multiple=!!m.multiple,k=m.value,k!=null?Wt(a,!!m.multiple,k,!1):m.defaultValue!=null&&Wt(a,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(a.onclick=hd)}switch(f){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Rn(l),null;case 6:if(a&&l.stateNode!=null)Ay(a,l,a.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(t(166));if(f=Wo(Kc.current),Wo(Ks.current),jc(l)){if(m=l.stateNode,f=l.memoizedProps,m[ma]=l,(k=m.nodeValue!==f)&&(a=Tn,a!==null))switch(a.tag){case 3:Wc(m.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Wc(m.nodeValue,f,(a.mode&1)!==0)}k&&(l.flags|=4)}else m=(f.nodeType===9?f:f.ownerDocument).createTextNode(m),m[ma]=l,l.stateNode=m}return Rn(l),null;case 13:if(nr(ar),m=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(sr&&ns!==null&&l.mode&1&&!(l.flags&128))Np(),xa(),l.flags|=98560,k=!1;else if(k=jc(l),m!==null&&m.dehydrated!==null){if(a===null){if(!k)throw Error(t(318));if(k=l.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[ma]=l}else xa(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;Rn(l),k=!1}else js!==null&&(cg(js),js=null),k=!0;if(!k)return l.flags&65536?l:null}return l.flags&128?(l.lanes=f,l):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(l.child.flags|=8192,l.mode&1&&(a===null||ar.current&1?Qr===0&&(Qr=3):fg())),l.updateQueue!==null&&(l.flags|=4),Rn(l),null);case 4:return Wu(),Jp(a,l),a===null&&Po(l.stateNode.containerInfo),Rn(l),null;case 10:return xd(l.type._context),Rn(l),null;case 17:return Kn(l.type)&&gd(),Rn(l),null;case 19:if(nr(ar),k=l.memoizedState,k===null)return Rn(l),null;if(m=(l.flags&128)!==0,R=k.rendering,R===null)if(m)Xu(k,!1);else{if(Qr!==0||a!==null&&a.flags&128)for(a=l.child;a!==null;){if(R=Qc(a),R!==null){for(l.flags|=128,Xu(k,!1),m=R.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=f,f=l.child;f!==null;)k=f,a=m,k.flags&=14680066,R=k.alternate,R===null?(k.childLanes=0,k.lanes=a,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=R.childLanes,k.lanes=R.lanes,k.child=R.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=R.memoizedProps,k.memoizedState=R.memoizedState,k.updateQueue=R.updateQueue,k.type=R.type,a=R.dependencies,k.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return er(ar,ar.current&1|2),l.child}a=a.sibling}k.tail!==null&&hr()>ec&&(l.flags|=128,m=!0,Xu(k,!1),l.lanes=4194304)}else{if(!m)if(a=Qc(R),a!==null){if(l.flags|=128,m=!0,f=a.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),Xu(k,!0),k.tail===null&&k.tailMode==="hidden"&&!R.alternate&&!sr)return Rn(l),null}else 2*hr()-k.renderingStartTime>ec&&f!==1073741824&&(l.flags|=128,m=!0,Xu(k,!1),l.lanes=4194304);k.isBackwards?(R.sibling=l.child,l.child=R):(f=k.last,f!==null?f.sibling=R:l.child=R,k.last=R)}return k.tail!==null?(l=k.tail,k.rendering=l,k.tail=l.sibling,k.renderingStartTime=hr(),l.sibling=null,f=ar.current,er(ar,m?f&1|2:f&1),l):(Rn(l),null);case 22:case 23:return dg(),m=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(l.flags|=8192),m&&l.mode&1?ls&1073741824&&(Rn(l),l.subtreeFlags&6&&(l.flags|=8192)):Rn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function cv(a,l){switch(Ol(l),l.tag){case 1:return Kn(l.type)&&gd(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Wu(),nr(Xn),nr(_n),Dp(),a=l.flags,a&65536&&!(a&128)?(l.flags=a&-65537|128,l):null;case 5:return Mp(l),null;case 13:if(nr(ar),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));xa()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return nr(ar),null;case 4:return Wu(),null;case 10:return xd(l.type._context),null;case 22:case 23:return dg(),null;case 24:return null;default:return null}}var Ts=!1,Mi=!1,eg=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Go(a,l){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(m){xr(a,l,m)}else f.current=null}function tg(a,l,f){try{f()}catch(m){xr(a,l,m)}}var Vy=!1;function lh(a,l){if(Hc=Yh,a=Hi(),Oc(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var x=m.anchorOffset,k=m.focusNode;m=m.focusOffset;try{f.nodeType,k.nodeType}catch{f=null;break e}var R=0,H=-1,q=-1,fe=0,Me=0,ze=a,Fe=null;t:for(;;){for(var rt;ze!==f||x!==0&&ze.nodeType!==3||(H=R+x),ze!==k||m!==0&&ze.nodeType!==3||(q=R+m),ze.nodeType===3&&(R+=ze.nodeValue.length),(rt=ze.firstChild)!==null;)Fe=ze,ze=rt;for(;;){if(ze===a)break t;if(Fe===f&&++fe===x&&(H=R),Fe===k&&++Me===m&&(q=R),(rt=ze.nextSibling)!==null)break;ze=Fe,Fe=ze.parentNode}ze=rt}f=H===-1||q===-1?null:{start:H,end:q}}else f=null}f=f||{start:0,end:0}}else f=null;for(Rl={focusedElem:a,selectionRange:f},Yh=!1,ct=l;ct!==null;)if(l=ct,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,ct=a;else for(;ct!==null;){l=ct;try{var ht=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var yt=ht.memoizedProps,Rr=ht.memoizedState,ae=l.stateNode,K=ae.getSnapshotBeforeUpdate(l.elementType===l.type?yt:Ys(l.type,yt),Rr);ae.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var le=l.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch($e){xr(l,l.return,$e)}if(a=l.sibling,a!==null){a.return=l.return,ct=a;break}ct=l.return}return ht=Vy,Vy=!1,ht}function Ku(a,l,f){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&a)===a){var k=x.destroy;x.destroy=void 0,k!==void 0&&tg(l,f,k)}x=x.next}while(x!==m)}}function uh(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&a)===a){var m=f.create;f.destroy=m()}f=f.next}while(f!==l)}}function ig(a){var l=a.ref;if(l!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof l=="function"?l(a):l.current=a}}function zy(a){var l=a.alternate;l!==null&&(a.alternate=null,zy(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[ma],delete l[Lo],delete l[fd],delete l[M],delete l[Ou])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Wy(a){return a.tag===5||a.tag===3||a.tag===4}function Hy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Wy(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ud(a,l,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(a,l):f.insertBefore(a,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(a,f)):(l=f,l.appendChild(a)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=hd));else if(m!==4&&(a=a.child,a!==null))for(Ud(a,l,f),a=a.sibling;a!==null;)Ud(a,l,f),a=a.sibling}function $d(a,l,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for($d(a,l,f),a=a.sibling;a!==null;)$d(a,l,f),a=a.sibling}var gn=null,as=!1;function to(a,l,f){for(f=f.child;f!==null;)Qu(a,l,f),f=f.sibling}function Qu(a,l,f){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Wh,f)}catch{}switch(f.tag){case 5:Mi||Go(f,l);case 6:var m=gn,x=as;gn=null,to(a,l,f),gn=m,as=x,gn!==null&&(as?(a=gn,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):gn.removeChild(f.stateNode));break;case 18:gn!==null&&(as?(a=gn,f=f.stateNode,a.nodeType===8?Bp(a.parentNode,f):a.nodeType===1&&Bp(a,f),Oi(a)):Bp(gn,f.stateNode));break;case 4:m=gn,x=as,gn=f.stateNode.containerInfo,as=!0,to(a,l,f),gn=m,as=x;break;case 0:case 11:case 14:case 15:if(!Mi&&(m=f.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var k=x,R=k.destroy;k=k.tag,R!==void 0&&(k&2||k&4)&&tg(f,l,R),x=x.next}while(x!==m)}to(a,l,f);break;case 1:if(!Mi&&(Go(f,l),m=f.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=f.memoizedProps,m.state=f.memoizedState,m.componentWillUnmount()}catch(H){xr(f,l,H)}to(a,l,f);break;case 21:to(a,l,f);break;case 22:f.mode&1?(Mi=(m=Mi)||f.memoizedState!==null,to(a,l,f),Mi=m):to(a,l,f);break;default:to(a,l,f)}}function jd(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new eg),l.forEach(function(m){var x=bv.bind(null,a,m);f.has(m)||(f.add(m),m.then(x,x))})}}function Cs(a,l){var f=l.deletions;if(f!==null)for(var m=0;m<f.length;m++){var x=f[m];try{var k=a,R=l,H=R;e:for(;H!==null;){switch(H.tag){case 5:gn=H.stateNode,as=!1;break e;case 3:gn=H.stateNode.containerInfo,as=!0;break e;case 4:gn=H.stateNode.containerInfo,as=!0;break e}H=H.return}if(gn===null)throw Error(t(160));Qu(k,R,x),gn=null,as=!1;var q=x.alternate;q!==null&&(q.return=null),x.return=null}catch(fe){xr(x,l,fe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)rg(l,a),l=l.sibling}function rg(a,l){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Cs(l,a),os(a),m&4){try{Ku(3,a,a.return),uh(3,a)}catch(yt){xr(a,a.return,yt)}try{Ku(5,a,a.return)}catch(yt){xr(a,a.return,yt)}}break;case 1:Cs(l,a),os(a),m&512&&f!==null&&Go(f,f.return);break;case 5:if(Cs(l,a),os(a),m&512&&f!==null&&Go(f,f.return),a.flags&32){var x=a.stateNode;try{ke(x,"")}catch(yt){xr(a,a.return,yt)}}if(m&4&&(x=a.stateNode,x!=null)){var k=a.memoizedProps,R=f!==null?f.memoizedProps:k,H=a.type,q=a.updateQueue;if(a.updateQueue=null,q!==null)try{H==="input"&&k.type==="radio"&&k.name!=null&&Ai(x,k),Hs(H,R);var fe=Hs(H,k);for(R=0;R<q.length;R+=2){var Me=q[R],ze=q[R+1];Me==="style"?Ji(x,ze):Me==="dangerouslySetInnerHTML"?Re(x,ze):Me==="children"?ke(x,ze):I(x,Me,ze,fe)}switch(H){case"input":$t(x,k);break;case"textarea":Ve(x,k);break;case"select":var Fe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!k.multiple;var rt=k.value;rt!=null?Wt(x,!!k.multiple,rt,!1):Fe!==!!k.multiple&&(k.defaultValue!=null?Wt(x,!!k.multiple,k.defaultValue,!0):Wt(x,!!k.multiple,k.multiple?[]:"",!1))}x[Lo]=k}catch(yt){xr(a,a.return,yt)}}break;case 6:if(Cs(l,a),os(a),m&4){if(a.stateNode===null)throw Error(t(162));x=a.stateNode,k=a.memoizedProps;try{x.nodeValue=k}catch(yt){xr(a,a.return,yt)}}break;case 3:if(Cs(l,a),os(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Oi(l.containerInfo)}catch(yt){xr(a,a.return,yt)}break;case 4:Cs(l,a),os(a);break;case 13:Cs(l,a),os(a),x=a.child,x.flags&8192&&(k=x.memoizedState!==null,x.stateNode.isHidden=k,!k||x.alternate!==null&&x.alternate.memoizedState!==null||(qd=hr())),m&4&&jd(a);break;case 22:if(Me=f!==null&&f.memoizedState!==null,a.mode&1?(Mi=(fe=Mi)||Me,Cs(l,a),Mi=fe):Cs(l,a),os(a),m&8192){if(fe=a.memoizedState!==null,(a.stateNode.isHidden=fe)&&!Me&&a.mode&1)for(ct=a,Me=a.child;Me!==null;){for(ze=ct=Me;ct!==null;){switch(Fe=ct,rt=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:Ku(4,Fe,Fe.return);break;case 1:Go(Fe,Fe.return);var ht=Fe.stateNode;if(typeof ht.componentWillUnmount=="function"){m=Fe,f=Fe.return;try{l=m,ht.props=l.memoizedProps,ht.state=l.memoizedState,ht.componentWillUnmount()}catch(yt){xr(m,f,yt)}}break;case 5:Go(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){Uy(ze);continue}}rt!==null?(rt.return=Fe,ct=rt):Uy(ze)}Me=Me.sibling}e:for(Me=null,ze=a;;){if(ze.tag===5){if(Me===null){Me=ze;try{x=ze.stateNode,fe?(k=x.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(H=ze.stateNode,q=ze.memoizedProps.style,R=q!=null&&q.hasOwnProperty("display")?q.display:null,H.style.display=Xt("display",R))}catch(yt){xr(a,a.return,yt)}}}else if(ze.tag===6){if(Me===null)try{ze.stateNode.nodeValue=fe?"":ze.memoizedProps}catch(yt){xr(a,a.return,yt)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===a)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===a)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===a)break e;Me===ze&&(Me=null),ze=ze.return}Me===ze&&(Me=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:Cs(l,a),os(a),m&4&&jd(a);break;case 21:break;default:Cs(l,a),os(a)}}function os(a){var l=a.flags;if(l&2){try{e:{for(var f=a.return;f!==null;){if(Wy(f)){var m=f;break e}f=f.return}throw Error(t(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(ke(x,""),m.flags&=-33);var k=Hy(a);$d(a,k,x);break;case 3:case 4:var R=m.stateNode.containerInfo,H=Hy(a);Ud(a,H,R);break;default:throw Error(t(161))}}catch(q){xr(a,a.return,q)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Gy(a,l,f){ct=a,Js(a)}function Js(a,l,f){for(var m=(a.mode&1)!==0;ct!==null;){var x=ct,k=x.child;if(x.tag===22&&m){var R=x.memoizedState!==null||Ts;if(!R){var H=x.alternate,q=H!==null&&H.memoizedState!==null||Mi;H=Ts;var fe=Mi;if(Ts=R,(Mi=q)&&!fe)for(ct=x;ct!==null;)R=ct,q=R.child,R.tag===22&&R.memoizedState!==null?ng(x):q!==null?(q.return=R,ct=q):ng(x);for(;k!==null;)ct=k,Js(k),k=k.sibling;ct=x,Ts=H,Mi=fe}Uo(a)}else x.subtreeFlags&8772&&k!==null?(k.return=x,ct=k):Uo(a)}}function Uo(a){for(;ct!==null;){var l=ct;if(l.flags&8772){var f=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:Mi||uh(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Mi)if(f===null)m.componentDidMount();else{var x=l.elementType===l.type?f.memoizedProps:Ys(l.type,f.memoizedProps);m.componentDidUpdate(x,f.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var k=l.updateQueue;k!==null&&Sy(l,k,m);break;case 3:var R=l.updateQueue;if(R!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}Sy(l,R,f)}break;case 5:var H=l.stateNode;if(f===null&&l.flags&4){f=H;var q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&f.focus();break;case"img":q.src&&(f.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var fe=l.alternate;if(fe!==null){var Me=fe.memoizedState;if(Me!==null){var ze=Me.dehydrated;ze!==null&&Oi(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mi||l.flags&512&&ig(l)}catch(Fe){xr(l,l.return,Fe)}}if(l===a){ct=null;break}if(f=l.sibling,f!==null){f.return=l.return,ct=f;break}ct=l.return}}function Uy(a){for(;ct!==null;){var l=ct;if(l===a){ct=null;break}var f=l.sibling;if(f!==null){f.return=l.return,ct=f;break}ct=l.return}}function ng(a){for(;ct!==null;){var l=ct;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{uh(4,l)}catch(q){xr(l,f,q)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var x=l.return;try{m.componentDidMount()}catch(q){xr(l,x,q)}}var k=l.return;try{ig(l)}catch(q){xr(l,k,q)}break;case 5:var R=l.return;try{ig(l)}catch(q){xr(l,R,q)}}}catch(q){xr(l,l.return,q)}if(l===a){ct=null;break}var H=l.sibling;if(H!==null){H.return=l.return,ct=H;break}ct=l.return}}var hv=Math.ceil,Yd=V.ReactCurrentDispatcher,sg=V.ReactCurrentOwner,Ns=V.ReactCurrentBatchConfig,Ti=0,on=null,Vr=null,mn=0,ls=0,Ju=qn(0),Qr=0,Zu=null,$o=0,ch=0,ag=0,hh=null,Jn=null,qd=0,ec=1/0,io=null,Xd=!1,og=null,jo=null,Kd=!1,Jr=null,Qd=0,dh=0,lg=null,fh=-1,Jd=0;function Gn(){return Ti&6?hr():fh!==-1?fh:fh=hr()}function Yo(a){return a.mode&1?Ti&2&&mn!==0?mn&-mn:wy.transition!==null?(Jd===0&&(Jd=rp()),Jd):(a=Ii,a!==0||(a=window.event,a=a===void 0?16:jm(a.type)),a):1}function Zs(a,l,f,m){if(50<dh)throw dh=0,lg=null,Error(t(185));Pc(a,f,m),(!(Ti&2)||a!==on)&&(a===on&&(!(Ti&2)&&(ch|=f),Qr===4&&qo(a,mn)),Ln(a,m),f===1&&Ti===0&&!(l.mode&1)&&(ec=hr()+500,md&&Fo()))}function Ln(a,l){var f=a.callbackNode;Wb(a,l);var m=_l(a,a===on?mn:0);if(m===0)f!==null&&Fm(f),a.callbackNode=null,a.callbackPriority=0;else if(l=m&-m,a.callbackPriority!==l){if(f!=null&&Fm(f),l===1)a.tag===0?Ll(jy.bind(null,a)):yy(jy.bind(null,a)),dd(function(){!(Ti&6)&&Fo()}),f=null;else{switch(Bl(m)){case 1:f=tp;break;case 4:f=Om;break;case 16:f=Cc;break;case 536870912:f=ip;break;default:f=Cc}f=Zy(f,$y.bind(null,a))}a.callbackPriority=l,a.callbackNode=f}}function $y(a,l){if(fh=-1,Jd=0,Ti&6)throw Error(t(327));var f=a.callbackNode;if(Xo()&&a.callbackNode!==f)return null;var m=_l(a,a===on?mn:0);if(m===0)return null;if(m&30||m&a.expiredLanes||l)l=Zd(a,m);else{l=m;var x=Ti;Ti|=2;var k=qy();(on!==a||mn!==l)&&(io=null,ec=hr()+500,Hl(a,l));do try{pv();break}catch(H){Yy(a,H)}while(!0);Yc(),Yd.current=k,Ti=x,Vr!==null?l=0:(on=null,mn=0,l=Qr)}if(l!==0){if(l===2&&(x=Gh(a),x!==0&&(m=x,l=ug(a,x))),l===1)throw f=Zu,Hl(a,0),qo(a,m),Ln(a,hr()),f;if(l===6)qo(a,m);else{if(x=a.current.alternate,!(m&30)&&!dv(x)&&(l=Zd(a,m),l===2&&(k=Gh(a),k!==0&&(m=k,l=ug(a,k))),l===1))throw f=Zu,Hl(a,0),qo(a,m),Ln(a,hr()),f;switch(a.finishedWork=x,a.finishedLanes=m,l){case 0:case 1:throw Error(t(345));case 2:Gl(a,Jn,io);break;case 3:if(qo(a,m),(m&130023424)===m&&(l=qd+500-hr(),10<l)){if(_l(a,0)!==0)break;if(x=a.suspendedLanes,(x&m)!==m){Gn(),a.pingedLanes|=a.suspendedLanes&x;break}a.timeoutHandle=Eo(Gl.bind(null,a,Jn,io),l);break}Gl(a,Jn,io);break;case 4:if(qo(a,m),(m&4194240)===m)break;for(l=a.eventTimes,x=-1;0<m;){var R=31-Us(m);k=1<<R,R=l[R],R>x&&(x=R),m&=~k}if(m=x,m=hr()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*hv(m/1960))-m,10<m){a.timeoutHandle=Eo(Gl.bind(null,a,Jn,io),m);break}Gl(a,Jn,io);break;case 5:Gl(a,Jn,io);break;default:throw Error(t(329))}}}return Ln(a,hr()),a.callbackNode===f?$y.bind(null,a):null}function ug(a,l){var f=hh;return a.current.memoizedState.isDehydrated&&(Hl(a,l).flags|=256),a=Zd(a,l),a!==2&&(l=Jn,Jn=f,l!==null&&cg(l)),a}function cg(a){Jn===null?Jn=a:Jn.push.apply(Jn,a)}function dv(a){for(var l=a;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var m=0;m<f.length;m++){var x=f[m],k=x.getSnapshot;x=x.value;try{if(!ce(k(),x))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function qo(a,l){for(l&=~ag,l&=~ch,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var f=31-Us(l),m=1<<f;a[f]=-1,l&=~m}}function jy(a){if(Ti&6)throw Error(t(327));Xo();var l=_l(a,0);if(!(l&1))return Ln(a,hr()),null;var f=Zd(a,l);if(a.tag!==0&&f===2){var m=Gh(a);m!==0&&(l=m,f=ug(a,m))}if(f===1)throw f=Zu,Hl(a,0),qo(a,l),Ln(a,hr()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Gl(a,Jn,io),Ln(a,hr()),null}function hg(a,l){var f=Ti;Ti|=1;try{return a(l)}finally{Ti=f,Ti===0&&(ec=hr()+500,md&&Fo())}}function Wl(a){Jr!==null&&Jr.tag===0&&!(Ti&6)&&Xo();var l=Ti;Ti|=1;var f=Ns.transition,m=Ii;try{if(Ns.transition=null,Ii=1,a)return a()}finally{Ii=m,Ns.transition=f,Ti=l,!(Ti&6)&&Fo()}}function dg(){ls=Ju.current,nr(Ju)}function Hl(a,l){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,Uc(f)),Vr!==null)for(f=Vr.return;f!==null;){var m=f;switch(Ol(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&gd();break;case 3:Wu(),nr(Xn),nr(_n),Dp();break;case 5:Mp(m);break;case 4:Wu();break;case 13:nr(ar);break;case 19:nr(ar);break;case 10:xd(m.type._context);break;case 22:case 23:dg()}f=f.return}if(on=a,Vr=a=Ko(a.current,null),mn=ls=l,Qr=0,Zu=null,ag=ch=$o=0,Jn=hh=null,ss!==null){for(l=0;l<ss.length;l++)if(f=ss[l],m=f.interleaved,m!==null){f.interleaved=null;var x=m.next,k=f.pending;if(k!==null){var R=k.next;k.next=x,m.next=R}f.pending=m}ss=null}return a}function Yy(a,l){do{var f=Vr;try{if(Yc(),Hu.current=Za,Nd){for(var m=pr.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}Nd=!1}if(Al=0,qr=gr=pr=null,Zc=!1,Nn=0,sg.current=null,f===null||f.return===null){Qr=1,Zu=l,Vr=null;break}e:{var k=a,R=f.return,H=f,q=l;if(l=mn,H.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var fe=q,Me=H,ze=Me.tag;if(!(Me.mode&1)&&(ze===0||ze===11||ze===15)){var Fe=Me.alternate;Fe?(Me.updateQueue=Fe.updateQueue,Me.memoizedState=Fe.memoizedState,Me.lanes=Fe.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var rt=Yp(R);if(rt!==null){rt.flags&=-257,nh(rt,R,H,k,l),rt.mode&1&&Ly(k,fe,l),l=rt,q=fe;var ht=l.updateQueue;if(ht===null){var yt=new Set;yt.add(q),l.updateQueue=yt}else ht.add(q);break e}else{if(!(l&1)){Ly(k,fe,l),fg();break e}q=Error(t(426))}}else if(sr&&H.mode&1){var Rr=Yp(R);if(Rr!==null){!(Rr.flags&65536)&&(Rr.flags|=256),nh(Rr,R,H,k,l),Sa(zl(q,H));break e}}k=q=zl(q,H),Qr!==4&&(Qr=2),hh===null?hh=[k]:hh.push(k),k=R;do{switch(k.tag){case 3:k.flags|=65536,l&=-l,k.lanes|=l;var ae=Vd(k,q,l);Ep(k,ae);break e;case 1:H=q;var K=k.type,le=k.stateNode;if(!(k.flags&128)&&(typeof K.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(jo===null||!jo.has(le)))){k.flags|=65536,l&=-l,k.lanes|=l;var $e=rh(k,H,l);Ep(k,$e);break e}}k=k.return}while(k!==null)}Ky(f)}catch(vt){l=vt,Vr===f&&f!==null&&(Vr=f=f.return);continue}break}while(!0)}function qy(){var a=Yd.current;return Yd.current=Za,a===null?Za:a}function fg(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),on===null||!($o&268435455)&&!(ch&268435455)||qo(on,mn)}function Zd(a,l){var f=Ti;Ti|=2;var m=qy();(on!==a||mn!==l)&&(io=null,Hl(a,l));do try{fv();break}catch(x){Yy(a,x)}while(!0);if(Yc(),Ti=f,Yd.current=m,Vr!==null)throw Error(t(261));return on=null,mn=0,Qr}function fv(){for(;Vr!==null;)Xy(Vr)}function pv(){for(;Vr!==null&&!zh();)Xy(Vr)}function Xy(a){var l=Jy(a.alternate,a,ls);a.memoizedProps=a.pendingProps,l===null?Ky(a):Vr=l,sg.current=null}function Ky(a){var l=a;do{var f=l.alternate;if(a=l.return,l.flags&32768){if(f=cv(f,l),f!==null){f.flags&=32767,Vr=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Qr=6,Vr=null;return}}else if(f=uv(f,l,ls),f!==null){Vr=f;return}if(l=l.sibling,l!==null){Vr=l;return}Vr=l=a}while(l!==null);Qr===0&&(Qr=5)}function Gl(a,l,f){var m=Ii,x=Ns.transition;try{Ns.transition=null,Ii=1,gv(a,l,f,m)}finally{Ns.transition=x,Ii=m}return null}function gv(a,l,f,m){do Xo();while(Jr!==null);if(Ti&6)throw Error(t(327));f=a.finishedWork;var x=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var k=f.lanes|f.childLanes;if(Wm(a,k),a===on&&(Vr=on=null,mn=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Kd||(Kd=!0,Zy(Cc,function(){return Xo(),null})),k=(f.flags&15990)!==0,f.subtreeFlags&15990||k){k=Ns.transition,Ns.transition=null;var R=Ii;Ii=1;var H=Ti;Ti|=4,sg.current=null,lh(a,f),rg(f,a),nv(Rl),Yh=!!Hc,Rl=Hc=null,a.current=f,Gy(f),Ab(),Ti=H,Ii=R,Ns.transition=k}else a.current=f;if(Kd&&(Kd=!1,Jr=a,Qd=x),k=a.pendingLanes,k===0&&(jo=null),zb(f.stateNode),Ln(a,hr()),l!==null)for(m=a.onRecoverableError,f=0;f<l.length;f++)x=l[f],m(x.value,{componentStack:x.stack,digest:x.digest});if(Xd)throw Xd=!1,a=og,og=null,a;return Qd&1&&a.tag!==0&&Xo(),k=a.pendingLanes,k&1?a===lg?dh++:(dh=0,lg=a):dh=0,Fo(),null}function Xo(){if(Jr!==null){var a=Bl(Qd),l=Ns.transition,f=Ii;try{if(Ns.transition=null,Ii=16>a?16:a,Jr===null)var m=!1;else{if(a=Jr,Jr=null,Qd=0,Ti&6)throw Error(t(331));var x=Ti;for(Ti|=4,ct=a.current;ct!==null;){var k=ct,R=k.child;if(ct.flags&16){var H=k.deletions;if(H!==null){for(var q=0;q<H.length;q++){var fe=H[q];for(ct=fe;ct!==null;){var Me=ct;switch(Me.tag){case 0:case 11:case 15:Ku(8,Me,k)}var ze=Me.child;if(ze!==null)ze.return=Me,ct=ze;else for(;ct!==null;){Me=ct;var Fe=Me.sibling,rt=Me.return;if(zy(Me),Me===fe){ct=null;break}if(Fe!==null){Fe.return=rt,ct=Fe;break}ct=rt}}}var ht=k.alternate;if(ht!==null){var yt=ht.child;if(yt!==null){ht.child=null;do{var Rr=yt.sibling;yt.sibling=null,yt=Rr}while(yt!==null)}}ct=k}}if(k.subtreeFlags&2064&&R!==null)R.return=k,ct=R;else e:for(;ct!==null;){if(k=ct,k.flags&2048)switch(k.tag){case 0:case 11:case 15:Ku(9,k,k.return)}var ae=k.sibling;if(ae!==null){ae.return=k.return,ct=ae;break e}ct=k.return}}var K=a.current;for(ct=K;ct!==null;){R=ct;var le=R.child;if(R.subtreeFlags&2064&&le!==null)le.return=R,ct=le;else e:for(R=K;ct!==null;){if(H=ct,H.flags&2048)try{switch(H.tag){case 0:case 11:case 15:uh(9,H)}}catch(vt){xr(H,H.return,vt)}if(H===R){ct=null;break e}var $e=H.sibling;if($e!==null){$e.return=H.return,ct=$e;break e}ct=H.return}}if(Ti=x,Fo(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(Wh,a)}catch{}m=!0}return m}finally{Ii=f,Ns.transition=l}}return!1}function pg(a,l,f){l=zl(f,l),l=Vd(a,l,1),a=Do(a,l,1),l=Gn(),a!==null&&(Pc(a,1,l),Ln(a,l))}function xr(a,l,f){if(a.tag===3)pg(a,a,f);else for(;l!==null;){if(l.tag===3){pg(l,a,f);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(jo===null||!jo.has(m))){a=zl(f,a),a=rh(l,a,1),l=Do(l,a,1),a=Gn(),l!==null&&(Pc(l,1,a),Ln(l,a));break}}l=l.return}}function mv(a,l,f){var m=a.pingCache;m!==null&&m.delete(l),l=Gn(),a.pingedLanes|=a.suspendedLanes&f,on===a&&(mn&f)===f&&(Qr===4||Qr===3&&(mn&130023424)===mn&&500>hr()-qd?Hl(a,0):ag|=f),Ln(a,l)}function Qy(a,l){l===0&&(a.mode&1?(l=Hh,Hh<<=1,!(Hh&130023424)&&(Hh=4194304)):l=1);var f=Gn();a=qs(a,l),a!==null&&(Pc(a,l,f),Ln(a,f))}function yv(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),Qy(a,f)}function bv(a,l){var f=0;switch(a.tag){case 13:var m=a.stateNode,x=a.memoizedState;x!==null&&(f=x.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(l),Qy(a,f)}var Jy;Jy=function(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps||Xn.current)Pn=!0;else{if(!(a.lanes&f)&&!(l.flags&128))return Pn=!1,En(a,l,f);Pn=!!(a.flags&131072)}else Pn=!1,sr&&l.flags&1048576&&by(l,bd,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;qu(a,l),a=l.pendingProps;var x=Du(l,_n.current);Oo(l,f),x=Pd(null,l,m,a,x,f);var k=Ed();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Kn(m)?(k=!0,Ss(l)):k=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Pp(l),x.updater=_d,l.stateNode=x,x._reactInternals=l,Ip(l,m,a,f),l=Qp(null,l,m,!0,k,f)):(l.tag=0,sr&&k&&$c(l),Hn(null,l,x,f),l=l.child),l;case 16:m=l.elementType;e:{switch(qu(a,l),a=l.pendingProps,x=m._init,m=x(m._payload),l.type=m,x=l.tag=ef(m),a=Ys(m,a),x){case 0:l=zd(null,l,m,a,f);break e;case 1:l=Oy(null,l,m,a,f);break e;case 11:l=qp(null,l,m,a,f);break e;case 14:l=ka(null,l,m,Ys(m.type,a),f);break e}throw Error(t(306,m,""))}return l;case 0:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:Ys(m,x),zd(a,l,m,x,f);case 1:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:Ys(m,x),Oy(a,l,m,x,f);case 3:e:{if(_a(l),a===null)throw Error(t(387));m=l.pendingProps,k=l.memoizedState,x=k.element,xy(a,l),kd(l,m,null,f);var R=l.memoizedState;if(m=R.element,k.isDehydrated)if(k={element:m,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},l.updateQueue.baseState=k,l.memoizedState=k,l.flags&256){x=zl(Error(t(423)),l),l=Wd(a,l,m,f,x);break e}else if(m!==x){x=zl(Error(t(424)),l),l=Wd(a,l,m,f,x);break e}else for(ns=Ro(l.stateNode.containerInfo.firstChild),Tn=l,sr=!0,js=null,f=Fp(l,null,m,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(xa(),m===x){l=Ba(a,l,f);break e}Hn(a,l,m,f)}l=l.child}return l;case 5:return Op(l),a===null&&Qn(l),m=l.type,x=l.pendingProps,k=a!==null?a.memoizedProps:null,R=x.children,Gc(m,x)?R=null:k!==null&&Gc(m,k)&&(l.flags|=32),Fy(a,l),Hn(a,l,R,f),l.child;case 6:return a===null&&Qn(l),null;case 13:return oh(a,l,f);case 4:return Cd(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=Vo(l,null,m,f):Hn(a,l,m,f),l.child;case 11:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:Ys(m,x),qp(a,l,m,x,f);case 7:return Hn(a,l,l.pendingProps,f),l.child;case 8:return Hn(a,l,l.pendingProps.children,f),l.child;case 12:return Hn(a,l,l.pendingProps.children,f),l.child;case 10:e:{if(m=l.type._context,x=l.pendingProps,k=l.memoizedProps,R=x.value,er(Ml,m._currentValue),m._currentValue=R,k!==null)if(ce(k.value,R)){if(k.children===x.children&&!Xn.current){l=Ba(a,l,f);break e}}else for(k=l.child,k!==null&&(k.return=l);k!==null;){var H=k.dependencies;if(H!==null){R=k.child;for(var q=H.firstContext;q!==null;){if(q.context===m){if(k.tag===1){q=Xs(-1,f&-f),q.tag=2;var fe=k.updateQueue;if(fe!==null){fe=fe.shared;var Me=fe.pending;Me===null?q.next=q:(q.next=Me.next,Me.next=q),fe.pending=q}}k.lanes|=f,q=k.alternate,q!==null&&(q.lanes|=f),Bs(k.return,f,l),H.lanes|=f;break}q=q.next}}else if(k.tag===10)R=k.type===l.type?null:k.child;else if(k.tag===18){if(R=k.return,R===null)throw Error(t(341));R.lanes|=f,H=R.alternate,H!==null&&(H.lanes|=f),Bs(R,f,l),R=k.sibling}else R=k.child;if(R!==null)R.return=k;else for(R=k;R!==null;){if(R===l){R=null;break}if(k=R.sibling,k!==null){k.return=R.return,R=k;break}R=R.return}k=R}Hn(a,l,x.children,f),l=l.child}return l;case 9:return x=l.type,m=l.pendingProps.children,Oo(l,f),x=zn(x),m=m(x),l.flags|=1,Hn(a,l,m,f),l.child;case 14:return m=l.type,x=Ys(m,l.pendingProps),x=Ys(m.type,x),ka(a,l,m,x,f);case 15:return Xp(a,l,l.type,l.pendingProps,f);case 17:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:Ys(m,x),qu(a,l),l.tag=1,Kn(m)?(a=!0,Ss(l)):a=!1,Oo(l,f),Lp(l,m,x),Ip(l,m,x,f),Qp(null,l,m,!0,a,f);case 19:return My(a,l,f);case 22:return Kp(a,l,f)}throw Error(t(156,l.tag))};function Zy(a,l){return Im(a,l)}function vv(a,l,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(a,l,f,m){return new vv(a,l,f,m)}function gg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ef(a){if(typeof a=="function")return gg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ge)return 11;if(a===Be)return 14}return 2}function Ko(a,l){var f=a.alternate;return f===null?(f=us(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function tf(a,l,f,m,x,k){var R=2;if(m=a,typeof a=="function")gg(a)&&(R=1);else if(typeof a=="string")R=5;else e:switch(a){case W:return Ul(f.children,x,k,l);case J:R=8,x|=8;break;case re:return a=us(12,f,l,x|2),a.elementType=re,a.lanes=k,a;case he:return a=us(13,f,l,x),a.elementType=he,a.lanes=k,a;case ve:return a=us(19,f,l,x),a.elementType=ve,a.lanes=k,a;case ue:return rf(f,x,k,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case j:R=10;break e;case oe:R=9;break e;case ge:R=11;break e;case Be:R=14;break e;case te:R=16,m=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=us(R,f,l,x),l.elementType=a,l.type=m,l.lanes=k,l}function Ul(a,l,f,m){return a=us(7,a,m,l),a.lanes=f,a}function rf(a,l,f,m){return a=us(22,a,m,l),a.elementType=ue,a.lanes=f,a.stateNode={isHidden:!1},a}function mg(a,l,f){return a=us(6,a,null,l),a.lanes=f,a}function yg(a,l,f){return l=us(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function wv(a,l,f,m,x){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nc(0),this.expirationTimes=Nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nc(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function bg(a,l,f,m,x,k,R,H,q){return a=new wv(a,l,f,H,q),l===1?(l=1,k===!0&&(l|=8)):l=0,k=us(3,null,null,l),a.current=k,k.stateNode=a,k.memoizedState={element:m,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pp(k),a}function xv(a,l,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:m==null?null:""+m,children:a,containerInfo:l,implementation:f}}function e0(a){if(!a)return Io;a=a._reactInternals;e:{if(kl(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Kn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(Kn(f))return gy(a,f,l)}return l}function t0(a,l,f,m,x,k,R,H,q){return a=bg(f,m,!0,a,x,k,R,H,q),a.context=e0(null),f=a.current,m=Gn(),x=Yo(f),k=Xs(m,x),k.callback=l??null,Do(f,k,x),a.current.lanes=x,Pc(a,x,m),Ln(a,m),a}function nf(a,l,f,m){var x=l.current,k=Gn(),R=Yo(x);return f=e0(f),l.context===null?l.context=f:l.pendingContext=f,l=Xs(k,R),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Do(x,l,R),a!==null&&(Zs(a,x,R,k),Ao(a,x,R)),R}function sf(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function i0(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function vg(a,l){i0(a,l),(a=a.alternate)&&i0(a,l)}function Sv(){return null}var wg=typeof reportError=="function"?reportError:function(a){console.error(a)};function af(a){this._internalRoot=a}of.prototype.render=af.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));nf(a,l,null,null)},of.prototype.unmount=af.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Wl(function(){nf(null,a,null,null)}),l[rs]=null}};function of(a){this._internalRoot=a}of.prototype.unstable_scheduleHydration=function(a){if(a){var l=sp();a={blockedOn:null,target:a,priority:l};for(var f=0;f<Bo.length&&l!==0&&l<Bo[f].priority;f++);Bo.splice(f,0,a),f===0&&Um(a)}};function xg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function lf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function r0(){}function uf(a,l,f,m,x){if(x){if(typeof m=="function"){var k=m;m=function(){var fe=sf(R);k.call(fe)}}var R=t0(l,m,a,0,null,!1,!1,"",r0);return a._reactRootContainer=R,a[rs]=R.current,Po(a.nodeType===8?a.parentNode:a),Wl(),R}for(;x=a.lastChild;)a.removeChild(x);if(typeof m=="function"){var H=m;m=function(){var fe=sf(q);H.call(fe)}}var q=bg(a,0,!1,null,null,!1,!1,"",r0);return a._reactRootContainer=q,a[rs]=q.current,Po(a.nodeType===8?a.parentNode:a),Wl(function(){nf(l,q,f,m)}),q}function cf(a,l,f,m,x){var k=f._reactRootContainer;if(k){var R=k;if(typeof x=="function"){var H=x;x=function(){var q=sf(R);H.call(q)}}nf(l,R,a,x)}else R=uf(f,l,a,x,m);return sf(R)}np=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var f=vu(l.pendingLanes);f!==0&&(Ec(l,f|1),Ln(l,hr()),!(Ti&6)&&(ec=hr()+500,Fo()))}break;case 13:Wl(function(){var m=qs(a,1);if(m!==null){var x=Gn();Zs(m,a,1,x)}}),vg(a,1)}},Uh=function(a){if(a.tag===13){var l=qs(a,134217728);if(l!==null){var f=Gn();Zs(l,a,134217728,f)}vg(a,134217728)}},Hm=function(a){if(a.tag===13){var l=Yo(a),f=qs(a,l);if(f!==null){var m=Gn();Zs(f,a,l,m)}vg(a,l)}},sp=function(){return Ii},ap=function(a,l){var f=Ii;try{return Ii=a,l()}finally{Ii=f}},Ua=function(a,l,f){switch(l){case"input":if($t(a,f),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var m=f[l];if(m!==a&&m.form===a.form){var x=pd(m);if(!x)throw Error(t(90));ei(m),$t(m,x)}}}break;case"textarea":Ve(a,f);break;case"select":l=f.value,l!=null&&Wt(a,!!f.multiple,l,!1)}},pu=hg,gu=Wl;var kv={usingClientEntryPoint:!1,Events:[kn,oi,pd,Vh,wo,hg]},ph={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_v={bundleType:ph.bundleType,version:ph.version,rendererPackageName:ph.rendererPackageName,rendererConfig:ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Rm(a),a===null?null:a.stateNode},findFiberByHostInstance:ph.findFiberByHostInstance||Sv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{Wh=hf.inject(_v),fa=hf}catch{}}return Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kv,Ls.createPortal=function(a,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xg(l))throw Error(t(200));return xv(a,l,null,f)},Ls.createRoot=function(a,l){if(!xg(a))throw Error(t(299));var f=!1,m="",x=wg;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=bg(a,1,!1,null,null,f,!1,m,x),a[rs]=l.current,Po(a.nodeType===8?a.parentNode:a),new af(l)},Ls.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Rm(l),a=a===null?null:a.stateNode,a},Ls.flushSync=function(a){return Wl(a)},Ls.hydrate=function(a,l,f){if(!lf(l))throw Error(t(200));return cf(null,a,l,!0,f)},Ls.hydrateRoot=function(a,l,f){if(!xg(a))throw Error(t(405));var m=f!=null&&f.hydratedSources||null,x=!1,k="",R=wg;if(f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(k=f.identifierPrefix),f.onRecoverableError!==void 0&&(R=f.onRecoverableError)),l=t0(l,null,a,1,f??null,x,!1,k,R),a[rs]=l.current,Po(a),m)for(a=0;a<m.length;a++)f=m[a],x=f._getVersion,x=x(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,x]:l.mutableSourceEagerHydrationData.push(f,x);return new of(l)},Ls.render=function(a,l,f){if(!lf(l))throw Error(t(200));return cf(null,a,l,!1,f)},Ls.unmountComponentAtNode=function(a){if(!lf(a))throw Error(t(40));return a._reactRootContainer?(Wl(function(){cf(null,null,a,!1,function(){a._reactRootContainer=null,a[rs]=null})}),!0):!1},Ls.unstable_batchedUpdates=hg,Ls.unstable_renderSubtreeIntoContainer=function(a,l,f,m){if(!lf(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return cf(a,l,f,!1,m)},Ls.version="18.2.0-next-9e3b772b8-20220608",Ls}var GS;function FP(){if(GS)return Vv.exports;GS=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vv.exports=IP(),Vv.exports}var ux=FP();const Mg=lx(ux);function lc(r){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(r)}function Wa(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function US(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function Ha(r,e,t){return e&&US(r.prototype,e),t&&US(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function iu(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function U0(r,e){return U0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},U0(r,e)}function cb(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&U0(r,e)}function ym(r,e){if(e&&(lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iu(r)}function hl(r){return hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hl(r)}function yl(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function O_(r){if(Array.isArray(r))return r}function OP(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function $S(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function M_(r,e){if(r){if(typeof r=="string")return $S(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $S(r,e)}}function D_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MP(r){return O_(r)||OP(r)||M_(r)||D_()}function jS(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function YS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jS(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jS(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var DP={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},AP=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wa(this,r),this.init(e,t)}return Ha(r,[{key:"init",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=i.prefix||"i18next:",this.logger=t||DP,this.options=i,this.debug=i.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.forward(i,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.forward(i,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.forward(i,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,i,n,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[i](t))}},{key:"create",value:function(t){return new r(this.logger,YS(YS({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new r(this.logger,t)}}]),r}(),al=new AP,dc=function(){function r(){Wa(this,r),this.observers={}}return Ha(r,[{key:"on",value:function(t,i){var n=this;return t.split(" ").forEach(function(s){n.observers[s]=n.observers[s]||[],n.observers[s].push(i)}),this}},{key:"off",value:function(t,i){if(this.observers[t]){if(!i){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(n){return n!==i})}}},{key:"emit",value:function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(h){h.apply(void 0,n)})}if(this.observers["*"]){var c=[].concat(this.observers["*"]);c.forEach(function(h){h.apply(h,[t].concat(n))})}}}]),r}();function _g(){var r,e,t=new Promise(function(i,n){r=i,e=n});return t.resolve=r,t.reject=e,t}function qS(r){return r==null?"":""+r}function VP(r,e,t){r.forEach(function(i){e[i]&&(t[i]=e[i])})}function cx(r,e,t){function i(c){return c&&c.indexOf("###")>-1?c.replace(/###/g,"."):c}function n(){return!r||typeof r=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(n())return{};var o=i(s.shift());!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={}}return n()?{}:{obj:r,k:i(s.shift())}}function XS(r,e,t){var i=cx(r,e,Object),n=i.obj,s=i.k;n[s]=t}function zP(r,e,t,i){var n=cx(r,e,Object),s=n.obj,o=n.k;s[o]=s[o]||[],s[o].push(t)}function $0(r,e){var t=cx(r,e),i=t.obj,n=t.k;if(i)return i[n]}function KS(r,e,t){var i=$0(r,t);return i!==void 0?i:$0(e,t)}function A_(r,e,t){for(var i in e)i!=="__proto__"&&i!=="constructor"&&(i in r?typeof r[i]=="string"||r[i]instanceof String||typeof e[i]=="string"||e[i]instanceof String?t&&(r[i]=e[i]):A_(r[i],e[i],t):r[i]=e[i]);return r}function pf(r){return r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var WP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function HP(r){return typeof r=="string"?r.replace(/[&<>"'\/]/g,function(e){return WP[e]}):r}var hb=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,GP=[" ",",","?","!",";"];function UP(r,e,t){e=e||"",t=t||"";var i=GP.filter(function(c){return e.indexOf(c)<0&&t.indexOf(c)<0});if(i.length===0)return!0;var n=new RegExp("(".concat(i.map(function(c){return c==="?"?"\\?":c}).join("|"),")")),s=!n.test(r);if(!s){var o=r.indexOf(t);o>0&&!n.test(r.substring(0,o))&&(s=!0)}return s}function QS(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function l0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QS(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QS(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function $P(r){var e=jP();return function(){var i=hl(r),n;if(e){var s=hl(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return ym(this,n)}}function jP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V_(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(r){if(r[e])return r[e];for(var i=e.split(t),n=r,s=0;s<i.length;++s){if(!n||typeof n[i[s]]=="string"&&s+1<i.length)return;if(n[i[s]]===void 0){for(var o=2,c=i.slice(s,s+o).join(t),h=n[c];h===void 0&&i.length>s+o;)o++,c=i.slice(s,s+o).join(t),h=n[c];if(h===void 0)return;if(h===null)return null;if(e.endsWith(c)){if(typeof h=="string")return h;if(c&&typeof h[c]=="string")return h[c]}var p=i.slice(s+o).join(t);return p?V_(h,p,t):void 0}n=n[i[s]]}return n}}var YP=function(r){cb(t,r);var e=$P(t);function t(i){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Wa(this,t),n=e.call(this),hb&&dc.call(iu(n)),n.data=i||{},n.options=s,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n.options.ignoreJSONStructure===void 0&&(n.options.ignoreJSONStructure=!0),n}return Ha(t,[{key:"addNamespaces",value:function(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}},{key:"removeNamespaces",value:function(n){var s=this.options.ns.indexOf(n);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(n,s,o){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},h=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,p=c.ignoreJSONStructure!==void 0?c.ignoreJSONStructure:this.options.ignoreJSONStructure,g=[n,s];o&&typeof o!="string"&&(g=g.concat(o)),o&&typeof o=="string"&&(g=g.concat(h?o.split(h):o)),n.indexOf(".")>-1&&(g=n.split("."));var b=$0(this.data,g);return b||!p||typeof o!="string"?b:V_(this.data&&this.data[n]&&this.data[n][s],o,h)}},{key:"addResource",value:function(n,s,o,c){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},p=this.options.keySeparator;p===void 0&&(p=".");var g=[n,s];o&&(g=g.concat(p?o.split(p):o)),n.indexOf(".")>-1&&(g=n.split("."),c=s,s=g[1]),this.addNamespaces(s),XS(this.data,g,c),h.silent||this.emit("added",n,s,o,c)}},{key:"addResources",value:function(n,s,o){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var h in o)(typeof o[h]=="string"||Object.prototype.toString.apply(o[h])==="[object Array]")&&this.addResource(n,s,h,o[h],{silent:!0});c.silent||this.emit("added",n,s,o)}},{key:"addResourceBundle",value:function(n,s,o,c,h){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},g=[n,s];n.indexOf(".")>-1&&(g=n.split("."),c=o,o=s,s=g[1]),this.addNamespaces(s);var b=$0(this.data,g)||{};c?A_(b,o,h):b=l0(l0({},b),o),XS(this.data,g,b),p.silent||this.emit("added",n,s,o)}},{key:"removeResourceBundle",value:function(n,s){this.hasResourceBundle(n,s)&&delete this.data[n][s],this.removeNamespaces(s),this.emit("removed",n,s)}},{key:"hasResourceBundle",value:function(n,s){return this.getResource(n,s)!==void 0}},{key:"getResourceBundle",value:function(n,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?l0(l0({},{}),this.getResource(n,s)):this.getResource(n,s)}},{key:"getDataByLanguage",value:function(n){return this.data[n]}},{key:"hasLanguageSomeTranslations",value:function(n){var s=this.getDataByLanguage(n),o=s&&Object.keys(s)||[];return!!o.find(function(c){return s[c]&&Object.keys(s[c]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(dc),z_={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,i,n,s){var o=this;return e.forEach(function(c){o.processors[c]&&(t=o.processors[c].process(t,i,n,s))}),t}};function JS(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function hs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JS(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JS(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function qP(r){var e=XP();return function(){var i=hl(r),n;if(e){var s=hl(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return ym(this,n)}}function XP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ZS={},e1=function(r){cb(t,r);var e=qP(t);function t(i){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wa(this,t),n=e.call(this),hb&&dc.call(iu(n)),VP(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,iu(n)),n.options=s,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n.logger=al.create("translator"),n}return Ha(t,[{key:"changeLanguage",value:function(n){n&&(this.language=n)}},{key:"exists",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;var o=this.resolve(n,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(n,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,h=s.ns||this.options.defaultNS||[],p=o&&n.indexOf(o)>-1,g=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!UP(n,o,c);if(p&&!g){var b=n.match(this.interpolator.nestingRegexp);if(b&&b.length>0)return{key:n,namespaces:h};var v=n.split(o);(o!==c||o===c&&this.options.ns.indexOf(v[0])>-1)&&(h=v.shift()),n=v.join(c)}return typeof h=="string"&&(h=[h]),{key:n,namespaces:h}}},{key:"translate",value:function(n,s,o){var c=this;if(lc(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);var h=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,p=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,g=this.extractFromKey(n[n.length-1],s),b=g.key,v=g.namespaces,S=v[v.length-1],B=s.lng||this.language,T=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(B&&B.toLowerCase()==="cimode"){if(T){var C=s.nsSeparator||this.options.nsSeparator;return h?(L.res="".concat(S).concat(C).concat(b),L):"".concat(S).concat(C).concat(b)}return h?(L.res=b,L):b}var L=this.resolve(n,s),O=L&&L.res,I=L&&L.usedKey||b,V=L&&L.exactUsedKey||b,P=Object.prototype.toString.apply(O),G=["[object Number]","[object Function]","[object RegExp]"],W=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,J=!this.i18nFormat||this.i18nFormat.handleAsObject,re=typeof O!="string"&&typeof O!="boolean"&&typeof O!="number";if(J&&O&&re&&G.indexOf(P)<0&&!(typeof W=="string"&&P==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(I,O,hs(hs({},s),{},{ns:v})):"key '".concat(b," (").concat(this.language,")' returned an object instead of string.");return h?(L.res=j,L):j}if(p){var oe=P==="[object Array]",ge=oe?[]:{},he=oe?V:I;for(var ve in O)if(Object.prototype.hasOwnProperty.call(O,ve)){var Be="".concat(he).concat(p).concat(ve);ge[ve]=this.translate(Be,hs(hs({},s),{joinArrays:!1,ns:v})),ge[ve]===Be&&(ge[ve]=O[ve])}O=ge}}else if(J&&typeof W=="string"&&P==="[object Array]")O=O.join(W),O&&(O=this.extendTranslation(O,n,s,o));else{var te=!1,ue=!1,ne=s.count!==void 0&&typeof s.count!="string",Se=t.hasDefaultValue(s),z=ne?this.pluralResolver.getSuffix(B,s.count,s):"",Z=s["defaultValue".concat(z)]||s.defaultValue;!this.isValidLookup(O)&&Se&&(te=!0,O=Z),this.isValidLookup(O)||(ue=!0,O=b);var pe=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,We=pe&&ue?void 0:O,Ie=Se&&Z!==O&&this.options.updateMissing;if(ue||te||Ie){if(this.logger.log(Ie?"updateKey":"missingKey",B,S,b,Ie?Z:O),p){var Ue=this.resolve(b,hs(hs({},s),{},{keySeparator:!1}));Ue&&Ue.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Ee=[],Qe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Qe&&Qe[0])for(var Oe=0;Oe<Qe.length;Oe++)Ee.push(Qe[Oe]);else this.options.saveMissingTo==="all"?Ee=this.languageUtils.toResolveHierarchy(s.lng||this.language):Ee.push(s.lng||this.language);var et=function(pt,ei,gi){var At=Se&&gi!==O?gi:We;c.options.missingKeyHandler?c.options.missingKeyHandler(pt,S,ei,At,Ie,s):c.backendConnector&&c.backendConnector.saveMissing&&c.backendConnector.saveMissing(pt,S,ei,At,Ie,s),c.emit("missingKey",pt,S,ei,O)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ne?Ee.forEach(function(wt){c.pluralResolver.getSuffixes(wt,s).forEach(function(pt){et([wt],b+pt,s["defaultValue".concat(pt)]||Z)})}):et(Ee,b,Z))}O=this.extendTranslation(O,n,s,L,o),ue&&O===b&&this.options.appendNamespaceToMissingKey&&(O="".concat(S,":").concat(b)),(ue||te)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?O=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(S,":").concat(b):b,te?O:void 0):O=this.options.parseMissingKeyHandler(O))}return h?(L.res=O,L):O}},{key:"extendTranslation",value:function(n,s,o,c,h){var p=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,hs(hs({},this.options.interpolation.defaultVariables),o),c.usedLng,c.usedNS,c.usedKey,{resolved:c});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(hs(hs({},o),{interpolation:hs(hs({},this.options.interpolation),o.interpolation)}));var g=typeof n=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),b;if(g){var v=n.match(this.interpolator.nestingRegexp);b=v&&v.length}var S=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(S=hs(hs({},this.options.interpolation.defaultVariables),S)),n=this.interpolator.interpolate(n,S,o.lng||this.language,o),g){var B=n.match(this.interpolator.nestingRegexp),T=B&&B.length;b<T&&(o.nest=!1)}o.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var O=arguments.length,I=new Array(O),V=0;V<O;V++)I[V]=arguments[V];return h&&h[0]===I[0]&&!o.context?(p.logger.warn("It seems you are nesting recursively key: ".concat(I[0]," in key: ").concat(s[0])),null):p.translate.apply(p,I.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var C=o.postProcess||this.options.postProcess,L=typeof C=="string"?[C]:C;return n!=null&&L&&L.length&&o.applyPostProcessor!==!1&&(n=z_.handle(L,n,s,this.options&&this.options.postProcessPassResolved?hs({i18nResolved:c},o):o,this)),n}},{key:"resolve",value:function(n){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c,h,p,g,b;return typeof n=="string"&&(n=[n]),n.forEach(function(v){if(!s.isValidLookup(c)){var S=s.extractFromKey(v,o),B=S.key;h=B;var T=S.namespaces;s.options.fallbackNS&&(T=T.concat(s.options.fallbackNS));var C=o.count!==void 0&&typeof o.count!="string",L=C&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),O=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",I=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);T.forEach(function(V){s.isValidLookup(c)||(b=V,!ZS["".concat(I[0],"-").concat(V)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(b)&&(ZS["".concat(I[0],"-").concat(V)]=!0,s.logger.warn('key "'.concat(h,'" for languages "').concat(I.join(", "),`" won't get resolved as namespace "`).concat(b,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(function(P){if(!s.isValidLookup(c)){g=P;var G=[B];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(G,B,P,V,o);else{var W;C&&(W=s.pluralResolver.getSuffix(P,o.count,o));var J="".concat(s.options.pluralSeparator,"zero");if(C&&(G.push(B+W),L&&G.push(B+J)),O){var re="".concat(B).concat(s.options.contextSeparator).concat(o.context);G.push(re),C&&(G.push(re+W),L&&G.push(re+J))}}for(var j;j=G.pop();)s.isValidLookup(c)||(p=j,c=s.getResource(P,V,j,o))}}))})}}),{res:c,usedKey:h,exactUsedKey:p,usedLng:g,usedNS:b}}},{key:"isValidLookup",value:function(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}},{key:"getResource",value:function(n,s,o){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,s,o,c):this.resourceStore.getResource(n,s,o,c)}}],[{key:"hasDefaultValue",value:function(n){var s="defaultValue";for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&s===o.substring(0,s.length)&&n[o]!==void 0)return!0;return!1}}]),t}(dc);function Hv(r){return r.charAt(0).toUpperCase()+r.slice(1)}var KP=function(){function r(e){Wa(this,r),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=al.create("languageUtils")}return Ha(r,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var i=t.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var i=t.split("-");return this.formatLanguageCode(i[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var i=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(s){return s.toLowerCase()}):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),i.indexOf(n[1].toLowerCase())>-1&&(n[1]=Hv(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),i.indexOf(n[1].toLowerCase())>-1&&(n[1]=Hv(n[1].toLowerCase())),i.indexOf(n[2].toLowerCase())>-1&&(n[2]=Hv(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var i=this;if(!t)return null;var n;return t.forEach(function(s){if(!n){var o=i.formatLanguageCode(s);(!i.options.supportedLngs||i.isSupportedCode(o))&&(n=o)}}),!n&&this.options.supportedLngs&&t.forEach(function(s){if(!n){var o=i.getLanguagePartFromCode(s);if(i.isSupportedCode(o))return n=o;n=i.options.supportedLngs.find(function(c){if(c.indexOf(o)===0)return c})}}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}},{key:"getFallbackCodes",value:function(t,i){if(!t)return[];if(typeof t=="function"&&(t=t(i)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!i)return t.default||[];var n=t[i];return n||(n=t[this.getScriptPartFromCode(i)]),n||(n=t[this.formatLanguageCode(i)]),n||(n=t[this.getLanguagePartFromCode(i)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,i){var n=this,s=this.getFallbackCodes(i||this.options.fallbackLng||[],t),o=[],c=function(p){p&&(n.isSupportedCode(p)?o.push(p):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(p)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(t))):typeof t=="string"&&c(this.formatLanguageCode(t)),s.forEach(function(h){o.indexOf(h)<0&&c(n.formatLanguageCode(h))}),o}}]),r}(),QP=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],JP={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},ZP=["v1","v2","v3"],t1={zero:0,one:1,two:2,few:3,many:4,other:5};function eE(){var r={};return QP.forEach(function(e){e.lngs.forEach(function(t){r[t]={numbers:e.nr,plurals:JP[e.fc]}})}),r}var tE=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wa(this,r),this.languageUtils=e,this.options=t,this.logger=al.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=eE()}return Ha(r,[{key:"addRule",value:function(t,i){this.rules[t]=i}},{key:"getRule",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:i.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(t,i);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(function(s){return"".concat(i).concat(s)})}},{key:"getSuffixes",value:function(t){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,n);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,c){return t1[o]-t1[c]}).map(function(o){return"".concat(i.options.prepend).concat(o)}):s.numbers.map(function(o){return i.getSuffix(t,o,n)}):[]}},{key:"getSuffix",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,n);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(i)):this.getSuffixRetroCompatible(s,i):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,i){var n=this,s=t.noAbs?t.plurals(i):t.plurals(Math.abs(i)),o=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var c=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):c():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?c():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!ZP.includes(this.options.compatibilityJSON)}}]),r}();function i1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function so(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i1(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):i1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var iE=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wa(this,r),this.logger=al.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Ha(r,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var i=t.interpolation;this.escape=i.escape!==void 0?i.escape:HP,this.escapeValue=i.escapeValue!==void 0?i.escapeValue:!0,this.useRawValueToEscape=i.useRawValueToEscape!==void 0?i.useRawValueToEscape:!1,this.prefix=i.prefix?pf(i.prefix):i.prefixEscaped||"{{",this.suffix=i.suffix?pf(i.suffix):i.suffixEscaped||"}}",this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||",",this.unescapePrefix=i.unescapeSuffix?"":i.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":i.unescapeSuffix||"",this.nestingPrefix=i.nestingPrefix?pf(i.nestingPrefix):i.nestingPrefixEscaped||pf("$t("),this.nestingSuffix=i.nestingSuffix?pf(i.nestingSuffix):i.nestingSuffixEscaped||pf(")"),this.nestingOptionsSeparator=i.nestingOptionsSeparator?i.nestingOptionsSeparator:i.nestingOptionsSeparator||",",this.maxReplaces=i.maxReplaces?i.maxReplaces:1e3,this.alwaysFormat=i.alwaysFormat!==void 0?i.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var i="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(i,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,i,n,s){var o=this,c,h,p,g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function b(C){return C.replace(/\$/g,"$$$$")}var v=function(L){if(L.indexOf(o.formatSeparator)<0){var O=KS(i,g,L);return o.alwaysFormat?o.format(O,void 0,n,so(so(so({},s),i),{},{interpolationkey:L})):O}var I=L.split(o.formatSeparator),V=I.shift().trim(),P=I.join(o.formatSeparator).trim();return o.format(KS(i,g,V),P,n,so(so(so({},s),i),{},{interpolationkey:V}))};this.resetRegExp();var S=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,B=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,T=[{regex:this.regexpUnescape,safeValue:function(L){return b(L)}},{regex:this.regexp,safeValue:function(L){return o.escapeValue?b(o.escape(L)):b(L)}}];return T.forEach(function(C){for(p=0;c=C.regex.exec(t);){var L=c[1].trim();if(h=v(L),h===void 0)if(typeof S=="function"){var O=S(t,c,s);h=typeof O=="string"?O:""}else if(s&&s.hasOwnProperty(L))h="";else if(B){h=c[0];continue}else o.logger.warn("missed to pass in variable ".concat(L," for interpolating ").concat(t)),h="";else typeof h!="string"&&!o.useRawValueToEscape&&(h=qS(h));var I=C.safeValue(h);if(t=t.replace(c[0],I),B?(C.regex.lastIndex+=h.length,C.regex.lastIndex-=c[0].length):C.regex.lastIndex=0,p++,p>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,i){var n=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,c,h=so({},s);h.applyPostProcessor=!1,delete h.defaultValue;function p(S,B){var T=this.nestingOptionsSeparator;if(S.indexOf(T)<0)return S;var C=S.split(new RegExp("".concat(T,"[ ]*{"))),L="{".concat(C[1]);S=C[0],L=this.interpolate(L,h);var O=L.match(/'/g),I=L.match(/"/g);(O&&O.length%2===0&&!I||I.length%2!==0)&&(L=L.replace(/'/g,'"'));try{h=JSON.parse(L),B&&(h=so(so({},B),h))}catch(V){return this.logger.warn("failed parsing options string in nesting for key ".concat(S),V),"".concat(S).concat(T).concat(L)}return delete h.defaultValue,S}for(;o=this.nestingRegexp.exec(t);){var g=[],b=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var v=o[1].split(this.formatSeparator).map(function(S){return S.trim()});o[1]=v.shift(),g=v,b=!0}if(c=i(p.call(this,o[1].trim(),h),h),c&&o[0]===t&&typeof c!="string")return c;typeof c!="string"&&(c=qS(c)),c||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),c=""),b&&(c=g.reduce(function(S,B){return n.format(S,B,s.lng,so(so({},s),{},{interpolationkey:o[1].trim()}))},c.trim())),t=t.replace(o[0],c),this.regexp.lastIndex=0}return t}}]),r}();function r1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function ic(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r1(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):r1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function rE(r){var e=r.toLowerCase().trim(),t={};if(r.indexOf("(")>-1){var i=r.split("(");e=i[0].toLowerCase().trim();var n=i[1].substring(0,i[1].length-1);if(e==="currency"&&n.indexOf(":")<0)t.currency||(t.currency=n.trim());else if(e==="relativetime"&&n.indexOf(":")<0)t.range||(t.range=n.trim());else{var s=n.split(";");s.forEach(function(o){if(o){var c=o.split(":"),h=MP(c),p=h[0],g=h.slice(1),b=g.join(":").trim().replace(/^'+|'+$/g,"");t[p.trim()]||(t[p.trim()]=b),b==="false"&&(t[p.trim()]=!1),b==="true"&&(t[p.trim()]=!0),isNaN(b)||(t[p.trim()]=parseInt(b,10))}})}}return{formatName:e,formatOptions:t}}var nE=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wa(this,r),this.logger=al.create("formatter"),this.options=e,this.formats={number:function(i,n,s){return new Intl.NumberFormat(n,s).format(i)},currency:function(i,n,s){return new Intl.NumberFormat(n,ic(ic({},s),{},{style:"currency"})).format(i)},datetime:function(i,n,s){return new Intl.DateTimeFormat(n,ic({},s)).format(i)},relativetime:function(i,n,s){return new Intl.RelativeTimeFormat(n,ic({},s)).format(i,s.range||"day")},list:function(i,n,s){return new Intl.ListFormat(n,ic({},s)).format(i)}},this.init(e)}return Ha(r,[{key:"init",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},n=i.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(t,i){this.formats[t.toLowerCase().trim()]=i}},{key:"format",value:function(t,i,n,s){var o=this,c=i.split(this.formatSeparator),h=c.reduce(function(p,g){var b=rE(g),v=b.formatName,S=b.formatOptions;if(o.formats[v]){var B=p;try{var T=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},C=T.locale||T.lng||s.locale||s.lng||n;B=o.formats[v](p,C,ic(ic(ic({},S),s),T))}catch(L){o.logger.warn(L)}return B}else o.logger.warn("there was no format function for ".concat(v));return p},t);return h}}]),r}();function n1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function s1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n1(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):n1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function sE(r){var e=aE();return function(){var i=hl(r),n;if(e){var s=hl(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return ym(this,n)}}function aE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oE(r,e){r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)}var lE=function(r){cb(t,r);var e=sE(t);function t(i,n,s){var o,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Wa(this,t),o=e.call(this),hb&&dc.call(iu(o)),o.backend=i,o.store=n,o.services=s,o.languageUtils=s.languageUtils,o.options=c,o.logger=al.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=c.maxParallelReads||10,o.readingCalls=0,o.maxRetries=c.maxRetries>=0?c.maxRetries:5,o.retryTimeout=c.retryTimeout>=1?c.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,c.backend,c),o}return Ha(t,[{key:"queueLoad",value:function(n,s,o,c){var h=this,p={},g={},b={},v={};return n.forEach(function(S){var B=!0;s.forEach(function(T){var C="".concat(S,"|").concat(T);!o.reload&&h.store.hasResourceBundle(S,T)?h.state[C]=2:h.state[C]<0||(h.state[C]===1?g[C]===void 0&&(g[C]=!0):(h.state[C]=1,B=!1,g[C]===void 0&&(g[C]=!0),p[C]===void 0&&(p[C]=!0),v[T]===void 0&&(v[T]=!0)))}),B||(b[S]=!0)}),(Object.keys(p).length||Object.keys(g).length)&&this.queue.push({pending:g,pendingCount:Object.keys(g).length,loaded:{},errors:[],callback:c}),{toLoad:Object.keys(p),pending:Object.keys(g),toLoadLanguages:Object.keys(b),toLoadNamespaces:Object.keys(v)}}},{key:"loaded",value:function(n,s,o){var c=n.split("|"),h=c[0],p=c[1];s&&this.emit("failedLoading",h,p,s),o&&this.store.addResourceBundle(h,p,o),this.state[n]=s?-1:2;var g={};this.queue.forEach(function(b){zP(b.loaded,[h],p),oE(b,n),s&&b.errors.push(s),b.pendingCount===0&&!b.done&&(Object.keys(b.loaded).forEach(function(v){g[v]||(g[v]={});var S=b.loaded[v];S.length&&S.forEach(function(B){g[v][B]===void 0&&(g[v][B]=!0)})}),b.done=!0,b.errors.length?b.callback(b.errors):b.callback())}),this.emit("loaded",g),this.queue=this.queue.filter(function(b){return!b.done})}},{key:"read",value:function(n,s,o){var c=this,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,g=arguments.length>5?arguments[5]:void 0;if(!n.length)return g(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:s,fcName:o,tried:h,wait:p,callback:g});return}return this.readingCalls++,this.backend[o](n,s,function(b,v){if(c.readingCalls--,c.waitingReads.length>0){var S=c.waitingReads.shift();c.read(S.lng,S.ns,S.fcName,S.tried,S.wait,S.callback)}if(b&&v&&h<c.maxRetries){setTimeout(function(){c.read.call(c,n,s,o,h+1,p*2,g)},p);return}g(b,v)})}},{key:"prepareLoading",value:function(n,s){var o=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),h&&h();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof s=="string"&&(s=[s]);var p=this.queueLoad(n,s,c,h);if(!p.toLoad.length)return p.pending.length||h(),null;p.toLoad.forEach(function(g){o.loadOne(g)})}},{key:"load",value:function(n,s,o){this.prepareLoading(n,s,{},o)}},{key:"reload",value:function(n,s,o){this.prepareLoading(n,s,{reload:!0},o)}},{key:"loadOne",value:function(n){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=n.split("|"),h=c[0],p=c[1];this.read(h,p,"read",void 0,void 0,function(g,b){g&&s.logger.warn("".concat(o,"loading namespace ").concat(p," for language ").concat(h," failed"),g),!g&&b&&s.logger.log("".concat(o,"loaded namespace ").concat(p," for language ").concat(h),b),s.loaded(n,g,b)})}},{key:"saveMissing",value:function(n,s,o,c,h){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}o==null||o===""||(this.backend&&this.backend.create&&this.backend.create(n,s,o,c,null,s1(s1({},p),{},{isUpdate:h})),!(!n||!n[0])&&this.store.addResource(n[0],s,o,c))}}]),t}(dc);function uE(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(lc(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),lc(e[2])==="object"||lc(e[3])==="object"){var i=e[3]||e[2];Object.keys(i).forEach(function(n){t[n]=i[n]})}return t},interpolation:{escapeValue:!0,format:function(e,t,i,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function a1(r){return typeof r.ns=="string"&&(r.ns=[r.ns]),typeof r.fallbackLng=="string"&&(r.fallbackLng=[r.fallbackLng]),typeof r.fallbackNS=="string"&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r}function o1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Jo(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?o1(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):o1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function cE(r){var e=hE();return function(){var i=hl(r),n;if(e){var s=hl(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return ym(this,n)}}function hE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u0(){}function dE(r){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(r));e.forEach(function(t){typeof r[t]=="function"&&(r[t]=r[t].bind(r))})}var j0=function(r){cb(t,r);var e=cE(t);function t(){var i,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(Wa(this,t),i=e.call(this),hb&&dc.call(iu(i)),i.options=a1(n),i.services={},i.logger=al,i.modules={external:[]},dE(iu(i)),s&&!i.isInitialized&&!n.isClone){if(!i.options.initImmediate)return i.init(n,s),ym(i,iu(i));setTimeout(function(){i.init(n,s)},0)}return i}return Ha(t,[{key:"init",value:function(){var n=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var c=uE();this.options=Jo(Jo(Jo({},c),this.options),a1(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Jo(Jo({},c.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function h(L){return L?typeof L=="function"?new L:L:null}if(!this.options.isClone){this.modules.logger?al.init(h(this.modules.logger),this.options):al.init(null,this.options);var p;this.modules.formatter?p=this.modules.formatter:typeof Intl<"u"&&(p=nE);var g=new KP(this.options);this.store=new YP(this.options.resources,this.options);var b=this.services;b.logger=al,b.resourceStore=this.store,b.languageUtils=g,b.pluralResolver=new tE(g,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===c.interpolation.format)&&(b.formatter=h(p),b.formatter.init(b,this.options),this.options.interpolation.format=b.formatter.format.bind(b.formatter)),b.interpolator=new iE(this.options),b.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},b.backendConnector=new lE(h(this.modules.backend),b.resourceStore,b,this.options),b.backendConnector.on("*",function(L){for(var O=arguments.length,I=new Array(O>1?O-1:0),V=1;V<O;V++)I[V-1]=arguments[V];n.emit.apply(n,[L].concat(I))}),this.modules.languageDetector&&(b.languageDetector=h(this.modules.languageDetector),b.languageDetector.init(b,this.options.detection,this.options)),this.modules.i18nFormat&&(b.i18nFormat=h(this.modules.i18nFormat),b.i18nFormat.init&&b.i18nFormat.init(this)),this.translator=new e1(this.services,this.options),this.translator.on("*",function(L){for(var O=arguments.length,I=new Array(O>1?O-1:0),V=1;V<O;V++)I[V-1]=arguments[V];n.emit.apply(n,[L].concat(I))}),this.modules.external.forEach(function(L){L.init&&L.init(n)})}if(this.format=this.options.interpolation.format,o||(o=u0),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var v=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);v.length>0&&v[0]!=="dev"&&(this.options.lng=v[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var S=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];S.forEach(function(L){n[L]=function(){var O;return(O=n.store)[L].apply(O,arguments)}});var B=["addResource","addResources","addResourceBundle","removeResourceBundle"];B.forEach(function(L){n[L]=function(){var O;return(O=n.store)[L].apply(O,arguments),n}});var T=_g(),C=function(){var O=function(V,P){n.isInitialized&&!n.initializedStoreOnce&&n.logger.warn("init: i18next is already initialized. You should call init just once!"),n.isInitialized=!0,n.options.isClone||n.logger.log("initialized",n.options),n.emit("initialized",n.options),T.resolve(P),o(V,P)};if(n.languages&&n.options.compatibilityAPI!=="v1"&&!n.isInitialized)return O(null,n.t.bind(n));n.changeLanguage(n.options.lng,O)};return this.options.resources||!this.options.initImmediate?C():setTimeout(C,0),T}},{key:"loadResources",value:function(n){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u0,c=o,h=typeof n=="string"?n:this.language;if(typeof n=="function"&&(c=n),!this.options.resources||this.options.partialBundledLanguages){if(h&&h.toLowerCase()==="cimode")return c();var p=[],g=function(S){if(S){var B=s.services.languageUtils.toResolveHierarchy(S);B.forEach(function(T){p.indexOf(T)<0&&p.push(T)})}};if(h)g(h);else{var b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.forEach(function(v){return g(v)})}this.options.preload&&this.options.preload.forEach(function(v){return g(v)}),this.services.backendConnector.load(p,this.options.ns,function(v){!v&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),c(v)})}else c(null)}},{key:"reloadResources",value:function(n,s,o){var c=_g();return n||(n=this.languages),s||(s=this.options.ns),o||(o=u0),this.services.backendConnector.reload(n,s,function(h){c.resolve(),o(h)}),c}},{key:"use",value:function(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&z_.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}},{key:"setResolvedLanguage",value:function(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(n,s){var o=this;this.isLanguageChangingTo=n;var c=_g();this.emit("languageChanging",n);var h=function(v){o.language=v,o.languages=o.services.languageUtils.toResolveHierarchy(v),o.resolvedLanguage=void 0,o.setResolvedLanguage(v)},p=function(v,S){S?(h(S),o.translator.changeLanguage(S),o.isLanguageChangingTo=void 0,o.emit("languageChanged",S),o.logger.log("languageChanged",S)):o.isLanguageChangingTo=void 0,c.resolve(function(){return o.t.apply(o,arguments)}),s&&s(v,function(){return o.t.apply(o,arguments)})},g=function(v){!n&&!v&&o.services.languageDetector&&(v=[]);var S=typeof v=="string"?v:o.services.languageUtils.getBestMatchFromCodes(v);S&&(o.language||h(S),o.translator.language||o.translator.changeLanguage(S),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(S)),o.loadResources(S,function(B){p(B,S)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?g(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(g):g(n),c}},{key:"getFixedT",value:function(n,s,o){var c=this,h=function p(g,b){var v;if(lc(b)!=="object"){for(var S=arguments.length,B=new Array(S>2?S-2:0),T=2;T<S;T++)B[T-2]=arguments[T];v=c.options.overloadTranslationOptionHandler([g,b].concat(B))}else v=Jo({},b);v.lng=v.lng||p.lng,v.lngs=v.lngs||p.lngs,v.ns=v.ns||p.ns,v.keyPrefix=v.keyPrefix||o||p.keyPrefix;var C=c.options.keySeparator||".",L=v.keyPrefix?"".concat(v.keyPrefix).concat(C).concat(g):g;return c.t(L,v)};return typeof n=="string"?h.lng=n:h.lngs=n,h.ns=s,h.keyPrefix=o,h}},{key:"t",value:function(){var n;return this.translator&&(n=this.translator).translate.apply(n,arguments)}},{key:"exists",value:function(){var n;return this.translator&&(n=this.translator).exists.apply(n,arguments)}},{key:"setDefaultNamespace",value:function(n){this.options.defaultNS=n}},{key:"hasLoadedNamespace",value:function(n){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var c=this.resolvedLanguage||this.languages[0],h=this.options?this.options.fallbackLng:!1,p=this.languages[this.languages.length-1];if(c.toLowerCase()==="cimode")return!0;var g=function(S,B){var T=s.services.backendConnector.state["".concat(S,"|").concat(B)];return T===-1||T===2};if(o.precheck){var b=o.precheck(this,g);if(b!==void 0)return b}return!!(this.hasResourceBundle(c,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||g(c,n)&&(!h||g(p,n)))}},{key:"loadNamespaces",value:function(n,s){var o=this,c=_g();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(function(h){o.options.ns.indexOf(h)<0&&o.options.ns.push(h)}),this.loadResources(function(h){c.resolve(),s&&s(h)}),c):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(n,s){var o=_g();typeof n=="string"&&(n=[n]);var c=this.options.preload||[],h=n.filter(function(p){return c.indexOf(p)<0});return h.length?(this.options.preload=c.concat(h),this.loadResources(function(p){o.resolve(),s&&s(p)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return s.indexOf(this.services.languageUtils.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var n=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u0,c=Jo(Jo(Jo({},this.options),s),{isClone:!0}),h=new t(c);(s.debug!==void 0||s.prefix!==void 0)&&(h.logger=h.logger.clone(s));var p=["store","services","language"];return p.forEach(function(g){h[g]=n[g]}),h.services=Jo({},this.services),h.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h.translator=new e1(h.services,h.options),h.translator.on("*",function(g){for(var b=arguments.length,v=new Array(b>1?b-1:0),S=1;S<b;S++)v[S-1]=arguments[S];h.emit.apply(h,[g].concat(v))}),h.init(c,o),h.translator.options=h.options,h.translator.backendConnector.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(dc);yl(j0,"createInstance",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new j0(r,e)});var vs=j0.createInstance();vs.createInstance=j0.createInstance;vs.createInstance;vs.init;vs.loadResources;vs.reloadResources;vs.use;vs.changeLanguage;vs.getFixedT;vs.t;vs.exists;vs.setDefaultNamespace;vs.hasLoadedNamespace;vs.loadNamespaces;vs.loadLanguages;function st(r,e){if(r==null)return{};var t={},i=Object.keys(r),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}var fE=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,pE={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},gE=function(e){return pE[e]},mE=function(e){return e.replace(fE,gE)};function l1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function u1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l1(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):l1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Ow={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:mE},W_,yE=F.createContext();function bE(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ow=u1(u1({},Ow),r)}function vE(){return Ow}var wE=function(){function r(){Wa(this,r),this.usedNamespaces={}}return Ha(r,[{key:"addUsedNamespaces",value:function(t){var i=this;t.forEach(function(n){i.usedNamespaces[n]||(i.usedNamespaces[n]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),r}();function xE(r){W_=r}function SE(){return W_}var kE={type:"3rdParty",init:function(e){bE(e.options.react),xE(e)}};function _E(){if(console&&console.warn){for(var r,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(r=console).warn.apply(r,t)}}var c1={};function Mw(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];typeof e[0]=="string"&&c1[e[0]]||(typeof e[0]=="string"&&(c1[e[0]]=new Date),_E.apply(void 0,e))}function h1(r,e,t){r.loadNamespaces(e,function(){if(r.isInitialized)t();else{var i=function n(){setTimeout(function(){r.off("initialized",n)},0),t()};r.on("initialized",i)}})}function BE(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=e.languages[0],n=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(i.toLowerCase()==="cimode")return!0;var o=function(h,p){var g=e.services.backendConnector.state["".concat(h,"|").concat(p)];return g===-1||g===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(i,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(i,r)&&(!n||o(s,r)))}function TE(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return Mw("i18n.languages were undefined or empty",e.languages),!0;var i=e.options.ignoreJSONStructure!==void 0;return i?e.hasLoadedNamespace(r,{precheck:function(s,o){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,r))return!1}}):BE(r,e,t)}function CE(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i=[],n=!0,s=!1,o,c;try{for(t=t.call(r);!(n=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));n=!0);}catch(h){s=!0,c=h}finally{try{!n&&t.return!=null&&t.return()}finally{if(s)throw c}}return i}}function NE(r,e){return O_(r)||CE(r,e)||M_(r,e)||D_()}function d1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Gv(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d1(Object(t),!0).forEach(function(i){yl(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):d1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var PE=function(e,t){var i=F.useRef();return F.useEffect(function(){i.current=e},[e,t]),i.current};function Tt(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,i=F.useContext(yE)||{},n=i.i18n,s=i.defaultNS,o=t||n||SE();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new wE),!o){Mw("You will need to pass in an i18next instance by using initReactI18next");var c=function(re){return Array.isArray(re)?re[re.length-1]:re},h=[c,{},!1];return h.t=c,h.i18n={},h.ready=!1,h}o.options.react&&o.options.react.wait!==void 0&&Mw("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var p=Gv(Gv(Gv({},vE()),o.options.react),e),g=p.useSuspense,b=p.keyPrefix,v=s||o.options&&o.options.defaultNS;v=typeof v=="string"?[v]:v||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(v);var S=(o.isInitialized||o.initializedStoreOnce)&&v.every(function(J){return TE(J,o,p)});function B(){return o.getFixedT(null,p.nsMode==="fallback"?v:v[0],b)}var T=F.useState(B),C=NE(T,2),L=C[0],O=C[1],I=v.join(),V=PE(I),P=F.useRef(!0);F.useEffect(function(){var J=p.bindI18n,re=p.bindI18nStore;P.current=!0,!S&&!g&&h1(o,v,function(){P.current&&O(B)}),S&&V&&V!==I&&P.current&&O(B);function j(){P.current&&O(B)}return J&&o&&o.on(J,j),re&&o&&o.store.on(re,j),function(){P.current=!1,J&&o&&J.split(" ").forEach(function(oe){return o.off(oe,j)}),re&&o&&re.split(" ").forEach(function(oe){return o.store.off(oe,j)})}},[o,I]);var G=F.useRef(!0);F.useEffect(function(){P.current&&!G.current&&O(B),G.current=!1},[o,b]);var W=[L,o,S];if(W.t=L,W.i18n=o,W.ready=S,S||!S&&!g)return W;throw new Promise(function(J){h1(o,v,function(){J()})})}var H_=[],EE=H_.forEach,RE=H_.slice;function LE(r){return EE.call(RE.call(arguments,1),function(e){if(e)for(var t in e)r[t]===void 0&&(r[t]=e[t])}),r}var f1=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,IE=function(e,t,i){var n=i||{};n.path=n.path||"/";var s=encodeURIComponent(t),o="".concat(e,"=").concat(s);if(n.maxAge>0){var c=n.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(c))}if(n.domain){if(!f1.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(n.domain)}if(n.path){if(!f1.test(n.path))throw new TypeError("option path is invalid");o+="; Path=".concat(n.path)}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.sameSite){var h=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(h){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},p1={create:function(e,t,i,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+i*60*1e3)),n&&(s.domain=n),document.cookie=IE(e,encodeURIComponent(t),s)},read:function(e){for(var t="".concat(e,"="),i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},FE={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var i=p1.read(e.lookupCookie);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&p1.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},OE={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var n=i.substring(1),s=n.split("&"),o=0;o<s.length;o++){var c=s[o].indexOf("=");if(c>0){var h=s[o].substring(0,c);h===e.lookupQuerystring&&(t=s[o].substring(c+1))}}}return t}},Bg=null,g1=function(){if(Bg!==null)return Bg;try{Bg=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Bg=!1}return Bg},ME={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&g1()){var i=window.localStorage.getItem(e.lookupLocalStorage);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&g1()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Tg=null,m1=function(){if(Tg!==null)return Tg;try{Tg=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Tg=!1}return Tg},DE={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&m1()){var i=window.sessionStorage.getItem(e.lookupSessionStorage);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&m1()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},AE={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)t.push(navigator.languages[i]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},VE={name:"htmlTag",lookup:function(e){var t,i=e.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},zE={name:"path",lookup:function(e){var t;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof i[e.lookupFromPathIndex]!="string")return;t=i[e.lookupFromPathIndex].replace("/","")}else t=i[0].replace("/","")}return t}},WE={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,i=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};function HE(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var G_=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wa(this,r),this.type="languageDetector",this.detectors={},this.init(e,t)}return Ha(r,[{key:"init",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=LE(i,this.options||{},HE()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(FE),this.addDetector(OE),this.addDetector(ME),this.addDetector(DE),this.addDetector(AE),this.addDetector(VE),this.addDetector(zE),this.addDetector(WE)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var i=this;t||(t=this.options.order);var n=[];return t.forEach(function(s){if(i.detectors[s]){var o=i.detectors[s].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(t,i){var n=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||i.forEach(function(s){n.detectors[s]&&n.detectors[s].cacheUserLanguage(t,n.options)}))}}]),r}();G_.type="languageDetector";const GE={en:{translation:{help:{document:{new:"Generates a new score",open:"Opens a score from your compute",info:"Score information",undo:"Undo the last action",redo:"Redo the last action",print:"Prints the score",export:"Exports the score",tempo:"Changes the tempo"},basic:{mouse_select:"Use your mouse to select a note or a string",arrow_keys:"You can also use your arrow keys to move between beats and strings",create_note:"Use your numpad to create or change a note at the given fret",delete:"Press 'delete' to remove a selected note"},duration:{tie:"Liga a nota at a prxima"},effects:{palm_mute:"Place the side of your picking hand over the string, creating a muffled sound",bend_pre:"Bend starting position, before the string is plucked",bend:"Main bend movement",bend_release:"How the bend should be released after the main bend",slide_in:"Slide before the note is executed, from below",slide:"Slide between two notes",slide_out:"Slide after the note is executed, going up",accentuated:"Note should be played with an accentuation",accentuated_heavy:"Note should be played with a strong accentuation",let_ring:"Let the note ring without atenuating the sound",ghost_note:"It's a note with rhythmic function only, without a discerning tone. Can be skipped",dead_note:"Place your fret hand over the string, without pressing much, and strum it",tap:"Use your strumming hand to 'tap' at the note on the fretboard",hammer_pull:"Use your fret hand to generate a sound, without strumming",staccato:"Play the note by half the normal duration and pause during the other half"},beat:{text:"Sets a text above the beat. Can be used for lyrics or instructions on how to play",fermata:"Indicates a brief pause",upstroke:"The strumming should be from the bottom to the top",downstroke:"The strumming should be from the top to the bottom",open_repeat:"Start a repetition at the current bar",close_repeat:"Ends a repetition at the current bar"},harmonic:{main:"Opens the harmonic menu",natural:"Place your right finger on the fret while the string vibrates",artificial:"Touch your strumming hand slightly on the string as you play it",pinch:"Use your strumming hand to slightly pinch the string, 12 frets above the one held with your other hand",tap:"Use your strumming hand to tap the string on the guitar, 12 frets above the one held with your other hand",semi:"Similar to artifical, but touch your strumming hand very slightly, atenuating less the main harmonic",feedback:"Use your amplifier output to create a feedback loop with your guitar"},dynamic:{fff:"Very very lound",ff:"Very loud",f:"Loud",mf:"Moderately loud",mp:"Moderately quiet",p:"Quiet",pp:"Very quiet",ppp:"Very very quiet"}},shortcuts:{title:"Shortcuts Information",set_fret:"Set fret",set_fret_shortcut:"Numpad",remove_note:"Remove Note",remove_note_shortcut:"Delete",undo:"Undo",undo_shortcut:"Ctrl + Z",redo:"Redo",redo_shortcut:"Ctrl + Y",move_cursor_left:"Move cursor Left",move_cursor_left_shortcut:"Left Arrow",move_cursor_right:"Move cursor Right",move_cursor_right_shortcut:"Right Arrow",move_cursor_up:"Move cursor up",move_cursor_up_shortcut:"Up Arrow",move_cursor_down:"Move cursor down",move_cursor_down_shortcut:"Down Arrow",move_cursor_next_bar:"Move cursor next bar",move_cursor_next_bar_shortcut:"Ctrl + Right",move_cursor_previous_bar:"Move cursor previous bar",move_cursor_previous_bar_shortcut:"Ctrl + Left"}}},pt:{translation:{help:{document:{new:"Gera uma partitura nova",open:"Abra uma partitura do seu computador",info:"Informaes sobre a partitura",undo:"Desfaz a ltima ao",redo:"Refaz a ltima ao",print:"Imprime a partitura",export:"Export a partitura",tempo:"Altera o tempo da partitura"},basic:{mouse_select:"Use seu mouse para selecionar uma nota ou corda",arrow_keys:"Use as setas do teclado para mover entre notas e cordas",create_note:"Use os nmeros do teclado para criar ou alterar a casa de uma nota",delete:"Pressione 'delete' para remover a nota selecionada"},duration:{tie:"Ties the selected note to the next"},dynamic:{fff:"Extremamente forte",ff:"Muito forte",f:"Forte",mf:"Meio forte",mp:"Meio suave",p:"Suave",pp:"Muito suave",ppp:"Extremamente suave"},effects:{palm_mute:"Encoste a palma da mo na corda enquanto ela  tocada, gerando um tom abafado",bend_pre:"Posio da corda verticalmente antes dela ser tocada",bend:"Movimento vertical da corda no brao da guitarra enquanto ela  precionada",bend_release:"Retorno da corda a posio original",slide_in:"Slide antes da nota ser tocada, de baixo",slide:"Slide entre duas notas",slide_out:"Slide depois da nota ser tocada, para cima",accentuated:"A nota deve ser tocada com nfase",accentuated_heavy:"A nota deve ser tocada com muita nfase",let_ring:"Deixe a nota reproduzir sem silenci-la",ghost_note:" uma nota ritmica e sem um tom discernvel. Pode no ser tocada.",dead_note:"Posicione sua mo esquerda sobre a corda mas sem precionar muito, e toque a corda com a mo direita",tap:"Use sua mao direita para pressionar a nota no brao do instrumento",hammer_pull:"Gere o som da nota apenas com a mo esquerda",staccato:"Toque durante metade do tempo indicado e pause na segunda metade"},beat:{text:"Adiciona um texto sobre a batida. Pode ser utilizado para letras ou instrues",fermata:"Indica uma breve pausa",upstroke:"As cordas devem ser tocadas de baixo para cima",downstroke:"As cordas devem ser tocadas de cima para baixo",open_repeat:"Inicia uma repetio",close_repeat:"Termina uma repetio"},harmonic:{main:"Abre as opes de harmnica",natural:"Encoste o dedo da mo direita levemente na corda enquanto ela vibra.",artificial:"Ao tocar a corda, encoste simultaneamente a mo direita na corda.",pinch:"Use a mo direita para dar um 'beliso' na corda, 12 casas acima da que est sendo precionada",tap:"Use a mo direita para pressionar a corda no brao da guitarra, 12 casas acima da que est sendo precionada",semi:"Similar ao artificial, mas se encosta a mo direita muito levemente, atenuando menos a harmnica principal",feedback:"Utiliza-se a sada do amplificador para gerar uma ressonncia com a corda que est sendo tocada"}},shortcuts:{title:"Atalhos do teclado",set_fret:"Alterar casa da nota",set_fret_shortcut:"Teclado numrico",remove_note:"Remover nota",remove_note_shortcut:"Boto Delete",undo:"Desfazer",undo_shortcut:"Ctrl + Z",redo:"Refazer",redo_shortcut:"Ctrl + Y",move_cursor_left:"Mover cursor para esquerda",move_cursor_left_shortcut:"Seta para esquerda",move_cursor_right:"Mover cursor para direita",move_cursor_right_shortcut:"Seta para direita",move_cursor_up:"Mover cursor para cima",move_cursor_up_shortcut:"Seta para cima",move_cursor_down:"Mover cursor para baixo",move_cursor_down_shortcut:"Seta para baixo",move_cursor_next_bar:"Mover cursor para prxima barra",move_cursor_next_bar_shortcut:"Ctrl + Seta para direita",move_cursor_previous_bar:"Mover cursor para a barra anterior",move_cursor_previous_bar_shortcut:"Ctrl + Seta para esquerda"},"How long the note should be played":"Por quanto tempo a nota deve ser tocada","How strong the note should be played":"Quo forte a nota deve ser tocada","Getting started":"Bsico",Accentuation:"Acentuao",Harmonics:"Harmnica","Natural Harmonic":"Harmnica Natural","Artificial Harmonic":"Harmnica Artificial","Pinch Harmonic":"Harmnica Pinch","Tap Harmonic":"Harmnica Tap","Semi Harmonic":"Harmnica Semi","Feedback Harmonic":"Harmnica Feedback",Upstroke:"Toca para cima",Downstroke:"Toca para baixo","Accentuated Note":"Nota acentuada","Heavy Accentuated Note":"Nota muito acentuada",Chord:"Acorde","Chord Name":"Nome do acorde",Document:"Documento",Effects:"Efeitos",Beat:"Batida",Duration:"Durao",Dynamics:"Dinmica","New File":"Novo arquivo","Open File":"Abrir arquivo","Score Information":"Informaes da partitura",Undo:"Desfazer",Redo:"Refazer",Print:"Imprimir",Download:"Exportar","Set text":"Mudar texto","Open Repeat":"Iniciar Repetio","Close Repeat":"Terminar Repetio",Whole:"Semibreve",Half:"Mnima",Quarter:"Semnima",Eighth:"Colcheia",Sixteenth:"Semicolcheia","Thirty-Second":"Fusa","Sixty-Fourth":"Semifusa","Tied Note":"Nota Ligada","Keyboard Shortcuts":"Atalhos do teclado","Dark mode":"Modo escuro",Language:"Idioma",Edit:"Editar",Delete:"Deletar","Shortcuts Information":"Informaes dos atalhos","Remove note":"Remover nota","Move cursor up":"Mover cursor para cima","Move cursor down":"Mover cursor para baixo","Move cursor next bar":"Mover cursor para o prximo compasso","Move cursor previous bar":"Mover cursor para o compasso anterior",Metronome:"Metrnomo",Repeat:"Repetir","Number of repetitions":"Nmero de repeties",Title:"Ttulo",Subtitle:"Subttulo",Artist:"Artista",Album:"lbum","Tab Creator":"Criador da partitura",Comments:"Comentrios",Composer:"Compositor",Save:"Salvar",Cancel:"Cancelar","Edit Track":"Editar faixa","New Track":"Nova faixa","Track name":"Nome da faixa","Tuning Preset":"Afinao",Capo:"Capo","Palm Mute":"Nota Abafada","P.M":"N.A","Let Ring":"Deixar Soar","L.R":"D.S",Text:"Texto",Help:"Ajuda",Basics:"Bsico","Set tempo":"Tempo"}}},UE={};vs.use(G_).use(kE).init({resources:GE,detection:UE,fallbackLng:"en",interpolation:{escapeValue:!1}});const Qg={black:"#000",white:"#fff"},gf={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},mf={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},yf={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},bf={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},vf={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Cg={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},$E={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function D(){return D=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},D.apply(this,arguments)}function U_(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var jE=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,YE=U_(function(r){return jE.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91});function qE(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function XE(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var KE=function(){function r(t){var i=this;this._insertTag=function(n){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(n,s),i.tags.push(n)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(XE(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=qE(n);try{s.insertRule(i,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},r}(),Zn="-ms-",Y0="-moz-",zi="-webkit-",$_="comm",hx="rule",dx="decl",QE="@import",j_="@keyframes",JE=Math.abs,db=String.fromCharCode,ZE=Object.assign;function eR(r,e){return(((e<<2^Is(r,0))<<2^Is(r,1))<<2^Is(r,2))<<2^Is(r,3)}function Y_(r){return r.trim()}function tR(r,e){return(r=e.exec(r))?r[0]:r}function qi(r,e,t){return r.replace(e,t)}function Dw(r,e){return r.indexOf(e)}function Is(r,e){return r.charCodeAt(e)|0}function Jg(r,e,t){return r.slice(e,t)}function tl(r){return r.length}function fx(r){return r.length}function c0(r,e){return e.push(r),r}function iR(r,e){return r.map(e).join("")}var fb=1,Rf=1,q_=0,Ws=0,fn=0,Gf="";function pb(r,e,t,i,n,s,o){return{value:r,root:e,parent:t,type:i,props:n,children:s,line:fb,column:Rf,length:o,return:""}}function Ng(r,e){return ZE(pb("",null,null,"",null,null,0),r,{length:-r.length},e)}function rR(){return fn}function nR(){return fn=Ws>0?Is(Gf,--Ws):0,Rf--,fn===10&&(Rf=1,fb--),fn}function ha(){return fn=Ws<q_?Is(Gf,Ws++):0,Rf++,fn===10&&(Rf=1,fb++),fn}function ol(){return Is(Gf,Ws)}function O0(){return Ws}function bm(r,e){return Jg(Gf,r,e)}function Zg(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function X_(r){return fb=Rf=1,q_=tl(Gf=r),Ws=0,[]}function K_(r){return Gf="",r}function M0(r){return Y_(bm(Ws-1,Aw(r===91?r+2:r===40?r+1:r)))}function sR(r){for(;(fn=ol())&&fn<33;)ha();return Zg(r)>2||Zg(fn)>3?"":" "}function aR(r,e){for(;--e&&ha()&&!(fn<48||fn>102||fn>57&&fn<65||fn>70&&fn<97););return bm(r,O0()+(e<6&&ol()==32&&ha()==32))}function Aw(r){for(;ha();)switch(fn){case r:return Ws;case 34:case 39:r!==34&&r!==39&&Aw(fn);break;case 40:r===41&&Aw(r);break;case 92:ha();break}return Ws}function oR(r,e){for(;ha()&&r+fn!==57;)if(r+fn===84&&ol()===47)break;return"/*"+bm(e,Ws-1)+"*"+db(r===47?r:ha())}function lR(r){for(;!Zg(ol());)ha();return bm(r,Ws)}function uR(r){return K_(D0("",null,null,null,[""],r=X_(r),0,[0],r))}function D0(r,e,t,i,n,s,o,c,h){for(var p=0,g=0,b=o,v=0,S=0,B=0,T=1,C=1,L=1,O=0,I="",V=n,P=s,G=i,W=I;C;)switch(B=O,O=ha()){case 40:if(B!=108&&W.charCodeAt(b-1)==58){Dw(W+=qi(M0(O),"&","&\f"),"&\f")!=-1&&(L=-1);break}case 34:case 39:case 91:W+=M0(O);break;case 9:case 10:case 13:case 32:W+=sR(B);break;case 92:W+=aR(O0()-1,7);continue;case 47:switch(ol()){case 42:case 47:c0(cR(oR(ha(),O0()),e,t),h);break;default:W+="/"}break;case 123*T:c[p++]=tl(W)*L;case 125*T:case 59:case 0:switch(O){case 0:case 125:C=0;case 59+g:S>0&&tl(W)-b&&c0(S>32?b1(W+";",i,t,b-1):b1(qi(W," ","")+";",i,t,b-2),h);break;case 59:W+=";";default:if(c0(G=y1(W,e,t,p,g,n,c,I,V=[],P=[],b),s),O===123)if(g===0)D0(W,e,G,G,V,s,b,c,P);else switch(v){case 100:case 109:case 115:D0(r,G,G,i&&c0(y1(r,G,G,0,0,n,c,I,n,V=[],b),P),n,P,b,c,i?V:P);break;default:D0(W,G,G,G,[""],P,0,c,P)}}p=g=S=0,T=L=1,I=W="",b=o;break;case 58:b=1+tl(W),S=B;default:if(T<1){if(O==123)--T;else if(O==125&&T++==0&&nR()==125)continue}switch(W+=db(O),O*T){case 38:L=g>0?1:(W+="\f",-1);break;case 44:c[p++]=(tl(W)-1)*L,L=1;break;case 64:ol()===45&&(W+=M0(ha())),v=ol(),g=b=tl(I=W+=lR(O0())),O++;break;case 45:B===45&&tl(W)==2&&(T=0)}}return s}function y1(r,e,t,i,n,s,o,c,h,p,g){for(var b=n-1,v=n===0?s:[""],S=fx(v),B=0,T=0,C=0;B<i;++B)for(var L=0,O=Jg(r,b+1,b=JE(T=o[B])),I=r;L<S;++L)(I=Y_(T>0?v[L]+" "+O:qi(O,/&\f/g,v[L])))&&(h[C++]=I);return pb(r,e,t,n===0?hx:c,h,p,g)}function cR(r,e,t){return pb(r,e,t,$_,db(rR()),Jg(r,2,-2),0)}function b1(r,e,t,i){return pb(r,e,t,dx,Jg(r,0,i),Jg(r,i+1,-1),i)}function Q_(r,e){switch(eR(r,e)){case 5103:return zi+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return zi+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return zi+r+Y0+r+Zn+r+r;case 6828:case 4268:return zi+r+Zn+r+r;case 6165:return zi+r+Zn+"flex-"+r+r;case 5187:return zi+r+qi(r,/(\w+).+(:[^]+)/,zi+"box-$1$2"+Zn+"flex-$1$2")+r;case 5443:return zi+r+Zn+"flex-item-"+qi(r,/flex-|-self/,"")+r;case 4675:return zi+r+Zn+"flex-line-pack"+qi(r,/align-content|flex-|-self/,"")+r;case 5548:return zi+r+Zn+qi(r,"shrink","negative")+r;case 5292:return zi+r+Zn+qi(r,"basis","preferred-size")+r;case 6060:return zi+"box-"+qi(r,"-grow","")+zi+r+Zn+qi(r,"grow","positive")+r;case 4554:return zi+qi(r,/([^-])(transform)/g,"$1"+zi+"$2")+r;case 6187:return qi(qi(qi(r,/(zoom-|grab)/,zi+"$1"),/(image-set)/,zi+"$1"),r,"")+r;case 5495:case 3959:return qi(r,/(image-set\([^]*)/,zi+"$1$`$1");case 4968:return qi(qi(r,/(.+:)(flex-)?(.*)/,zi+"box-pack:$3"+Zn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+zi+r+r;case 4095:case 3583:case 4068:case 2532:return qi(r,/(.+)-inline(.+)/,zi+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(tl(r)-1-e>6)switch(Is(r,e+1)){case 109:if(Is(r,e+4)!==45)break;case 102:return qi(r,/(.+:)(.+)-([^]+)/,"$1"+zi+"$2-$3$1"+Y0+(Is(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~Dw(r,"stretch")?Q_(qi(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(Is(r,e+1)!==115)break;case 6444:switch(Is(r,tl(r)-3-(~Dw(r,"!important")&&10))){case 107:return qi(r,":",":"+zi)+r;case 101:return qi(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+zi+(Is(r,14)===45?"inline-":"")+"box$3$1"+zi+"$2$3$1"+Zn+"$2box$3")+r}break;case 5936:switch(Is(r,e+11)){case 114:return zi+r+Zn+qi(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return zi+r+Zn+qi(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return zi+r+Zn+qi(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return zi+r+Zn+r+r}return r}function Ef(r,e){for(var t="",i=fx(r),n=0;n<i;n++)t+=e(r[n],n,r,e)||"";return t}function hR(r,e,t,i){switch(r.type){case QE:case dx:return r.return=r.return||r.value;case $_:return"";case j_:return r.return=r.value+"{"+Ef(r.children,i)+"}";case hx:r.value=r.props.join(",")}return tl(t=Ef(r.children,i))?r.return=r.value+"{"+t+"}":""}function dR(r){var e=fx(r);return function(t,i,n,s){for(var o="",c=0;c<e;c++)o+=r[c](t,i,n,s)||"";return o}}function fR(r){return function(e){e.root||(e=e.return)&&r(e)}}function pR(r,e,t,i){if(r.length>-1&&!r.return)switch(r.type){case dx:r.return=Q_(r.value,r.length);break;case j_:return Ef([Ng(r,{value:qi(r.value,"@","@"+zi)})],i);case hx:if(r.length)return iR(r.props,function(n){switch(tR(n,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ef([Ng(r,{props:[qi(n,/:(read-\w+)/,":"+Y0+"$1")]})],i);case"::placeholder":return Ef([Ng(r,{props:[qi(n,/:(plac\w+)/,":"+zi+"input-$1")]}),Ng(r,{props:[qi(n,/:(plac\w+)/,":"+Y0+"$1")]}),Ng(r,{props:[qi(n,/:(plac\w+)/,Zn+"input-$1")]})],i)}return""})}}var gR=function(e,t,i){for(var n=0,s=0;n=s,s=ol(),n===38&&s===12&&(t[i]=1),!Zg(s);)ha();return bm(e,Ws)},mR=function(e,t){var i=-1,n=44;do switch(Zg(n)){case 0:n===38&&ol()===12&&(t[i]=1),e[i]+=gR(Ws-1,t,i);break;case 2:e[i]+=M0(n);break;case 4:if(n===44){e[++i]=ol()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=db(n)}while(n=ha());return e},yR=function(e,t){return K_(mR(X_(e),t))},v1=new WeakMap,bR=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,n=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!v1.get(i))&&!n){v1.set(e,!0);for(var s=[],o=yR(t,s),c=i.props,h=0,p=0;h<o.length;h++)for(var g=0;g<c.length;g++,p++)e.props[p]=s[h]?o[h].replace(/&\f/g,c[g]):c[g]+" "+o[h]}}},vR=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}},wR=[pR],xR=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(T){var C=T.getAttribute("data-emotion");C.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var n=e.stylisPlugins||wR,s={},o,c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(T){for(var C=T.getAttribute("data-emotion").split(" "),L=1;L<C.length;L++)s[C[L]]=!0;c.push(T)});var h,p=[bR,vR];{var g,b=[hR,fR(function(T){g.insert(T)})],v=dR(p.concat(n,b)),S=function(C){return Ef(uR(C),v)};h=function(C,L,O,I){g=O,S(C?C+"{"+L.styles+"}":L.styles),I&&(B.inserted[L.name]=!0)}}var B={key:t,sheet:new KE({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:h};return B.sheet.hydrate(c),B},Uv={exports:{}},Ui={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function SR(){if(w1)return Ui;w1=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,n=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,o=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,g=r?Symbol.for("react.forward_ref"):60112,b=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,S=r?Symbol.for("react.memo"):60115,B=r?Symbol.for("react.lazy"):60116,T=r?Symbol.for("react.block"):60121,C=r?Symbol.for("react.fundamental"):60117,L=r?Symbol.for("react.responder"):60118,O=r?Symbol.for("react.scope"):60119;function I(P){if(typeof P=="object"&&P!==null){var G=P.$$typeof;switch(G){case e:switch(P=P.type,P){case h:case p:case i:case s:case n:case b:return P;default:switch(P=P&&P.$$typeof,P){case c:case g:case B:case S:case o:return P;default:return G}}case t:return G}}}function V(P){return I(P)===p}return Ui.AsyncMode=h,Ui.ConcurrentMode=p,Ui.ContextConsumer=c,Ui.ContextProvider=o,Ui.Element=e,Ui.ForwardRef=g,Ui.Fragment=i,Ui.Lazy=B,Ui.Memo=S,Ui.Portal=t,Ui.Profiler=s,Ui.StrictMode=n,Ui.Suspense=b,Ui.isAsyncMode=function(P){return V(P)||I(P)===h},Ui.isConcurrentMode=V,Ui.isContextConsumer=function(P){return I(P)===c},Ui.isContextProvider=function(P){return I(P)===o},Ui.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},Ui.isForwardRef=function(P){return I(P)===g},Ui.isFragment=function(P){return I(P)===i},Ui.isLazy=function(P){return I(P)===B},Ui.isMemo=function(P){return I(P)===S},Ui.isPortal=function(P){return I(P)===t},Ui.isProfiler=function(P){return I(P)===s},Ui.isStrictMode=function(P){return I(P)===n},Ui.isSuspense=function(P){return I(P)===b},Ui.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===i||P===p||P===s||P===n||P===b||P===v||typeof P=="object"&&P!==null&&(P.$$typeof===B||P.$$typeof===S||P.$$typeof===o||P.$$typeof===c||P.$$typeof===g||P.$$typeof===C||P.$$typeof===L||P.$$typeof===O||P.$$typeof===T)},Ui.typeOf=I,Ui}var x1;function kR(){return x1||(x1=1,Uv.exports=SR()),Uv.exports}var $v,S1;function _R(){if(S1)return $v;S1=1;var r=kR(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[r.ForwardRef]=i,s[r.Memo]=n;function o(B){return r.isMemo(B)?n:s[B.$$typeof]||e}var c=Object.defineProperty,h=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,v=Object.prototype;function S(B,T,C){if(typeof T!="string"){if(v){var L=b(T);L&&L!==v&&S(B,L,C)}var O=h(T);p&&(O=O.concat(p(T)));for(var I=o(B),V=o(T),P=0;P<O.length;++P){var G=O[P];if(!t[G]&&!(C&&C[G])&&!(V&&V[G])&&!(I&&I[G])){var W=g(T,G);try{c(B,G,W)}catch{}}}}return B}return $v=S,$v}_R();var BR=!0;function TR(r,e,t){var i="";return t.split(" ").forEach(function(n){r[n]!==void 0?e.push(r[n]+";"):i+=n+" "}),i}var J_=function(e,t,i){var n=e.key+"-"+t.name;(i===!1||BR===!1)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},Z_=function(e,t,i){J_(e,t,i);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+n:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function CR(r){for(var e=0,t,i=0,n=r.length;n>=4;++i,n-=4)t=r.charCodeAt(i)&255|(r.charCodeAt(++i)&255)<<8|(r.charCodeAt(++i)&255)<<16|(r.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(n){case 3:e^=(r.charCodeAt(i+2)&255)<<16;case 2:e^=(r.charCodeAt(i+1)&255)<<8;case 1:e^=r.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var NR={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},PR=/[A-Z]|^ms/g,ER=/_EMO_([^_]+?)_([^]*?)_EMO_/g,eB=function(e){return e.charCodeAt(1)===45},k1=function(e){return e!=null&&typeof e!="boolean"},jv=U_(function(r){return eB(r)?r:r.replace(PR,"-$&").toLowerCase()}),_1=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(ER,function(i,n,s){return il={name:n,styles:s,next:il},n})}return NR[e]!==1&&!eB(e)&&typeof t=="number"&&t!==0?t+"px":t};function em(r,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return il={name:t.name,styles:t.styles,next:il},t.name;if(t.styles!==void 0){var i=t.next;if(i!==void 0)for(;i!==void 0;)il={name:i.name,styles:i.styles,next:il},i=i.next;var n=t.styles+";";return n}return RR(r,e,t)}case"function":{if(r!==void 0){var s=il,o=t(r);return il=s,em(r,e,o)}break}}if(e==null)return t;var c=e[t];return c!==void 0?c:t}function RR(r,e,t){var i="";if(Array.isArray(t))for(var n=0;n<t.length;n++)i+=em(r,e,t[n])+";";else for(var s in t){var o=t[s];if(typeof o!="object")e!=null&&e[o]!==void 0?i+=s+"{"+e[o]+"}":k1(o)&&(i+=jv(s)+":"+_1(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var c=0;c<o.length;c++)k1(o[c])&&(i+=jv(s)+":"+_1(s,o[c])+";");else{var h=em(r,e,o);switch(s){case"animation":case"animationName":{i+=jv(s)+":"+h+";";break}default:i+=s+"{"+h+"}"}}}return i}var B1=/label:\s*([^\s;\n{]+)\s*(;|$)/g,il,px=function(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,s="";il=void 0;var o=e[0];o==null||o.raw===void 0?(n=!1,s+=em(i,t,o)):s+=o[0];for(var c=1;c<e.length;c++)s+=em(i,t,e[c]),n&&(s+=o[c]);B1.lastIndex=0;for(var h="",p;(p=B1.exec(s))!==null;)h+="-"+p[1];var g=CR(s)+h;return{name:g,styles:s,next:il}},LR=function(e){return e()},tB=Fw.useInsertionEffect?Fw.useInsertionEffect:!1,IR=tB||LR,T1=tB||F.useLayoutEffect,iB=F.createContext(typeof HTMLElement<"u"?xR({key:"css"}):null);iB.Provider;var rB=function(e){return F.forwardRef(function(t,i){var n=F.useContext(iB);return e(t,n,i)})},gx=F.createContext({}),FR=rB(function(r,e){var t=r.styles,i=px([t],void 0,F.useContext(gx)),n=F.useRef();return T1(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),c=!1,h=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),h!==null&&(c=!0,h.setAttribute("data-emotion",s),o.hydrate([h])),n.current=[o,c],function(){o.flush()}},[e]),T1(function(){var s=n.current,o=s[0],c=s[1];if(c){s[1]=!1;return}if(i.next!==void 0&&Z_(e,i.next,!0),o.tags.length){var h=o.tags[o.tags.length-1].nextElementSibling;o.before=h,o.flush()}e.insert("",i,o,!1)},[e,i.name]),null});function OR(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return px(e)}var mx=function(){var e=OR.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},MR=YE,DR=function(e){return e!=="theme"},C1=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?MR:DR},N1=function(e,t,i){var n;if(t){var s=t.shouldForwardProp;n=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof n!="function"&&i&&(n=e.__emotion_forwardProp),n},AR=function(e){var t=e.cache,i=e.serialized,n=e.isStringTag;return J_(t,i,n),IR(function(){return Z_(t,i,n)}),null},VR=function r(e,t){var i=e.__emotion_real===e,n=i&&e.__emotion_base||e,s,o;t!==void 0&&(s=t.label,o=t.target);var c=N1(e,t,i),h=c||C1(n),p=!h("as");return function(){var g=arguments,b=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&b.push("label:"+s+";"),g[0]==null||g[0].raw===void 0)b.push.apply(b,g);else{b.push(g[0][0]);for(var v=g.length,S=1;S<v;S++)b.push(g[S],g[0][S])}var B=rB(function(T,C,L){var O=p&&T.as||n,I="",V=[],P=T;if(T.theme==null){P={};for(var G in T)P[G]=T[G];P.theme=F.useContext(gx)}typeof T.className=="string"?I=TR(C.registered,V,T.className):T.className!=null&&(I=T.className+" ");var W=px(b.concat(V),C.registered,P);I+=C.key+"-"+W.name,o!==void 0&&(I+=" "+o);var J=p&&c===void 0?C1(O):h,re={};for(var j in T)p&&j==="as"||J(j)&&(re[j]=T[j]);return re.className=I,re.ref=L,F.createElement(F.Fragment,null,F.createElement(AR,{cache:C,serialized:W,isStringTag:typeof O=="string"}),F.createElement(O,re))});return B.displayName=s!==void 0?s:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",B.defaultProps=e.defaultProps,B.__emotion_real=B,B.__emotion_base=n,B.__emotion_styles=b,B.__emotion_forwardProp=c,Object.defineProperty(B,"toString",{value:function(){return"."+o}}),B.withComponent=function(T,C){return r(T,D({},t,C,{shouldForwardProp:N1(B,C,!0)})).apply(void 0,b)},B}},zR=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],fc=VR.bind();zR.forEach(function(r){fc[r]=fc(r)});function WR(r){return r==null||Object.keys(r).length===0}function HR(r){const{styles:e,defaultTheme:t={}}=r,i=typeof e=="function"?n=>e(WR(n)?t:n):e;return w.jsx(FR,{styles:i})}/** @license MUI v5.10.3
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function nB(r,e){return fc(r,e)}const GR=(r,e)=>{Array.isArray(r.__emotion_styles)&&(r.__emotion_styles=e(r.__emotion_styles))};function Dg(r){return r!==null&&typeof r=="object"&&r.constructor===Object}function Ma(r,e,t={clone:!0}){const i=t.clone?D({},r):r;return Dg(r)&&Dg(e)&&Object.keys(e).forEach(n=>{n!=="__proto__"&&(Dg(e[n])&&n in r&&Dg(r[n])?i[n]=Ma(r[n],e[n],t):i[n]=e[n])}),i}function pc(r){let e="https://mui.com/production-error/?code="+r;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+r+"; visit "+e+" for the full message."}function Bt(r){if(typeof r!="string")throw new Error(pc(7));return r.charAt(0).toUpperCase()+r.slice(1)}function P1(...r){return r.reduce((e,t)=>t==null?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})}function tm(r,e=166){let t;function i(...n){const s=()=>{r.apply(this,n)};clearTimeout(t),t=setTimeout(s,e)}return i.clear=()=>{clearTimeout(t)},i}function A0(r,e){return F.isValidElement(r)&&e.indexOf(r.type.muiName)!==-1}function wn(r){return r&&r.ownerDocument||document}function nu(r){return wn(r).defaultView||window}function q0(r,e){typeof r=="function"?r(e):r&&(r.current=e)}const Aa=typeof window<"u"?F.useLayoutEffect:F.useEffect;let E1=0;function UR(r){const[e,t]=F.useState(r),i=r||e;return F.useEffect(()=>{e==null&&(E1+=1,t(`mui-${E1}`))},[e]),i}const R1=Fw.useId;function yx(r){if(R1!==void 0){const e=R1();return r??e}return UR(r)}function X0({controlled:r,default:e,name:t,state:i="value"}){const{current:n}=F.useRef(r!==void 0),[s,o]=F.useState(e),c=n?r:s,h=F.useCallback(p=>{n||o(p)},[]);return[c,h]}function ua(r){const e=F.useRef(r);return Aa(()=>{e.current=r}),F.useCallback((...t)=>(0,e.current)(...t),[])}function Wi(r,e){return F.useMemo(()=>r==null&&e==null?null:t=>{q0(r,t),q0(e,t)},[r,e])}let gb=!0,Vw=!1,L1;const $R={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function jR(r){const{type:e,tagName:t}=r;return!!(t==="INPUT"&&$R[e]&&!r.readOnly||t==="TEXTAREA"&&!r.readOnly||r.isContentEditable)}function YR(r){r.metaKey||r.altKey||r.ctrlKey||(gb=!0)}function Yv(){gb=!1}function qR(){this.visibilityState==="hidden"&&Vw&&(gb=!0)}function XR(r){r.addEventListener("keydown",YR,!0),r.addEventListener("mousedown",Yv,!0),r.addEventListener("pointerdown",Yv,!0),r.addEventListener("touchstart",Yv,!0),r.addEventListener("visibilitychange",qR,!0)}function KR(r){const{target:e}=r;try{return e.matches(":focus-visible")}catch{}return gb||jR(e)}function bx(){const r=F.useCallback(n=>{n!=null&&XR(n.ownerDocument)},[]),e=F.useRef(!1);function t(){return e.current?(Vw=!0,window.clearTimeout(L1),L1=window.setTimeout(()=>{Vw=!1},100),e.current=!1,!0):!1}function i(n){return KR(n)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:t,ref:r}}function sB(r){const e=r.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let wf;function aB(){if(wf)return wf;const r=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",r.appendChild(e),r.dir="rtl",r.style.fontSize="14px",r.style.width="4px",r.style.height="1px",r.style.position="absolute",r.style.top="-1000px",r.style.overflow="scroll",document.body.appendChild(r),wf="reverse",r.scrollLeft>0?wf="default":(r.scrollLeft=1,r.scrollLeft===0&&(wf="negative")),document.body.removeChild(r),wf}function I1(r,e){const t=r.scrollLeft;if(e!=="rtl")return t;switch(aB()){case"negative":return r.scrollWidth-r.clientWidth+t;case"reverse":return r.scrollWidth-r.clientWidth-t;default:return t}}const QR={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function oB(r,e){const t=D({},e);return Object.keys(r).forEach(i=>{t[i]===void 0&&(t[i]=r[i])}),t}function di(r,e,t){const i={};return Object.keys(r).forEach(n=>{i[n]=r[n].reduce((s,o)=>(o&&(s.push(e(o)),t&&t[o]&&s.push(t[o])),s),[]).join(" ")}),i}const F1=r=>r,JR=()=>{let r=F1;return{configure(e){r=e},generate(e){return r(e)},reset(){r=F1}}},lB=JR(),ZR={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function si(r,e,t="Mui"){const i=ZR[e];return i?`${t}-${i}`:`${lB.generate(r)}-${e}`}function Zt(r,e,t="Mui"){const i={};return e.forEach(n=>{i[n]=si(r,n,t)}),i}function Ug(r,e){return e?Ma(r,e,{clone:!1}):r}const vx={xs:0,sm:600,md:900,lg:1200,xl:1536},O1={keys:["xs","sm","md","lg","xl"],up:r=>`@media (min-width:${vx[r]}px)`};function bc(r,e,t){const i=r.theme||{};if(Array.isArray(e)){const s=i.breakpoints||O1;return e.reduce((o,c,h)=>(o[s.up(s.keys[h])]=t(e[h]),o),{})}if(typeof e=="object"){const s=i.breakpoints||O1;return Object.keys(e).reduce((o,c)=>{if(Object.keys(s.values||vx).indexOf(c)!==-1){const h=s.up(c);o[h]=t(e[c],c)}else{const h=c;o[h]=e[h]}return o},{})}return t(e)}function eL(r={}){var e;return((e=r.keys)==null?void 0:e.reduce((i,n)=>{const s=r.up(n);return i[s]={},i},{}))||{}}function tL(r,e){return r.reduce((t,i)=>{const n=t[i];return(!n||Object.keys(n).length===0)&&delete t[i],t},e)}function wx(r,e,t=!0){if(!e||typeof e!="string")return null;if(r&&r.vars&&t){const i=`vars.${e}`.split(".").reduce((n,s)=>n&&n[s]?n[s]:null,r);if(i!=null)return i}return e.split(".").reduce((i,n)=>i&&i[n]!=null?i[n]:null,r)}function M1(r,e,t,i=t){let n;return typeof r=="function"?n=r(t):Array.isArray(r)?n=r[t]||i:n=wx(r,t)||i,e&&(n=e(n)),n}function mt(r){const{prop:e,cssProperty:t=r.prop,themeKey:i,transform:n}=r,s=o=>{if(o[e]==null)return null;const c=o[e],h=o.theme,p=wx(h,i)||{};return bc(o,c,b=>{let v=M1(p,n,b);return b===v&&typeof b=="string"&&(v=M1(p,n,`${e}${b==="default"?"":Bt(b)}`,b)),t===!1?v:{[t]:v}})};return s.propTypes={},s.filterProps=[e],s}function vc(...r){const e=r.reduce((i,n)=>(n.filterProps.forEach(s=>{i[s]=n}),i),{}),t=i=>Object.keys(i).reduce((n,s)=>e[s]?Ug(n,e[s](i)):n,{});return t.propTypes={},t.filterProps=r.reduce((i,n)=>i.concat(n.filterProps),[]),t}function iL(r){const e={};return t=>(e[t]===void 0&&(e[t]=r(t)),e[t])}const rL={m:"margin",p:"padding"},nL={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},D1={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},sL=iL(r=>{if(r.length>2)if(D1[r])r=D1[r];else return[r];const[e,t]=r.split(""),i=rL[e],n=nL[t]||"";return Array.isArray(n)?n.map(s=>i+s):[i+n]}),aL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],oL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],uB=[...aL,...oL];function vm(r,e,t,i){var n;const s=(n=wx(r,e,!1))!=null?n:t;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function cB(r){return vm(r,"spacing",8)}function wm(r,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),i=r(t);return e>=0?i:typeof i=="number"?-i:`-${i}`}function lL(r,e){return t=>r.reduce((i,n)=>(i[n]=wm(e,t),i),{})}function uL(r,e,t,i){if(e.indexOf(t)===-1)return null;const n=sL(t),s=lL(n,i),o=r[t];return bc(r,o,s)}function cL(r,e){const t=cB(r.theme);return Object.keys(r).map(i=>uL(r,e,i,t)).reduce(Ug,{})}function mb(r){return cL(r,uB)}mb.propTypes={};mb.filterProps=uB;function xm(r){return typeof r!="number"?r:`${r}px solid`}const hL=mt({prop:"border",themeKey:"borders",transform:xm}),dL=mt({prop:"borderTop",themeKey:"borders",transform:xm}),fL=mt({prop:"borderRight",themeKey:"borders",transform:xm}),pL=mt({prop:"borderBottom",themeKey:"borders",transform:xm}),gL=mt({prop:"borderLeft",themeKey:"borders",transform:xm}),mL=mt({prop:"borderColor",themeKey:"palette"}),yL=mt({prop:"borderTopColor",themeKey:"palette"}),bL=mt({prop:"borderRightColor",themeKey:"palette"}),vL=mt({prop:"borderBottomColor",themeKey:"palette"}),wL=mt({prop:"borderLeftColor",themeKey:"palette"}),xx=r=>{if(r.borderRadius!==void 0&&r.borderRadius!==null){const e=vm(r.theme,"shape.borderRadius",4),t=i=>({borderRadius:wm(e,i)});return bc(r,r.borderRadius,t)}return null};xx.propTypes={};xx.filterProps=["borderRadius"];const hB=vc(hL,dL,fL,pL,gL,mL,yL,bL,vL,wL,xx),xL=mt({prop:"displayPrint",cssProperty:!1,transform:r=>({"@media print":{display:r}})}),SL=mt({prop:"display"}),kL=mt({prop:"overflow"}),_L=mt({prop:"textOverflow"}),BL=mt({prop:"visibility"}),TL=mt({prop:"whiteSpace"}),dB=vc(xL,SL,kL,_L,BL,TL),CL=mt({prop:"flexBasis"}),NL=mt({prop:"flexDirection"}),PL=mt({prop:"flexWrap"}),EL=mt({prop:"justifyContent"}),RL=mt({prop:"alignItems"}),LL=mt({prop:"alignContent"}),IL=mt({prop:"order"}),FL=mt({prop:"flex"}),OL=mt({prop:"flexGrow"}),ML=mt({prop:"flexShrink"}),DL=mt({prop:"alignSelf"}),AL=mt({prop:"justifyItems"}),VL=mt({prop:"justifySelf"}),fB=vc(CL,NL,PL,EL,RL,LL,IL,FL,OL,ML,DL,AL,VL),Sx=r=>{if(r.gap!==void 0&&r.gap!==null){const e=vm(r.theme,"spacing",8),t=i=>({gap:wm(e,i)});return bc(r,r.gap,t)}return null};Sx.propTypes={};Sx.filterProps=["gap"];const kx=r=>{if(r.columnGap!==void 0&&r.columnGap!==null){const e=vm(r.theme,"spacing",8),t=i=>({columnGap:wm(e,i)});return bc(r,r.columnGap,t)}return null};kx.propTypes={};kx.filterProps=["columnGap"];const _x=r=>{if(r.rowGap!==void 0&&r.rowGap!==null){const e=vm(r.theme,"spacing",8),t=i=>({rowGap:wm(e,i)});return bc(r,r.rowGap,t)}return null};_x.propTypes={};_x.filterProps=["rowGap"];const zL=mt({prop:"gridColumn"}),WL=mt({prop:"gridRow"}),HL=mt({prop:"gridAutoFlow"}),GL=mt({prop:"gridAutoColumns"}),UL=mt({prop:"gridAutoRows"}),$L=mt({prop:"gridTemplateColumns"}),jL=mt({prop:"gridTemplateRows"}),YL=mt({prop:"gridTemplateAreas"}),qL=mt({prop:"gridArea"}),pB=vc(Sx,kx,_x,zL,WL,HL,GL,UL,$L,jL,YL,qL),XL=mt({prop:"color",themeKey:"palette"}),KL=mt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),QL=mt({prop:"backgroundColor",themeKey:"palette"}),gB=vc(XL,KL,QL),JL=mt({prop:"position"}),ZL=mt({prop:"zIndex",themeKey:"zIndex"}),eI=mt({prop:"top"}),tI=mt({prop:"right"}),iI=mt({prop:"bottom"}),rI=mt({prop:"left"}),mB=vc(JL,ZL,eI,tI,iI,rI),yB=mt({prop:"boxShadow",themeKey:"shadows"});function wc(r){return r<=1&&r!==0?`${r*100}%`:r}const nI=mt({prop:"width",transform:wc}),bB=r=>{if(r.maxWidth!==void 0&&r.maxWidth!==null){const e=t=>{var i,n,s;return{maxWidth:((i=r.theme)==null||(n=i.breakpoints)==null||(s=n.values)==null?void 0:s[t])||vx[t]||wc(t)}};return bc(r,r.maxWidth,e)}return null};bB.filterProps=["maxWidth"];const sI=mt({prop:"minWidth",transform:wc}),aI=mt({prop:"height",transform:wc}),oI=mt({prop:"maxHeight",transform:wc}),lI=mt({prop:"minHeight",transform:wc});mt({prop:"size",cssProperty:"width",transform:wc});mt({prop:"size",cssProperty:"height",transform:wc});const uI=mt({prop:"boxSizing"}),vB=vc(nI,bB,sI,aI,oI,lI,uI),cI=mt({prop:"fontFamily",themeKey:"typography"}),hI=mt({prop:"fontSize",themeKey:"typography"}),dI=mt({prop:"fontStyle",themeKey:"typography"}),fI=mt({prop:"fontWeight",themeKey:"typography"}),pI=mt({prop:"letterSpacing"}),gI=mt({prop:"textTransform"}),mI=mt({prop:"lineHeight"}),yI=mt({prop:"textAlign"}),bI=mt({prop:"typography",cssProperty:!1,themeKey:"typography"}),wB=vc(bI,cI,hI,dI,fI,pI,mI,yI,gI),A1={borders:hB.filterProps,display:dB.filterProps,flexbox:fB.filterProps,grid:pB.filterProps,positions:mB.filterProps,palette:gB.filterProps,shadows:yB.filterProps,sizing:vB.filterProps,spacing:mb.filterProps,typography:wB.filterProps},xB={borders:hB,display:dB,flexbox:fB,grid:pB,positions:mB,palette:gB,shadows:yB,sizing:vB,spacing:mb,typography:wB},vI=Object.keys(A1).reduce((r,e)=>(A1[e].forEach(t=>{r[t]=xB[e]}),r),{});function wI(...r){const e=r.reduce((i,n)=>i.concat(Object.keys(n)),[]),t=new Set(e);return r.every(i=>t.size===Object.keys(i).length)}function xI(r,e){return typeof r=="function"?r(e):r}function SI(r=xB){const e=Object.keys(r).reduce((n,s)=>(r[s].filterProps.forEach(o=>{n[o]=r[s]}),n),{});function t(n,s,o){const c={[n]:s,theme:o},h=e[n];return h?h(c):{[n]:s}}function i(n){const{sx:s,theme:o={}}=n||{};if(!s)return null;function c(h){let p=h;if(typeof h=="function")p=h(o);else if(typeof h!="object")return h;if(!p)return null;const g=eL(o.breakpoints),b=Object.keys(g);let v=g;return Object.keys(p).forEach(S=>{const B=xI(p[S],o);if(B!=null)if(typeof B=="object")if(e[S])v=Ug(v,t(S,B,o));else{const T=bc({theme:o},B,C=>({[S]:C}));wI(T,B)?v[S]=i({sx:B,theme:o}):v=Ug(v,T)}else v=Ug(v,t(S,B,o))}),tL(b,v)}return Array.isArray(s)?s.map(c):c(s)}return i}const Bx=SI();Bx.filterProps=["sx"];const kI=["sx"],_I=r=>{const e={systemProps:{},otherProps:{}};return Object.keys(r).forEach(t=>{vI[t]?e.systemProps[t]=r[t]:e.otherProps[t]=r[t]}),e};function SB(r){const{sx:e}=r,t=st(r,kI),{systemProps:i,otherProps:n}=_I(t);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...o)=>{const c=e(...o);return Dg(c)?D({},i,c):i}:s=D({},i,e),D({},n,{sx:s})}function kB(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=kB(r[e]))&&(i&&(i+=" "),i+=t);else for(e in r)r[e]&&(i&&(i+=" "),i+=e);return i}function nt(){for(var r,e,t=0,i="";t<arguments.length;)(r=arguments[t++])&&(e=kB(r))&&(i&&(i+=" "),i+=e);return i}const BI=["values","unit","step"],TI=r=>{const e=Object.keys(r).map(t=>({key:t,val:r[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>D({},t,{[i.key]:i.val}),{})};function CI(r){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5}=r,n=st(r,BI),s=TI(e),o=Object.keys(s);function c(v){return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t})`}function h(v){return`@media (max-width:${(typeof e[v]=="number"?e[v]:v)-i/100}${t})`}function p(v,S){const B=o.indexOf(S);return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t}) and (max-width:${(B!==-1&&typeof e[o[B]]=="number"?e[o[B]]:S)-i/100}${t})`}function g(v){return o.indexOf(v)+1<o.length?p(v,o[o.indexOf(v)+1]):c(v)}function b(v){const S=o.indexOf(v);return S===0?c(o[1]):S===o.length-1?h(o[S]):p(v,o[o.indexOf(v)+1]).replace("@media","@media not all and")}return D({keys:o,values:s,up:c,down:h,between:p,only:g,not:b,unit:t},n)}const NI={borderRadius:4};function PI(r=8){if(r.mui)return r;const e=cB({spacing:r}),t=(...i)=>(i.length===0?[1]:i).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}const EI=["breakpoints","palette","spacing","shape"];function Tx(r={},...e){const{breakpoints:t={},palette:i={},spacing:n,shape:s={}}=r,o=st(r,EI),c=CI(t),h=PI(n);let p=Ma({breakpoints:c,direction:"ltr",components:{},palette:D({mode:"light"},i),spacing:h,shape:D({},NI,s)},o);return p=e.reduce((g,b)=>Ma(g,b),p),p}const _B=F.createContext(null);function BB(){return F.useContext(_B)}const RI=typeof Symbol=="function"&&Symbol.for,LI=RI?Symbol.for("mui.nested"):"__THEME_NESTED__";function II(r,e){return typeof e=="function"?e(r):D({},r,e)}function FI(r){const{children:e,theme:t}=r,i=BB(),n=F.useMemo(()=>{const s=i===null?t:II(i,t);return s!=null&&(s[LI]=i!==null),s},[t,i]);return w.jsx(_B.Provider,{value:n,children:e})}function OI(r){return Object.keys(r).length===0}function TB(r=null){const e=BB();return!e||OI(e)?r:e}const MI=Tx();function yb(r=MI){return TB(r)}const DI=["className","component"];function AI(r={}){const{defaultTheme:e,defaultClassName:t="MuiBox-root",generateClassName:i,styleFunctionSx:n=Bx}=r,s=nB("div",{shouldForwardProp:c=>c!=="theme"&&c!=="sx"&&c!=="as"})(n);return F.forwardRef(function(h,p){const g=yb(e),b=SB(h),{className:v,component:S="div"}=b,B=st(b,DI);return w.jsx(s,D({as:S,ref:p,className:nt(v,i?i(t):t),theme:g},B))})}const VI=["variant"];function V1(r){return r.length===0}function CB(r){const{variant:e}=r,t=st(r,VI);let i=e||"";return Object.keys(t).sort().forEach(n=>{n==="color"?i+=V1(i)?r[n]:Bt(r[n]):i+=`${V1(i)?n:Bt(n)}${Bt(r[n].toString())}`}),i}const zI=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],WI=["theme"],HI=["theme"];function Pg(r){return Object.keys(r).length===0}function GI(r){return typeof r=="string"&&r.charCodeAt(0)>96}const UI=(r,e)=>e.components&&e.components[r]&&e.components[r].styleOverrides?e.components[r].styleOverrides:null,$I=(r,e)=>{let t=[];e&&e.components&&e.components[r]&&e.components[r].variants&&(t=e.components[r].variants);const i={};return t.forEach(n=>{const s=CB(n.props);i[s]=n.style}),i},jI=(r,e,t,i)=>{var n,s;const{ownerState:o={}}=r,c=[],h=t==null||(n=t.components)==null||(s=n[i])==null?void 0:s.variants;return h&&h.forEach(p=>{let g=!0;Object.keys(p.props).forEach(b=>{o[b]!==p.props[b]&&r[b]!==p.props[b]&&(g=!1)}),g&&c.push(e[CB(p.props)])}),c};function $g(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const YI=Tx();function qI(r={}){const{defaultTheme:e=YI,rootShouldForwardProp:t=$g,slotShouldForwardProp:i=$g,styleFunctionSx:n=Bx}=r,s=o=>{const c=Pg(o.theme)?e:o.theme;return n(D({},o,{theme:c}))};return s.__mui_systemSx=!0,(o,c={})=>{GR(o,V=>V.filter(P=>!(P!=null&&P.__mui_systemSx)));const{name:h,slot:p,skipVariantsResolver:g,skipSx:b,overridesResolver:v}=c,S=st(c,zI),B=g!==void 0?g:p&&p!=="Root"||!1,T=b||!1;let C,L=$g;p==="Root"?L=t:p?L=i:GI(o)&&(L=void 0);const O=nB(o,D({shouldForwardProp:L,label:C},S)),I=(V,...P)=>{const G=P?P.map(j=>typeof j=="function"&&j.__emotion_real!==j?oe=>{let{theme:ge}=oe,he=st(oe,WI);return j(D({theme:Pg(ge)?e:ge},he))}:j):[];let W=V;h&&v&&G.push(j=>{const oe=Pg(j.theme)?e:j.theme,ge=UI(h,oe);if(ge){const he={};return Object.entries(ge).forEach(([ve,Be])=>{he[ve]=typeof Be=="function"?Be(D({},j,{theme:oe})):Be}),v(j,he)}return null}),h&&!B&&G.push(j=>{const oe=Pg(j.theme)?e:j.theme;return jI(j,$I(h,oe),oe,h)}),T||G.push(s);const J=G.length-P.length;if(Array.isArray(V)&&J>0){const j=new Array(J).fill("");W=[...V,...j],W.raw=[...V.raw,...j]}else typeof V=="function"&&V.__emotion_real!==V&&(W=j=>{let{theme:oe}=j,ge=st(j,HI);return V(D({theme:Pg(oe)?e:oe},ge))});return O(W,...G)};return O.withConfig&&(I.withConfig=O.withConfig),I}}function XI(r){const{theme:e,name:t,props:i}=r;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?i:oB(e.components[t].defaultProps,i)}function KI({props:r,name:e,defaultTheme:t}){const i=yb(t);return XI({theme:i,name:e,props:r})}function Cx(r,e=0,t=1){return Math.min(Math.max(e,r),t)}function QI(r){r=r.slice(1);const e=new RegExp(`.{1,${r.length>=6?2:1}}`,"g");let t=r.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,n)=>n<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Rh(r){if(r.type)return r;if(r.charAt(0)==="#")return Rh(QI(r));const e=r.indexOf("("),t=r.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error(pc(9,r));let i=r.substring(e+1,r.length-1),n;if(t==="color"){if(i=i.split(" "),n=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n)===-1)throw new Error(pc(10,n))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:t,values:i,colorSpace:n}}function bb(r){const{type:e,colorSpace:t}=r;let{values:i}=r;return e.indexOf("rgb")!==-1?i=i.map((n,s)=>s<3?parseInt(n,10):n):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function JI(r){r=Rh(r);const{values:e}=r,t=e[0],i=e[1]/100,n=e[2]/100,s=i*Math.min(n,1-n),o=(p,g=(p+t/30)%12)=>n-s*Math.max(Math.min(g-3,9-g,1),-1);let c="rgb";const h=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return r.type==="hsla"&&(c+="a",h.push(e[3])),bb({type:c,values:h})}function z1(r){r=Rh(r);let e=r.type==="hsl"?Rh(JI(r)).values:r.values;return e=e.map(t=>(r.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function ZI(r,e){const t=z1(r),i=z1(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function ur(r,e){return r=Rh(r),e=Cx(e),(r.type==="rgb"||r.type==="hsl")&&(r.type+="a"),r.type==="color"?r.values[3]=`/${e}`:r.values[3]=e,bb(r)}function Nx(r,e){if(r=Rh(r),e=Cx(e),r.type.indexOf("hsl")!==-1)r.values[2]*=1-e;else if(r.type.indexOf("rgb")!==-1||r.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)r.values[t]*=1-e;return bb(r)}function Px(r,e){if(r=Rh(r),e=Cx(e),r.type.indexOf("hsl")!==-1)r.values[2]+=(100-r.values[2])*e;else if(r.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)r.values[t]+=(255-r.values[t])*e;else if(r.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)r.values[t]+=(1-r.values[t])*e;return bb(r)}function eF(r){const e=yb();return w.jsx(gx.Provider,{value:typeof e=="object"?e:{},children:r.children})}function tF(r){const{children:e,theme:t}=r;return w.jsx(FI,{theme:t,children:w.jsx(eF,{children:e})})}function ll(r){return typeof r=="string"}function Ag(r,e={},t){return ll(r)?e:D({},e,{ownerState:D({},e.ownerState,t)})}function iF(r,e=[]){if(r===void 0)return{};const t={};return Object.keys(r).filter(i=>i.match(/^on[A-Z]/)&&typeof r[i]=="function"&&!e.includes(i)).forEach(i=>{t[i]=r[i]}),t}function zw(r,e){return typeof r=="function"?r(e):r}function W1(r){if(r===void 0)return{};const e={};return Object.keys(r).filter(t=>!(t.match(/^on[A-Z]/)&&typeof r[t]=="function")).forEach(t=>{e[t]=r[t]}),e}function rF(r){const{getSlotProps:e,additionalProps:t,externalSlotProps:i,externalForwardedProps:n,className:s}=r;if(!e){const S=nt(n==null?void 0:n.className,i==null?void 0:i.className,s,t==null?void 0:t.className),B=D({},t==null?void 0:t.style,n==null?void 0:n.style,i==null?void 0:i.style),T=D({},t,n,i);return S.length>0&&(T.className=S),Object.keys(B).length>0&&(T.style=B),{props:T,internalRef:void 0}}const o=iF(D({},n,i)),c=W1(i),h=W1(n),p=e(o),g=nt(p==null?void 0:p.className,t==null?void 0:t.className,s,n==null?void 0:n.className,i==null?void 0:i.className),b=D({},p==null?void 0:p.style,t==null?void 0:t.style,n==null?void 0:n.style,i==null?void 0:i.style),v=D({},p,t,h,c);return g.length>0&&(v.className=g),Object.keys(b).length>0&&(v.style=b),{props:v,internalRef:p.ref}}const nF=["elementType","externalSlotProps","ownerState"];function oo(r){var e;const{elementType:t,externalSlotProps:i,ownerState:n}=r,s=st(r,nF),o=zw(i,n),{props:c,internalRef:h}=rF(D({},s,{externalSlotProps:o})),p=Wi(h,Wi(o==null?void 0:o.ref,(e=r.additionalProps)==null?void 0:e.ref));return Ag(t,D({},c,{ref:p}),n)}var Vs="top",Va="bottom",za="right",zs="left",Ex="auto",Sm=[Vs,Va,za,zs],Lf="start",im="end",sF="clippingParents",NB="viewport",Eg="popper",aF="reference",H1=Sm.reduce(function(r,e){return r.concat([e+"-"+Lf,e+"-"+im])},[]),PB=[].concat(Sm,[Ex]).reduce(function(r,e){return r.concat([e,e+"-"+Lf,e+"-"+im])},[]),oF="beforeRead",lF="read",uF="afterRead",cF="beforeMain",hF="main",dF="afterMain",fF="beforeWrite",pF="write",gF="afterWrite",mF=[oF,lF,uF,cF,hF,dF,fF,pF,gF];function dl(r){return r?(r.nodeName||"").toLowerCase():null}function Ga(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function Lh(r){var e=Ga(r).Element;return r instanceof e||r instanceof Element}function Da(r){var e=Ga(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function Rx(r){if(typeof ShadowRoot>"u")return!1;var e=Ga(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function yF(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];!Da(s)||!dl(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var c=n[o];c===!1?s.removeAttribute(o):s.setAttribute(o,c===!0?"":c)}))})}function bF(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),c=o.reduce(function(h,p){return h[p]="",h},{});!Da(n)||!dl(n)||(Object.assign(n.style,c),Object.keys(s).forEach(function(h){n.removeAttribute(h)}))})}}const vF={name:"applyStyles",enabled:!0,phase:"write",fn:yF,effect:bF,requires:["computeStyles"]};function ul(r){return r.split("-")[0]}var Ch=Math.max,K0=Math.min,If=Math.round;function Ww(){var r=navigator.userAgentData;return r!=null&&r.brands?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function EB(){return!/^((?!chrome|android).)*safari/i.test(Ww())}function Ff(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=r.getBoundingClientRect(),n=1,s=1;e&&Da(r)&&(n=r.offsetWidth>0&&If(i.width)/r.offsetWidth||1,s=r.offsetHeight>0&&If(i.height)/r.offsetHeight||1);var o=Lh(r)?Ga(r):window,c=o.visualViewport,h=!EB()&&t,p=(i.left+(h&&c?c.offsetLeft:0))/n,g=(i.top+(h&&c?c.offsetTop:0))/s,b=i.width/n,v=i.height/s;return{width:b,height:v,top:g,right:p+b,bottom:g+v,left:p,x:p,y:g}}function Lx(r){var e=Ff(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}function RB(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&Rx(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function su(r){return Ga(r).getComputedStyle(r)}function wF(r){return["table","td","th"].indexOf(dl(r))>=0}function xc(r){return((Lh(r)?r.ownerDocument:r.document)||window.document).documentElement}function vb(r){return dl(r)==="html"?r:r.assignedSlot||r.parentNode||(Rx(r)?r.host:null)||xc(r)}function G1(r){return!Da(r)||su(r).position==="fixed"?null:r.offsetParent}function xF(r){var e=/firefox/i.test(Ww()),t=/Trident/i.test(Ww());if(t&&Da(r)){var i=su(r);if(i.position==="fixed")return null}var n=vb(r);for(Rx(n)&&(n=n.host);Da(n)&&["html","body"].indexOf(dl(n))<0;){var s=su(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function km(r){for(var e=Ga(r),t=G1(r);t&&wF(t)&&su(t).position==="static";)t=G1(t);return t&&(dl(t)==="html"||dl(t)==="body"&&su(t).position==="static")?e:t||xF(r)||e}function Ix(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function jg(r,e,t){return Ch(r,K0(e,t))}function SF(r,e,t){var i=jg(r,e,t);return i>t?t:i}function LB(){return{top:0,right:0,bottom:0,left:0}}function IB(r){return Object.assign({},LB(),r)}function FB(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}var kF=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,IB(typeof e!="number"?e:FB(e,Sm))};function _F(r){var e,t=r.state,i=r.name,n=r.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,c=ul(t.placement),h=Ix(c),p=[zs,za].indexOf(c)>=0,g=p?"height":"width";if(!(!s||!o)){var b=kF(n.padding,t),v=Lx(s),S=h==="y"?Vs:zs,B=h==="y"?Va:za,T=t.rects.reference[g]+t.rects.reference[h]-o[h]-t.rects.popper[g],C=o[h]-t.rects.reference[h],L=km(s),O=L?h==="y"?L.clientHeight||0:L.clientWidth||0:0,I=T/2-C/2,V=b[S],P=O-v[g]-b[B],G=O/2-v[g]/2+I,W=jg(V,G,P),J=h;t.modifiersData[i]=(e={},e[J]=W,e.centerOffset=W-G,e)}}function BF(r){var e=r.state,t=r.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||RB(e.elements.popper,n)&&(e.elements.arrow=n))}const TF={name:"arrow",enabled:!0,phase:"main",fn:_F,effect:BF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Of(r){return r.split("-")[1]}var CF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function NF(r){var e=r.x,t=r.y,i=window,n=i.devicePixelRatio||1;return{x:If(e*n)/n||0,y:If(t*n)/n||0}}function U1(r){var e,t=r.popper,i=r.popperRect,n=r.placement,s=r.variation,o=r.offsets,c=r.position,h=r.gpuAcceleration,p=r.adaptive,g=r.roundOffsets,b=r.isFixed,v=o.x,S=v===void 0?0:v,B=o.y,T=B===void 0?0:B,C=typeof g=="function"?g({x:S,y:T}):{x:S,y:T};S=C.x,T=C.y;var L=o.hasOwnProperty("x"),O=o.hasOwnProperty("y"),I=zs,V=Vs,P=window;if(p){var G=km(t),W="clientHeight",J="clientWidth";if(G===Ga(t)&&(G=xc(t),su(G).position!=="static"&&c==="absolute"&&(W="scrollHeight",J="scrollWidth")),G=G,n===Vs||(n===zs||n===za)&&s===im){V=Va;var re=b&&G===P&&P.visualViewport?P.visualViewport.height:G[W];T-=re-i.height,T*=h?1:-1}if(n===zs||(n===Vs||n===Va)&&s===im){I=za;var j=b&&G===P&&P.visualViewport?P.visualViewport.width:G[J];S-=j-i.width,S*=h?1:-1}}var oe=Object.assign({position:c},p&&CF),ge=g===!0?NF({x:S,y:T}):{x:S,y:T};if(S=ge.x,T=ge.y,h){var he;return Object.assign({},oe,(he={},he[V]=O?"0":"",he[I]=L?"0":"",he.transform=(P.devicePixelRatio||1)<=1?"translate("+S+"px, "+T+"px)":"translate3d("+S+"px, "+T+"px, 0)",he))}return Object.assign({},oe,(e={},e[V]=O?T+"px":"",e[I]=L?S+"px":"",e.transform="",e))}function PF(r){var e=r.state,t=r.options,i=t.gpuAcceleration,n=i===void 0?!0:i,s=t.adaptive,o=s===void 0?!0:s,c=t.roundOffsets,h=c===void 0?!0:c,p={placement:ul(e.placement),variation:Of(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,U1(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,U1(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const EF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:PF,data:{}};var h0={passive:!0};function RF(r){var e=r.state,t=r.instance,i=r.options,n=i.scroll,s=n===void 0?!0:n,o=i.resize,c=o===void 0?!0:o,h=Ga(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&p.forEach(function(g){g.addEventListener("scroll",t.update,h0)}),c&&h.addEventListener("resize",t.update,h0),function(){s&&p.forEach(function(g){g.removeEventListener("scroll",t.update,h0)}),c&&h.removeEventListener("resize",t.update,h0)}}const LF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:RF,data:{}};var IF={left:"right",right:"left",bottom:"top",top:"bottom"};function V0(r){return r.replace(/left|right|bottom|top/g,function(e){return IF[e]})}var FF={start:"end",end:"start"};function $1(r){return r.replace(/start|end/g,function(e){return FF[e]})}function Fx(r){var e=Ga(r),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function Ox(r){return Ff(xc(r)).left+Fx(r).scrollLeft}function OF(r,e){var t=Ga(r),i=xc(r),n=t.visualViewport,s=i.clientWidth,o=i.clientHeight,c=0,h=0;if(n){s=n.width,o=n.height;var p=EB();(p||!p&&e==="fixed")&&(c=n.offsetLeft,h=n.offsetTop)}return{width:s,height:o,x:c+Ox(r),y:h}}function MF(r){var e,t=xc(r),i=Fx(r),n=(e=r.ownerDocument)==null?void 0:e.body,s=Ch(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Ch(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),c=-i.scrollLeft+Ox(r),h=-i.scrollTop;return su(n||t).direction==="rtl"&&(c+=Ch(t.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:c,y:h}}function Mx(r){var e=su(r),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function OB(r){return["html","body","#document"].indexOf(dl(r))>=0?r.ownerDocument.body:Da(r)&&Mx(r)?r:OB(vb(r))}function Yg(r,e){var t;e===void 0&&(e=[]);var i=OB(r),n=i===((t=r.ownerDocument)==null?void 0:t.body),s=Ga(i),o=n?[s].concat(s.visualViewport||[],Mx(i)?i:[]):i,c=e.concat(o);return n?c:c.concat(Yg(vb(o)))}function Hw(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function DF(r,e){var t=Ff(r,!1,e==="fixed");return t.top=t.top+r.clientTop,t.left=t.left+r.clientLeft,t.bottom=t.top+r.clientHeight,t.right=t.left+r.clientWidth,t.width=r.clientWidth,t.height=r.clientHeight,t.x=t.left,t.y=t.top,t}function j1(r,e,t){return e===NB?Hw(OF(r,t)):Lh(e)?DF(e,t):Hw(MF(xc(r)))}function AF(r){var e=Yg(vb(r)),t=["absolute","fixed"].indexOf(su(r).position)>=0,i=t&&Da(r)?km(r):r;return Lh(i)?e.filter(function(n){return Lh(n)&&RB(n,i)&&dl(n)!=="body"}):[]}function VF(r,e,t,i){var n=e==="clippingParents"?AF(r):[].concat(e),s=[].concat(n,[t]),o=s[0],c=s.reduce(function(h,p){var g=j1(r,p,i);return h.top=Ch(g.top,h.top),h.right=K0(g.right,h.right),h.bottom=K0(g.bottom,h.bottom),h.left=Ch(g.left,h.left),h},j1(r,o,i));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function MB(r){var e=r.reference,t=r.element,i=r.placement,n=i?ul(i):null,s=i?Of(i):null,o=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,h;switch(n){case Vs:h={x:o,y:e.y-t.height};break;case Va:h={x:o,y:e.y+e.height};break;case za:h={x:e.x+e.width,y:c};break;case zs:h={x:e.x-t.width,y:c};break;default:h={x:e.x,y:e.y}}var p=n?Ix(n):null;if(p!=null){var g=p==="y"?"height":"width";switch(s){case Lf:h[p]=h[p]-(e[g]/2-t[g]/2);break;case im:h[p]=h[p]+(e[g]/2-t[g]/2);break}}return h}function rm(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?r.placement:i,s=t.strategy,o=s===void 0?r.strategy:s,c=t.boundary,h=c===void 0?sF:c,p=t.rootBoundary,g=p===void 0?NB:p,b=t.elementContext,v=b===void 0?Eg:b,S=t.altBoundary,B=S===void 0?!1:S,T=t.padding,C=T===void 0?0:T,L=IB(typeof C!="number"?C:FB(C,Sm)),O=v===Eg?aF:Eg,I=r.rects.popper,V=r.elements[B?O:v],P=VF(Lh(V)?V:V.contextElement||xc(r.elements.popper),h,g,o),G=Ff(r.elements.reference),W=MB({reference:G,element:I,placement:n}),J=Hw(Object.assign({},I,W)),re=v===Eg?J:G,j={top:P.top-re.top+L.top,bottom:re.bottom-P.bottom+L.bottom,left:P.left-re.left+L.left,right:re.right-P.right+L.right},oe=r.modifiersData.offset;if(v===Eg&&oe){var ge=oe[n];Object.keys(j).forEach(function(he){var ve=[za,Va].indexOf(he)>=0?1:-1,Be=[Vs,Va].indexOf(he)>=0?"y":"x";j[he]+=ge[Be]*ve})}return j}function zF(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,s=t.rootBoundary,o=t.padding,c=t.flipVariations,h=t.allowedAutoPlacements,p=h===void 0?PB:h,g=Of(i),b=g?c?H1:H1.filter(function(B){return Of(B)===g}):Sm,v=b.filter(function(B){return p.indexOf(B)>=0});v.length===0&&(v=b);var S=v.reduce(function(B,T){return B[T]=rm(r,{placement:T,boundary:n,rootBoundary:s,padding:o})[ul(T)],B},{});return Object.keys(S).sort(function(B,T){return S[B]-S[T]})}function WF(r){if(ul(r)===Ex)return[];var e=V0(r);return[$1(r),e,$1(e)]}function HF(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,s=n===void 0?!0:n,o=t.altAxis,c=o===void 0?!0:o,h=t.fallbackPlacements,p=t.padding,g=t.boundary,b=t.rootBoundary,v=t.altBoundary,S=t.flipVariations,B=S===void 0?!0:S,T=t.allowedAutoPlacements,C=e.options.placement,L=ul(C),O=L===C,I=h||(O||!B?[V0(C)]:WF(C)),V=[C].concat(I).reduce(function(Ie,Ue){return Ie.concat(ul(Ue)===Ex?zF(e,{placement:Ue,boundary:g,rootBoundary:b,padding:p,flipVariations:B,allowedAutoPlacements:T}):Ue)},[]),P=e.rects.reference,G=e.rects.popper,W=new Map,J=!0,re=V[0],j=0;j<V.length;j++){var oe=V[j],ge=ul(oe),he=Of(oe)===Lf,ve=[Vs,Va].indexOf(ge)>=0,Be=ve?"width":"height",te=rm(e,{placement:oe,boundary:g,rootBoundary:b,altBoundary:v,padding:p}),ue=ve?he?za:zs:he?Va:Vs;P[Be]>G[Be]&&(ue=V0(ue));var ne=V0(ue),Se=[];if(s&&Se.push(te[ge]<=0),c&&Se.push(te[ue]<=0,te[ne]<=0),Se.every(function(Ie){return Ie})){re=oe,J=!1;break}W.set(oe,Se)}if(J)for(var z=B?3:1,Z=function(Ue){var Ee=V.find(function(Qe){var Oe=W.get(Qe);if(Oe)return Oe.slice(0,Ue).every(function(et){return et})});if(Ee)return re=Ee,"break"},pe=z;pe>0;pe--){var We=Z(pe);if(We==="break")break}e.placement!==re&&(e.modifiersData[i]._skip=!0,e.placement=re,e.reset=!0)}}const GF={name:"flip",enabled:!0,phase:"main",fn:HF,requiresIfExists:["offset"],data:{_skip:!1}};function Y1(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function q1(r){return[Vs,za,Va,zs].some(function(e){return r[e]>=0})}function UF(r){var e=r.state,t=r.name,i=e.rects.reference,n=e.rects.popper,s=e.modifiersData.preventOverflow,o=rm(e,{elementContext:"reference"}),c=rm(e,{altBoundary:!0}),h=Y1(o,i),p=Y1(c,n,s),g=q1(h),b=q1(p);e.modifiersData[t]={referenceClippingOffsets:h,popperEscapeOffsets:p,isReferenceHidden:g,hasPopperEscaped:b},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":b})}const $F={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:UF};function jF(r,e,t){var i=ul(r),n=[zs,Vs].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,o=s[0],c=s[1];return o=o||0,c=(c||0)*n,[zs,za].indexOf(i)>=0?{x:c,y:o}:{x:o,y:c}}function YF(r){var e=r.state,t=r.options,i=r.name,n=t.offset,s=n===void 0?[0,0]:n,o=PB.reduce(function(g,b){return g[b]=jF(b,e.rects,s),g},{}),c=o[e.placement],h=c.x,p=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=p),e.modifiersData[i]=o}const qF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:YF};function XF(r){var e=r.state,t=r.name;e.modifiersData[t]=MB({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const KF={name:"popperOffsets",enabled:!0,phase:"read",fn:XF,data:{}};function QF(r){return r==="x"?"y":"x"}function JF(r){var e=r.state,t=r.options,i=r.name,n=t.mainAxis,s=n===void 0?!0:n,o=t.altAxis,c=o===void 0?!1:o,h=t.boundary,p=t.rootBoundary,g=t.altBoundary,b=t.padding,v=t.tether,S=v===void 0?!0:v,B=t.tetherOffset,T=B===void 0?0:B,C=rm(e,{boundary:h,rootBoundary:p,padding:b,altBoundary:g}),L=ul(e.placement),O=Of(e.placement),I=!O,V=Ix(L),P=QF(V),G=e.modifiersData.popperOffsets,W=e.rects.reference,J=e.rects.popper,re=typeof T=="function"?T(Object.assign({},e.rects,{placement:e.placement})):T,j=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),oe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ge={x:0,y:0};if(G){if(s){var he,ve=V==="y"?Vs:zs,Be=V==="y"?Va:za,te=V==="y"?"height":"width",ue=G[V],ne=ue+C[ve],Se=ue-C[Be],z=S?-J[te]/2:0,Z=O===Lf?W[te]:J[te],pe=O===Lf?-J[te]:-W[te],We=e.elements.arrow,Ie=S&&We?Lx(We):{width:0,height:0},Ue=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:LB(),Ee=Ue[ve],Qe=Ue[Be],Oe=jg(0,W[te],Ie[te]),et=I?W[te]/2-z-Oe-Ee-j.mainAxis:Z-Oe-Ee-j.mainAxis,wt=I?-W[te]/2+z+Oe+Qe+j.mainAxis:pe+Oe+Qe+j.mainAxis,pt=e.elements.arrow&&km(e.elements.arrow),ei=pt?V==="y"?pt.clientTop||0:pt.clientLeft||0:0,gi=(he=oe==null?void 0:oe[V])!=null?he:0,At=ue+et-gi-ei,Bi=ue+wt-gi,Ai=jg(S?K0(ne,At):ne,ue,S?Ch(Se,Bi):Se);G[V]=Ai,ge[V]=Ai-ue}if(c){var $t,Ki=V==="x"?Vs:zs,Xi=V==="x"?Va:za,zt=G[P],Wt=P==="y"?"height":"width",Li=zt+C[Ki],Qi=zt-C[Xi],Ve=[Vs,zs].indexOf(L)!==-1,qe=($t=oe==null?void 0:oe[P])!=null?$t:0,bt=Ve?Li:zt-W[Wt]-J[Wt]-qe+j.altAxis,Xe=Ve?zt+W[Wt]+J[Wt]-qe-j.altAxis:Qi,se=S&&Ve?SF(bt,zt,Xe):jg(S?bt:Li,zt,S?Xe:Qi);G[P]=se,ge[P]=se-zt}e.modifiersData[i]=ge}}const ZF={name:"preventOverflow",enabled:!0,phase:"main",fn:JF,requiresIfExists:["offset"]};function eO(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function tO(r){return r===Ga(r)||!Da(r)?Fx(r):eO(r)}function iO(r){var e=r.getBoundingClientRect(),t=If(e.width)/r.offsetWidth||1,i=If(e.height)/r.offsetHeight||1;return t!==1||i!==1}function rO(r,e,t){t===void 0&&(t=!1);var i=Da(e),n=Da(e)&&iO(e),s=xc(e),o=Ff(r,n,t),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!t)&&((dl(e)!=="body"||Mx(s))&&(c=tO(e)),Da(e)?(h=Ff(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):s&&(h.x=Ox(s))),{x:o.left+c.scrollLeft-h.x,y:o.top+c.scrollTop-h.y,width:o.width,height:o.height}}function nO(r){var e=new Map,t=new Set,i=[];r.forEach(function(s){e.set(s.name,s)});function n(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(c){if(!t.has(c)){var h=e.get(c);h&&n(h)}}),i.push(s)}return r.forEach(function(s){t.has(s.name)||n(s)}),i}function sO(r){var e=nO(r);return mF.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function aO(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function oO(r){var e=r.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var X1={placement:"bottom",modifiers:[],strategy:"absolute"};function K1(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function lO(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,s=n===void 0?X1:n;return function(c,h,p){p===void 0&&(p=s);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},X1,s),modifiersData:{},elements:{reference:c,popper:h},attributes:{},styles:{}},b=[],v=!1,S={state:g,setOptions:function(L){var O=typeof L=="function"?L(g.options):L;T(),g.options=Object.assign({},s,g.options,O),g.scrollParents={reference:Lh(c)?Yg(c):c.contextElement?Yg(c.contextElement):[],popper:Yg(h)};var I=sO(oO([].concat(i,g.options.modifiers)));return g.orderedModifiers=I.filter(function(V){return V.enabled}),B(),S.update()},forceUpdate:function(){if(!v){var L=g.elements,O=L.reference,I=L.popper;if(K1(O,I)){g.rects={reference:rO(O,km(I),g.options.strategy==="fixed"),popper:Lx(I)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(j){return g.modifiersData[j.name]=Object.assign({},j.data)});for(var V=0;V<g.orderedModifiers.length;V++){if(g.reset===!0){g.reset=!1,V=-1;continue}var P=g.orderedModifiers[V],G=P.fn,W=P.options,J=W===void 0?{}:W,re=P.name;typeof G=="function"&&(g=G({state:g,options:J,name:re,instance:S})||g)}}}},update:aO(function(){return new Promise(function(C){S.forceUpdate(),C(g)})}),destroy:function(){T(),v=!0}};if(!K1(c,h))return S;S.setOptions(p).then(function(C){!v&&p.onFirstUpdate&&p.onFirstUpdate(C)});function B(){g.orderedModifiers.forEach(function(C){var L=C.name,O=C.options,I=O===void 0?{}:O,V=C.effect;if(typeof V=="function"){var P=V({state:g,name:L,instance:S,options:I}),G=function(){};b.push(P||G)}})}function T(){b.forEach(function(C){return C()}),b=[]}return S}}var uO=[LF,KF,EF,vF,qF,GF,ZF,TF,$F],cO=lO({defaultModifiers:uO});function hO(r){return typeof r=="function"?r():r}const DB=F.forwardRef(function(e,t){const{children:i,container:n,disablePortal:s=!1}=e,[o,c]=F.useState(null),h=Wi(F.isValidElement(i)?i.ref:null,t);return Aa(()=>{s||c(hO(n)||document.body)},[n,s]),Aa(()=>{if(o&&!s)return q0(t,o),()=>{q0(t,null)}},[t,o,s]),s?F.isValidElement(i)?F.cloneElement(i,{ref:h}):i:o&&ux.createPortal(i,o)});function dO(r){return si("MuiPopperUnstyled",r)}Zt("MuiPopperUnstyled",["root"]);const fO=["anchorEl","children","component","components","componentsProps","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],pO=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function gO(r,e){if(e==="ltr")return r;switch(r){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return r}}function Gw(r){return typeof r=="function"?r():r}const mO=()=>di({root:["root"]},dO,{}),yO={},bO=F.forwardRef(function(e,t){var i;const{anchorEl:n,children:s,component:o,components:c={},componentsProps:h={},direction:p,disablePortal:g,modifiers:b,open:v,ownerState:S,placement:B,popperOptions:T,popperRef:C,TransitionProps:L}=e,O=st(e,fO),I=F.useRef(null),V=Wi(I,t),P=F.useRef(null),G=Wi(P,C),W=F.useRef(G);Aa(()=>{W.current=G},[G]),F.useImperativeHandle(C,()=>P.current,[]);const J=gO(B,p),[re,j]=F.useState(J);F.useEffect(()=>{P.current&&P.current.forceUpdate()}),Aa(()=>{if(!n||!v)return;const Be=ne=>{j(ne.placement)};Gw(n);let te=[{name:"preventOverflow",options:{altBoundary:g}},{name:"flip",options:{altBoundary:g}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ne})=>{Be(ne)}}];b!=null&&(te=te.concat(b)),T&&T.modifiers!=null&&(te=te.concat(T.modifiers));const ue=cO(Gw(n),I.current,D({placement:J},T,{modifiers:te}));return W.current(ue),()=>{ue.destroy(),W.current(null)}},[n,g,b,v,T,J]);const oe={placement:re};L!==null&&(oe.TransitionProps=L);const ge=mO(),he=(i=o??c.Root)!=null?i:"div",ve=oo({elementType:he,externalSlotProps:h.root,externalForwardedProps:O,additionalProps:{role:"tooltip",ref:V},ownerState:D({},e,S),className:ge.root});return w.jsx(he,D({},ve,{children:typeof s=="function"?s(oe):s}))}),vO=F.forwardRef(function(e,t){const{anchorEl:i,children:n,container:s,direction:o="ltr",disablePortal:c=!1,keepMounted:h=!1,modifiers:p,open:g,placement:b="bottom",popperOptions:v=yO,popperRef:S,style:B,transition:T=!1}=e,C=st(e,pO),[L,O]=F.useState(!0),I=()=>{O(!1)},V=()=>{O(!0)};if(!h&&!g&&(!T||L))return null;const P=s||(i?wn(Gw(i)).body:void 0);return w.jsx(DB,{disablePortal:c,container:P,children:w.jsx(bO,D({anchorEl:i,direction:o,disablePortal:c,modifiers:p,ref:t,open:T?!L:g,placement:b,popperOptions:v,popperRef:S},C,{style:D({position:"fixed",top:0,left:0,display:!g&&h&&(!T||L)?"none":null},B),TransitionProps:T?{in:g,onEnter:I,onExited:V}:null,children:n}))})});function wO(r){const e=wn(r);return e.body===r?nu(r).innerWidth>e.documentElement.clientWidth:r.scrollHeight>r.clientHeight}function qg(r,e){e?r.setAttribute("aria-hidden","true"):r.removeAttribute("aria-hidden")}function Q1(r){return parseInt(nu(r).getComputedStyle(r).paddingRight,10)||0}function xO(r){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(r.tagName)!==-1,i=r.tagName==="INPUT"&&r.getAttribute("type")==="hidden";return t||i}function J1(r,e,t,i=[],n){const s=[e,t,...i];[].forEach.call(r.children,o=>{const c=s.indexOf(o)===-1,h=!xO(o);c&&h&&qg(o,n)})}function qv(r,e){let t=-1;return r.some((i,n)=>e(i)?(t=n,!0):!1),t}function SO(r,e){const t=[],i=r.container;if(!e.disableScrollLock){if(wO(i)){const o=sB(wn(i));t.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${Q1(i)+o}px`;const c=wn(i).querySelectorAll(".mui-fixed");[].forEach.call(c,h=>{t.push({value:h.style.paddingRight,property:"padding-right",el:h}),h.style.paddingRight=`${Q1(h)+o}px`})}let s;if(i.parentNode instanceof DocumentFragment)s=wn(i).body;else{const o=i.parentElement,c=nu(i);s=(o==null?void 0:o.nodeName)==="HTML"&&c.getComputedStyle(o).overflowY==="scroll"?o:i}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:o,property:c})=>{s?o.style.setProperty(c,s):o.style.removeProperty(c)})}}function kO(r){const e=[];return[].forEach.call(r.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class _O{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&qg(e.modalRef,!1);const n=kO(t);J1(t,e.mount,e.modalRef,n,!0);const s=qv(this.containers,o=>o.container===t);return s!==-1?(this.containers[s].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:n}),i)}mount(e,t){const i=qv(this.containers,s=>s.modals.indexOf(e)!==-1),n=this.containers[i];n.restore||(n.restore=SO(n,t))}remove(e,t=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const n=qv(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[n];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(i,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&qg(e.modalRef,t),J1(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(n,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&qg(o.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const BO=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function TO(r){const e=parseInt(r.getAttribute("tabindex"),10);return Number.isNaN(e)?r.contentEditable==="true"||(r.nodeName==="AUDIO"||r.nodeName==="VIDEO"||r.nodeName==="DETAILS")&&r.getAttribute("tabindex")===null?0:r.tabIndex:e}function CO(r){if(r.tagName!=="INPUT"||r.type!=="radio"||!r.name)return!1;const e=i=>r.ownerDocument.querySelector(`input[type="radio"]${i}`);let t=e(`[name="${r.name}"]:checked`);return t||(t=e(`[name="${r.name}"]`)),t!==r}function NO(r){return!(r.disabled||r.tagName==="INPUT"&&r.type==="hidden"||CO(r))}function PO(r){const e=[],t=[];return Array.from(r.querySelectorAll(BO)).forEach((i,n)=>{const s=TO(i);s===-1||!NO(i)||(s===0?e.push(i):t.push({documentOrder:n,tabIndex:s,node:i}))}),t.sort((i,n)=>i.tabIndex===n.tabIndex?i.documentOrder-n.documentOrder:i.tabIndex-n.tabIndex).map(i=>i.node).concat(e)}function EO(){return!0}function RO(r){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:i=!1,disableRestoreFocus:n=!1,getTabbable:s=PO,isEnabled:o=EO,open:c}=r,h=F.useRef(),p=F.useRef(null),g=F.useRef(null),b=F.useRef(null),v=F.useRef(null),S=F.useRef(!1),B=F.useRef(null),T=Wi(e.ref,B),C=F.useRef(null);F.useEffect(()=>{!c||!B.current||(S.current=!t)},[t,c]),F.useEffect(()=>{if(!c||!B.current)return;const I=wn(B.current);return B.current.contains(I.activeElement)||(B.current.hasAttribute("tabIndex")||B.current.setAttribute("tabIndex",-1),S.current&&B.current.focus()),()=>{n||(b.current&&b.current.focus&&(h.current=!0,b.current.focus()),b.current=null)}},[c]),F.useEffect(()=>{if(!c||!B.current)return;const I=wn(B.current),V=W=>{const{current:J}=B;if(J!==null){if(!I.hasFocus()||i||!o()||h.current){h.current=!1;return}if(!J.contains(I.activeElement)){if(W&&v.current!==W.target||I.activeElement!==v.current)v.current=null;else if(v.current!==null)return;if(!S.current)return;let oe=[];if((I.activeElement===p.current||I.activeElement===g.current)&&(oe=s(B.current)),oe.length>0){var re,j;const ge=!!((re=C.current)!=null&&re.shiftKey&&((j=C.current)==null?void 0:j.key)==="Tab"),he=oe[0],ve=oe[oe.length-1];ge?ve.focus():he.focus()}else J.focus()}}},P=W=>{C.current=W,!(i||!o()||W.key!=="Tab")&&I.activeElement===B.current&&W.shiftKey&&(h.current=!0,g.current.focus())};I.addEventListener("focusin",V),I.addEventListener("keydown",P,!0);const G=setInterval(()=>{I.activeElement.tagName==="BODY"&&V()},50);return()=>{clearInterval(G),I.removeEventListener("focusin",V),I.removeEventListener("keydown",P,!0)}},[t,i,n,o,c,s]);const L=I=>{b.current===null&&(b.current=I.relatedTarget),S.current=!0,v.current=I.target;const V=e.props.onFocus;V&&V(I)},O=I=>{b.current===null&&(b.current=I.relatedTarget),S.current=!0};return w.jsxs(F.Fragment,{children:[w.jsx("div",{tabIndex:c?0:-1,onFocus:O,ref:p,"data-testid":"sentinelStart"}),F.cloneElement(e,{ref:T,onFocus:L}),w.jsx("div",{tabIndex:c?0:-1,onFocus:O,ref:g,"data-testid":"sentinelEnd"})]})}function LO(r){return si("MuiModal",r)}Zt("MuiModal",["root","hidden"]);const IO=["children","classes","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited"],FO=r=>{const{open:e,exited:t,classes:i}=r;return di({root:["root",!e&&t&&"hidden"]},LO,i)};function OO(r){return typeof r=="function"?r():r}function MO(r){return r.children?r.children.props.hasOwnProperty("in"):!1}const DO=new _O,AO=F.forwardRef(function(e,t){var i;const{children:n,classes:s,closeAfterTransition:o=!1,component:c="div",components:h={},componentsProps:p={},container:g,disableAutoFocus:b=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:S=!1,disablePortal:B=!1,disableRestoreFocus:T=!1,disableScrollLock:C=!1,hideBackdrop:L=!1,keepMounted:O=!1,manager:I=DO,onBackdropClick:V,onClose:P,onKeyDown:G,open:W,onTransitionEnter:J,onTransitionExited:re}=e,j=st(e,IO),[oe,ge]=F.useState(!0),he=F.useRef({}),ve=F.useRef(null),Be=F.useRef(null),te=Wi(Be,t),ue=MO(e),ne=(i=e["aria-hidden"])!=null?i:!0,Se=()=>wn(ve.current),z=()=>(he.current.modalRef=Be.current,he.current.mountNode=ve.current,he.current),Z=()=>{I.mount(z(),{disableScrollLock:C}),Be.current.scrollTop=0},pe=ua(()=>{const $t=OO(g)||Se().body;I.add(z(),$t),Be.current&&Z()}),We=F.useCallback(()=>I.isTopModal(z()),[I]),Ie=ua($t=>{ve.current=$t,$t&&(W&&We()?Z():qg(Be.current,ne))}),Ue=F.useCallback(()=>{I.remove(z(),ne)},[I,ne]);F.useEffect(()=>()=>{Ue()},[Ue]),F.useEffect(()=>{W?pe():(!ue||!o)&&Ue()},[W,Ue,ue,o,pe]);const Ee=D({},e,{classes:s,closeAfterTransition:o,disableAutoFocus:b,disableEnforceFocus:v,disableEscapeKeyDown:S,disablePortal:B,disableRestoreFocus:T,disableScrollLock:C,exited:oe,hideBackdrop:L,keepMounted:O}),Qe=FO(Ee),Oe=()=>{ge(!1),J&&J()},et=()=>{ge(!0),re&&re(),o&&Ue()},wt=$t=>{$t.target===$t.currentTarget&&(V&&V($t),P&&P($t,"backdropClick"))},pt=$t=>{G&&G($t),!($t.key!=="Escape"||!We())&&(S||($t.stopPropagation(),P&&P($t,"escapeKeyDown")))},ei={};n.props.tabIndex===void 0&&(ei.tabIndex="-1"),ue&&(ei.onEnter=P1(Oe,n.props.onEnter),ei.onExited=P1(et,n.props.onExited));const gi=h.Root||c,At=oo({elementType:gi,externalSlotProps:p.root,externalForwardedProps:j,additionalProps:{ref:te,role:"presentation",onKeyDown:pt},className:Qe.root,ownerState:Ee}),Bi=h.Backdrop,Ai=oo({elementType:Bi,externalSlotProps:p.backdrop,additionalProps:{"aria-hidden":!0,onClick:wt,open:W},ownerState:Ee});return!O&&!W&&(!ue||oe)?null:w.jsx(DB,{ref:Ie,container:g,disablePortal:B,children:w.jsxs(gi,D({},At,{children:[!L&&Bi?w.jsx(Bi,D({},Ai)):null,w.jsx(RO,{disableEnforceFocus:v,disableAutoFocus:b,disableRestoreFocus:T,isEnabled:We,open:W,children:F.cloneElement(n,ei)})]}))})});function Vg(r){return si("MuiSlider",r)}const z0=Zt("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]),VO=r=>{const{open:e}=r;return{offset:nt(e&&z0.valueLabelOpen),circle:z0.valueLabelCircle,label:z0.valueLabelLabel}};function AB(r){const{children:e,className:t,value:i,theme:n}=r,s=VO(r);return F.cloneElement(e,{className:nt(e.props.className)},w.jsxs(F.Fragment,{children:[e.props.children,w.jsx("span",{className:nt(s.offset,t),theme:n,"aria-hidden":!0,children:w.jsx("span",{className:s.circle,children:w.jsx("span",{className:s.label,children:i})})})]}))}const zO=2;function VB(r,e){return r-e}function Rg(r,e,t){return r==null?e:Math.min(Math.max(e,r),t)}function Z1(r,e){var t;const{index:i}=(t=r.reduce((n,s,o)=>{const c=Math.abs(e-s);return n===null||c<n.distance||c===n.distance?{distance:c,index:o}:n},null))!=null?t:{};return i}function d0(r,e){if(e.current!==void 0&&r.changedTouches){const t=r;for(let i=0;i<t.changedTouches.length;i+=1){const n=t.changedTouches[i];if(n.identifier===e.current)return{x:n.clientX,y:n.clientY}}return!1}return{x:r.clientX,y:r.clientY}}function Q0(r,e,t){return(r-e)*100/(t-e)}function WO(r,e,t){return(t-e)*r+e}function HO(r){if(Math.abs(r)<1){const t=r.toExponential().split("e-"),i=t[0].split(".")[1];return(i?i.length:0)+parseInt(t[1],10)}const e=r.toString().split(".")[1];return e?e.length:0}function GO(r,e,t){const i=Math.round((r-t)/e)*e+t;return Number(i.toFixed(HO(e)))}function ek({values:r,newValue:e,index:t}){const i=r.slice();return i[t]=e,i.sort(VB)}function f0({sliderRef:r,activeIndex:e,setActive:t}){var i,n;const s=wn(r.current);if(!((i=r.current)!=null&&i.contains(s.activeElement))||Number(s==null||(n=s.activeElement)==null?void 0:n.getAttribute("data-index"))!==e){var o;(o=r.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}t&&t(e)}const UO={horizontal:{offset:r=>({left:`${r}%`}),leap:r=>({width:`${r}%`})},"horizontal-reverse":{offset:r=>({right:`${r}%`}),leap:r=>({width:`${r}%`})},vertical:{offset:r=>({bottom:`${r}%`}),leap:r=>({height:`${r}%`})}},$O=r=>r;let p0;function Xv(){return p0===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?p0=CSS.supports("touch-action","none"):p0=!0),p0}function jO(r){const{"aria-labelledby":e,defaultValue:t,disabled:i=!1,disableSwap:n=!1,isRtl:s=!1,marks:o=!1,max:c=100,min:h=0,name:p,onChange:g,onChangeCommitted:b,orientation:v="horizontal",ref:S,scale:B=$O,step:T=1,tabIndex:C,value:L}=r,O=F.useRef(),[I,V]=F.useState(-1),[P,G]=F.useState(-1),[W,J]=F.useState(!1),re=F.useRef(0),[j,oe]=X0({controlled:L,default:t??h,name:"Slider"}),ge=g&&((Ve,qe,bt)=>{const Xe=Ve.nativeEvent||Ve,se=new Xe.constructor(Xe.type,Xe);Object.defineProperty(se,"target",{writable:!0,value:{value:qe,name:p}}),g(se,qe,bt)}),he=Array.isArray(j);let ve=he?j.slice().sort(VB):[j];ve=ve.map(Ve=>Rg(Ve,h,c));const Be=o===!0&&T!==null?[...Array(Math.floor((c-h)/T)+1)].map((Ve,qe)=>({value:h+T*qe})):o||[],te=Be.map(Ve=>Ve.value),{isFocusVisibleRef:ue,onBlur:ne,onFocus:Se,ref:z}=bx(),[Z,pe]=F.useState(-1),We=F.useRef(),Ie=Wi(z,We),Ue=Wi(S,Ie),Ee=Ve=>qe=>{var bt;const Xe=Number(qe.currentTarget.getAttribute("data-index"));Se(qe),ue.current===!0&&pe(Xe),G(Xe),Ve==null||(bt=Ve.onFocus)==null||bt.call(Ve,qe)},Qe=Ve=>qe=>{var bt;ne(qe),ue.current===!1&&pe(-1),G(-1),Ve==null||(bt=Ve.onBlur)==null||bt.call(Ve,qe)};Aa(()=>{if(i&&We.current.contains(document.activeElement)){var Ve;(Ve=document.activeElement)==null||Ve.blur()}},[i]),i&&I!==-1&&V(-1),i&&Z!==-1&&pe(-1);const Oe=Ve=>qe=>{var bt;(bt=Ve.onChange)==null||bt.call(Ve,qe);const Xe=Number(qe.currentTarget.getAttribute("data-index")),se=ve[Xe],Re=te.indexOf(se);let ke=qe.target.valueAsNumber;if(Be&&T==null&&(ke=ke<se?te[Re-1]:te[Re+1]),ke=Rg(ke,h,c),Be&&T==null){const Je=te.indexOf(ve[Xe]);ke=ke<ve[Xe]?te[Je-1]:te[Je+1]}if(he){n&&(ke=Rg(ke,ve[Xe-1]||-1/0,ve[Xe+1]||1/0));const Je=ke;ke=ek({values:ve,newValue:ke,index:Xe});let Ht=Xe;n||(Ht=ke.indexOf(Je)),f0({sliderRef:We,activeIndex:Ht})}oe(ke),pe(Xe),ge&&ge(qe,ke,Xe),b&&b(qe,ke)},et=F.useRef();let wt=v;s&&v==="horizontal"&&(wt+="-reverse");const pt=({finger:Ve,move:qe=!1,values:bt})=>{const{current:Xe}=We,{width:se,height:Re,bottom:ke,left:Je}=Xe.getBoundingClientRect();let Ht;wt.indexOf("vertical")===0?Ht=(ke-Ve.y)/Re:Ht=(Ve.x-Je)/se,wt.indexOf("-reverse")!==-1&&(Ht=1-Ht);let Xt;if(Xt=WO(Ht,h,c),T)Xt=GO(Xt,T,h);else{const jn=Z1(te,Xt);Xt=te[jn]}Xt=Rg(Xt,h,c);let Ji=0;if(he){qe?Ji=et.current:Ji=Z1(bt,Xt),n&&(Xt=Rg(Xt,bt[Ji-1]||-1/0,bt[Ji+1]||1/0));const jn=Xt;Xt=ek({values:bt,newValue:Xt,index:Ji}),n&&qe||(Ji=Xt.indexOf(jn),et.current=Ji)}return{newValue:Xt,activeIndex:Ji}},ei=ua(Ve=>{const qe=d0(Ve,O);if(!qe)return;if(re.current+=1,Ve.type==="mousemove"&&Ve.buttons===0){gi(Ve);return}const{newValue:bt,activeIndex:Xe}=pt({finger:qe,move:!0,values:ve});f0({sliderRef:We,activeIndex:Xe,setActive:V}),oe(bt),!W&&re.current>zO&&J(!0),ge&&ge(Ve,bt,Xe)}),gi=ua(Ve=>{const qe=d0(Ve,O);if(J(!1),!qe)return;const{newValue:bt}=pt({finger:qe,move:!0,values:ve});V(-1),Ve.type==="touchend"&&G(-1),b&&b(Ve,bt),O.current=void 0,Bi()}),At=ua(Ve=>{if(i)return;Xv()||Ve.preventDefault();const qe=Ve.changedTouches[0];qe!=null&&(O.current=qe.identifier);const bt=d0(Ve,O);if(bt!==!1){const{newValue:se,activeIndex:Re}=pt({finger:bt,values:ve});f0({sliderRef:We,activeIndex:Re,setActive:V}),oe(se),ge&&ge(Ve,se,Re)}re.current=0;const Xe=wn(We.current);Xe.addEventListener("touchmove",ei),Xe.addEventListener("touchend",gi)}),Bi=F.useCallback(()=>{const Ve=wn(We.current);Ve.removeEventListener("mousemove",ei),Ve.removeEventListener("mouseup",gi),Ve.removeEventListener("touchmove",ei),Ve.removeEventListener("touchend",gi)},[gi,ei]);F.useEffect(()=>{const{current:Ve}=We;return Ve.addEventListener("touchstart",At,{passive:Xv()}),()=>{Ve.removeEventListener("touchstart",At,{passive:Xv()}),Bi()}},[Bi,At]),F.useEffect(()=>{i&&Bi()},[i,Bi]);const Ai=Ve=>qe=>{var bt;if((bt=Ve.onMouseDown)==null||bt.call(Ve,qe),i||qe.defaultPrevented||qe.button!==0)return;qe.preventDefault();const Xe=d0(qe,O);if(Xe!==!1){const{newValue:Re,activeIndex:ke}=pt({finger:Xe,values:ve});f0({sliderRef:We,activeIndex:ke,setActive:V}),oe(Re),ge&&ge(qe,Re,ke)}re.current=0;const se=wn(We.current);se.addEventListener("mousemove",ei),se.addEventListener("mouseup",gi)},$t=Q0(he?ve[0]:h,h,c),Ki=Q0(ve[ve.length-1],h,c)-$t,Xi=(Ve={})=>{const qe={onMouseDown:Ai(Ve||{})},bt=D({},Ve,qe);return D({ref:Ue},bt)},zt=Ve=>qe=>{var bt;(bt=Ve.onMouseOver)==null||bt.call(Ve,qe);const Xe=Number(qe.currentTarget.getAttribute("data-index"));G(Xe)},Wt=Ve=>qe=>{var bt;(bt=Ve.onMouseLeave)==null||bt.call(Ve,qe),G(-1)};return{active:I,axis:wt,axisProps:UO,dragging:W,focusedThumbIndex:Z,getHiddenInputProps:(Ve={})=>{var qe;const bt={onChange:Oe(Ve||{}),onFocus:Ee(Ve||{}),onBlur:Qe(Ve||{})},Xe=D({},Ve,bt);return D({tabIndex:C,"aria-labelledby":e,"aria-orientation":v,"aria-valuemax":B(c),"aria-valuemin":B(h),name:p,type:"range",min:r.min,max:r.max,step:(qe=r.step)!=null?qe:void 0,disabled:i},Xe,{style:D({},QR,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Xi,getThumbProps:(Ve={})=>{const qe={onMouseOver:zt(Ve||{}),onMouseLeave:Wt(Ve||{})};return D({},Ve,qe)},marks:Be,open:P,range:he,trackLeap:Ki,trackOffset:$t,values:ve}}const YO=["aria-label","aria-valuetext","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","components","componentsProps"],tk=r=>r,qO=r=>{const{disabled:e,dragging:t,marked:i,orientation:n,track:s,classes:o}=r;return di({root:["root",e&&"disabled",t&&"dragging",i&&"marked",n==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},Vg,o)},XO=({children:r})=>r,KO=F.forwardRef(function(e,t){var i,n,s,o,c,h,p;const{"aria-label":g,"aria-valuetext":b,className:v,component:S,classes:B,disableSwap:T=!1,disabled:C=!1,getAriaLabel:L,getAriaValueText:O,marks:I=!1,max:V=100,min:P=0,orientation:G="horizontal",scale:W=tk,step:J=1,track:re="normal",valueLabelDisplay:j="off",valueLabelFormat:oe=tk,isRtl:ge=!1,components:he={},componentsProps:ve={}}=e,Be=st(e,YO),te=D({},e,{marks:I,classes:B,disabled:C,isRtl:ge,max:V,min:P,orientation:G,scale:W,step:J,track:re,valueLabelDisplay:j,valueLabelFormat:oe}),{axisProps:ue,getRootProps:ne,getHiddenInputProps:Se,getThumbProps:z,open:Z,active:pe,axis:We,range:Ie,focusedThumbIndex:Ue,dragging:Ee,marks:Qe,values:Oe,trackOffset:et,trackLeap:wt}=jO(D({},te,{ref:t}));te.marked=Qe.length>0&&Qe.some(se=>se.label),te.dragging=Ee,te.focusedThumbIndex=Ue;const pt=qO(te),ei=(i=S??he.Root)!=null?i:"span",gi=oo({elementType:ei,getSlotProps:ne,externalSlotProps:ve.root,externalForwardedProps:Be,ownerState:te,className:[pt.root,v]}),At=(n=he.Rail)!=null?n:"span",Bi=oo({elementType:At,externalSlotProps:ve.rail,ownerState:te,className:pt.rail}),Ai=(s=he.Track)!=null?s:"span",$t=oo({elementType:Ai,externalSlotProps:ve.track,additionalProps:{style:D({},ue[We].offset(et),ue[We].leap(wt))},ownerState:te,className:pt.track}),Ki=(o=he.Thumb)!=null?o:"span",Xi=oo({elementType:Ki,getSlotProps:z,externalSlotProps:ve.thumb,ownerState:te}),zt=(c=he.ValueLabel)!=null?c:AB,Wt=oo({elementType:zt,externalSlotProps:ve.valueLabel,ownerState:te}),Li=(h=he.Mark)!=null?h:"span",Qi=oo({elementType:Li,externalSlotProps:ve.mark,ownerState:te,className:pt.mark}),Ve=(p=he.MarkLabel)!=null?p:"span",qe=oo({elementType:Ve,externalSlotProps:ve.markLabel,ownerState:te}),bt=he.Input||"input",Xe=oo({elementType:bt,getSlotProps:Se,externalSlotProps:ve.input,ownerState:te});return w.jsxs(ei,D({},gi,{children:[w.jsx(At,D({},Bi)),w.jsx(Ai,D({},$t)),Qe.filter(se=>se.value>=P&&se.value<=V).map((se,Re)=>{const ke=Q0(se.value,P,V),Je=ue[We].offset(ke);let Ht;return re===!1?Ht=Oe.indexOf(se.value)!==-1:Ht=re==="normal"&&(Ie?se.value>=Oe[0]&&se.value<=Oe[Oe.length-1]:se.value<=Oe[0])||re==="inverted"&&(Ie?se.value<=Oe[0]||se.value>=Oe[Oe.length-1]:se.value>=Oe[0]),w.jsxs(F.Fragment,{children:[w.jsx(Li,D({"data-index":Re},Qi,!ll(Li)&&{markActive:Ht},{style:D({},Je,Qi.style),className:nt(Qi.className,Ht&&pt.markActive)})),se.label!=null?w.jsx(Ve,D({"aria-hidden":!0,"data-index":Re},qe,!ll(Ve)&&{markLabelActive:Ht},{style:D({},Je,qe.style),className:nt(pt.markLabel,qe.className,Ht&&pt.markLabelActive),children:se.label})):null]},se.value)}),Oe.map((se,Re)=>{const ke=Q0(se,P,V),Je=ue[We].offset(ke),Ht=j==="off"?XO:zt;return w.jsx(F.Fragment,{children:w.jsx(Ht,D({},!ll(Ht)&&{valueLabelFormat:oe,valueLabelDisplay:j,value:typeof oe=="function"?oe(W(se),Re):oe,index:Re,open:Z===Re||pe===Re||j==="on",disabled:C},Wt,{className:nt(pt.valueLabel,Wt.className),children:w.jsx(Ki,D({"data-index":Re,"data-focusvisible":Ue===Re},Xi,{className:nt(pt.thumb,Xi.className,pe===Re&&pt.active,Ue===Re&&pt.focusVisible),style:D({},Je,{pointerEvents:T&&pe!==Re?"none":void 0},Xi.style),children:w.jsx(bt,D({"data-index":Re,"aria-label":L?L(Re):g,"aria-valuenow":W(se),"aria-valuetext":O?O(W(se),Re):b,value:Oe[Re]},Xe))}))}))},Re)})]}))}),QO=["onChange","maxRows","minRows","style","value"];function g0(r,e){return parseInt(r[e],10)||0}const JO={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function ik(r){return r==null||Object.keys(r).length===0}const ZO=F.forwardRef(function(e,t){const{onChange:i,maxRows:n,minRows:s=1,style:o,value:c}=e,h=st(e,QO),{current:p}=F.useRef(c!=null),g=F.useRef(null),b=Wi(t,g),v=F.useRef(null),S=F.useRef(0),[B,T]=F.useState({}),C=F.useCallback(()=>{const P=g.current,W=nu(P).getComputedStyle(P);if(W.width==="0px")return{};const J=v.current;J.style.width=W.width,J.value=P.value||e.placeholder||"x",J.value.slice(-1)===`
`&&(J.value+=" ");const re=W["box-sizing"],j=g0(W,"padding-bottom")+g0(W,"padding-top"),oe=g0(W,"border-bottom-width")+g0(W,"border-top-width"),ge=J.scrollHeight;J.value="x";const he=J.scrollHeight;let ve=ge;s&&(ve=Math.max(Number(s)*he,ve)),n&&(ve=Math.min(Number(n)*he,ve)),ve=Math.max(ve,he);const Be=ve+(re==="border-box"?j+oe:0),te=Math.abs(ve-ge)<=1;return{outerHeightStyle:Be,overflow:te}},[n,s,e.placeholder]),L=(P,G)=>{const{outerHeightStyle:W,overflow:J}=G;return S.current<20&&(W>0&&Math.abs((P.outerHeightStyle||0)-W)>1||P.overflow!==J)?(S.current+=1,{overflow:J,outerHeightStyle:W}):P},O=F.useCallback(()=>{const P=C();ik(P)||T(G=>L(G,P))},[C]),I=()=>{const P=C();ik(P)||ux.flushSync(()=>{T(G=>L(G,P))})};F.useEffect(()=>{const P=tm(()=>{S.current=0,g.current&&I()}),G=nu(g.current);G.addEventListener("resize",P);let W;return typeof ResizeObserver<"u"&&(W=new ResizeObserver(P),W.observe(g.current)),()=>{P.clear(),G.removeEventListener("resize",P),W&&W.disconnect()}}),Aa(()=>{O()}),F.useEffect(()=>{S.current=0},[c]);const V=P=>{S.current=0,p||O(),i&&i(P)};return w.jsxs(F.Fragment,{children:[w.jsx("textarea",D({value:c,onChange:V,ref:b,rows:s,style:D({height:B.outerHeightStyle,overflow:B.overflow?"hidden":null},o)},h)),w.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:D({},JO.shadow,o,{padding:0})})]})});function eM(r,e){return D({toolbar:{minHeight:56,[r.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[r.up("sm")]:{minHeight:64}}},e)}const tM=["mode","contrastThreshold","tonalOffset"],rk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qg.white,default:Qg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Kv={text:{primary:Qg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function nk(r,e,t,i){const n=i.light||i,s=i.dark||i*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=Px(r.main,n):e==="dark"&&(r.dark=Nx(r.main,s)))}function iM(r="light"){return r==="dark"?{main:yf[200],light:yf[50],dark:yf[400]}:{main:yf[700],light:yf[400],dark:yf[800]}}function rM(r="light"){return r==="dark"?{main:mf[200],light:mf[50],dark:mf[400]}:{main:mf[500],light:mf[300],dark:mf[700]}}function nM(r="light"){return r==="dark"?{main:gf[500],light:gf[300],dark:gf[700]}:{main:gf[700],light:gf[400],dark:gf[800]}}function sM(r="light"){return r==="dark"?{main:bf[400],light:bf[300],dark:bf[700]}:{main:bf[700],light:bf[500],dark:bf[900]}}function aM(r="light"){return r==="dark"?{main:vf[400],light:vf[300],dark:vf[700]}:{main:vf[800],light:vf[500],dark:vf[900]}}function oM(r="light"){return r==="dark"?{main:Cg[400],light:Cg[300],dark:Cg[700]}:{main:"#ed6c02",light:Cg[500],dark:Cg[900]}}function lM(r){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2}=r,n=st(r,tM),s=r.primary||iM(e),o=r.secondary||rM(e),c=r.error||nM(e),h=r.info||sM(e),p=r.success||aM(e),g=r.warning||oM(e);function b(T){return ZI(T,Kv.text.primary)>=t?Kv.text.primary:rk.text.primary}const v=({color:T,name:C,mainShade:L=500,lightShade:O=300,darkShade:I=700})=>{if(T=D({},T),!T.main&&T[L]&&(T.main=T[L]),!T.hasOwnProperty("main"))throw new Error(pc(11,C?` (${C})`:"",L));if(typeof T.main!="string")throw new Error(pc(12,C?` (${C})`:"",JSON.stringify(T.main)));return nk(T,"light",O,i),nk(T,"dark",I,i),T.contrastText||(T.contrastText=b(T.main)),T},S={dark:Kv,light:rk};return Ma(D({common:D({},Qg),mode:e,primary:v({color:s,name:"primary"}),secondary:v({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:c,name:"error"}),warning:v({color:g,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:p,name:"success"}),grey:$E,contrastThreshold:t,getContrastText:b,augmentColor:v,tonalOffset:i},S[e]),n)}const uM=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function cM(r){return Math.round(r*1e5)/1e5}const sk={textTransform:"uppercase"},ak='"Roboto", "Helvetica", "Arial", sans-serif';function hM(r,e){const t=typeof e=="function"?e(r):e,{fontFamily:i=ak,fontSize:n=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:c=500,fontWeightBold:h=700,htmlFontSize:p=16,allVariants:g,pxToRem:b}=t,v=st(t,uM),S=n/14,B=b||(L=>`${L/p*S}rem`),T=(L,O,I,V,P)=>D({fontFamily:i,fontWeight:L,fontSize:B(O),lineHeight:I},i===ak?{letterSpacing:`${cM(V/O)}em`}:{},P,g),C={h1:T(s,96,1.167,-1.5),h2:T(s,60,1.2,-.5),h3:T(o,48,1.167,0),h4:T(o,34,1.235,.25),h5:T(o,24,1.334,0),h6:T(c,20,1.6,.15),subtitle1:T(o,16,1.75,.15),subtitle2:T(c,14,1.57,.1),body1:T(o,16,1.5,.15),body2:T(o,14,1.43,.15),button:T(c,14,1.75,.4,sk),caption:T(o,12,1.66,.4),overline:T(o,12,2.66,1,sk)};return Ma(D({htmlFontSize:p,pxToRem:B,fontFamily:i,fontSize:n,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:c,fontWeightBold:h},C),v,{clone:!1})}const dM=.2,fM=.14,pM=.12;function Sr(...r){return[`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px rgba(0,0,0,${dM})`,`${r[4]}px ${r[5]}px ${r[6]}px ${r[7]}px rgba(0,0,0,${fM})`,`${r[8]}px ${r[9]}px ${r[10]}px ${r[11]}px rgba(0,0,0,${pM})`].join(",")}const gM=["none",Sr(0,2,1,-1,0,1,1,0,0,1,3,0),Sr(0,3,1,-2,0,2,2,0,0,1,5,0),Sr(0,3,3,-2,0,3,4,0,0,1,8,0),Sr(0,2,4,-1,0,4,5,0,0,1,10,0),Sr(0,3,5,-1,0,5,8,0,0,1,14,0),Sr(0,3,5,-1,0,6,10,0,0,1,18,0),Sr(0,4,5,-2,0,7,10,1,0,2,16,1),Sr(0,5,5,-3,0,8,10,1,0,3,14,2),Sr(0,5,6,-3,0,9,12,1,0,3,16,2),Sr(0,6,6,-3,0,10,14,1,0,4,18,3),Sr(0,6,7,-4,0,11,15,1,0,4,20,3),Sr(0,7,8,-4,0,12,17,2,0,5,22,4),Sr(0,7,8,-4,0,13,19,2,0,5,24,4),Sr(0,7,9,-4,0,14,21,2,0,5,26,4),Sr(0,8,9,-5,0,15,22,2,0,6,28,5),Sr(0,8,10,-5,0,16,24,2,0,6,30,5),Sr(0,8,11,-5,0,17,26,2,0,6,32,5),Sr(0,9,11,-5,0,18,28,2,0,7,34,6),Sr(0,9,12,-6,0,19,29,2,0,7,36,6),Sr(0,10,13,-6,0,20,31,3,0,8,38,7),Sr(0,10,13,-6,0,21,33,3,0,8,40,7),Sr(0,10,14,-6,0,22,35,3,0,8,42,7),Sr(0,11,14,-7,0,23,36,3,0,9,44,8),Sr(0,11,15,-7,0,24,38,3,0,9,46,8)],mM=["duration","easing","delay"],yM={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},zB={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ok(r){return`${Math.round(r)}ms`}function bM(r){if(!r)return 0;const e=r/36;return Math.round((4+15*e**.25+e/5)*10)}function vM(r){const e=D({},yM,r.easing),t=D({},zB,r.duration);return D({getAutoHeightDuration:bM,create:(n=["all"],s={})=>{const{duration:o=t.standard,easing:c=e.easeInOut,delay:h=0}=s;return st(s,mM),(Array.isArray(n)?n:[n]).map(p=>`${p} ${typeof o=="string"?o:ok(o)} ${c} ${typeof h=="string"?h:ok(h)}`).join(",")}},r,{easing:e,duration:t})}const wM={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},xM=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Dx(r={},...e){const{mixins:t={},palette:i={},transitions:n={},typography:s={}}=r,o=st(r,xM);if(r.vars)throw new Error(pc(18));const c=lM(i),h=Tx(r);let p=Ma(h,{mixins:eM(h.breakpoints,t),palette:c,shadows:gM.slice(),typography:hM(c,s),transitions:vM(n),zIndex:D({},wM)});return p=Ma(p,o),p=e.reduce((g,b)=>Ma(g,b),p),p}const wb=Dx();function es(){return yb(wb)}function fi({props:r,name:e}){return KI({props:r,name:e,defaultTheme:wb})}const mo=r=>$g(r)&&r!=="classes",Ax=$g,He=qI({defaultTheme:wb,rootShouldForwardProp:mo});function SM(r){return si("MuiPaper",r)}Zt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const kM=["className","component","elevation","square","variant"],lk=r=>{let e;return r<1?e=5.11916*r**2:e=4.5*Math.log(r+1)+2,(e/100).toFixed(2)},_M=r=>{const{square:e,elevation:t,variant:i,classes:n}=r,s={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${t}`]};return di(s,SM,n)},BM=He("div",{name:"MuiPaper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:r,ownerState:e})=>{var t;return D({backgroundColor:(r.vars||r).palette.background.paper,color:(r.vars||r).palette.text.primary,transition:r.transitions.create("box-shadow")},!e.square&&{borderRadius:r.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(r.vars||r).palette.divider}`},e.variant==="elevation"&&D({boxShadow:(r.vars||r).shadows[e.elevation]},!r.vars&&r.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${ur("#fff",lk(e.elevation))}, ${ur("#fff",lk(e.elevation))})`},r.vars&&{backgroundImage:(t=r.vars.overlays)==null?void 0:t[e.elevation]}))}),Uf=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiPaper"}),{className:n,component:s="div",elevation:o=1,square:c=!1,variant:h="elevation"}=i,p=st(i,kM),g=D({},i,{component:s,elevation:o,square:c,variant:h}),b=_M(g);return w.jsx(BM,D({as:s,ownerState:g,className:nt(b.root,n),ref:t},p))});function TM(r){return si("MuiSvgIcon",r)}Zt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const CM=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],NM=r=>{const{color:e,fontSize:t,classes:i}=r,n={root:["root",e!=="inherit"&&`color${Bt(e)}`,`fontSize${Bt(t)}`]};return di(n,TM,i)},PM=He("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="inherit"&&e[`color${Bt(t.color)}`],e[`fontSize${Bt(t.fontSize)}`]]}})(({theme:r,ownerState:e})=>{var t,i,n,s,o,c,h,p,g,b,v,S,B,T,C,L,O;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(t=r.transitions)==null||(i=t.create)==null?void 0:i.call(t,"fill",{duration:(n=r.transitions)==null||(s=n.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=r.typography)==null||(c=o.pxToRem)==null?void 0:c.call(o,20))||"1.25rem",medium:((h=r.typography)==null||(p=h.pxToRem)==null?void 0:p.call(h,24))||"1.5rem",large:((g=r.typography)==null||(b=g.pxToRem)==null?void 0:b.call(g,35))||"2.1875"}[e.fontSize],color:(v=(S=(r.vars||r).palette)==null||(B=S[e.color])==null?void 0:B.main)!=null?v:{action:(T=(r.vars||r).palette)==null||(C=T.action)==null?void 0:C.active,disabled:(L=(r.vars||r).palette)==null||(O=L.action)==null?void 0:O.disabled,inherit:void 0}[e.color]}}),Uw=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiSvgIcon"}),{children:n,className:s,color:o="inherit",component:c="svg",fontSize:h="medium",htmlColor:p,inheritViewBox:g=!1,titleAccess:b,viewBox:v="0 0 24 24"}=i,S=st(i,CM),B=D({},i,{color:o,component:c,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:g,viewBox:v}),T={};g||(T.viewBox=v);const C=NM(B);return w.jsxs(PM,D({as:c,className:nt(C.root,s),ownerState:B,focusable:"false",color:p,"aria-hidden":b?void 0:!0,role:b?"img":void 0,ref:t},T,S,{children:[n,b?w.jsx("title",{children:b}):null]}))});Uw.muiName="SvgIcon";function Vx(r,e){const t=(i,n)=>w.jsx(Uw,D({"data-testid":`${e}Icon`,ref:n},i,{children:r}));return t.muiName=Uw.muiName,F.memo(F.forwardRef(t))}var Qv={exports:{}},$i={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uk;function EM(){if(uk)return $i;uk=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),B;B=Symbol.for("react.module.reference");function T(C){if(typeof C=="object"&&C!==null){var L=C.$$typeof;switch(L){case r:switch(C=C.type,C){case t:case n:case i:case p:case g:return C;default:switch(C=C&&C.$$typeof,C){case c:case o:case h:case v:case b:case s:return C;default:return L}}case e:return L}}}return $i.ContextConsumer=o,$i.ContextProvider=s,$i.Element=r,$i.ForwardRef=h,$i.Fragment=t,$i.Lazy=v,$i.Memo=b,$i.Portal=e,$i.Profiler=n,$i.StrictMode=i,$i.Suspense=p,$i.SuspenseList=g,$i.isAsyncMode=function(){return!1},$i.isConcurrentMode=function(){return!1},$i.isContextConsumer=function(C){return T(C)===o},$i.isContextProvider=function(C){return T(C)===s},$i.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===r},$i.isForwardRef=function(C){return T(C)===h},$i.isFragment=function(C){return T(C)===t},$i.isLazy=function(C){return T(C)===v},$i.isMemo=function(C){return T(C)===b},$i.isPortal=function(C){return T(C)===e},$i.isProfiler=function(C){return T(C)===n},$i.isStrictMode=function(C){return T(C)===i},$i.isSuspense=function(C){return T(C)===p},$i.isSuspenseList=function(C){return T(C)===g},$i.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===t||C===n||C===i||C===p||C===g||C===S||typeof C=="object"&&C!==null&&(C.$$typeof===v||C.$$typeof===b||C.$$typeof===s||C.$$typeof===o||C.$$typeof===h||C.$$typeof===B||C.getModuleId!==void 0)},$i.typeOf=T,$i}var ck;function RM(){return ck||(ck=1,Qv.exports=EM()),Qv.exports}RM();function WB(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,U0(r,e)}const hk={disabled:!1},J0=Mn.createContext(null);var LM=function(e){return e.scrollTop},zg="unmounted",bh="exited",vh="entering",Bf="entered",$w="exiting",yo=function(r){WB(e,r);function e(i,n){var s;s=r.call(this,i,n)||this;var o=n,c=o&&!o.isMounting?i.enter:i.appear,h;return s.appearStatus=null,i.in?c?(h=bh,s.appearStatus=vh):h=Bf:i.unmountOnExit||i.mountOnEnter?h=zg:h=bh,s.state={status:h},s.nextCallback=null,s}e.getDerivedStateFromProps=function(n,s){var o=n.in;return o&&s.status===zg?{status:bh}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(n){var s=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==vh&&o!==Bf&&(s=vh):(o===vh||o===Bf)&&(s=$w)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var n=this.props.timeout,s,o,c;return s=o=c=n,n!=null&&typeof n!="number"&&(s=n.exit,o=n.enter,c=n.appear!==void 0?n.appear:o),{exit:s,enter:o,appear:c}},t.updateStatus=function(n,s){if(n===void 0&&(n=!1),s!==null)if(this.cancelNextCallback(),s===vh){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Mg.findDOMNode(this);o&&LM(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===bh&&this.setState({status:zg})},t.performEnter=function(n){var s=this,o=this.props.enter,c=this.context?this.context.isMounting:n,h=this.props.nodeRef?[c]:[Mg.findDOMNode(this),c],p=h[0],g=h[1],b=this.getTimeouts(),v=c?b.appear:b.enter;if(!n&&!o||hk.disabled){this.safeSetState({status:Bf},function(){s.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:vh},function(){s.props.onEntering(p,g),s.onTransitionEnd(v,function(){s.safeSetState({status:Bf},function(){s.props.onEntered(p,g)})})})},t.performExit=function(){var n=this,s=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:Mg.findDOMNode(this);if(!s||hk.disabled){this.safeSetState({status:bh},function(){n.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:$w},function(){n.props.onExiting(c),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:bh},function(){n.props.onExited(c)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(n,s){s=this.setNextCallback(s),this.setState(n,s)},t.setNextCallback=function(n){var s=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,s.nextCallback=null,n(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(n,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Mg.findDOMNode(this),c=n==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],p=h[0],g=h[1];this.props.addEndListener(p,g)}n!=null&&setTimeout(this.nextCallback,n)},t.render=function(){var n=this.state.status;if(n===zg)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var c=st(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Mn.createElement(J0.Provider,{value:null},typeof o=="function"?o(n,c):Mn.cloneElement(Mn.Children.only(o),c))},e}(Mn.Component);yo.contextType=J0;yo.propTypes={};function xf(){}yo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:xf,onEntering:xf,onEntered:xf,onExit:xf,onExiting:xf,onExited:xf};yo.UNMOUNTED=zg;yo.EXITED=bh;yo.ENTERING=vh;yo.ENTERED=Bf;yo.EXITING=$w;function zx(r,e){var t=function(s){return e&&F.isValidElement(s)?e(s):s},i=Object.create(null);return r&&F.Children.map(r,function(n){return n}).forEach(function(n){i[n.key]=t(n)}),i}function IM(r,e){r=r||{},e=e||{};function t(g){return g in e?e[g]:r[g]}var i=Object.create(null),n=[];for(var s in r)s in e?n.length&&(i[s]=n,n=[]):n.push(s);var o,c={};for(var h in e){if(i[h])for(o=0;o<i[h].length;o++){var p=i[h][o];c[i[h][o]]=t(p)}c[h]=t(h)}for(o=0;o<n.length;o++)c[n[o]]=t(n[o]);return c}function xh(r,e,t){return t[e]!=null?t[e]:r.props[e]}function FM(r,e){return zx(r.children,function(t){return F.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:xh(t,"appear",r),enter:xh(t,"enter",r),exit:xh(t,"exit",r)})})}function OM(r,e,t){var i=zx(r.children),n=IM(e,i);return Object.keys(n).forEach(function(s){var o=n[s];if(F.isValidElement(o)){var c=s in e,h=s in i,p=e[s],g=F.isValidElement(p)&&!p.props.in;h&&(!c||g)?n[s]=F.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:xh(o,"exit",r),enter:xh(o,"enter",r)}):!h&&c&&!g?n[s]=F.cloneElement(o,{in:!1}):h&&c&&F.isValidElement(p)&&(n[s]=F.cloneElement(o,{onExited:t.bind(null,o),in:p.props.in,exit:xh(o,"exit",r),enter:xh(o,"enter",r)}))}}),n}var MM=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},DM={component:"div",childFactory:function(e){return e}},Wx=function(r){WB(e,r);function e(i,n){var s;s=r.call(this,i,n)||this;var o=s.handleExited.bind(iu(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(n,s){var o=s.children,c=s.handleExited,h=s.firstRender;return{children:h?FM(n,c):OM(n,o,c),firstRender:!1}},t.handleExited=function(n,s){var o=zx(this.props.children);n.key in o||(n.props.onExited&&n.props.onExited(s),this.mounted&&this.setState(function(c){var h=D({},c.children);return delete h[n.key],{children:h}}))},t.render=function(){var n=this.props,s=n.component,o=n.childFactory,c=st(n,["component","childFactory"]),h=this.state.contextValue,p=MM(this.state.children).map(o);return delete c.appear,delete c.enter,delete c.exit,s===null?Mn.createElement(J0.Provider,{value:h},p):Mn.createElement(J0.Provider,{value:h},Mn.createElement(s,c,p))},e}(Mn.Component);Wx.propTypes={};Wx.defaultProps=DM;const HB=r=>r.scrollTop;function Mf(r,e){var t,i;const{timeout:n,easing:s,style:o={}}=r;return{duration:(t=o.transitionDuration)!=null?t:typeof n=="number"?n:n[e.mode]||0,easing:(i=o.transitionTimingFunction)!=null?i:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function AM(r){return si("MuiCollapse",r)}Zt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const VM=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],zM=r=>{const{orientation:e,classes:t}=r,i={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return di(i,AM,t)},WM=He("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.state==="entered"&&e.entered,t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&e.hidden]}})(({theme:r,ownerState:e})=>D({height:0,overflow:"hidden",transition:r.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:r.transitions.create("width")},e.state==="entered"&&D({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),HM=He("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(r,e)=>e.wrapper})(({ownerState:r})=>D({display:"flex",width:"100%"},r.orientation==="horizontal"&&{width:"auto",height:"100%"})),GM=He("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(r,e)=>e.wrapperInner})(({ownerState:r})=>D({width:"100%"},r.orientation==="horizontal"&&{width:"auto",height:"100%"})),GB=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiCollapse"}),{addEndListener:n,children:s,className:o,collapsedSize:c="0px",component:h,easing:p,in:g,onEnter:b,onEntered:v,onEntering:S,onExit:B,onExited:T,onExiting:C,orientation:L="vertical",style:O,timeout:I=zB.standard,TransitionComponent:V=yo}=i,P=st(i,VM),G=D({},i,{orientation:L,collapsedSize:c}),W=zM(G),J=es(),re=F.useRef(),j=F.useRef(null),oe=F.useRef(),ge=typeof c=="number"?`${c}px`:c,he=L==="horizontal",ve=he?"width":"height";F.useEffect(()=>()=>{clearTimeout(re.current)},[]);const Be=F.useRef(null),te=Wi(t,Be),ue=Ee=>Qe=>{if(Ee){const Oe=Be.current;Qe===void 0?Ee(Oe):Ee(Oe,Qe)}},ne=()=>j.current?j.current[he?"clientWidth":"clientHeight"]:0,Se=ue((Ee,Qe)=>{j.current&&he&&(j.current.style.position="absolute"),Ee.style[ve]=ge,b&&b(Ee,Qe)}),z=ue((Ee,Qe)=>{const Oe=ne();j.current&&he&&(j.current.style.position="");const{duration:et,easing:wt}=Mf({style:O,timeout:I,easing:p},{mode:"enter"});if(I==="auto"){const pt=J.transitions.getAutoHeightDuration(Oe);Ee.style.transitionDuration=`${pt}ms`,oe.current=pt}else Ee.style.transitionDuration=typeof et=="string"?et:`${et}ms`;Ee.style[ve]=`${Oe}px`,Ee.style.transitionTimingFunction=wt,S&&S(Ee,Qe)}),Z=ue((Ee,Qe)=>{Ee.style[ve]="auto",v&&v(Ee,Qe)}),pe=ue(Ee=>{Ee.style[ve]=`${ne()}px`,B&&B(Ee)}),We=ue(T),Ie=ue(Ee=>{const Qe=ne(),{duration:Oe,easing:et}=Mf({style:O,timeout:I,easing:p},{mode:"exit"});if(I==="auto"){const wt=J.transitions.getAutoHeightDuration(Qe);Ee.style.transitionDuration=`${wt}ms`,oe.current=wt}else Ee.style.transitionDuration=typeof Oe=="string"?Oe:`${Oe}ms`;Ee.style[ve]=ge,Ee.style.transitionTimingFunction=et,C&&C(Ee)}),Ue=Ee=>{I==="auto"&&(re.current=setTimeout(Ee,oe.current||0)),n&&n(Be.current,Ee)};return w.jsx(V,D({in:g,onEnter:Se,onEntered:Z,onEntering:z,onExit:pe,onExited:We,onExiting:Ie,addEndListener:Ue,nodeRef:Be,timeout:I==="auto"?null:I},P,{children:(Ee,Qe)=>w.jsx(WM,D({as:h,className:nt(W.root,o,{entered:W.entered,exited:!g&&ge==="0px"&&W.hidden}[Ee]),style:D({[he?"minWidth":"minHeight"]:ge},O),ownerState:D({},G,{state:Ee}),ref:te},Qe,{children:w.jsx(HM,{ownerState:D({},G,{state:Ee}),className:W.wrapper,ref:j,children:w.jsx(GM,{ownerState:D({},G,{state:Ee}),className:W.wrapperInner,children:s})})}))}))});GB.muiSupportAuto=!0;function UM(r){const{className:e,classes:t,pulsate:i=!1,rippleX:n,rippleY:s,rippleSize:o,in:c,onExited:h,timeout:p}=r,[g,b]=F.useState(!1),v=nt(e,t.ripple,t.rippleVisible,i&&t.ripplePulsate),S={width:o,height:o,top:-(o/2)+s,left:-(o/2)+n},B=nt(t.child,g&&t.childLeaving,i&&t.childPulsate);return!c&&!g&&b(!0),F.useEffect(()=>{if(!c&&h!=null){const T=setTimeout(h,p);return()=>{clearTimeout(T)}}},[h,c,p]),w.jsx("span",{className:v,style:S,children:w.jsx("span",{className:B})})}const Pa=Zt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),$M=["center","classes","className"];let xb=r=>r,dk,fk,pk,gk;const jw=550,jM=80,YM=mx(dk||(dk=xb`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),qM=mx(fk||(fk=xb`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),XM=mx(pk||(pk=xb`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),KM=He("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),QM=He(UM,{name:"MuiTouchRipple",slot:"Ripple"})(gk||(gk=xb`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Pa.rippleVisible,YM,jw,({theme:r})=>r.transitions.easing.easeInOut,Pa.ripplePulsate,({theme:r})=>r.transitions.duration.shorter,Pa.child,Pa.childLeaving,qM,jw,({theme:r})=>r.transitions.easing.easeInOut,Pa.childPulsate,XM,({theme:r})=>r.transitions.easing.easeInOut),JM=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTouchRipple"}),{center:n=!1,classes:s={},className:o}=i,c=st(i,$M),[h,p]=F.useState([]),g=F.useRef(0),b=F.useRef(null);F.useEffect(()=>{b.current&&(b.current(),b.current=null)},[h]);const v=F.useRef(!1),S=F.useRef(null),B=F.useRef(null),T=F.useRef(null);F.useEffect(()=>()=>{clearTimeout(S.current)},[]);const C=F.useCallback(V=>{const{pulsate:P,rippleX:G,rippleY:W,rippleSize:J,cb:re}=V;p(j=>[...j,w.jsx(QM,{classes:{ripple:nt(s.ripple,Pa.ripple),rippleVisible:nt(s.rippleVisible,Pa.rippleVisible),ripplePulsate:nt(s.ripplePulsate,Pa.ripplePulsate),child:nt(s.child,Pa.child),childLeaving:nt(s.childLeaving,Pa.childLeaving),childPulsate:nt(s.childPulsate,Pa.childPulsate)},timeout:jw,pulsate:P,rippleX:G,rippleY:W,rippleSize:J},g.current)]),g.current+=1,b.current=re},[s]),L=F.useCallback((V={},P={},G)=>{const{pulsate:W=!1,center:J=n||P.pulsate,fakeElement:re=!1}=P;if((V==null?void 0:V.type)==="mousedown"&&v.current){v.current=!1;return}(V==null?void 0:V.type)==="touchstart"&&(v.current=!0);const j=re?null:T.current,oe=j?j.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ge,he,ve;if(J||V===void 0||V.clientX===0&&V.clientY===0||!V.clientX&&!V.touches)ge=Math.round(oe.width/2),he=Math.round(oe.height/2);else{const{clientX:Be,clientY:te}=V.touches&&V.touches.length>0?V.touches[0]:V;ge=Math.round(Be-oe.left),he=Math.round(te-oe.top)}if(J)ve=Math.sqrt((2*oe.width**2+oe.height**2)/3),ve%2===0&&(ve+=1);else{const Be=Math.max(Math.abs((j?j.clientWidth:0)-ge),ge)*2+2,te=Math.max(Math.abs((j?j.clientHeight:0)-he),he)*2+2;ve=Math.sqrt(Be**2+te**2)}V!=null&&V.touches?B.current===null&&(B.current=()=>{C({pulsate:W,rippleX:ge,rippleY:he,rippleSize:ve,cb:G})},S.current=setTimeout(()=>{B.current&&(B.current(),B.current=null)},jM)):C({pulsate:W,rippleX:ge,rippleY:he,rippleSize:ve,cb:G})},[n,C]),O=F.useCallback(()=>{L({},{pulsate:!0})},[L]),I=F.useCallback((V,P)=>{if(clearTimeout(S.current),(V==null?void 0:V.type)==="touchend"&&B.current){B.current(),B.current=null,S.current=setTimeout(()=>{I(V,P)});return}B.current=null,p(G=>G.length>0?G.slice(1):G),b.current=P},[]);return F.useImperativeHandle(t,()=>({pulsate:O,start:L,stop:I}),[O,L,I]),w.jsx(KM,D({className:nt(Pa.root,s.root,o),ref:T},c,{children:w.jsx(Wx,{component:null,exit:!0,children:h})}))});function ZM(r){return si("MuiButtonBase",r)}const eD=Zt("MuiButtonBase",["root","disabled","focusVisible"]),tD=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],iD=r=>{const{disabled:e,focusVisible:t,focusVisibleClassName:i,classes:n}=r,o=di({root:["root",e&&"disabled",t&&"focusVisible"]},ZM,n);return t&&i&&(o.root+=` ${i}`),o},rD=He("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(r,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${eD.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),$f=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiButtonBase"}),{action:n,centerRipple:s=!1,children:o,className:c,component:h="button",disabled:p=!1,disableRipple:g=!1,disableTouchRipple:b=!1,focusRipple:v=!1,LinkComponent:S="a",onBlur:B,onClick:T,onContextMenu:C,onDragLeave:L,onFocus:O,onFocusVisible:I,onKeyDown:V,onKeyUp:P,onMouseDown:G,onMouseLeave:W,onMouseUp:J,onTouchEnd:re,onTouchMove:j,onTouchStart:oe,tabIndex:ge=0,TouchRippleProps:he,touchRippleRef:ve,type:Be}=i,te=st(i,tD),ue=F.useRef(null),ne=F.useRef(null),Se=Wi(ne,ve),{isFocusVisibleRef:z,onFocus:Z,onBlur:pe,ref:We}=bx(),[Ie,Ue]=F.useState(!1);p&&Ie&&Ue(!1),F.useImperativeHandle(n,()=>({focusVisible:()=>{Ue(!0),ue.current.focus()}}),[]);const[Ee,Qe]=F.useState(!1);F.useEffect(()=>{Qe(!0)},[]);const Oe=Ee&&!g&&!p;F.useEffect(()=>{Ie&&v&&!g&&Ee&&ne.current.pulsate()},[g,v,Ie,Ee]);function et(ke,Je,Ht=b){return ua(Xt=>(Je&&Je(Xt),!Ht&&ne.current&&ne.current[ke](Xt),!0))}const wt=et("start",G),pt=et("stop",C),ei=et("stop",L),gi=et("stop",J),At=et("stop",ke=>{Ie&&ke.preventDefault(),W&&W(ke)}),Bi=et("start",oe),Ai=et("stop",re),$t=et("stop",j),Ki=et("stop",ke=>{pe(ke),z.current===!1&&Ue(!1),B&&B(ke)},!1),Xi=ua(ke=>{ue.current||(ue.current=ke.currentTarget),Z(ke),z.current===!0&&(Ue(!0),I&&I(ke)),O&&O(ke)}),zt=()=>{const ke=ue.current;return h&&h!=="button"&&!(ke.tagName==="A"&&ke.href)},Wt=F.useRef(!1),Li=ua(ke=>{v&&!Wt.current&&Ie&&ne.current&&ke.key===" "&&(Wt.current=!0,ne.current.stop(ke,()=>{ne.current.start(ke)})),ke.target===ke.currentTarget&&zt()&&ke.key===" "&&ke.preventDefault(),V&&V(ke),ke.target===ke.currentTarget&&zt()&&ke.key==="Enter"&&!p&&(ke.preventDefault(),T&&T(ke))}),Qi=ua(ke=>{v&&ke.key===" "&&ne.current&&Ie&&!ke.defaultPrevented&&(Wt.current=!1,ne.current.stop(ke,()=>{ne.current.pulsate(ke)})),P&&P(ke),T&&ke.target===ke.currentTarget&&zt()&&ke.key===" "&&!ke.defaultPrevented&&T(ke)});let Ve=h;Ve==="button"&&(te.href||te.to)&&(Ve=S);const qe={};Ve==="button"?(qe.type=Be===void 0?"button":Be,qe.disabled=p):(!te.href&&!te.to&&(qe.role="button"),p&&(qe["aria-disabled"]=p));const bt=Wi(We,ue),Xe=Wi(t,bt),se=D({},i,{centerRipple:s,component:h,disabled:p,disableRipple:g,disableTouchRipple:b,focusRipple:v,tabIndex:ge,focusVisible:Ie}),Re=iD(se);return w.jsxs(rD,D({as:Ve,className:nt(Re.root,c),ownerState:se,onBlur:Ki,onClick:T,onContextMenu:pt,onFocus:Xi,onKeyDown:Li,onKeyUp:Qi,onMouseDown:wt,onMouseLeave:At,onMouseUp:gi,onDragLeave:ei,onTouchEnd:Ai,onTouchMove:$t,onTouchStart:Bi,ref:Xe,tabIndex:p?-1:ge,type:Be},qe,te,{children:[o,Oe?w.jsx(JM,D({ref:Se,center:s},he)):null]}))});function nD(r){return si("MuiTypography",r)}Zt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const sD=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],aD=r=>{const{align:e,gutterBottom:t,noWrap:i,paragraph:n,variant:s,classes:o}=r,c={root:["root",s,r.align!=="inherit"&&`align${Bt(e)}`,t&&"gutterBottom",i&&"noWrap",n&&"paragraph"]};return di(c,nD,o)},oD=He("span",{name:"MuiTypography",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Bt(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:r,ownerState:e})=>D({margin:0},e.variant&&r.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),mk={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},lD={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},uD=r=>lD[r]||r,ps=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTypography"}),n=uD(i.color),s=SB(D({},i,{color:n})),{align:o="inherit",className:c,component:h,gutterBottom:p=!1,noWrap:g=!1,paragraph:b=!1,variant:v="body1",variantMapping:S=mk}=s,B=st(s,sD),T=D({},s,{align:o,color:n,className:c,component:h,gutterBottom:p,noWrap:g,paragraph:b,variant:v,variantMapping:S}),C=h||(b?"p":S[v]||mk[v])||"span",L=aD(T);return w.jsx(oD,D({as:C,ref:t,ownerState:T,className:nt(L.root,c)},B))}),cD=He(vO,{name:"MuiPopper",slot:"Root",overridesResolver:(r,e)=>e.root})({}),Hx=F.forwardRef(function(e,t){const i=TB(),n=fi({props:e,name:"MuiPopper"});return w.jsx(cD,D({direction:i==null?void 0:i.direction},n,{ref:t}))});function jf({props:r,states:e,muiFormControl:t}){return e.reduce((i,n)=>(i[n]=r[n],t&&typeof r[n]>"u"&&(i[n]=t[n]),i),{})}const Gx=F.createContext();function Yf(){return F.useContext(Gx)}function hD(r){return w.jsx(HR,D({},r,{defaultTheme:wb}))}function yk(r){return r!=null&&!(Array.isArray(r)&&r.length===0)}function Ux(r,e=!1){return r&&(yk(r.value)&&r.value!==""||e&&yk(r.defaultValue)&&r.defaultValue!=="")}function dD(r){return r.startAdornment}function fD(r){return si("MuiInputBase",r)}const Df=Zt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),pD=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],Sb=(r,e)=>{const{ownerState:t}=r;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${Bt(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},kb=(r,e)=>{const{ownerState:t}=r;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},gD=r=>{const{classes:e,color:t,disabled:i,error:n,endAdornment:s,focused:o,formControl:c,fullWidth:h,hiddenLabel:p,multiline:g,readOnly:b,size:v,startAdornment:S,type:B}=r,T={root:["root",`color${Bt(t)}`,i&&"disabled",n&&"error",h&&"fullWidth",o&&"focused",c&&"formControl",v==="small"&&"sizeSmall",g&&"multiline",S&&"adornedStart",s&&"adornedEnd",p&&"hiddenLabel",b&&"readOnly"],input:["input",i&&"disabled",B==="search"&&"inputTypeSearch",g&&"inputMultiline",v==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",S&&"inputAdornedStart",s&&"inputAdornedEnd",b&&"readOnly"]};return di(T,fD,e)},_b=He("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Sb})(({theme:r,ownerState:e})=>D({},r.typography.body1,{color:(r.vars||r).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Df.disabled}`]:{color:(r.vars||r).palette.text.disabled,cursor:"default"}},e.multiline&&D({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),Bb=He("input",{name:"MuiInputBase",slot:"Input",overridesResolver:kb})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light",i=D({color:"currentColor"},r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:r.transitions.create("opacity",{duration:r.transitions.duration.shorter})}),n={opacity:"0 !important"},s=r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return D({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Df.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Df.disabled}`]:{opacity:1,WebkitTextFillColor:(r.vars||r).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),mD=w.jsx(hD,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),$x=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiInputBase"}),{"aria-describedby":n,autoComplete:s,autoFocus:o,className:c,components:h={},componentsProps:p={},defaultValue:g,disabled:b,disableInjectingGlobalStyles:v,endAdornment:S,fullWidth:B=!1,id:T,inputComponent:C="input",inputProps:L={},inputRef:O,maxRows:I,minRows:V,multiline:P=!1,name:G,onBlur:W,onChange:J,onClick:re,onFocus:j,onKeyDown:oe,onKeyUp:ge,placeholder:he,readOnly:ve,renderSuffix:Be,rows:te,startAdornment:ue,type:ne="text",value:Se}=i,z=st(i,pD),Z=L.value!=null?L.value:Se,{current:pe}=F.useRef(Z!=null),We=F.useRef(),Ie=F.useCallback(Xe=>{},[]),Ue=Wi(L.ref,Ie),Ee=Wi(O,Ue),Qe=Wi(We,Ee),[Oe,et]=F.useState(!1),wt=Yf(),pt=jf({props:i,muiFormControl:wt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});pt.focused=wt?wt.focused:Oe,F.useEffect(()=>{!wt&&b&&Oe&&(et(!1),W&&W())},[wt,b,Oe,W]);const ei=wt&&wt.onFilled,gi=wt&&wt.onEmpty,At=F.useCallback(Xe=>{Ux(Xe)?ei&&ei():gi&&gi()},[ei,gi]);Aa(()=>{pe&&At({value:Z})},[Z,At,pe]);const Bi=Xe=>{if(pt.disabled){Xe.stopPropagation();return}j&&j(Xe),L.onFocus&&L.onFocus(Xe),wt&&wt.onFocus?wt.onFocus(Xe):et(!0)},Ai=Xe=>{W&&W(Xe),L.onBlur&&L.onBlur(Xe),wt&&wt.onBlur?wt.onBlur(Xe):et(!1)},$t=(Xe,...se)=>{if(!pe){const Re=Xe.target||We.current;if(Re==null)throw new Error(pc(1));At({value:Re.value})}L.onChange&&L.onChange(Xe,...se),J&&J(Xe,...se)};F.useEffect(()=>{At(We.current)},[]);const Ki=Xe=>{We.current&&Xe.currentTarget===Xe.target&&We.current.focus(),re&&re(Xe)};let Xi=C,zt=L;P&&Xi==="input"&&(te?zt=D({type:void 0,minRows:te,maxRows:te},zt):zt=D({type:void 0,maxRows:I,minRows:V},zt),Xi=ZO);const Wt=Xe=>{At(Xe.animationName==="mui-auto-fill-cancel"?We.current:{value:"x"})};F.useEffect(()=>{wt&&wt.setAdornedStart(!!ue)},[wt,ue]);const Li=D({},i,{color:pt.color||"primary",disabled:pt.disabled,endAdornment:S,error:pt.error,focused:pt.focused,formControl:wt,fullWidth:B,hiddenLabel:pt.hiddenLabel,multiline:P,size:pt.size,startAdornment:ue,type:ne}),Qi=gD(Li),Ve=h.Root||_b,qe=p.root||{},bt=h.Input||Bb;return zt=D({},zt,p.input),w.jsxs(F.Fragment,{children:[!v&&mD,w.jsxs(Ve,D({},qe,!ll(Ve)&&{ownerState:D({},Li,qe.ownerState)},{ref:t,onClick:Ki},z,{className:nt(Qi.root,qe.className,c),children:[ue,w.jsx(Gx.Provider,{value:null,children:w.jsx(bt,D({ownerState:Li,"aria-invalid":pt.error,"aria-describedby":n,autoComplete:s,autoFocus:o,defaultValue:g,disabled:pt.disabled,id:T,onAnimationStart:Wt,name:G,placeholder:he,readOnly:ve,required:pt.required,rows:te,value:Z,onKeyDown:oe,onKeyUp:ge,type:ne},zt,!ll(bt)&&{as:Xi,ownerState:D({},Li,zt.ownerState)},{ref:Qe,className:nt(Qi.input,zt.className),onBlur:Ai,onChange:$t,onFocus:Bi}))}),S,Be?Be(D({},pt,{startAdornment:ue})):null]}))]})});function yD(r){return si("MuiInput",r)}const m0=D({},Df,Zt("MuiInput",["root","underline","input"]));function bD(r){return si("MuiOutlinedInput",r)}const rc=D({},Df,Zt("MuiOutlinedInput",["root","notchedOutline","input"]));function vD(r){return si("MuiFilledInput",r)}const Sf=D({},Df,Zt("MuiFilledInput",["root","underline","input"])),wD=Vx(w.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),xD=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],SD={entering:{opacity:1},entered:{opacity:1}},UB=F.forwardRef(function(e,t){const i=es(),n={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:c,easing:h,in:p,onEnter:g,onEntered:b,onEntering:v,onExit:S,onExited:B,onExiting:T,style:C,timeout:L=n,TransitionComponent:O=yo}=e,I=st(e,xD),V=F.useRef(null),P=Wi(c.ref,t),G=Wi(V,P),W=Be=>te=>{if(Be){const ue=V.current;te===void 0?Be(ue):Be(ue,te)}},J=W(v),re=W((Be,te)=>{HB(Be);const ue=Mf({style:C,timeout:L,easing:h},{mode:"enter"});Be.style.webkitTransition=i.transitions.create("opacity",ue),Be.style.transition=i.transitions.create("opacity",ue),g&&g(Be,te)}),j=W(b),oe=W(T),ge=W(Be=>{const te=Mf({style:C,timeout:L,easing:h},{mode:"exit"});Be.style.webkitTransition=i.transitions.create("opacity",te),Be.style.transition=i.transitions.create("opacity",te),S&&S(Be)}),he=W(B),ve=Be=>{s&&s(V.current,Be)};return w.jsx(O,D({appear:o,in:p,nodeRef:V,onEnter:re,onEntered:j,onEntering:J,onExit:ge,onExited:he,onExiting:oe,addEndListener:ve,timeout:L},I,{children:(Be,te)=>F.cloneElement(c,D({style:D({opacity:0,visibility:Be==="exited"&&!p?"hidden":void 0},SD[Be],C,c.props.style),ref:G},te))}))});function kD(r){return si("MuiBackdrop",r)}Zt("MuiBackdrop",["root","invisible"]);const _D=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],BD=r=>{const{classes:e,invisible:t}=r;return di({root:["root",t&&"invisible"]},kD,e)},TD=He("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.invisible&&e.invisible]}})(({ownerState:r})=>D({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},r.invisible&&{backgroundColor:"transparent"})),$B=F.forwardRef(function(e,t){var i,n;const s=fi({props:e,name:"MuiBackdrop"}),{children:o,component:c="div",components:h={},componentsProps:p={},className:g,invisible:b=!1,open:v,transitionDuration:S,TransitionComponent:B=UB}=s,T=st(s,_D),C=D({},s,{component:c,invisible:b}),L=BD(C);return w.jsx(B,D({in:v,timeout:S},T,{children:w.jsx(TD,{"aria-hidden":!0,as:(i=h.Root)!=null?i:c,className:nt(L.root,g),ownerState:D({},C,(n=p.root)==null?void 0:n.ownerState),classes:L,ref:t,children:o})}))}),y0=r=>!r||!ll(r),CD=Dx(),ND=AI({defaultTheme:CD,defaultClassName:"MuiBox-root",generateClassName:lB.generate});function PD(r){return si("MuiButton",r)}const b0=Zt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),ED=F.createContext({}),RD=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],LD=["root"],ID=r=>{const{color:e,disableElevation:t,fullWidth:i,size:n,variant:s,classes:o}=r,c={root:["root",s,`${s}${Bt(e)}`,`size${Bt(n)}`,`${s}Size${Bt(n)}`,e==="inherit"&&"colorInherit",t&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Bt(n)}`],endIcon:["endIcon",`iconSize${Bt(n)}`]},h=di(c,PD,o);return D({},o,h)},jB=r=>D({},r.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},r.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},r.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),FD=He($f,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`${t.variant}${Bt(t.color)}`],e[`size${Bt(t.size)}`],e[`${t.variant}Size${Bt(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:r,ownerState:e})=>{var t,i;return D({},r.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),"&:hover":D({textDecoration:"none",backgroundColor:r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:ur(r.palette.text.primary,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:r.vars?`rgba(${r.vars.palette[e.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:ur(r.palette[e.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(r.vars||r).palette[e.color].main}`,backgroundColor:r.vars?`rgba(${r.vars.palette[e.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:ur(r.palette[e.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:(r.vars||r).palette.grey.A100,boxShadow:(r.vars||r).shadows[4],"@media (hover: none)":{boxShadow:(r.vars||r).shadows[2],backgroundColor:(r.vars||r).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(r.vars||r).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(r.vars||r).palette[e.color].main}}),"&:active":D({},e.variant==="contained"&&{boxShadow:(r.vars||r).shadows[8]}),[`&.${b0.focusVisible}`]:D({},e.variant==="contained"&&{boxShadow:(r.vars||r).shadows[6]}),[`&.${b0.disabled}`]:D({color:(r.vars||r).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(r.vars||r).palette.action.disabledBackground}`},e.variant==="outlined"&&e.color==="secondary"&&{border:`1px solid ${(r.vars||r).palette.action.disabled}`},e.variant==="contained"&&{color:(r.vars||r).palette.action.disabled,boxShadow:(r.vars||r).shadows[0],backgroundColor:(r.vars||r).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(r.vars||r).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(r.vars||r).palette[e.color].main,border:r.vars?`1px solid rgba(${r.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${ur(r.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:r.vars?r.vars.palette.text.primary:(t=(i=r.palette).getContrastText)==null?void 0:t.call(i,r.palette.grey[300]),backgroundColor:(r.vars||r).palette.grey[300],boxShadow:(r.vars||r).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(r.vars||r).palette[e.color].contrastText,backgroundColor:(r.vars||r).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:r.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:r.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:r.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:r})=>r.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${b0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${b0.disabled}`]:{boxShadow:"none"}}),OD=He("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.startIcon,e[`iconSize${Bt(t.size)}`]]}})(({ownerState:r})=>D({display:"inherit",marginRight:8,marginLeft:-4},r.size==="small"&&{marginLeft:-2},jB(r))),MD=He("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.endIcon,e[`iconSize${Bt(t.size)}`]]}})(({ownerState:r})=>D({display:"inherit",marginRight:-4,marginLeft:8},r.size==="small"&&{marginRight:-2},jB(r))),au=F.forwardRef(function(e,t){const i=F.useContext(ED),n=oB(i,e),s=fi({props:n,name:"MuiButton"}),{children:o,color:c="primary",component:h="button",className:p,disabled:g=!1,disableElevation:b=!1,disableFocusRipple:v=!1,endIcon:S,focusVisibleClassName:B,fullWidth:T=!1,size:C="medium",startIcon:L,type:O,variant:I="text"}=s,V=st(s,RD),P=D({},s,{color:c,component:h,disabled:g,disableElevation:b,disableFocusRipple:v,fullWidth:T,size:C,type:O,variant:I}),G=ID(P),{root:W}=G,J=st(G,LD),re=L&&w.jsx(OD,{className:J.startIcon,ownerState:P,children:L}),j=S&&w.jsx(MD,{className:J.endIcon,ownerState:P,children:S});return w.jsxs(FD,D({ownerState:P,className:nt(i.className,W,p),component:h,disabled:g,focusRipple:!v,focusVisibleClassName:nt(J.focusVisible,B),ref:t,type:O},V,{classes:J,children:[re,o,j]}))}),DD=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","theme"],AD=r=>r.classes,VD=He("div",{name:"MuiModal",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:r,ownerState:e})=>D({position:"fixed",zIndex:(r.vars||r).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),zD=He($B,{name:"MuiModal",slot:"Backdrop",overridesResolver:(r,e)=>e.backdrop})({zIndex:-1}),YB=F.forwardRef(function(e,t){var i,n;const s=fi({name:"MuiModal",props:e}),{BackdropComponent:o=zD,BackdropProps:c,closeAfterTransition:h=!1,children:p,component:g,components:b={},componentsProps:v={},disableAutoFocus:S=!1,disableEnforceFocus:B=!1,disableEscapeKeyDown:T=!1,disablePortal:C=!1,disableRestoreFocus:L=!1,disableScrollLock:O=!1,hideBackdrop:I=!1,keepMounted:V=!1,theme:P}=s,G=st(s,DD),[W,J]=F.useState(!0),re={closeAfterTransition:h,disableAutoFocus:S,disableEnforceFocus:B,disableEscapeKeyDown:T,disablePortal:C,disableRestoreFocus:L,disableScrollLock:O,hideBackdrop:I,keepMounted:V},j=D({},s,re,{exited:W}),oe=AD(j),ge=(i=(n=b.Root)!=null?n:g)!=null?i:VD;return w.jsx(AO,D({components:D({Root:ge,Backdrop:o},b),componentsProps:{root:()=>D({},zw(v.root,j),!ll(ge)&&{as:g,theme:P}),backdrop:()=>D({},c,zw(v.backdrop,j))},onTransitionEnter:()=>J(!1),onTransitionExited:()=>J(!0),ref:t},G,{classes:oe},re,{children:p}))});function WD(r){return si("MuiDialog",r)}const Jv=Zt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),qB=F.createContext({}),HD=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],GD=He($B,{name:"MuiDialog",slot:"Backdrop",overrides:(r,e)=>e.backdrop})({zIndex:-1}),UD=r=>{const{classes:e,scroll:t,maxWidth:i,fullWidth:n,fullScreen:s}=r,o={root:["root"],container:["container",`scroll${Bt(t)}`],paper:["paper",`paperScroll${Bt(t)}`,`paperWidth${Bt(String(i))}`,n&&"paperFullWidth",s&&"paperFullScreen"]};return di(o,WD,e)},$D=He(YB,{name:"MuiDialog",slot:"Root",overridesResolver:(r,e)=>e.root})({"@media print":{position:"absolute !important"}}),jD=He("div",{name:"MuiDialog",slot:"Container",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.container,e[`scroll${Bt(t.scroll)}`]]}})(({ownerState:r})=>D({height:"100%","@media print":{height:"auto"},outline:0},r.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},r.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),YD=He(Uf,{name:"MuiDialog",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.paper,e[`scrollPaper${Bt(t.scroll)}`],e[`paperWidth${Bt(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:r,ownerState:e})=>D({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:r.breakpoints.unit==="px"?Math.max(r.breakpoints.values.xs,444):`${r.breakpoints.values.xs}${r.breakpoints.unit}`,[`&.${Jv.paperScrollBody}`]:{[r.breakpoints.down(Math.max(r.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${r.breakpoints.values[e.maxWidth]}${r.breakpoints.unit}`,[`&.${Jv.paperScrollBody}`]:{[r.breakpoints.down(r.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Jv.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Oh=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiDialog"}),n=es(),s={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":c,BackdropComponent:h,BackdropProps:p,children:g,className:b,disableEscapeKeyDown:v=!1,fullScreen:S=!1,fullWidth:B=!1,maxWidth:T="sm",onBackdropClick:C,onClose:L,open:O,PaperComponent:I=Uf,PaperProps:V={},scroll:P="paper",TransitionComponent:G=UB,transitionDuration:W=s,TransitionProps:J}=i,re=st(i,HD),j=D({},i,{disableEscapeKeyDown:v,fullScreen:S,fullWidth:B,maxWidth:T,scroll:P}),oe=UD(j),ge=F.useRef(),he=ue=>{ge.current=ue.target===ue.currentTarget},ve=ue=>{ge.current&&(ge.current=null,C&&C(ue),L&&L(ue,"backdropClick"))},Be=yx(c),te=F.useMemo(()=>({titleId:Be}),[Be]);return w.jsx($D,D({className:nt(oe.root,b),closeAfterTransition:!0,components:{Backdrop:GD},componentsProps:{backdrop:D({transitionDuration:W,as:h},p)},disableEscapeKeyDown:v,onClose:L,open:O,ref:t,onClick:ve,ownerState:j},re,{children:w.jsx(G,D({appear:!0,in:O,timeout:W,role:"presentation"},J,{children:w.jsx(jD,{className:nt(oe.container),onMouseDown:he,ownerState:j,children:w.jsx(YD,D({as:I,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":Be},V,{className:nt(oe.paper,V.className),ownerState:j,children:w.jsx(qB.Provider,{value:te,children:g})}))})}))}))});function qD(r){return si("MuiDialogActions",r)}Zt("MuiDialogActions",["root","spacing"]);const XD=["className","disableSpacing"],KD=r=>{const{classes:e,disableSpacing:t}=r;return di({root:["root",!t&&"spacing"]},qD,e)},QD=He("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disableSpacing&&e.spacing]}})(({ownerState:r})=>D({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!r.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),_m=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:s=!1}=i,o=st(i,XD),c=D({},i,{disableSpacing:s}),h=KD(c);return w.jsx(QD,D({className:nt(h.root,n),ownerState:c,ref:t},o))});function JD(r){return si("MuiDialogContent",r)}Zt("MuiDialogContent",["root","dividers"]);function ZD(r){return si("MuiDialogTitle",r)}const eA=Zt("MuiDialogTitle",["root"]),tA=["className","dividers"],iA=r=>{const{classes:e,dividers:t}=r;return di({root:["root",t&&"dividers"]},JD,e)},rA=He("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.dividers&&e.dividers]}})(({theme:r,ownerState:e})=>D({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(r.vars||r).palette.divider}`,borderBottom:`1px solid ${(r.vars||r).palette.divider}`}:{[`.${eA.root} + &`]:{paddingTop:0}})),Mh=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiDialogContent"}),{className:n,dividers:s=!1}=i,o=st(i,tA),c=D({},i,{dividers:s}),h=iA(c);return w.jsx(rA,D({className:nt(h.root,n),ownerState:c,ref:t},o))}),nA=["className","id"],sA=r=>{const{classes:e}=r;return di({root:["root"]},ZD,e)},aA=He(ps,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(r,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),qf=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiDialogTitle"}),{className:n,id:s}=i,o=st(i,nA),c=i,h=sA(c),{titleId:p=s}=F.useContext(qB);return w.jsx(aA,D({component:"h2",className:nt(h.root,n),ownerState:c,ref:t,variant:"h6",id:p},o))});function oA(r){return si("MuiDivider",r)}const bk=Zt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),lA=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],uA=r=>{const{absolute:e,children:t,classes:i,flexItem:n,light:s,orientation:o,textAlign:c,variant:h}=r;return di({root:["root",e&&"absolute",h,s&&"light",o==="vertical"&&"vertical",n&&"flexItem",t&&"withChildren",t&&o==="vertical"&&"withChildrenVertical",c==="right"&&o!=="vertical"&&"textAlignRight",c==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},oA,i)},cA=He("div",{name:"MuiDivider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:r,ownerState:e})=>D({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(r.vars||r).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:r.vars?`rgba(${r.vars.palette.dividerChannel} / 0.08)`:ur(r.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:r.spacing(2),marginRight:r.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:r.spacing(1),marginBottom:r.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:r,ownerState:e})=>D({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(r.vars||r).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:r,ownerState:e})=>D({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(r.vars||r).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:r})=>D({},r.textAlign==="right"&&r.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},r.textAlign==="left"&&r.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),hA=He("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(({theme:r,ownerState:e})=>D({display:"inline-block",paddingLeft:`calc(${r.spacing(1)} * 1.2)`,paddingRight:`calc(${r.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${r.spacing(1)} * 1.2)`,paddingBottom:`calc(${r.spacing(1)} * 1.2)`})),dA=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiDivider"}),{absolute:n=!1,children:s,className:o,component:c=s?"div":"hr",flexItem:h=!1,light:p=!1,orientation:g="horizontal",role:b=c!=="hr"?"separator":void 0,textAlign:v="center",variant:S="fullWidth"}=i,B=st(i,lA),T=D({},i,{absolute:n,component:c,flexItem:h,light:p,orientation:g,role:b,textAlign:v,variant:S}),C=uA(T);return w.jsx(cA,D({as:c,className:nt(C.root,o),role:b,ref:t,ownerState:T},B,{children:s?w.jsx(hA,{className:C.wrapper,ownerState:T,children:s}):null}))}),fA=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],pA=r=>{const{classes:e,disableUnderline:t}=r,n=di({root:["root",!t&&"underline"],input:["input"]},vD,e);return D({},e,n)},gA=He(_b,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...Sb(r,e),!t.disableUnderline&&e.underline]}})(({theme:r,ownerState:e})=>{var t;const i=r.palette.mode==="light",n=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return D({position:"relative",backgroundColor:r.vars?r.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:r.vars?r.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:s}},[`&.${Sf.focused}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:s},[`&.${Sf.disabled}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.disabledBg:c}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(t=(r.vars||r).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sf.error}:after`]:{borderBottomColor:(r.vars||r).palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sf.disabled}):before`]:{borderBottom:`1px solid ${(r.vars||r).palette.text.primary}`},[`&.${Sf.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&D({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),mA=He(Bb,{name:"MuiFilledInput",slot:"Input",overridesResolver:kb})(({theme:r,ownerState:e})=>D({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},r.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9})),jx=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiFilledInput"}),{components:n={},componentsProps:s,fullWidth:o=!1,inputComponent:c="input",multiline:h=!1,type:p="text"}=i,g=st(i,fA),b=D({},i,{fullWidth:o,inputComponent:c,multiline:h,type:p}),v=pA(i),S={root:{ownerState:b},input:{ownerState:b}},B=s?Ma(s,S):S;return w.jsx($x,D({components:D({Root:gA,Input:mA},n),componentsProps:B,fullWidth:o,inputComponent:c,multiline:h,ref:t,type:p},g,{classes:v}))});jx.muiName="Input";function yA(r){return si("MuiFormControl",r)}Zt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const bA=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],vA=r=>{const{classes:e,margin:t,fullWidth:i}=r,n={root:["root",t!=="none"&&`margin${Bt(t)}`,i&&"fullWidth"]};return di(n,yA,e)},wA=He("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:r},e)=>D({},e.root,e[`margin${Bt(r.margin)}`],r.fullWidth&&e.fullWidth)})(({ownerState:r})=>D({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},r.margin==="normal"&&{marginTop:16,marginBottom:8},r.margin==="dense"&&{marginTop:8,marginBottom:4},r.fullWidth&&{width:"100%"})),XB=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiFormControl"}),{children:n,className:s,color:o="primary",component:c="div",disabled:h=!1,error:p=!1,focused:g,fullWidth:b=!1,hiddenLabel:v=!1,margin:S="none",required:B=!1,size:T="medium",variant:C="outlined"}=i,L=st(i,bA),O=D({},i,{color:o,component:c,disabled:h,error:p,fullWidth:b,hiddenLabel:v,margin:S,required:B,size:T,variant:C}),I=vA(O),[V,P]=F.useState(()=>{let Be=!1;return n&&F.Children.forEach(n,te=>{if(!A0(te,["Input","Select"]))return;const ue=A0(te,["Select"])?te.props.input:te;ue&&dD(ue.props)&&(Be=!0)}),Be}),[G,W]=F.useState(()=>{let Be=!1;return n&&F.Children.forEach(n,te=>{A0(te,["Input","Select"])&&Ux(te.props,!0)&&(Be=!0)}),Be}),[J,re]=F.useState(!1);h&&J&&re(!1);const j=g!==void 0&&!h?g:J;let oe;const ge=F.useCallback(()=>{W(!0)},[]),he=F.useCallback(()=>{W(!1)},[]),ve={adornedStart:V,setAdornedStart:P,color:o,disabled:h,error:p,filled:G,focused:j,fullWidth:b,hiddenLabel:v,size:T,onBlur:()=>{re(!1)},onEmpty:he,onFilled:ge,onFocus:()=>{re(!0)},registerEffect:oe,required:B,variant:C};return w.jsx(Gx.Provider,{value:ve,children:w.jsx(wA,D({as:c,ownerState:O,className:nt(I.root,s),ref:t},L,{children:n}))})});function xA(r){return si("MuiFormHelperText",r)}const vk=Zt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var wk;const SA=["children","className","component","disabled","error","filled","focused","margin","required","variant"],kA=r=>{const{classes:e,contained:t,size:i,disabled:n,error:s,filled:o,focused:c,required:h}=r,p={root:["root",n&&"disabled",s&&"error",i&&`size${Bt(i)}`,t&&"contained",c&&"focused",o&&"filled",h&&"required"]};return di(p,xA,e)},_A=He("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.size&&e[`size${Bt(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:r,ownerState:e})=>D({color:(r.vars||r).palette.text.secondary},r.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${vk.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${vk.error}`]:{color:(r.vars||r).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),BA=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiFormHelperText"}),{children:n,className:s,component:o="p"}=i,c=st(i,SA),h=Yf(),p=jf({props:i,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),g=D({},i,{component:o,contained:p.variant==="filled"||p.variant==="outlined",variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),b=kA(g);return w.jsx(_A,D({as:o,ownerState:g,className:nt(b.root,s),ref:t},c,{children:n===" "?wk||(wk=w.jsx("span",{className:"notranslate",children:""})):n}))});function TA(r){return si("MuiFormLabel",r)}const Xg=Zt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),CA=["children","className","color","component","disabled","error","filled","focused","required"],NA=r=>{const{classes:e,color:t,focused:i,disabled:n,error:s,filled:o,required:c}=r,h={root:["root",`color${Bt(t)}`,n&&"disabled",s&&"error",o&&"filled",i&&"focused",c&&"required"],asterisk:["asterisk",s&&"error"]};return di(h,TA,e)},PA=He("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:r},e)=>D({},e.root,r.color==="secondary"&&e.colorSecondary,r.filled&&e.filled)})(({theme:r,ownerState:e})=>D({color:(r.vars||r).palette.text.secondary},r.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Xg.focused}`]:{color:(r.vars||r).palette[e.color].main},[`&.${Xg.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${Xg.error}`]:{color:(r.vars||r).palette.error.main}})),EA=He("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(r,e)=>e.asterisk})(({theme:r})=>({[`&.${Xg.error}`]:{color:(r.vars||r).palette.error.main}})),RA=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiFormLabel"}),{children:n,className:s,component:o="label"}=i,c=st(i,CA),h=Yf(),p=jf({props:i,muiFormControl:h,states:["color","required","focused","disabled","error","filled"]}),g=D({},i,{color:p.color||"primary",component:o,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),b=NA(g);return w.jsxs(PA,D({as:o,ownerState:g,className:nt(b.root,s),ref:t},c,{children:[n,p.required&&w.jsxs(EA,{ownerState:g,"aria-hidden":!0,className:b.asterisk,children:["","*"]})]}))}),LA=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Yw(r){return`scale(${r}, ${r**2})`}const IA={entering:{opacity:1,transform:Yw(1)},entered:{opacity:1,transform:"none"}},Zv=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Z0=F.forwardRef(function(e,t){const{addEndListener:i,appear:n=!0,children:s,easing:o,in:c,onEnter:h,onEntered:p,onEntering:g,onExit:b,onExited:v,onExiting:S,style:B,timeout:T="auto",TransitionComponent:C=yo}=e,L=st(e,LA),O=F.useRef(),I=F.useRef(),V=es(),P=F.useRef(null),G=Wi(s.ref,t),W=Wi(P,G),J=te=>ue=>{if(te){const ne=P.current;ue===void 0?te(ne):te(ne,ue)}},re=J(g),j=J((te,ue)=>{HB(te);const{duration:ne,delay:Se,easing:z}=Mf({style:B,timeout:T,easing:o},{mode:"enter"});let Z;T==="auto"?(Z=V.transitions.getAutoHeightDuration(te.clientHeight),I.current=Z):Z=ne,te.style.transition=[V.transitions.create("opacity",{duration:Z,delay:Se}),V.transitions.create("transform",{duration:Zv?Z:Z*.666,delay:Se,easing:z})].join(","),h&&h(te,ue)}),oe=J(p),ge=J(S),he=J(te=>{const{duration:ue,delay:ne,easing:Se}=Mf({style:B,timeout:T,easing:o},{mode:"exit"});let z;T==="auto"?(z=V.transitions.getAutoHeightDuration(te.clientHeight),I.current=z):z=ue,te.style.transition=[V.transitions.create("opacity",{duration:z,delay:ne}),V.transitions.create("transform",{duration:Zv?z:z*.666,delay:Zv?ne:ne||z*.333,easing:Se})].join(","),te.style.opacity=0,te.style.transform=Yw(.75),b&&b(te)}),ve=J(v),Be=te=>{T==="auto"&&(O.current=setTimeout(te,I.current||0)),i&&i(P.current,te)};return F.useEffect(()=>()=>{clearTimeout(O.current)},[]),w.jsx(C,D({appear:n,in:c,nodeRef:P,onEnter:j,onEntered:oe,onEntering:re,onExit:he,onExited:ve,onExiting:ge,addEndListener:Be,timeout:T==="auto"?null:T},L,{children:(te,ue)=>F.cloneElement(s,D({style:D({opacity:0,transform:Yw(.75),visibility:te==="exited"&&!c?"hidden":void 0},IA[te],B,s.props.style),ref:W},ue))}))});Z0.muiSupportAuto=!0;const FA=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],OA=r=>{const{classes:e,disableUnderline:t}=r,n=di({root:["root",!t&&"underline"],input:["input"]},yD,e);return D({},e,n)},MA=He(_b,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...Sb(r,e),!t.disableUnderline&&e.underline]}})(({theme:r,ownerState:e})=>{let i=r.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return r.vars&&(i=`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`),D({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(r.vars||r).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${m0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${m0.error}:after`]:{borderBottomColor:(r.vars||r).palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${m0.disabled}):before`]:{borderBottom:`2px solid ${(r.vars||r).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${m0.disabled}:before`]:{borderBottomStyle:"dotted"}})}),DA=He(Bb,{name:"MuiInput",slot:"Input",overridesResolver:kb})({}),Tb=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiInput"}),{disableUnderline:n,components:s={},componentsProps:o,fullWidth:c=!1,inputComponent:h="input",multiline:p=!1,type:g="text"}=i,b=st(i,FA),v=OA(i),B={root:{ownerState:{disableUnderline:n}}},T=o?Ma(o,B):B;return w.jsx($x,D({components:D({Root:MA,Input:DA},s),componentsProps:T,fullWidth:c,inputComponent:h,multiline:p,ref:t,type:g},b,{classes:v}))});Tb.muiName="Input";function AA(r){return si("MuiInputLabel",r)}Zt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const VA=["disableAnimation","margin","shrink","variant"],zA=r=>{const{classes:e,formControl:t,size:i,shrink:n,disableAnimation:s,variant:o,required:c}=r,p=di({root:["root",t&&"formControl",!s&&"animated",n&&"shrink",i==="small"&&"sizeSmall",o],asterisk:[c&&"asterisk"]},AA,e);return D({},e,p)},WA=He(RA,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${Xg.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,e[t.variant]]}})(({theme:r,ownerState:e})=>D({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:r.transitions.create(["color","transform","max-width"],{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut})},e.variant==="filled"&&D({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&D({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&D({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))),KB=F.forwardRef(function(e,t){const i=fi({name:"MuiInputLabel",props:e}),{disableAnimation:n=!1,shrink:s}=i,o=st(i,VA),c=Yf();let h=s;typeof h>"u"&&c&&(h=c.filled||c.focused||c.adornedStart);const p=jf({props:i,muiFormControl:c,states:["size","variant","required"]}),g=D({},i,{disableAnimation:n,formControl:c,shrink:h,size:p.size,variant:p.variant,required:p.required}),b=zA(g);return w.jsx(WA,D({"data-shrink":h,ownerState:g,ref:t},o,{classes:b}))}),cl=F.createContext({});function HA(r){return si("MuiList",r)}Zt("MuiList",["root","padding","dense","subheader"]);const GA=["children","className","component","dense","disablePadding","subheader"],UA=r=>{const{classes:e,disablePadding:t,dense:i,subheader:n}=r;return di({root:["root",!t&&"padding",i&&"dense",n&&"subheader"]},HA,e)},$A=He("ul",{name:"MuiList",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:r})=>D({listStyle:"none",margin:0,padding:0,position:"relative"},!r.disablePadding&&{paddingTop:8,paddingBottom:8},r.subheader&&{paddingTop:0})),Yx=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiList"}),{children:n,className:s,component:o="ul",dense:c=!1,disablePadding:h=!1,subheader:p}=i,g=st(i,GA),b=F.useMemo(()=>({dense:c}),[c]),v=D({},i,{component:o,dense:c,disablePadding:h}),S=UA(v);return w.jsx(cl.Provider,{value:b,children:w.jsxs($A,D({as:o,className:nt(S.root,s),ref:t,ownerState:v},g,{children:[p,n]}))})});function jA(r){return si("MuiListItem",r)}const Tf=Zt("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function YA(r){return si("MuiListItemButton",r)}const Cf=Zt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),qA=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected"],XA=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters]},KA=r=>{const{alignItems:e,classes:t,dense:i,disabled:n,disableGutters:s,divider:o,selected:c}=r,p=di({root:["root",i&&"dense",!s&&"gutters",o&&"divider",n&&"disabled",e==="flex-start"&&"alignItemsFlexStart",c&&"selected"]},YA,t);return D({},t,p)},QA=He($f,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:XA})(({theme:r,ownerState:e})=>D({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Cf.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:ur(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${Cf.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:ur(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${Cf.selected}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:ur(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:ur(r.palette.primary.main,r.palette.action.selectedOpacity)}},[`&.${Cf.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${Cf.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),QB=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:s=!1,component:o="div",children:c,dense:h=!1,disableGutters:p=!1,divider:g=!1,focusVisibleClassName:b,selected:v=!1}=i,S=st(i,qA),B=F.useContext(cl),T={dense:h||B.dense||!1,alignItems:n,disableGutters:p},C=F.useRef(null);Aa(()=>{s&&C.current&&C.current.focus()},[s]);const L=D({},i,{alignItems:n,dense:T.dense,disableGutters:p,divider:g,selected:v}),O=KA(L),I=Wi(C,t);return w.jsx(cl.Provider,{value:T,children:w.jsx(QA,D({ref:I,href:S.href||S.to,component:(S.href||S.to)&&o==="div"?"a":o,focusVisibleClassName:nt(O.focusVisible,b),ownerState:L},S,{classes:O,children:c}))})});function JA(r){return si("MuiListItemSecondaryAction",r)}Zt("MuiListItemSecondaryAction",["root","disableGutters"]);const ZA=["className"],e3=r=>{const{disableGutters:e,classes:t}=r;return di({root:["root",e&&"disableGutters"]},JA,t)},t3=He("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.disableGutters&&e.disableGutters]}})(({ownerState:r})=>D({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},r.disableGutters&&{right:0})),JB=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiListItemSecondaryAction"}),{className:n}=i,s=st(i,ZA),o=F.useContext(cl),c=D({},i,{disableGutters:o.disableGutters}),h=e3(c);return w.jsx(t3,D({className:nt(h.root,n),ownerState:c,ref:t},s))});JB.muiName="ListItemSecondaryAction";const i3=["className"],r3=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],n3=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters,!t.disablePadding&&e.padding,t.button&&e.button,t.hasSecondaryAction&&e.secondaryAction]},s3=r=>{const{alignItems:e,button:t,classes:i,dense:n,disabled:s,disableGutters:o,disablePadding:c,divider:h,hasSecondaryAction:p,selected:g}=r;return di({root:["root",n&&"dense",!o&&"gutters",!c&&"padding",h&&"divider",s&&"disabled",t&&"button",e==="flex-start"&&"alignItemsFlexStart",p&&"secondaryAction",g&&"selected"],container:["container"]},jA,i)},a3=He("div",{name:"MuiListItem",slot:"Root",overridesResolver:n3})(({theme:r,ownerState:e})=>D({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&D({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${Cf.root}`]:{paddingRight:48}},{[`&.${Tf.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${Tf.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:ur(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${Tf.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:ur(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${Tf.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Tf.selected}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:ur(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:ur(r.palette.primary.main,r.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),o3=He("li",{name:"MuiListItem",slot:"Container",overridesResolver:(r,e)=>e.container})({position:"relative"}),ZB=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiListItem"}),{alignItems:n="center",autoFocus:s=!1,button:o=!1,children:c,className:h,component:p,components:g={},componentsProps:b={},ContainerComponent:v="li",ContainerProps:{className:S}={},dense:B=!1,disabled:T=!1,disableGutters:C=!1,disablePadding:L=!1,divider:O=!1,focusVisibleClassName:I,secondaryAction:V,selected:P=!1}=i,G=st(i.ContainerProps,i3),W=st(i,r3),J=F.useContext(cl),re={dense:B||J.dense||!1,alignItems:n,disableGutters:C},j=F.useRef(null);Aa(()=>{s&&j.current&&j.current.focus()},[s]);const oe=F.Children.toArray(c),ge=oe.length&&A0(oe[oe.length-1],["ListItemSecondaryAction"]),he=D({},i,{alignItems:n,autoFocus:s,button:o,dense:re.dense,disabled:T,disableGutters:C,disablePadding:L,divider:O,hasSecondaryAction:ge,selected:P}),ve=s3(he),Be=Wi(j,t),te=g.Root||a3,ue=b.root||{},ne=D({className:nt(ve.root,ue.className,h),disabled:T},W);let Se=p||"li";return o&&(ne.component=p||"div",ne.focusVisibleClassName=nt(Tf.focusVisible,I),Se=$f),ge?(Se=!ne.component&&!p?"div":Se,v==="li"&&(Se==="li"?Se="div":ne.component==="li"&&(ne.component="div")),w.jsx(cl.Provider,{value:re,children:w.jsxs(o3,D({as:v,className:nt(ve.container,S),ref:Be,ownerState:he},G,{children:[w.jsx(te,D({},ue,!ll(te)&&{as:Se,ownerState:D({},he,ue.ownerState)},ne,{children:oe})),oe.pop()]}))})):w.jsx(cl.Provider,{value:re,children:w.jsxs(te,D({},ue,{as:Se,ref:Be,ownerState:he},!ll(te)&&{ownerState:D({},he,ue.ownerState)},ne,{children:[oe,V&&w.jsx(JB,{children:V})]}))})}),xk=Zt("MuiListItemIcon",["root","alignItemsFlexStart"]);function l3(r){return si("MuiListItemText",r)}const eb=Zt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),u3=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],c3=r=>{const{classes:e,inset:t,primary:i,secondary:n,dense:s}=r;return di({root:["root",t&&"inset",s&&"dense",i&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},l3,e)},h3=He("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${eb.primary}`]:e.primary},{[`& .${eb.secondary}`]:e.secondary},e.root,t.inset&&e.inset,t.primary&&t.secondary&&e.multiline,t.dense&&e.dense]}})(({ownerState:r})=>D({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},r.primary&&r.secondary&&{marginTop:6,marginBottom:6},r.inset&&{paddingLeft:56})),eT=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiListItemText"}),{children:n,className:s,disableTypography:o=!1,inset:c=!1,primary:h,primaryTypographyProps:p,secondary:g,secondaryTypographyProps:b}=i,v=st(i,u3),{dense:S}=F.useContext(cl);let B=h??n,T=g;const C=D({},i,{disableTypography:o,inset:c,primary:!!B,secondary:!!T,dense:S}),L=c3(C);return B!=null&&B.type!==ps&&!o&&(B=w.jsx(ps,D({variant:S?"body2":"body1",className:L.primary,component:"span",display:"block"},p,{children:B}))),T!=null&&T.type!==ps&&!o&&(T=w.jsx(ps,D({variant:"body2",className:L.secondary,color:"text.secondary",display:"block"},b,{children:T}))),w.jsxs(h3,D({className:nt(L.root,s),ownerState:C,ref:t},v,{children:[B,T]}))}),d3=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function ew(r,e,t){return r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:r.firstChild}function Sk(r,e,t){return r===e?t?r.firstChild:r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:r.lastChild}function tT(r,e){if(e===void 0)return!0;let t=r.innerText;return t===void 0&&(t=r.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function Lg(r,e,t,i,n,s){let o=!1,c=n(r,e,e?t:!1);for(;c;){if(c===r.firstChild){if(o)return!1;o=!0}const h=i?!1:c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||!tT(c,s)||h)c=n(r,c,t);else return c.focus(),!0}return!1}const f3=F.forwardRef(function(e,t){const{actions:i,autoFocus:n=!1,autoFocusItem:s=!1,children:o,className:c,disabledItemsFocusable:h=!1,disableListWrap:p=!1,onKeyDown:g,variant:b="selectedMenu"}=e,v=st(e,d3),S=F.useRef(null),B=F.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Aa(()=>{n&&S.current.focus()},[n]),F.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(I,V)=>{const P=!S.current.style.width;if(I.clientHeight<S.current.clientHeight&&P){const G=`${sB(wn(I))}px`;S.current.style[V.direction==="rtl"?"paddingLeft":"paddingRight"]=G,S.current.style.width=`calc(100% + ${G})`}return S.current}}),[]);const T=I=>{const V=S.current,P=I.key,G=wn(V).activeElement;if(P==="ArrowDown")I.preventDefault(),Lg(V,G,p,h,ew);else if(P==="ArrowUp")I.preventDefault(),Lg(V,G,p,h,Sk);else if(P==="Home")I.preventDefault(),Lg(V,null,p,h,ew);else if(P==="End")I.preventDefault(),Lg(V,null,p,h,Sk);else if(P.length===1){const W=B.current,J=P.toLowerCase(),re=performance.now();W.keys.length>0&&(re-W.lastTime>500?(W.keys=[],W.repeating=!0,W.previousKeyMatched=!0):W.repeating&&J!==W.keys[0]&&(W.repeating=!1)),W.lastTime=re,W.keys.push(J);const j=G&&!W.repeating&&tT(G,W);W.previousKeyMatched&&(j||Lg(V,G,!1,h,ew,W))?I.preventDefault():W.previousKeyMatched=!1}g&&g(I)},C=Wi(S,t);let L=-1;F.Children.forEach(o,(I,V)=>{F.isValidElement(I)&&(I.props.disabled||(b==="selectedMenu"&&I.props.selected||L===-1)&&(L=V))});const O=F.Children.map(o,(I,V)=>{if(V===L){const P={};return s&&(P.autoFocus=!0),I.props.tabIndex===void 0&&b==="selectedMenu"&&(P.tabIndex=0),F.cloneElement(I,P)}return I});return w.jsx(Yx,D({role:"menu",ref:C,className:c,onKeyDown:T,tabIndex:n?0:-1},v,{children:O}))});function p3(r){return si("MuiPopover",r)}Zt("MuiPopover",["root","paper"]);const g3=["onEntering"],m3=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function kk(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.height/2:e==="bottom"&&(t=r.height),t}function _k(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.width/2:e==="right"&&(t=r.width),t}function Bk(r){return[r.horizontal,r.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function tw(r){return typeof r=="function"?r():r}const y3=r=>{const{classes:e}=r;return di({root:["root"],paper:["paper"]},p3,e)},b3=He(YB,{name:"MuiPopover",slot:"Root",overridesResolver:(r,e)=>e.root})({}),v3=He(Uf,{name:"MuiPopover",slot:"Paper",overridesResolver:(r,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),w3=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiPopover"}),{action:n,anchorEl:s,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:h="anchorEl",children:p,className:g,container:b,elevation:v=8,marginThreshold:S=16,open:B,PaperProps:T={},transformOrigin:C={vertical:"top",horizontal:"left"},TransitionComponent:L=Z0,transitionDuration:O="auto",TransitionProps:{onEntering:I}={}}=i,V=st(i.TransitionProps,g3),P=st(i,m3),G=F.useRef(),W=Wi(G,T.ref),J=D({},i,{anchorOrigin:o,anchorReference:h,elevation:v,marginThreshold:S,PaperProps:T,transformOrigin:C,TransitionComponent:L,transitionDuration:O,TransitionProps:V}),re=y3(J),j=F.useCallback(()=>{if(h==="anchorPosition")return c;const ue=tw(s),Se=(ue&&ue.nodeType===1?ue:wn(G.current).body).getBoundingClientRect();return{top:Se.top+kk(Se,o.vertical),left:Se.left+_k(Se,o.horizontal)}},[s,o.horizontal,o.vertical,c,h]),oe=F.useCallback(ue=>({vertical:kk(ue,C.vertical),horizontal:_k(ue,C.horizontal)}),[C.horizontal,C.vertical]),ge=F.useCallback(ue=>{const ne={width:ue.offsetWidth,height:ue.offsetHeight},Se=oe(ne);if(h==="none")return{top:null,left:null,transformOrigin:Bk(Se)};const z=j();let Z=z.top-Se.vertical,pe=z.left-Se.horizontal;const We=Z+ne.height,Ie=pe+ne.width,Ue=nu(tw(s)),Ee=Ue.innerHeight-S,Qe=Ue.innerWidth-S;if(Z<S){const Oe=Z-S;Z-=Oe,Se.vertical+=Oe}else if(We>Ee){const Oe=We-Ee;Z-=Oe,Se.vertical+=Oe}if(pe<S){const Oe=pe-S;pe-=Oe,Se.horizontal+=Oe}else if(Ie>Qe){const Oe=Ie-Qe;pe-=Oe,Se.horizontal+=Oe}return{top:`${Math.round(Z)}px`,left:`${Math.round(pe)}px`,transformOrigin:Bk(Se)}},[s,h,j,oe,S]),he=F.useCallback(()=>{const ue=G.current;if(!ue)return;const ne=ge(ue);ne.top!==null&&(ue.style.top=ne.top),ne.left!==null&&(ue.style.left=ne.left),ue.style.transformOrigin=ne.transformOrigin},[ge]),ve=(ue,ne)=>{I&&I(ue,ne),he()};F.useEffect(()=>{B&&he()}),F.useImperativeHandle(n,()=>B?{updatePosition:()=>{he()}}:null,[B,he]),F.useEffect(()=>{if(!B)return;const ue=tm(()=>{he()}),ne=nu(s);return ne.addEventListener("resize",ue),()=>{ue.clear(),ne.removeEventListener("resize",ue)}},[s,B,he]);let Be=O;O==="auto"&&!L.muiSupportAuto&&(Be=void 0);const te=b||(s?wn(tw(s)).body:void 0);return w.jsx(b3,D({BackdropProps:{invisible:!0},className:nt(re.root,g),container:te,open:B,ref:t,ownerState:J},P,{children:w.jsx(L,D({appear:!0,in:B,onEntering:ve,timeout:Be},V,{children:w.jsx(v3,D({elevation:v},T,{ref:W,className:nt(re.paper,T.className),children:p}))}))}))});function x3(r){return si("MuiMenu",r)}Zt("MuiMenu",["root","paper","list"]);const S3=["onEntering"],k3=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],_3={vertical:"top",horizontal:"right"},B3={vertical:"top",horizontal:"left"},T3=r=>{const{classes:e}=r;return di({root:["root"],paper:["paper"],list:["list"]},x3,e)},C3=He(w3,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(r,e)=>e.root})({}),N3=He(Uf,{name:"MuiMenu",slot:"Paper",overridesResolver:(r,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),P3=He(f3,{name:"MuiMenu",slot:"List",overridesResolver:(r,e)=>e.list})({outline:0}),iT=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiMenu"}),{autoFocus:n=!0,children:s,disableAutoFocusItem:o=!1,MenuListProps:c={},onClose:h,open:p,PaperProps:g={},PopoverClasses:b,transitionDuration:v="auto",TransitionProps:{onEntering:S}={},variant:B="selectedMenu"}=i,T=st(i.TransitionProps,S3),C=st(i,k3),L=es(),O=L.direction==="rtl",I=D({},i,{autoFocus:n,disableAutoFocusItem:o,MenuListProps:c,onEntering:S,PaperProps:g,transitionDuration:v,TransitionProps:T,variant:B}),V=T3(I),P=n&&!o&&p,G=F.useRef(null),W=(j,oe)=>{G.current&&G.current.adjustStyleForScrollbar(j,L),S&&S(j,oe)},J=j=>{j.key==="Tab"&&(j.preventDefault(),h&&h(j,"tabKeyDown"))};let re=-1;return F.Children.map(s,(j,oe)=>{F.isValidElement(j)&&(j.props.disabled||(B==="selectedMenu"&&j.props.selected||re===-1)&&(re=oe))}),w.jsx(C3,D({classes:b,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:O?"right":"left"},transformOrigin:O?_3:B3,PaperProps:D({component:N3},g,{classes:D({},g.classes,{root:V.paper})}),className:V.root,open:p,ref:t,transitionDuration:v,TransitionProps:D({onEntering:W},T),ownerState:I},C,{children:w.jsx(P3,D({onKeyDown:J,actions:G,autoFocus:n&&(re===-1||o),autoFocusItem:P,variant:B},c,{className:nt(V.list,c.className),children:s}))}))});function E3(r){return si("MuiMenuItem",r)}const Ig=Zt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),R3=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],L3=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},I3=r=>{const{disabled:e,dense:t,divider:i,disableGutters:n,selected:s,classes:o}=r,h=di({root:["root",t&&"dense",e&&"disabled",!n&&"gutters",i&&"divider",s&&"selected"]},E3,o);return D({},o,h)},F3=He($f,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:L3})(({theme:r,ownerState:e})=>D({},r.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ig.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:ur(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${Ig.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:ur(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${Ig.selected}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:ur(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:ur(r.palette.primary.main,r.palette.action.selectedOpacity)}},[`&.${Ig.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${Ig.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity},[`& + .${bk.root}`]:{marginTop:r.spacing(1),marginBottom:r.spacing(1)},[`& + .${bk.inset}`]:{marginLeft:52},[`& .${eb.root}`]:{marginTop:0,marginBottom:0},[`& .${eb.inset}`]:{paddingLeft:36},[`& .${xk.root}`]:{minWidth:36}},!e.dense&&{[r.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&D({minHeight:32,paddingTop:4,paddingBottom:4},r.typography.body2,{[`& .${xk.root} svg`]:{fontSize:"1.25rem"}}))),Zo=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiMenuItem"}),{autoFocus:n=!1,component:s="li",dense:o=!1,divider:c=!1,disableGutters:h=!1,focusVisibleClassName:p,role:g="menuitem",tabIndex:b}=i,v=st(i,R3),S=F.useContext(cl),B={dense:o||S.dense||!1,disableGutters:h},T=F.useRef(null);Aa(()=>{n&&T.current&&T.current.focus()},[n]);const C=D({},i,{dense:B.dense,divider:c,disableGutters:h}),L=I3(i),O=Wi(T,t);let I;return i.disabled||(I=b!==void 0?b:-1),w.jsx(cl.Provider,{value:B,children:w.jsx(F3,D({ref:O,role:g,tabIndex:I,component:s,focusVisibleClassName:nt(L.focusVisible,p)},v,{ownerState:C,classes:L}))})});function O3(r){return si("MuiNativeSelect",r)}const qx=Zt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),M3=["className","disabled","IconComponent","inputRef","variant"],D3=r=>{const{classes:e,variant:t,disabled:i,multiple:n,open:s}=r,o={select:["select",t,i&&"disabled",n&&"multiple"],icon:["icon",`icon${Bt(t)}`,s&&"iconOpen",i&&"disabled"]};return di(o,O3,e)},rT=({ownerState:r,theme:e})=>D({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},[`&.${qx.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},r.variant==="filled"&&{"&&&":{paddingRight:32}},r.variant==="outlined"&&{borderRadius:e.shape.borderRadius,"&:focus":{borderRadius:e.shape.borderRadius},"&&&":{paddingRight:32}}),A3=He("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:mo,overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.select,e[t.variant],{[`&.${qx.multiple}`]:e.multiple}]}})(rT),nT=({ownerState:r,theme:e})=>D({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:e.palette.action.active,[`&.${qx.disabled}`]:{color:e.palette.action.disabled}},r.open&&{transform:"rotate(180deg)"},r.variant==="filled"&&{right:7},r.variant==="outlined"&&{right:7}),V3=He("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${Bt(t.variant)}`],t.open&&e.iconOpen]}})(nT),z3=F.forwardRef(function(e,t){const{className:i,disabled:n,IconComponent:s,inputRef:o,variant:c="standard"}=e,h=st(e,M3),p=D({},e,{disabled:n,variant:c}),g=D3(p);return w.jsxs(F.Fragment,{children:[w.jsx(A3,D({ownerState:p,className:nt(g.select,i),disabled:n,ref:o||t},h)),e.multiple?null:w.jsx(V3,{as:s,ownerState:p,className:g.icon})]})});var Tk;const W3=["children","classes","className","label","notched"],H3=He("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),G3=He("legend")(({ownerState:r,theme:e})=>D({float:"unset",overflow:"hidden"},!r.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},r.withLabel&&D({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},r.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function U3(r){const{className:e,label:t,notched:i}=r,n=st(r,W3),s=t!=null&&t!=="",o=D({},r,{notched:i,withLabel:s});return w.jsx(H3,D({"aria-hidden":!0,className:e,ownerState:o},n,{children:w.jsx(G3,{ownerState:o,children:s?w.jsx("span",{children:t}):Tk||(Tk=w.jsx("span",{className:"notranslate",children:""}))})}))}const $3=["components","fullWidth","inputComponent","label","multiline","notched","type"],j3=r=>{const{classes:e}=r,i=di({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},bD,e);return D({},e,i)},Y3=He(_b,{shouldForwardProp:r=>mo(r)||r==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Sb})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return D({position:"relative",borderRadius:(r.vars||r).shape.borderRadius,[`&:hover .${rc.notchedOutline}`]:{borderColor:(r.vars||r).palette.text.primary},"@media (hover: none)":{[`&:hover .${rc.notchedOutline}`]:{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${rc.focused} .${rc.notchedOutline}`]:{borderColor:(r.vars||r).palette[e.color].main,borderWidth:2},[`&.${rc.error} .${rc.notchedOutline}`]:{borderColor:(r.vars||r).palette.error.main},[`&.${rc.disabled} .${rc.notchedOutline}`]:{borderColor:(r.vars||r).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&D({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),q3=He(U3,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(r,e)=>e.notchedOutline})(({theme:r})=>{const e=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),X3=He(Bb,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:kb})(({theme:r,ownerState:e})=>D({padding:"16.5px 14px"},!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},r.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Xx=F.forwardRef(function(e,t){var i;const n=fi({props:e,name:"MuiOutlinedInput"}),{components:s={},fullWidth:o=!1,inputComponent:c="input",label:h,multiline:p=!1,notched:g,type:b="text"}=n,v=st(n,$3),S=j3(n),B=Yf(),T=jf({props:n,muiFormControl:B,states:["required"]}),C=D({},n,{color:T.color||"primary",disabled:T.disabled,error:T.error,focused:T.focused,formControl:B,fullWidth:o,hiddenLabel:T.hiddenLabel,multiline:p,size:T.size,type:b});return w.jsx($x,D({components:D({Root:Y3,Input:X3},s),renderSuffix:L=>w.jsx(q3,{ownerState:C,className:S.notchedOutline,label:h!=null&&h!==""&&T.required?i||(i=w.jsxs(F.Fragment,{children:[h,"","*"]})):h,notched:typeof g<"u"?g:!!(L.startAdornment||L.filled||L.focused)}),fullWidth:o,inputComponent:c,multiline:p,ref:t,type:b},v,{classes:D({},S,{notchedOutline:null})}))});Xx.muiName="Input";function K3(r){return si("MuiSelect",r)}const v0=Zt("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var Ck;const Q3=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],J3=He("div",{name:"MuiSelect",slot:"Select",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`&.${v0.select}`]:e.select},{[`&.${v0.select}`]:e[t.variant]},{[`&.${v0.multiple}`]:e.multiple}]}})(rT,{[`&.${v0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Z3=He("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${Bt(t.variant)}`],t.open&&e.iconOpen]}})(nT),e4=He("input",{shouldForwardProp:r=>Ax(r)&&r!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(r,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Nk(r,e){return typeof e=="object"&&e!==null?r===e:String(r)===String(e)}function t4(r){return r==null||typeof r=="string"&&!r.trim()}const i4=r=>{const{classes:e,variant:t,disabled:i,multiple:n,open:s}=r,o={select:["select",t,i&&"disabled",n&&"multiple"],icon:["icon",`icon${Bt(t)}`,s&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return di(o,K3,e)},r4=F.forwardRef(function(e,t){const{"aria-describedby":i,"aria-label":n,autoFocus:s,autoWidth:o,children:c,className:h,defaultOpen:p,defaultValue:g,disabled:b,displayEmpty:v,IconComponent:S,inputRef:B,labelId:T,MenuProps:C={},multiple:L,name:O,onBlur:I,onChange:V,onClose:P,onFocus:G,onOpen:W,open:J,readOnly:re,renderValue:j,SelectDisplayProps:oe={},tabIndex:ge,value:he,variant:ve="standard"}=e,Be=st(e,Q3),[te,ue]=X0({controlled:he,default:g,name:"Select"}),[ne,Se]=X0({controlled:J,default:p,name:"Select"}),z=F.useRef(null),Z=F.useRef(null),[pe,We]=F.useState(null),{current:Ie}=F.useRef(J!=null),[Ue,Ee]=F.useState(),Qe=Wi(t,B),Oe=F.useCallback(se=>{Z.current=se,se&&We(se)},[]);F.useImperativeHandle(Qe,()=>({focus:()=>{Z.current.focus()},node:z.current,value:te}),[te]),F.useEffect(()=>{p&&ne&&pe&&!Ie&&(Ee(o?null:pe.clientWidth),Z.current.focus())},[pe,o]),F.useEffect(()=>{s&&Z.current.focus()},[s]),F.useEffect(()=>{if(!T)return;const se=wn(Z.current).getElementById(T);if(se){const Re=()=>{getSelection().isCollapsed&&Z.current.focus()};return se.addEventListener("click",Re),()=>{se.removeEventListener("click",Re)}}},[T]);const et=(se,Re)=>{se?W&&W(Re):P&&P(Re),Ie||(Ee(o?null:pe.clientWidth),Se(se))},wt=se=>{se.button===0&&(se.preventDefault(),Z.current.focus(),et(!0,se))},pt=se=>{et(!1,se)},ei=F.Children.toArray(c),gi=se=>{const Re=ei.map(Je=>Je.props.value).indexOf(se.target.value);if(Re===-1)return;const ke=ei[Re];ue(ke.props.value),V&&V(se,ke)},At=se=>Re=>{let ke;if(Re.currentTarget.hasAttribute("tabindex")){if(L){ke=Array.isArray(te)?te.slice():[];const Je=te.indexOf(se.props.value);Je===-1?ke.push(se.props.value):ke.splice(Je,1)}else ke=se.props.value;if(se.props.onClick&&se.props.onClick(Re),te!==ke&&(ue(ke),V)){const Je=Re.nativeEvent||Re,Ht=new Je.constructor(Je.type,Je);Object.defineProperty(Ht,"target",{writable:!0,value:{value:ke,name:O}}),V(Ht,se)}L||et(!1,Re)}},Bi=se=>{re||[" ","ArrowUp","ArrowDown","Enter"].indexOf(se.key)!==-1&&(se.preventDefault(),et(!0,se))},Ai=pe!==null&&ne,$t=se=>{!Ai&&I&&(Object.defineProperty(se,"target",{writable:!0,value:{value:te,name:O}}),I(se))};delete Be["aria-invalid"];let Ki,Xi;const zt=[];let Wt=!1;(Ux({value:te})||v)&&(j?Ki=j(te):Wt=!0);const Li=ei.map((se,Re,ke)=>{if(!F.isValidElement(se))return null;let Je;if(L){if(!Array.isArray(te))throw new Error(pc(2));Je=te.some(Xt=>Nk(Xt,se.props.value)),Je&&Wt&&zt.push(se.props.children)}else Je=Nk(te,se.props.value),Je&&Wt&&(Xi=se.props.children);if(se.props.value===void 0)return F.cloneElement(se,{"aria-readonly":!0,role:"option"});const Ht=()=>{if(te)return Je;const Xt=ke.find(Ji=>Ji.props.value!==void 0&&Ji.props.disabled!==!0);return se===Xt?!0:Je};return F.cloneElement(se,{"aria-selected":Je?"true":"false",onClick:At(se),onKeyUp:Xt=>{Xt.key===" "&&Xt.preventDefault(),se.props.onKeyUp&&se.props.onKeyUp(Xt)},role:"option",selected:ke[0].props.value===void 0||ke[0].props.disabled===!0?Ht():Je,value:void 0,"data-value":se.props.value})});Wt&&(L?zt.length===0?Ki=null:Ki=zt.reduce((se,Re,ke)=>(se.push(Re),ke<zt.length-1&&se.push(", "),se),[]):Ki=Xi);let Qi=Ue;!o&&Ie&&pe&&(Qi=pe.clientWidth);let Ve;typeof ge<"u"?Ve=ge:Ve=b?null:0;const qe=oe.id||(O?`mui-component-select-${O}`:void 0),bt=D({},e,{variant:ve,value:te,open:Ai}),Xe=i4(bt);return w.jsxs(F.Fragment,{children:[w.jsx(J3,D({ref:Oe,tabIndex:Ve,role:"button","aria-disabled":b?"true":void 0,"aria-expanded":Ai?"true":"false","aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[T,qe].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Bi,onMouseDown:b||re?null:wt,onBlur:$t,onFocus:G},oe,{ownerState:bt,className:nt(oe.className,Xe.select,h),id:qe,children:t4(Ki)?Ck||(Ck=w.jsx("span",{className:"notranslate",children:""})):Ki})),w.jsx(e4,D({value:Array.isArray(te)?te.join(","):te,name:O,ref:z,"aria-hidden":!0,onChange:gi,tabIndex:-1,disabled:b,className:Xe.nativeInput,autoFocus:s,ownerState:bt},Be)),w.jsx(Z3,{as:S,className:Xe.icon,ownerState:bt}),w.jsx(iT,D({id:`menu-${O||""}`,anchorEl:pe,open:Ai,onClose:pt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},C,{MenuListProps:D({"aria-labelledby":T,role:"listbox",disableListWrap:!0},C.MenuListProps),PaperProps:D({},C.PaperProps,{style:D({minWidth:Qi},C.PaperProps!=null?C.PaperProps.style:null)}),children:Li}))]})});var Pk,Ek;const n4=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],s4=r=>{const{classes:e}=r;return e},Kx={name:"MuiSelect",overridesResolver:(r,e)=>e.root,shouldForwardProp:r=>mo(r)&&r!=="variant",slot:"Root"},a4=He(Tb,Kx)(""),o4=He(Xx,Kx)(""),l4=He(jx,Kx)(""),Cb=F.forwardRef(function(e,t){const i=fi({name:"MuiSelect",props:e}),{autoWidth:n=!1,children:s,classes:o={},className:c,defaultOpen:h=!1,displayEmpty:p=!1,IconComponent:g=wD,id:b,input:v,inputProps:S,label:B,labelId:T,MenuProps:C,multiple:L=!1,native:O=!1,onClose:I,onOpen:V,open:P,renderValue:G,SelectDisplayProps:W,variant:J="outlined"}=i,re=st(i,n4),j=O?z3:r4,oe=Yf(),he=jf({props:i,muiFormControl:oe,states:["variant"]}).variant||J,ve=v||{standard:Pk||(Pk=w.jsx(a4,{})),outlined:w.jsx(o4,{label:B}),filled:Ek||(Ek=w.jsx(l4,{}))}[he],Be=D({},i,{variant:he,classes:o}),te=s4(Be),ue=Wi(t,ve.ref);return F.cloneElement(ve,D({inputComponent:j,inputProps:D({children:s,IconComponent:g,variant:he,type:void 0,multiple:L},O?{id:b}:{autoWidth:n,defaultOpen:h,displayEmpty:p,labelId:T,MenuProps:C,onClose:I,onOpen:V,open:P,renderValue:G,SelectDisplayProps:D({id:b},W)},S,{classes:S?Ma(te,S.classes):te},v?v.props.inputProps:{})},L&&O&&he==="outlined"?{notched:!0}:{},{ref:ue,className:nt(ve.props.className,c)},!v&&{variant:he},re))});Cb.muiName="Select";const u4=["component","components","componentsProps","color","size"],ac=D({},z0,Zt("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),c4=He("span",{name:"MuiSlider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`color${Bt(t.color)}`],t.size!=="medium"&&e[`size${Bt(t.size)}`],t.marked&&e.marked,t.orientation==="vertical"&&e.vertical,t.track==="inverted"&&e.trackInverted,t.track===!1&&e.trackFalse]}})(({theme:r,ownerState:e})=>D({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(r.vars||r).palette[e.color].main,WebkitTapHighlightColor:"transparent"},e.orientation==="horizontal"&&D({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},e.size==="small"&&{height:2},e.marked&&{marginBottom:20}),e.orientation==="vertical"&&D({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},e.size==="small"&&{width:2},e.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${ac.disabled}`]:{pointerEvents:"none",cursor:"default",color:(r.vars||r).palette.grey[400]},[`&.${ac.dragging}`]:{[`& .${ac.thumb}, & .${ac.track}`]:{transition:"none"}}})),h4=He("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(r,e)=>e.rail})(({ownerState:r})=>D({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},r.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},r.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},r.track==="inverted"&&{opacity:1})),d4=He("span",{name:"MuiSlider",slot:"Track",overridesResolver:(r,e)=>e.track})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light"?Px(r.palette[e.color].main,.62):Nx(r.palette[e.color].main,.5);return D({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:r.transitions.create(["left","width","bottom","height"],{duration:r.transitions.duration.shortest})},e.size==="small"&&{border:"none"},e.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track===!1&&{display:"none"},e.track==="inverted"&&{backgroundColor:r.vars?r.vars.palette.Slider[`${e.color}Track`]:t,borderColor:r.vars?r.vars.palette.Slider[`${e.color}Track`]:t})}),f4=He("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.thumb,e[`thumbColor${Bt(t.color)}`],t.size!=="medium"&&e[`thumbSize${Bt(t.size)}`]]}})(({theme:r,ownerState:e})=>D({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:r.transitions.create(["box-shadow","left","bottom"],{duration:r.transitions.duration.shortest})},e.size==="small"&&{width:12,height:12},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":D({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(r.vars||r).shadows[2]},e.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${ac.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${r.vars?`rgba(${r.vars.palette[e.color].mainChannel} / 0.16)`:ur(r.palette[e.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${ac.active}`]:{boxShadow:`0px 0px 0px 14px ${r.vars?`rgba(${r.vars.palette[e.color].mainChannel} / 0.16)`:ur(r.palette[e.color].main,.16)}`},[`&.${ac.disabled}`]:{"&:hover":{boxShadow:"none"}}})),p4=He(AB,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(r,e)=>e.valueLabel})(({theme:r,ownerState:e})=>D({[`&.${ac.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"},zIndex:1,whiteSpace:"nowrap"},r.typography.body2,{fontWeight:500,transition:r.transitions.create(["transform"],{duration:r.transitions.duration.shortest}),transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:(r.vars||r).palette.grey[600],borderRadius:2,color:(r.vars||r).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},e.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},e.orientation==="vertical"&&{right:"30px",top:"24px",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"25%"}},e.size==="small"&&{fontSize:r.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),g4=He("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:r=>Ax(r)&&r!=="markActive",overridesResolver:(r,e)=>e.mark})(({theme:r,ownerState:e,markActive:t})=>D({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},t&&{backgroundColor:(r.vars||r).palette.background.paper,opacity:.8})),m4=He("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:r=>Ax(r)&&r!=="markLabelActive",overridesResolver:(r,e)=>e.markLabel})(({theme:r,ownerState:e,markLabelActive:t})=>D({},r.typography.body2,{color:(r.vars||r).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},e.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},e.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},t&&{color:(r.vars||r).palette.text.primary})),y4=r=>{const{color:e,size:t,classes:i={}}=r;return D({},i,{root:nt(i.root,Vg(`color${Bt(e)}`),i[`color${Bt(e)}`],t&&[Vg(`size${Bt(t)}`),i[`size${Bt(t)}`]]),thumb:nt(i.thumb,Vg(`thumbColor${Bt(e)}`),i[`thumbColor${Bt(e)}`],t&&[Vg(`thumbSize${Bt(t)}`),i[`thumbSize${Bt(t)}`]])})},b4=F.forwardRef(function(e,t){var i,n,s,o;const c=fi({props:e,name:"MuiSlider"}),p=es().direction==="rtl",{component:g="span",components:b={},componentsProps:v={},color:S="primary",size:B="medium"}=c,T=st(c,u4),C=D({},c,{color:S,size:B}),L=y4(C);return w.jsx(KO,D({},T,{isRtl:p,components:D({Root:c4,Rail:h4,Track:d4,Thumb:f4,ValueLabel:p4,Mark:g4,MarkLabel:m4},b),componentsProps:D({},v,{root:D({},v.root,y0(b.Root)&&{as:g,ownerState:D({},(i=v.root)==null?void 0:i.ownerState,{color:S,size:B})}),thumb:D({},v.thumb,y0(b.Thumb)&&{ownerState:D({},(n=v.thumb)==null?void 0:n.ownerState,{color:S,size:B})}),track:D({},v.track,y0(b.Track)&&{ownerState:D({},(s=v.track)==null?void 0:s.ownerState,{color:S,size:B})}),valueLabel:D({},v.valueLabel,y0(b.ValueLabel)&&{ownerState:D({},(o=v.valueLabel)==null?void 0:o.ownerState,{color:S,size:B})})}),classes:L,ref:t}))});function v4(r){return si("MuiTooltip",r)}const oc=Zt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),w4=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];function x4(r){return Math.round(r*1e5)/1e5}const S4=r=>{const{classes:e,disableInteractive:t,arrow:i,touch:n,placement:s}=r,o={popper:["popper",!t&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",n&&"touch",`tooltipPlacement${Bt(s.split("-")[0])}`],arrow:["arrow"]};return di(o,v4,e)},k4=He(Hx,{name:"MuiTooltip",slot:"Popper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.popper,!t.disableInteractive&&e.popperInteractive,t.arrow&&e.popperArrow,!t.open&&e.popperClose]}})(({theme:r,ownerState:e,open:t})=>D({zIndex:(r.vars||r).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!t&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${oc.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${oc.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${oc.arrow}`]:D({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${oc.arrow}`]:D({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),_4=He("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.tooltip,t.touch&&e.touch,t.arrow&&e.tooltipArrow,e[`tooltipPlacement${Bt(t.placement.split("-")[0])}`]]}})(({theme:r,ownerState:e})=>D({backgroundColor:r.vars?r.vars.palette.Tooltip.bg:ur(r.palette.grey[700],.92),borderRadius:(r.vars||r).shape.borderRadius,color:(r.vars||r).palette.common.white,fontFamily:r.typography.fontFamily,padding:"4px 8px",fontSize:r.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:r.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:r.typography.pxToRem(14),lineHeight:`${x4(16/14)}em`,fontWeight:r.typography.fontWeightRegular},{[`.${oc.popper}[data-popper-placement*="left"] &`]:D({transformOrigin:"right center"},e.isRtl?D({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):D({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${oc.popper}[data-popper-placement*="right"] &`]:D({transformOrigin:"left center"},e.isRtl?D({marginRight:"14px"},e.touch&&{marginRight:"24px"}):D({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${oc.popper}[data-popper-placement*="top"] &`]:D({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${oc.popper}[data-popper-placement*="bottom"] &`]:D({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),B4=He("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(r,e)=>e.arrow})(({theme:r})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:r.vars?r.vars.palette.Tooltip.bg:ur(r.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let w0=!1,iw=null;function x0(r,e){return t=>{e&&e(t),r(t)}}const xt=F.forwardRef(function(e,t){var i,n,s,o,c,h;const p=fi({props:e,name:"MuiTooltip"}),{arrow:g=!1,children:b,components:v={},componentsProps:S={},describeChild:B=!1,disableFocusListener:T=!1,disableHoverListener:C=!1,disableInteractive:L=!1,disableTouchListener:O=!1,enterDelay:I=100,enterNextDelay:V=0,enterTouchDelay:P=700,followCursor:G=!1,id:W,leaveDelay:J=0,leaveTouchDelay:re=1500,onClose:j,onOpen:oe,open:ge,placement:he="bottom",PopperComponent:ve,PopperProps:Be={},title:te,TransitionComponent:ue=Z0,TransitionProps:ne}=p,Se=st(p,w4),z=es(),Z=z.direction==="rtl",[pe,We]=F.useState(),[Ie,Ue]=F.useState(null),Ee=F.useRef(!1),Qe=L||G,Oe=F.useRef(),et=F.useRef(),wt=F.useRef(),pt=F.useRef(),[ei,gi]=X0({controlled:ge,default:!1,name:"Tooltip",state:"open"});let At=ei;const Bi=yx(W),Ai=F.useRef(),$t=F.useCallback(()=>{Ai.current!==void 0&&(document.body.style.WebkitUserSelect=Ai.current,Ai.current=void 0),clearTimeout(pt.current)},[]);F.useEffect(()=>()=>{clearTimeout(Oe.current),clearTimeout(et.current),clearTimeout(wt.current),$t()},[$t]);const Ki=ai=>{clearTimeout(iw),w0=!0,gi(!0),oe&&!At&&oe(ai)},Xi=ua(ai=>{clearTimeout(iw),iw=setTimeout(()=>{w0=!1},800+J),gi(!1),j&&At&&j(ai),clearTimeout(Oe.current),Oe.current=setTimeout(()=>{Ee.current=!1},z.transitions.duration.shortest)}),zt=ai=>{Ee.current&&ai.type!=="touchstart"||(pe&&pe.removeAttribute("title"),clearTimeout(et.current),clearTimeout(wt.current),I||w0&&V?et.current=setTimeout(()=>{Ki(ai)},w0?V:I):Ki(ai))},Wt=ai=>{clearTimeout(et.current),clearTimeout(wt.current),wt.current=setTimeout(()=>{Xi(ai)},J)},{isFocusVisibleRef:Li,onBlur:Qi,onFocus:Ve,ref:qe}=bx(),[,bt]=F.useState(!1),Xe=ai=>{Qi(ai),Li.current===!1&&(bt(!1),Wt(ai))},se=ai=>{pe||We(ai.currentTarget),Ve(ai),Li.current===!0&&(bt(!0),zt(ai))},Re=ai=>{Ee.current=!0;const Er=b.props;Er.onTouchStart&&Er.onTouchStart(ai)},ke=zt,Je=Wt,Ht=ai=>{Re(ai),clearTimeout(wt.current),clearTimeout(Oe.current),$t(),Ai.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pt.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ai.current,zt(ai)},P)},Xt=ai=>{b.props.onTouchEnd&&b.props.onTouchEnd(ai),$t(),clearTimeout(wt.current),wt.current=setTimeout(()=>{Xi(ai)},re)};F.useEffect(()=>{if(!At)return;function ai(Er){(Er.key==="Escape"||Er.key==="Esc")&&Xi(Er)}return document.addEventListener("keydown",ai),()=>{document.removeEventListener("keydown",ai)}},[Xi,At]);const Ji=Wi(We,t),jn=Wi(qe,Ji),bl=Wi(b.ref,jn);te===""&&(At=!1);const Hs=F.useRef({x:0,y:0}),vl=F.useRef(),_c=ai=>{const Er=b.props;Er.onMouseMove&&Er.onMouseMove(ai),Hs.current={x:ai.clientX,y:ai.clientY},vl.current&&vl.current.update()},Ua={},Gs=typeof te=="string";B?(Ua.title=!At&&Gs&&!C?te:null,Ua["aria-describedby"]=At?Bi:null):(Ua["aria-label"]=Gs?te:null,Ua["aria-labelledby"]=At&&!Gs?Bi:null);const jr=D({},Ua,Se,b.props,{className:nt(Se.className,b.props.className),onTouchStart:Re,ref:bl},G?{onMouseMove:_c}:{}),vo={};O||(jr.onTouchStart=Ht,jr.onTouchEnd=Xt),C||(jr.onMouseOver=x0(ke,jr.onMouseOver),jr.onMouseLeave=x0(Je,jr.onMouseLeave),Qe||(vo.onMouseOver=ke,vo.onMouseLeave=Je)),T||(jr.onFocus=x0(se,jr.onFocus),jr.onBlur=x0(Xe,jr.onBlur),Qe||(vo.onFocus=se,vo.onBlur=Xe));const Vh=F.useMemo(()=>{var ai;let Er=[{name:"arrow",enabled:!!Ie,options:{element:Ie,padding:4}}];return(ai=Be.popperOptions)!=null&&ai.modifiers&&(Er=Er.concat(Be.popperOptions.modifiers)),D({},Be.popperOptions,{modifiers:Er})},[Ie,Be]),wo=D({},p,{isRtl:Z,arrow:g,disableInteractive:Qe,placement:he,PopperComponentProp:ve,touch:Ee.current}),pu=S4(wo),gu=(i=v.Popper)!=null?i:k4,mu=(n=(s=v.Transition)!=null?s:ue)!=null?n:Z0,Bc=(o=v.Tooltip)!=null?o:_4,xo=(c=v.Arrow)!=null?c:B4,wl=Ag(gu,D({},Be,S.popper),wo),xl=Ag(mu,D({},ne,S.transition),wo),Tc=Ag(Bc,D({},S.tooltip),wo),Sl=Ag(xo,D({},S.arrow),wo);return w.jsxs(F.Fragment,{children:[F.cloneElement(b,jr),w.jsx(gu,D({as:ve??Hx,placement:he,anchorEl:G?{getBoundingClientRect:()=>({top:Hs.current.y,left:Hs.current.x,right:Hs.current.x,bottom:Hs.current.y,width:0,height:0})}:pe,popperRef:vl,open:pe?At:!1,id:Bi,transition:!0},vo,wl,{className:nt(pu.popper,Be==null?void 0:Be.className,(h=S.popper)==null?void 0:h.className),popperOptions:Vh,children:({TransitionProps:ai})=>{var Er,yu;return w.jsx(mu,D({timeout:z.transitions.duration.shorter},ai,xl,{children:w.jsxs(Bc,D({},Tc,{className:nt(pu.tooltip,(Er=S.tooltip)==null?void 0:Er.className),children:[te,g?w.jsx(xo,D({},Sl,{className:nt(pu.arrow,(yu=S.arrow)==null?void 0:yu.className),ref:Ue})):null]}))}))}}))]})});function T4(r){return si("MuiTab",r)}const mh=Zt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),C4=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],N4=r=>{const{classes:e,textColor:t,fullWidth:i,wrapped:n,icon:s,label:o,selected:c,disabled:h}=r,p={root:["root",s&&o&&"labelIcon",`textColor${Bt(t)}`,i&&"fullWidth",n&&"wrapped",c&&"selected",h&&"disabled"],iconWrapper:["iconWrapper"]};return di(p,T4,e)},P4=He($f,{name:"MuiTab",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.label&&t.icon&&e.labelIcon,e[`textColor${Bt(t.textColor)}`],t.fullWidth&&e.fullWidth,t.wrapped&&e.wrapped]}})(({theme:r,ownerState:e})=>D({},r.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${mh.iconWrapper}`]:D({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:r.spacing(1)},e.iconPosition==="end"&&{marginLeft:r.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${mh.selected}`]:{opacity:1},[`&.${mh.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(r.vars||r).palette.text.secondary,[`&.${mh.selected}`]:{color:(r.vars||r).palette.primary.main},[`&.${mh.disabled}`]:{color:(r.vars||r).palette.text.disabled}},e.textColor==="secondary"&&{color:(r.vars||r).palette.text.secondary,[`&.${mh.selected}`]:{color:(r.vars||r).palette.secondary.main},[`&.${mh.disabled}`]:{color:(r.vars||r).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:r.typography.pxToRem(12)})),Fg=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTab"}),{className:n,disabled:s=!1,disableFocusRipple:o=!1,fullWidth:c,icon:h,iconPosition:p="top",indicator:g,label:b,onChange:v,onClick:S,onFocus:B,selected:T,selectionFollowsFocus:C,textColor:L="inherit",value:O,wrapped:I=!1}=i,V=st(i,C4),P=D({},i,{disabled:s,disableFocusRipple:o,selected:T,icon:!!h,iconPosition:p,label:!!b,fullWidth:c,textColor:L,wrapped:I}),G=N4(P),W=h&&b&&F.isValidElement(h)?F.cloneElement(h,{className:nt(G.iconWrapper,h.props.className)}):h,J=j=>{!T&&v&&v(j,O),S&&S(j)},re=j=>{C&&!T&&v&&v(j,O),B&&B(j)};return w.jsxs(P4,D({focusRipple:!o,className:nt(G.root,n),ref:t,role:"tab","aria-selected":T,disabled:s,onClick:J,onFocus:re,ownerState:P,tabIndex:T?0:-1},V,{children:[p==="top"||p==="start"?w.jsxs(F.Fragment,{children:[W,b]}):w.jsxs(F.Fragment,{children:[b,W]}),g]}))}),sT=F.createContext();function E4(r){return si("MuiTable",r)}Zt("MuiTable",["root","stickyHeader"]);const R4=["className","component","padding","size","stickyHeader"],L4=r=>{const{classes:e,stickyHeader:t}=r;return di({root:["root",t&&"stickyHeader"]},E4,e)},I4=He("table",{name:"MuiTable",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.stickyHeader&&e.stickyHeader]}})(({theme:r,ownerState:e})=>D({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":D({},r.typography.body2,{padding:r.spacing(2),color:(r.vars||r).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),Rk="table",aT=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTable"}),{className:n,component:s=Rk,padding:o="normal",size:c="medium",stickyHeader:h=!1}=i,p=st(i,R4),g=D({},i,{component:s,padding:o,size:c,stickyHeader:h}),b=L4(g),v=F.useMemo(()=>({padding:o,size:c,stickyHeader:h}),[o,c,h]);return w.jsx(sT.Provider,{value:v,children:w.jsx(I4,D({as:s,role:s===Rk?null:"table",ref:t,className:nt(b.root,n),ownerState:g},p))})}),Qx=F.createContext();function F4(r){return si("MuiTableBody",r)}Zt("MuiTableBody",["root"]);const O4=["className","component"],M4=r=>{const{classes:e}=r;return di({root:["root"]},F4,e)},D4=He("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(r,e)=>e.root})({display:"table-row-group"}),A4={variant:"body"},Lk="tbody",oT=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTableBody"}),{className:n,component:s=Lk}=i,o=st(i,O4),c=D({},i,{component:s}),h=M4(c);return w.jsx(Qx.Provider,{value:A4,children:w.jsx(D4,D({className:nt(h.root,n),as:s,ref:t,role:s===Lk?null:"rowgroup",ownerState:c},o))})});function V4(r){return si("MuiTableCell",r)}const z4=Zt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),W4=["align","className","component","padding","scope","size","sortDirection","variant"],H4=r=>{const{classes:e,variant:t,align:i,padding:n,size:s,stickyHeader:o}=r,c={root:["root",t,o&&"stickyHeader",i!=="inherit"&&`align${Bt(i)}`,n!=="normal"&&`padding${Bt(n)}`,`size${Bt(s)}`]};return di(c,V4,e)},G4=He("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`size${Bt(t.size)}`],t.padding!=="normal"&&e[`padding${Bt(t.padding)}`],t.align!=="inherit"&&e[`align${Bt(t.align)}`],t.stickyHeader&&e.stickyHeader]}})(({theme:r,ownerState:e})=>D({},r.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:r.vars?`1px solid ${r.vars.palette.TableCell.border}`:`1px solid
    ${r.palette.mode==="light"?Px(ur(r.palette.divider,1),.88):Nx(ur(r.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(r.vars||r).palette.text.primary,lineHeight:r.typography.pxToRem(24),fontWeight:r.typography.fontWeightMedium},e.variant==="body"&&{color:(r.vars||r).palette.text.primary},e.variant==="footer"&&{color:(r.vars||r).palette.text.secondary,lineHeight:r.typography.pxToRem(21),fontSize:r.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${z4.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(r.vars||r).palette.background.default})),tb=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTableCell"}),{align:n="inherit",className:s,component:o,padding:c,scope:h,size:p,sortDirection:g,variant:b}=i,v=st(i,W4),S=F.useContext(sT),B=F.useContext(Qx),T=B&&B.variant==="head";let C;o?C=o:C=T?"th":"td";let L=h;!L&&T&&(L="col");const O=b||B&&B.variant,I=D({},i,{align:n,component:C,padding:c||(S&&S.padding?S.padding:"normal"),size:p||(S&&S.size?S.size:"medium"),sortDirection:g,stickyHeader:O==="head"&&S&&S.stickyHeader,variant:O}),V=H4(I);let P=null;return g&&(P=g==="asc"?"ascending":"descending"),w.jsx(G4,D({as:C,ref:t,className:nt(V.root,s),"aria-sort":P,scope:L,ownerState:I},v))});function U4(r){return si("MuiTableContainer",r)}Zt("MuiTableContainer",["root"]);const $4=["className","component"],j4=r=>{const{classes:e}=r;return di({root:["root"]},U4,e)},Y4=He("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(r,e)=>e.root})({width:"100%",overflowX:"auto"}),lT=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTableContainer"}),{className:n,component:s="div"}=i,o=st(i,$4),c=D({},i,{component:s}),h=j4(c);return w.jsx(Y4,D({ref:t,as:s,className:nt(h.root,n),ownerState:c},o))}),q4=Vx(w.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),X4=Vx(w.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function K4(r){return si("MuiTableRow",r)}const Ik=Zt("MuiTableRow",["root","selected","hover","head","footer"]),Q4=["className","component","hover","selected"],J4=r=>{const{classes:e,selected:t,hover:i,head:n,footer:s}=r;return di({root:["root",t&&"selected",i&&"hover",n&&"head",s&&"footer"]},K4,e)},Z4=He("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.head&&e.head,t.footer&&e.footer]}})(({theme:r})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Ik.hover}:hover`]:{backgroundColor:(r.vars||r).palette.action.hover},[`&.${Ik.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:ur(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:ur(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}}})),Fk="tr",uT=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTableRow"}),{className:n,component:s=Fk,hover:o=!1,selected:c=!1}=i,h=st(i,Q4),p=F.useContext(Qx),g=D({},i,{component:s,hover:o,selected:c,head:p&&p.variant==="head",footer:p&&p.variant==="footer"}),b=J4(g);return w.jsx(Z4,D({as:s,ref:t,className:nt(b.root,n),role:s===Fk?null:"row",ownerState:g},h))});function e5(r){return(1+Math.sin(Math.PI*r-Math.PI/2))/2}function t5(r,e,t,i={},n=()=>{}){const{ease:s=e5,duration:o=300}=i;let c=null;const h=e[r];let p=!1;const g=()=>{p=!0},b=v=>{if(p){n(new Error("Animation cancelled"));return}c===null&&(c=v);const S=Math.min(1,(v-c)/o);if(e[r]=s(S)*(t-h)+h,S>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(b)};return h===t?(n(new Error("Element already at target position")),g):(requestAnimationFrame(b),g)}const i5=["onChange"],r5={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function n5(r){const{onChange:e}=r,t=st(r,i5),i=F.useRef(),n=F.useRef(null),s=()=>{i.current=n.current.offsetHeight-n.current.clientHeight};return F.useEffect(()=>{const o=tm(()=>{const h=i.current;s(),h!==i.current&&e(i.current)}),c=nu(n.current);return c.addEventListener("resize",o),()=>{o.clear(),c.removeEventListener("resize",o)}},[e]),F.useEffect(()=>{s(),e(i.current)},[e]),w.jsx("div",D({style:r5,ref:n},t))}function s5(r){return si("MuiTabScrollButton",r)}const a5=Zt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]);var Ok,Mk;const o5=["className","direction","orientation","disabled"],l5=r=>{const{classes:e,orientation:t,disabled:i}=r;return di({root:["root",t,i&&"disabled"]},s5,e)},u5=He($f,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.orientation&&e[t.orientation]]}})(({ownerState:r})=>D({width:40,flexShrink:0,opacity:.8,[`&.${a5.disabled}`]:{opacity:0}},r.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${r.isRtl?-90:90}deg)`}})),c5=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTabScrollButton"}),{className:n,direction:s}=i,o=st(i,o5),h=es().direction==="rtl",p=D({isRtl:h},i),g=l5(p);return w.jsx(u5,D({component:"div",className:nt(g.root,n),ref:t,role:null,ownerState:p,tabIndex:null},o,{children:s==="left"?Ok||(Ok=w.jsx(q4,{fontSize:"small"})):Mk||(Mk=w.jsx(X4,{fontSize:"small"}))}))});function h5(r){return si("MuiTabs",r)}const rw=Zt("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),d5=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Dk=(r,e)=>r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r.firstChild,Ak=(r,e)=>r===e?r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r.lastChild,S0=(r,e,t)=>{let i=!1,n=t(r,e);for(;n;){if(n===r.firstChild){if(i)return;i=!0}const s=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||s)n=t(r,n);else{n.focus();return}}},f5=r=>{const{vertical:e,fixed:t,hideScrollbar:i,scrollableX:n,scrollableY:s,centered:o,scrollButtonsHideMobile:c,classes:h}=r;return di({root:["root",e&&"vertical"],scroller:["scroller",t&&"fixed",i&&"hideScrollbar",n&&"scrollableX",s&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",c&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[i&&"hideScrollbar"]},h5,h)},p5=He("div",{name:"MuiTabs",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${rw.scrollButtons}`]:e.scrollButtons},{[`& .${rw.scrollButtons}`]:t.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,t.vertical&&e.vertical]}})(({ownerState:r,theme:e})=>D({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},r.vertical&&{flexDirection:"column"},r.scrollButtonsHideMobile&&{[`& .${rw.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),g5=He("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.scroller,t.fixed&&e.fixed,t.hideScrollbar&&e.hideScrollbar,t.scrollableX&&e.scrollableX,t.scrollableY&&e.scrollableY]}})(({ownerState:r})=>D({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},r.fixed&&{overflowX:"hidden",width:"100%"},r.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},r.scrollableX&&{overflowX:"auto",overflowY:"hidden"},r.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),m5=He("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.flexContainer,t.vertical&&e.flexContainerVertical,t.centered&&e.centered]}})(({ownerState:r})=>D({display:"flex"},r.vertical&&{flexDirection:"column"},r.centered&&{justifyContent:"center"})),y5=He("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(r,e)=>e.indicator})(({ownerState:r,theme:e})=>D({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},r.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},r.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},r.vertical&&{height:"100%",width:2,right:0})),b5=He(n5,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Vk={},v5=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTabs"}),n=es(),s=n.direction==="rtl",{"aria-label":o,"aria-labelledby":c,action:h,centered:p=!1,children:g,className:b,component:v="div",allowScrollButtonsMobile:S=!1,indicatorColor:B="primary",onChange:T,orientation:C="horizontal",ScrollButtonComponent:L=c5,scrollButtons:O="auto",selectionFollowsFocus:I,TabIndicatorProps:V={},TabScrollButtonProps:P={},textColor:G="primary",value:W,variant:J="standard",visibleScrollbar:re=!1}=i,j=st(i,d5),oe=J==="scrollable",ge=C==="vertical",he=ge?"scrollTop":"scrollLeft",ve=ge?"top":"left",Be=ge?"bottom":"right",te=ge?"clientHeight":"clientWidth",ue=ge?"height":"width",ne=D({},i,{component:v,allowScrollButtonsMobile:S,indicatorColor:B,orientation:C,vertical:ge,scrollButtons:O,textColor:G,variant:J,visibleScrollbar:re,fixed:!oe,hideScrollbar:oe&&!re,scrollableX:oe&&!ge,scrollableY:oe&&ge,centered:p&&!oe,scrollButtonsHideMobile:!S}),Se=f5(ne),[z,Z]=F.useState(!1),[pe,We]=F.useState(Vk),[Ie,Ue]=F.useState({start:!1,end:!1}),[Ee,Qe]=F.useState({overflow:"hidden",scrollbarWidth:0}),Oe=new Map,et=F.useRef(null),wt=F.useRef(null),pt=()=>{const se=et.current;let Re;if(se){const Je=se.getBoundingClientRect();Re={clientWidth:se.clientWidth,scrollLeft:se.scrollLeft,scrollTop:se.scrollTop,scrollLeftNormalized:I1(se,n.direction),scrollWidth:se.scrollWidth,top:Je.top,bottom:Je.bottom,left:Je.left,right:Je.right}}let ke;if(se&&W!==!1){const Je=wt.current.children;if(Je.length>0){const Ht=Je[Oe.get(W)];ke=Ht?Ht.getBoundingClientRect():null}}return{tabsMeta:Re,tabMeta:ke}},ei=ua(()=>{const{tabsMeta:se,tabMeta:Re}=pt();let ke=0,Je;if(ge)Je="top",Re&&se&&(ke=Re.top-se.top+se.scrollTop);else if(Je=s?"right":"left",Re&&se){const Xt=s?se.scrollLeftNormalized+se.clientWidth-se.scrollWidth:se.scrollLeft;ke=(s?-1:1)*(Re[Je]-se[Je]+Xt)}const Ht={[Je]:ke,[ue]:Re?Re[ue]:0};if(isNaN(pe[Je])||isNaN(pe[ue]))We(Ht);else{const Xt=Math.abs(pe[Je]-Ht[Je]),Ji=Math.abs(pe[ue]-Ht[ue]);(Xt>=1||Ji>=1)&&We(Ht)}}),gi=(se,{animation:Re=!0}={})=>{Re?t5(he,et.current,se,{duration:n.transitions.duration.standard}):et.current[he]=se},At=se=>{let Re=et.current[he];ge?Re+=se:(Re+=se*(s?-1:1),Re*=s&&aB()==="reverse"?-1:1),gi(Re)},Bi=()=>{const se=et.current[te];let Re=0;const ke=Array.from(wt.current.children);for(let Je=0;Je<ke.length;Je+=1){const Ht=ke[Je];if(Re+Ht[te]>se){Je===0&&(Re=se);break}Re+=Ht[te]}return Re},Ai=()=>{At(-1*Bi())},$t=()=>{At(Bi())},Ki=F.useCallback(se=>{Qe({overflow:null,scrollbarWidth:se})},[]),Xi=()=>{const se={};se.scrollbarSizeListener=oe?w.jsx(b5,{onChange:Ki,className:nt(Se.scrollableX,Se.hideScrollbar)}):null;const Re=Ie.start||Ie.end,ke=oe&&(O==="auto"&&Re||O===!0);return se.scrollButtonStart=ke?w.jsx(L,D({orientation:C,direction:s?"right":"left",onClick:Ai,disabled:!Ie.start},P,{className:nt(Se.scrollButtons,P.className)})):null,se.scrollButtonEnd=ke?w.jsx(L,D({orientation:C,direction:s?"left":"right",onClick:$t,disabled:!Ie.end},P,{className:nt(Se.scrollButtons,P.className)})):null,se},zt=ua(se=>{const{tabsMeta:Re,tabMeta:ke}=pt();if(!(!ke||!Re)){if(ke[ve]<Re[ve]){const Je=Re[he]+(ke[ve]-Re[ve]);gi(Je,{animation:se})}else if(ke[Be]>Re[Be]){const Je=Re[he]+(ke[Be]-Re[Be]);gi(Je,{animation:se})}}}),Wt=ua(()=>{if(oe&&O!==!1){const{scrollTop:se,scrollHeight:Re,clientHeight:ke,scrollWidth:Je,clientWidth:Ht}=et.current;let Xt,Ji;if(ge)Xt=se>1,Ji=se<Re-ke-1;else{const jn=I1(et.current,n.direction);Xt=s?jn<Je-Ht-1:jn>1,Ji=s?jn>1:jn<Je-Ht-1}(Xt!==Ie.start||Ji!==Ie.end)&&Ue({start:Xt,end:Ji})}});F.useEffect(()=>{const se=tm(()=>{et.current&&(ei(),Wt())}),Re=nu(et.current);Re.addEventListener("resize",se);let ke;return typeof ResizeObserver<"u"&&(ke=new ResizeObserver(se),Array.from(wt.current.children).forEach(Je=>{ke.observe(Je)})),()=>{se.clear(),Re.removeEventListener("resize",se),ke&&ke.disconnect()}},[ei,Wt]);const Li=F.useMemo(()=>tm(()=>{Wt()}),[Wt]);F.useEffect(()=>()=>{Li.clear()},[Li]),F.useEffect(()=>{Z(!0)},[]),F.useEffect(()=>{ei(),Wt()}),F.useEffect(()=>{zt(Vk!==pe)},[zt,pe]),F.useImperativeHandle(h,()=>({updateIndicator:ei,updateScrollButtons:Wt}),[ei,Wt]);const Qi=w.jsx(y5,D({},V,{className:nt(Se.indicator,V.className),ownerState:ne,style:D({},pe,V.style)}));let Ve=0;const qe=F.Children.map(g,se=>{if(!F.isValidElement(se))return null;const Re=se.props.value===void 0?Ve:se.props.value;Oe.set(Re,Ve);const ke=Re===W;return Ve+=1,F.cloneElement(se,D({fullWidth:J==="fullWidth",indicator:ke&&!z&&Qi,selected:ke,selectionFollowsFocus:I,onChange:T,textColor:G,value:Re},Ve===1&&W===!1&&!se.props.tabIndex?{tabIndex:0}:{}))}),bt=se=>{const Re=wt.current,ke=wn(Re).activeElement;if(ke.getAttribute("role")!=="tab")return;let Ht=C==="horizontal"?"ArrowLeft":"ArrowUp",Xt=C==="horizontal"?"ArrowRight":"ArrowDown";switch(C==="horizontal"&&s&&(Ht="ArrowRight",Xt="ArrowLeft"),se.key){case Ht:se.preventDefault(),S0(Re,ke,Ak);break;case Xt:se.preventDefault(),S0(Re,ke,Dk);break;case"Home":se.preventDefault(),S0(Re,null,Dk);break;case"End":se.preventDefault(),S0(Re,null,Ak);break}},Xe=Xi();return w.jsxs(p5,D({className:nt(Se.root,b),ownerState:ne,ref:t,as:v},j,{children:[Xe.scrollButtonStart,Xe.scrollbarSizeListener,w.jsxs(g5,{className:Se.scroller,ownerState:ne,style:{overflow:Ee.overflow,[ge?`margin${s?"Left":"Right"}`:"marginBottom"]:re?void 0:-Ee.scrollbarWidth},ref:et,onScroll:Li,children:[w.jsx(m5,{"aria-label":o,"aria-labelledby":c,"aria-orientation":C==="vertical"?"vertical":null,className:Se.flexContainer,ownerState:ne,onKeyDown:bt,ref:wt,role:"tablist",children:qe}),z&&Qi]}),Xe.scrollButtonEnd]}))});function w5(r){return si("MuiTextField",r)}Zt("MuiTextField",["root"]);const x5=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],S5={standard:Tb,filled:jx,outlined:Xx},k5=r=>{const{classes:e}=r;return di({root:["root"]},w5,e)},_5=He(XB,{name:"MuiTextField",slot:"Root",overridesResolver:(r,e)=>e.root})({}),Ea=F.forwardRef(function(e,t){const i=fi({props:e,name:"MuiTextField"}),{autoComplete:n,autoFocus:s=!1,children:o,className:c,color:h="primary",defaultValue:p,disabled:g=!1,error:b=!1,FormHelperTextProps:v,fullWidth:S=!1,helperText:B,id:T,InputLabelProps:C,inputProps:L,InputProps:O,inputRef:I,label:V,maxRows:P,minRows:G,multiline:W=!1,name:J,onBlur:re,onChange:j,onFocus:oe,placeholder:ge,required:he=!1,rows:ve,select:Be=!1,SelectProps:te,type:ue,value:ne,variant:Se="outlined"}=i,z=st(i,x5),Z=D({},i,{autoFocus:s,color:h,disabled:g,error:b,fullWidth:S,multiline:W,required:he,select:Be,variant:Se}),pe=k5(Z),We={};Se==="outlined"&&(C&&typeof C.shrink<"u"&&(We.notched=C.shrink),We.label=V),Be&&((!te||!te.native)&&(We.id=void 0),We["aria-describedby"]=void 0);const Ie=yx(T),Ue=B&&Ie?`${Ie}-helper-text`:void 0,Ee=V&&Ie?`${Ie}-label`:void 0,Qe=S5[Se],Oe=w.jsx(Qe,D({"aria-describedby":Ue,autoComplete:n,autoFocus:s,defaultValue:p,fullWidth:S,multiline:W,name:J,rows:ve,maxRows:P,minRows:G,type:ue,value:ne,id:Ie,inputRef:I,onBlur:re,onChange:j,onFocus:oe,placeholder:ge,inputProps:L},We,O));return w.jsxs(_5,D({className:nt(pe.root,c),disabled:g,error:b,fullWidth:S,ref:t,required:he,color:h,variant:Se,ownerState:Z},z,{children:[V!=null&&V!==""&&w.jsx(KB,D({htmlFor:Ie,id:Ee},C,{children:V})),Be?w.jsx(Cb,D({"aria-describedby":Ue,id:Ie,labelId:Ee,value:ne,input:Oe},te,{children:o})):Oe,B&&w.jsx(BA,D({id:Ue},v,{children:B}))]}))}),cT=Mn.createContext({toggleColorMode:()=>{}}),hT=Mn.createContext({hasDialog:!1,setHasDialog:r=>{}});var nw,zk;function B5(){if(zk)return nw;zk=1;var r=ub(),e=function(i){return typeof i=="function"},t=function(i){var n=r.useState(i),s=n[0],o=n[1],c=r.useRef(s),h=r.useCallback(function(p){c.current=e(p)?p(c.current):p,o(c.current)},[]);return[s,h,c]};return nw=t,nw}var T5=B5();const C5=lx(T5);class N5{constructor(e){ti(this,"numberOfStrings",6);this.currentSelectedSlot=e}setNumberOfStrings(e){this.numberOfStrings=e}toggleNoteSelection(e){var t,i;((i=(t=this.currentSelectedSlot)==null?void 0:t.note)==null?void 0:i.id)===e.id?this.currentSelectedSlot=null:this.currentSelectedSlot={note:e,beat:e.beat,string:e.string}}movePreviousBeat(){return this.moveSelectedNoteHorizontal(e=>e.previousBeat)}moveNextBeat(){return this.moveSelectedNoteHorizontal(e=>e.nextBeat)}moveNextBar(){return this.moveSelectedNoteHorizontal(e=>{var t;return((t=e.voice.bar.nextBar)==null?void 0:t.voices[0].beats[0])??null})}movePreviousBar(){return this.moveSelectedNoteHorizontal(e=>{var t;return((t=e.voice.bar.previousBar)==null?void 0:t.voices[0].beats[0])??null})}moveStartOfCurrentBar(){return this.moveSelectedNoteHorizontal(e=>e.voice.beats[0]??null)}moveSelectedNoteUp(){return this.moveSelectedNoteVertical(e=>{if(this.currentSelectedSlot&&this.currentSelectedSlot.string<this.numberOfStrings){const t=this.currentSelectedSlot.string+1,i=e.find(n=>n.string===t);return{string:t,beat:this.currentSelectedSlot.beat,note:i}}})}moveSelectedNoteDown(){return this.moveSelectedNoteVertical(e=>{if(this.currentSelectedSlot&&this.currentSelectedSlot.string>1){const t=this.currentSelectedSlot.string-1,i=e.find(n=>n.string===t);return{string:t,beat:this.currentSelectedSlot.beat,note:i}}})}hasSelectedSlot(){return this.currentSelectedSlot!==null}getSelectedNote(){var e;return((e=this.currentSelectedSlot)==null?void 0:e.note)??null}getSelectedSlot(){return this.currentSelectedSlot}setSelectedSlot(e){this.currentSelectedSlot=e}getNoteBounds(e){var t,i,n,s,o,c,h;if((t=this.currentSelectedSlot)!=null&&t.note){const p=(i=e==null?void 0:e.boundsLookup)==null?void 0:i.findBeats(this.currentSelectedSlot.note.beat),g=(s=(n=p==null?void 0:p[1])==null?void 0:n.notes)==null?void 0:s.find(v=>{var S,B;return v.note.id===((B=(S=this.currentSelectedSlot)==null?void 0:S.note)==null?void 0:B.id)});return g==null?void 0:g.noteHeadBounds}if(this.currentSelectedSlot){const p=(h=(c=(o=e==null?void 0:e.boundsLookup)==null?void 0:o.findBeats(this.currentSelectedSlot.beat))==null?void 0:c[1])==null?void 0:h.visualBounds;return p?{x:p.x+p.w/2-this.numberOfStrings-1,w:7,y:p.y+p.h/(this.numberOfStrings-1)*(this.numberOfStrings-this.currentSelectedSlot.string)-this.numberOfStrings-1,h:10}:void 0}}updateCurrentSelection(){if(this.currentSelectedSlot&&!this.currentSelectedSlot.note){const e=this.currentSelectedSlot.beat.notes.find(t=>{var i;return t.string===((i=this.currentSelectedSlot)==null?void 0:i.string)});e&&(this.currentSelectedSlot.note=e)}}moveSelectedNoteVertical(e){if(!this.currentSelectedSlot)return;const t=this.currentSelectedSlot.beat.notes,i=e(t);i&&this.setSelectedSlot(i)}moveSelectedNoteHorizontal(e){if(!this.currentSelectedSlot)return!1;const t=e(this.currentSelectedSlot.beat);if(!t)return!1;const i=t.notes.find(n=>{var s;return n.string===((s=this.currentSelectedSlot)==null?void 0:s.string)});return this.setSelectedSlot({beat:t,string:this.currentSelectedSlot.string,note:i}),!0}}const dT=[];function Ca(r){dT.forEach(e=>e(r))}function P5(r,e){const t=e.h/6;return r>e.y&&r<e.y+t*1?6:r>e.y&&r<e.y+t*2?5:r>e.y&&r<e.y+t*3?4:r>e.y&&r<e.y+t*4?3:r>e.y&&r<e.y+t*5?2:r>e.y&&r<e.y+t*6?1:null}function E5(r){$(window).on("alphaTab.beatMouseDown",(e,t)=>{var g,b;const i=$("#alphaTab").offset();if(i===void 0)return;const n=window.event.pageX-i.left,s=window.event.pageY-i.top,o=(g=r==null?void 0:r.boundsLookup)==null?void 0:g.getNoteAtPos(t,n,s);if(o){Ca({type:"note-mouse-down",data:{note:o}});return}const c=(b=r==null?void 0:r.boundsLookup)==null?void 0:b.findBeats(t),h=c==null?void 0:c[1].barBounds.visualBounds;if(!h)return;const p=P5(s,h);p&&Ca({type:"string-mouse-down",data:{stringNumber:p,beat:t}})}),document.addEventListener("keydown",e=>{console.log(e),e.type==="keydown"&&e.key==="Delete"&&Ca({type:"delete-selected-note",rawEvent:e,data:{}}),e.type==="keydown"&&e.key==="ArrowLeft"&&(e.ctrlKey?Ca({type:"move-cursor-previous-bar",rawEvent:e,data:{}}):Ca({type:"move-cursor-left",rawEvent:e,data:{}})),e.type==="keydown"&&e.key==="ArrowRight"&&(e.ctrlKey?Ca({type:"move-cursor-next-bar",rawEvent:e,data:{}}):Ca({type:"move-cursor-right",rawEvent:e,data:{}})),e.type==="keydown"&&e.key==="ArrowUp"&&Ca({type:"move-cursor-up",rawEvent:e,data:{}}),e.type==="keydown"&&e.key==="ArrowDown"&&Ca({type:"move-cursor-down",rawEvent:e,data:{}}),e.type==="keydown"&&e.key==="Escape"&&Ca({type:"deselect-cursor",rawEvent:e,data:{}}),e.ctrlKey===!0&&e.key==="z"&&Ca({type:"undo-action",rawEvent:e,data:{}}),e.ctrlKey===!0&&e.key==="y"&&Ca({type:"redo-action",rawEvent:e,data:{}})})}let R5=class{constructor(e,t){E5(e),dT.push(t)}};class Xf{}class L5 extends Xf{do(e){const{currentBar:t}=e.data,i=new alphaTab.model.Bar;return i.clef=t.clef,i.clefOttava=t.clefOttava,i.index=t.index+1,i.simileMark=t.simileMark,t.staff.track.score.addMasterBar(new alphaTab.model.MasterBar),i.addVoice(new alphaTab.model.Voice),i.addVoice(new alphaTab.model.Voice),i.voices[0].addBeat(new alphaTab.model.Beat),i.voices[1].addBeat(new alphaTab.model.Beat),t.staff.addBar(i),t.finish(null,null),{requiresRerender:!0,requiresMidiUpdate:!0}}undo(e){const{currentBar:t}=e.data,i=t.nextBar,n=i==null?void 0:i.masterBar;return i==null||i.staff.bars.splice(i.index,1),n==null||n.score.masterBars.splice(n.index,1),t.masterBar.nextMasterBar=null,t.nextBar=null,t.voices.forEach(s=>{s.beats[s.beats.length-1].nextBeat=null}),t==null||t.finish(null,{}),{requiresRerender:!0,requiresMidiUpdate:!0}}canUndo(){return!0}}const I5=new L5;class F5 extends Xf{do(e){const{currentBeat:t,newBeat:i}=e.data;return t.nextBeat===null?(t.voice.addBeat(i),t.voice.finish(null,null),{requiresRerender:!0,requiresMidiUpdate:!0}):{requiresRerender:!1,requiresMidiUpdate:!1}}undo(e){const{currentBeat:t,newBeat:i}=e.data,n=t.voice.beats.indexOf(i);return n===-1?{requiresMidiUpdate:!1,requiresRerender:!1}:(t.nextBeat=null,t.voice.beats.splice(n,1),t.voice.finish(null,null),{requiresRerender:!0,requiresMidiUpdate:!0})}canUndo(){return!0}}const O5=new F5;class M5 extends Xf{do(e){const{beat:t,note:i}=e.data;return t.notes.find(s=>s.string===i.string)!==void 0?{requiresRerender:!1,requiresMidiUpdate:!1}:(t.addNote(i),t.finish(null,new Map),{requiresRerender:!0,requiresMidiUpdate:!0})}undo(e){const{beat:t,note:i}=e.data;return t.removeNote(i),{requiresRerender:!0,requiresMidiUpdate:!0}}canUndo(){return!0}}const D5=new M5;class Bm extends Xf{undo(e){return{requiresMidiUpdate:!1,requiresRerender:!1}}canUndo(){return!1}}class A5 extends Bm{do(e){const{trackInfo:t,score:i}=e.data,n=new alphaTab.model.Track;return n.name=t.name,n.ensureStaveCount(1),i.addTrack(n),i.finish(null),{requiresRerender:!1,requiresMidiUpdate:!1}}}const V5=new A5;class z5 extends Bm{do(e){const{track:t,trackInfo:i}=e.data;return t.name=i.name,t.shortName=i.name,t.staves.forEach(n=>{n.capo=i.capo,n.stringTuning=i.tuning}),{requiresRerender:!0,requiresMidiUpdate:!0}}}const W5=new z5;class H5 extends Xf{do(e){const{note:t}=e.data;return t.hammerPullOrigin&&(t.hammerPullOrigin.hammerPullDestination=null,t.hammerPullOrigin=null),t.hammerPullDestination&&(t.hammerPullDestination.hammerPullOrigin=null,t.hammerPullDestination=null),t.slideOrigin&&(t.slideOrigin.slideTarget=null,t.slideOrigin.slideOutType=alphaTab.model.SlideOutType.None,t.slideOrigin=null),t.slideTarget&&(t.slideTarget.slideOrigin=null,t.slideOutType=alphaTab.model.SlideOutType.None,t.slideTarget=null),t.beat.removeNote(t),{requiresRerender:!0,requiresMidiUpdate:!0}}undo(e){const{note:t}=e.data;return t.beat.notes.find(n=>n.string===t.string)!==void 0?{requiresRerender:!1,requiresMidiUpdate:!1}:(t.beat.addNote(t),t.beat.finish(null,{}),{requiresRerender:!0,requiresMidiUpdate:!0})}canUndo(){return!0}}const G5=new H5;class U5 extends Bm{do(e){const{score:t}=e.data.track;return t.tracks.splice(e.data.track.index,1),t.tracks.forEach((i,n)=>{i.index=n}),{requiresRerender:!0,requiresMidiUpdate:!0}}}const $5=new U5;class Pr extends Xf{undo(e){const{previousValue:t}=e.data;if(t===void 0)return{requiresMidiUpdate:!1,requiresRerender:!1};const i={type:e.type,data:{...e.data,value:t}};return this.do(i)}canUndo(){return!0}}class j5 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.accentuated,t.accentuated=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const Y5=new j5;function kr(r){return r==="quarter"?1:r==="half"?2:r==="full"?4:0}function yh(...r){const e=[],t=60/(r.length-1);return r.forEach((i,n)=>{e.push(new alphaTab.model.BendPoint(n*t,i))}),e}function fT(r){if(r.preBend===null&&r.bend===null&&r.release===null)return[];if(r.preBend!==null&&r.bend===null&&r.release===null)return yh(kr(r.preBend),kr(r.preBend));if(r.preBend===null&&r.bend!==null&&r.release===null)return yh(0,kr(r.bend),kr(r.bend));if(r.preBend===null&&r.bend===null&&r.release!==null)return[];if(r.preBend===null&&r.bend!==null&&r.release!==null){const e=Math.max(kr(r.bend)-kr(r.release),0);return yh(0,kr(r.bend),kr(r.bend),e,e)}if(r.preBend!==null&&r.bend!==null&&r.release===null)return r.preBend===r.bend?yh(kr(r.preBend),kr(r.bend)):yh(kr(r.preBend),kr(r.preBend),kr(r.bend),kr(r.bend));if(r.preBend!==null&&r.bend===null&&r.release!==null){const e=Math.max(kr(r.preBend)-kr(r.release),0);return yh(kr(r.preBend),kr(r.preBend),e,e)}if(r.preBend!==null&&r.bend!==null&&r.release!==null){const e=Math.max(kr(r.bend)-kr(r.release),0);return yh(kr(r.preBend),kr(r.preBend),kr(r.bend),kr(r.bend),e)}return[]}function q5(){const r={},e=[null,"quarter","half","full"];for(const t of e)for(const i of e)for(const n of e)r[`${t},${i},${n}`]=()=>fT({preBend:t,bend:i,release:n});return r}const X5=q5();function pT(r){if(r.bendState)return r.bendState;const e=Object.entries(X5).find(([i,n])=>JSON.stringify(n())===JSON.stringify(r.bendPoints));if(!e)return{bend:null,preBend:null,release:null};const t=e[0].split(",").map(i=>i==="null"?null:i);return{preBend:t[0],bend:t[1],release:t[2]}}class K5 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=pT(t),this.applyBendStateToNote(i,t),{requiresRerender:!0,requiresMidiUpdate:!0}}applyBendStateToNote(e,t){t.bendState=e;const i=fT(e);i.length>0?(t.bendPoints=[],t.maxBendPoint=null,i.forEach(n=>{t.addBendPoint(n)}),t.bendType=1,t.bendStyle=0):(t.bendPoints=[],t.maxBendPoint=null,t.bendType=0,t.bendStyle=0)}}const Q5=new K5;class J5 extends Pr{do(e){const{beat:t,value:i}=e.data;return e.data.previousValue=t.chord,i?this.addChord(i,t):this.removeChord(t)}addChord(e,t){const i=e.name;return t.voice.bar.staff.addChord(i,e),t.chordId=i,t.notes.length===0?(e.strings.forEach((n,s)=>{if(n!==-1){const o=new alphaTab.model.Note;o.string=e.strings.length-s,o.fret=n,t.addNote(o)}}),t.finish(null,new Map),{requiresRerender:!0,requiresMidiUpdate:!0}):{requiresRerender:!0,requiresMidiUpdate:!1}}removeChord(e){return e.chordId=null,e.finish(null,new Map),{requiresRerender:!0,requiresMidiUpdate:!1}}}const Z5=new J5;class e6 extends Pr{do(e){const{masterBar:t}=e.data.beat.voice.bar;return e.data.previousValue=t.repeatCount,t.repeatCount=e.data.value,t.score.rebuildRepeatGroups(),{requiresRerender:!0,requiresMidiUpdate:!0}}}const t6=new e6;class i6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.isDead,t.isDead=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const r6=new i6;class n6 extends Pr{do(e){const t=e.data.value!==e.data.beat.duration;return e.data.previousValue=e.data.beat.duration,e.data.beat.duration=e.data.value,{requiresRerender:t,requiresMidiUpdate:t}}}const s6=new n6;class a6 extends Pr{do(e){const t=e.data.value!==e.data.beat.dynamics;return e.data.previousValue=e.data.beat.dynamics,e.data.beat.dynamics=e.data.value,{requiresRerender:t,requiresMidiUpdate:t}}}const o6=new a6;class l6 extends Pr{do(e){const{beat:t,value:i}=e.data;return e.data.previousValue=t.fermata??void 0,t.fermata=i,this.removeFermataFromMasterbar(t),t.voice.finish(null,null),{requiresRerender:!0,requiresMidiUpdate:!0}}removeFermataFromMasterbar(e){const t=e.voice.bar.masterBar.fermata;t&&t.has(e.playbackStart)&&(t==null||t.delete(e.playbackStart))}}const u6=new l6;let c6=class extends Pr{do(e){const{note:t,value:i}=e.data,n=t.fret!==i;return e.data.previousValue=e.data.note.fret,t.fret=i,{requiresRerender:n,requiresMidiUpdate:n}}};const h6=new c6;class d6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.isGhost,t.isGhost=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const f6=new d6;class p6 extends Pr{do(e){const{note:t,value:i}=e.data,n=alphaTab.model.Note.findHammerPullDestination(t);return n?(e.data.previousValue=t.isHammerPullOrigin,i?(t.isHammerPullOrigin=!0,t.hammerPullDestination=n,n.hammerPullOrigin=t):t.hammerPullDestination&&(t.isHammerPullOrigin=!1,t.hammerPullDestination.hammerPullOrigin=null,t.hammerPullDestination=null),{requiresRerender:!0,requiresMidiUpdate:!0}):{requiresMidiUpdate:!1,requiresRerender:!1}}}const g6=new p6;class m6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.harmonicValue,t.harmonicType=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const y6=new m6;class b6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.isLetRing,t.isLetRing=i,t.beat.finish(null,{}),{requiresRerender:!0,requiresMidiUpdate:!0}}}const v6=new b6;class w6 extends Pr{do(e){const{masterBar:t}=e.data.beat.voice.bar;return e.data.previousValue=t.isRepeatStart,t.isRepeatStart=e.data.value,t.score.rebuildRepeatGroups(),{requiresRerender:!0,requiresMidiUpdate:!0}}}const x6=new w6;class S6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.isPalmMute,t.isPalmMute=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const k6=new S6;class _6 extends Pr{do(e){const{beat:t,value:i}=e.data;return e.data.previousValue=t.pickStroke,t.pickStroke=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const B6=new _6;class T6 extends Bm{do(e){const{score:t,scoreInfo:i}=e.data;return t.title=i.title,t.subTitle=i.subTitle,t.album=i.album,t.artist=i.artist,t.tab=i.tab,t.words=i.words,t.notices=i.notices,{requiresRerender:!0,requiresMidiUpdate:!1}}}const C6=new T6;class N6 extends Pr{do(e){const{note:t}=e.data,i=alphaTab.model.Note.nextNoteOnSameLine(t);return i?(e.data.previousValue=t.slideTarget!==null,e.data.value?(t.slideTarget=i,t.slideOutType=alphaTab.model.SlideOutType.Shift,i.slideOrigin=t):(t.slideTarget=null,t.slideOutType=alphaTab.model.SlideOutType.None,i.slideOrigin=null),{requiresRerender:!0,requiresMidiUpdate:!0}):{requiresMidiUpdate:!1,requiresRerender:!1}}}const P6=new N6;class E6 extends Pr{do(e){const{note:t}=e.data;return e.data.previousValue=t.slideInType,t.slideInType=e.data.value,{requiresRerender:!0,requiresMidiUpdate:!0}}}const R6=new E6;class L6 extends Pr{do(e){const{note:t}=e.data;return e.data.previousValue=t.slideOutType,t.slideOutType=e.data.value,{requiresRerender:!0,requiresMidiUpdate:!0}}}const I6=new L6;class F6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.isStaccato,t.isStaccato=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const O6=new F6;class M6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.isLeftHandTapped,t.isLeftHandTapped=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const D6=new M6;class A6 extends Bm{do(e){const{tempo:t,score:i}=e.data;return i.tempo=t,i.masterBars.forEach(n=>{n.tempoAutomation&&(n.tempoAutomation.value=t)}),{requiresRerender:!0,requiresMidiUpdate:!0}}}const V6=new A6;class z6 extends Pr{do(e){const t=e.data.beat.text!==e.data.value;return e.data.previousValue=e.data.beat.text??"",e.data.beat.text=e.data.value===""?null:e.data.value,{requiresRerender:t,requiresMidiUpdate:!1}}}const W6=new z6;class H6 extends Pr{do(e){const{note:t,value:i}=e.data,n=alphaTab.model.Note.nextNoteOnSameLine(t);return n?(e.data.previousValue=t.isTieOrigin,i?(t.tieDestination=n,n.tieOrigin=t,n.isTieDestination=!0):t.tieDestination&&(t.tieDestination.tieOrigin=null,t.tieDestination.isTieDestination=!1,t.tieDestination=null),{requiresRerender:!0,requiresMidiUpdate:!0}):{requiresMidiUpdate:!1,requiresRerender:!1}}}const G6=new H6;class U6 extends Pr{do(e){const{note:t,value:i}=e.data;return e.data.previousValue=t.vibrato,t.vibrato=i,{requiresRerender:!0,requiresMidiUpdate:!0}}}const $6=new U6,j6={"add-bar":I5,"add-beat":O5,"add-note":D5,"add-track":V5,"edit-track":W5,"remove-note":G5,"remove-track":$5,"set-accentuation":Y5,"set-bend":Q5,"set-chord":Z5,"set-close-repeat":t6,"set-dead-note":r6,"set-duration":s6,"set-dynamics":o6,"set-fermata":u6,"set-fret":h6,"set-ghost-note":f6,"set-hammer":g6,"set-harmonic":y6,"set-let-ring":v6,"set-open-repeat":x6,"set-palm-mute":k6,"set-pick-stroke":B6,"set-score-info":C6,"set-slide-in":R6,"set-slide-out":I6,"set-slide":P6,"set-staccato":O6,"set-tap":D6,"set-tempo":V6,"set-text":W6,"set-tie":G6,"set-vibrato":$6};class Y6{constructor(e=j6){ti(this,"actions",[]);ti(this,"actionsIndex",-1);this.mapping=e}doAction(e){console.log(e),this.actionsIndex!==this.actions.length-1&&(this.actions=this.actions.slice(this.actionsIndex+1),this.actionsIndex=this.actions.length-1);const t=this.mapping[e.type],i=t.do(e);return t.canUndo()&&(this.actions.push(e),this.actionsIndex++),i}redoAction(){const e=this.actionToRedo();if(!e)return{requiresRerender:!1,requiresMidiUpdate:!1};const i=this.mapping[e.type].do(e);return this.actionsIndex++,i}undoAction(){const e=this.actionToUndo();if(!e)return{requiresRerender:!1,requiresMidiUpdate:!1};const i=this.mapping[e.type].undo(e);return this.actionsIndex--,i}canUndo(){return this.actionToUndo()!==void 0}canRedo(){return this.actionToRedo()!==void 0}clearUndoAndRedoHistory(){this.actionsIndex=-1,this.actions=[]}actionToRedo(){return this.actions[this.actionsIndex+1]}actionToUndo(){return this.actions[this.actionsIndex]}}function Sh(){const{setHasDialog:r}=F.useContext(hT),[e,t]=F.useState(!1);return{openDialog:()=>{r(!0),t(!0)},closeDialog:()=>{r(!1),t(!1)},isDialogOpen:e}}function q6(r){const[e,t]=F.useState(r.currentText),i=c=>{t(c.target.value)},{t:n}=Tt();F.useEffect(()=>{t(r.currentText)},[r.currentText]);const s=()=>{t(r.currentText),r.onClose()},o=()=>{r.onSave(e??"")};return w.jsxs(Oh,{open:r.isOpen,onClose:r.onClose,children:[w.jsx(qf,{children:n("Set text")}),w.jsx(Mh,{children:w.jsx(Ea,{id:"field-beat-text",autoFocus:!0,value:e??"",onChange:c=>i(c)})}),w.jsxs(_m,{children:[w.jsx(au,{title:n("Cancel"),onClick:s,children:n("Cancel")}),w.jsx(au,{title:n("Save"),onClick:o,children:n("Save")})]})]})}function X6(r){const e=()=>{var h,p,g,b;return{title:((h=r.score)==null?void 0:h.title)??"",subTitle:((p=r.score)==null?void 0:p.subTitle)??"",artist:((g=r.score)==null?void 0:g.artist)??"",album:((b=r.score)==null?void 0:b.album)??"",notices:r.score.notices??"",words:r.score.words??"",tab:r.score.tab??""}},[t,i]=F.useState(e()),{t:n}=Tt(),s=h=>{const p=h.target.name,g=h.target.value,b={[p]:g};i({...t,...b})},o=()=>{r.onSave(t)},c=()=>{i(e()),r.onClose()};return w.jsxs(Oh,{className:"score-info",open:r.isOpen,onClose:r.onClose,children:[w.jsx(qf,{children:n("Score Information")}),w.jsxs(Mh,{className:"score-info-content",children:[w.jsx(Ea,{id:"field-title",fullWidth:!0,margin:"normal",variant:"outlined",name:"title",label:n("Title"),onChange:s,value:t.title}),w.jsx(Ea,{id:"field-subtitle",fullWidth:!0,margin:"normal",variant:"outlined",name:"subTitle",label:n("Subtitle"),onChange:s,value:t.subTitle}),w.jsx(Ea,{id:"field-artist",fullWidth:!0,margin:"normal",variant:"outlined",name:"artist",label:n("Artist"),onChange:s,value:t.artist}),w.jsx(Ea,{id:"field-album",fullWidth:!0,margin:"normal",variant:"outlined",name:"album",label:n("Album"),onChange:s,value:t.album}),w.jsx(Ea,{id:"field-tab-creator",fullWidth:!0,margin:"normal",variant:"outlined",name:"tab",label:n("Tab Creator"),onChange:s,value:t.tab}),w.jsx(Ea,{id:"field-comments",fullWidth:!0,margin:"normal",variant:"outlined",name:"notices",label:n("Comments"),onChange:s,value:t.notices}),w.jsx(Ea,{id:"field-composer",fullWidth:!0,margin:"normal",variant:"outlined",name:"words",label:n("Composer"),onChange:s,value:t.words})]}),w.jsxs(_m,{children:[w.jsx(au,{title:n("Save"),onClick:o,children:n("Save")}),w.jsx(au,{title:n("Cancel"),onClick:c,children:n("Cancel")})]})]})}function K6(r){const[e,t]=F.useState(r.currentTempo),i=c=>{t(Number.parseInt(c.target.value,10))},{t:n}=Tt(),s=()=>{r.onClose()},o=()=>{r.onSet(e??"")};return w.jsxs(Oh,{open:r.isOpen,onClose:r.onClose,children:[w.jsx(qf,{children:n("Set tempo")}),w.jsx(Mh,{children:w.jsx(Ea,{InputProps:{inputProps:{max:320,min:30}},autoFocus:!0,type:"number",value:e??r.currentTempo??"",onChange:c=>i(c)})}),w.jsxs(_m,{children:[w.jsx(au,{title:n("Cancel"),onClick:s,children:n("Cancel")}),w.jsx(au,{title:n("Save"),onClick:o,children:n("Save")})]})]})}function Q6(){return{fontSize:"26px"}}function lt(r){const e=es();return r.disabled?"#a6a5a4":r.selected?"#1976d2":e.palette.mode==="dark"?"#ffffff":"#000000"}const fl="Roboto",J6="alphaTab";function ut(r){return{fontFamily:J6,cursor:r.disabled||!r.onClick?"auto":"pointer",flexShrink:0,userSelect:"none",...r.extraSvgStyles?r.extraSvgStyles:{}}}function Sc(r){const e=lt(r);return w.jsx(xt,{title:r.title??"",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:r.height??"25px",width:r.width??"50px",style:ut(r),children:w.jsx("text",{fill:e,style:{...Q6(),transform:"translate(4px, 16px)"},children:r.children})})})}function gT(r){return w.jsx(Sc,{width:"35px",title:"Piano Pianissimo",...r,children:""})}function mT(r){return w.jsx(Sc,{width:"27px",title:"Pianissimo",...r,children:""})}function yT(r){return w.jsx(Sc,{width:"15px",title:"Piano",...r,children:""})}function bT(r){return w.jsx(Sc,{width:"30px",title:"Mezzo Piano",...r,children:""})}function vT(r){return w.jsx(Sc,{width:"18px",title:"Forte",...r,children:""})}function wT(r){return w.jsx(Sc,{width:"25px",title:"Fortissimo",...r,children:""})}function xT(r){return w.jsx(Sc,{width:"30px",title:"Mezzo Forte",...r,children:""})}function ST(r){return w.jsx(Sc,{width:"30px",title:"Forte Fortissimo",...r,children:""})}function Z6({actionDispatcher:r,editorScoreState:e}){return w.jsxs(w.Fragment,{children:[w.jsx(gT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.PPP,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.PPP)}),w.jsx(mT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.PP,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.PP)}),w.jsx(yT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.P,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.P)}),w.jsx(bT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.MP,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.MP)}),w.jsx(xT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.MF,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.MF)}),w.jsx(vT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.F,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.F)}),w.jsx(wT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.FF,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.FF)}),w.jsx(ST,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDynamics===alphaTab.model.DynamicValue.FFF,onClick:()=>r.setDynamics(alphaTab.model.DynamicValue.FFF)})]})}const pl="24px";function kT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Whole"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"12px",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})})})}function _T(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Half"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"10px",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})})})}function BT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Quarter"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"10px",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})})})}function TT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Eighth"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"16px",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})})})}function CT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Sixteenth"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"16px",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})})})}function NT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Thirty-Second"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"16px",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})})})}function PT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Sixty-Fourth"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"16px",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})})})}function ET(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Tied Note"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"25px",style:ut(r),children:[w.jsx("path",{d:"M7,6 L7,27",stroke:e,strokeWidth:"0.96",style:{fill:"none"}}),w.jsx("path",{d:"M 19 29 C 18 33 10 33 9 29",stroke:e,strokeWidth:"1.5",style:{fill:"none"}}),w.jsx("text",{fill:e,style:{transform:"translate(0px, 29px)",fontSize:pl},children:""})]})})}function ca(){return w.jsx(dA,{variant:"middle",orientation:"vertical",flexItem:!0})}function eV({actionDispatcher:r,editorScoreState:e}){return w.jsxs(w.Fragment,{children:[w.jsx(kT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDuration===alphaTab.model.Duration.Whole,onClick:()=>r.setDuration(alphaTab.model.Duration.Whole)}),w.jsx(_T,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDuration===alphaTab.model.Duration.Half,onClick:()=>r.setDuration(alphaTab.model.Duration.Half)}),w.jsx(BT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDuration===alphaTab.model.Duration.Quarter,onClick:()=>r.setDuration(alphaTab.model.Duration.Quarter)}),w.jsx(TT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDuration===alphaTab.model.Duration.Eighth,onClick:()=>r.setDuration(alphaTab.model.Duration.Eighth)}),w.jsx(CT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDuration===alphaTab.model.Duration.Sixteenth,onClick:()=>r.setDuration(alphaTab.model.Duration.Sixteenth)}),w.jsx(NT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDuration===alphaTab.model.Duration.ThirtySecond,onClick:()=>r.setDuration(alphaTab.model.Duration.ThirtySecond)}),w.jsx(PT,{disabled:!e.hasSelectedNote,selected:e.selectionBeatDuration===alphaTab.model.Duration.SixtyFourth,onClick:()=>r.setDuration(alphaTab.model.Duration.SixtyFourth)}),w.jsx(ca,{}),w.jsx(ET,{disabled:!e.hasSelectedNote,onClick:()=>r.setTieNote(!e.selectionIsTie),selected:e.selectionIsTie})]})}function RT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Set text"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"50px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(4px, 16px)",fontFamily:fl,fontSize:"20px"},children:t("Text")})})})}function LT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Upstroke"),children:w.jsx("svg",{height:"20px",width:"18px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(4px, 19px)",fontSize:"35px"},children:""})})})}function IT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Downstroke"),children:w.jsx("svg",{height:"20px",width:"18px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(4px, 16px)",fontSize:"35px"},children:""})})})}function FT(r){const e=lt(r);return w.jsx(xt,{title:"Fermata",children:w.jsx("svg",{id:r.id,height:"22px",width:"14px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 14px)",fontSize:"20px"},children:""})})})}function tV(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Chord"),children:w.jsx("svg",{id:r.id,height:"22px",width:"18px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 22px)",fontSize:"20px"},children:""})})})}function Jx(r){const e=lt(r);return w.jsxs("svg",{id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{fill:e,d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})]})}function Kf(){const[r,e]=F.useState(null);function t(i){e((i==null?void 0:i.currentTarget)??null)}return[r,t]}const Tm=He(Hx)(({theme:r})=>({backgroundColor:r.palette.mode==="dark"?r.palette.grey[800]:"#f7f7f7",height:"45px",display:"flex",alignItems:"center",gap:"10px",paddingLeft:"10px",paddingRight:"10px",boxShadow:`0 4px 2px -2px ${r.palette.mode==="dark"?"#312f2f":"#e6e6e6"}`}));function iV({chord:r,onClick:e,isSelected:t}){const i=lt({disabled:!1,selected:t});return w.jsx("div",{onClick:e,style:{cursor:"pointer",color:i},children:r.name},r.name)}function rV(r){const[e,t]=F.useState(!1),[i,n]=Kf(),s=h=>{r.disabled||(n(h),t(!e))},o=()=>{r.disabled||r.setChord()},c=h=>{var p;((p=r.currentChord)==null?void 0:p.name)===h.name?r.useChord(null):r.useChord(h)};return w.jsxs("div",{style:{display:"flex"},children:[w.jsx(tV,{id:"chord",disabled:r.disabled,selected:r.currentChord!==null,onClick:o}),r.chords.length>0&&w.jsx(Jx,{disabled:r.disabled,selected:r.currentChord!==null,onClick:s}),w.jsx(Tm,{anchorEl:i,open:e,disablePortal:!0,children:r.chords.map(h=>{var p;return w.jsx(iV,{isSelected:h.name===((p=r.currentChord)==null?void 0:p.name),chord:h,onClick:()=>c(h)},h.name)})})]})}function OT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Close Repeat"),children:w.jsx("svg",{height:"22px",width:"12px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 22px)",fontSize:"22px"},children:""})})})}function MT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Open Repeat"),children:w.jsx("svg",{height:"22px",width:"12px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 22px)",fontSize:"22px"},children:""})})})}function nV(r){const[e,t]=Kf(),{t:i}=Tt(),n=r.editorScoreState.selectionNumberOfRepetitions>0,s=!r.editorScoreState.hasSelectedBeat;return w.jsxs(w.Fragment,{children:[w.jsx(MT,{selected:r.editorScoreState.selectionIsOpenRepeat,disabled:s,onClick:()=>r.actionDispatcher.setOpenRepeat(!r.editorScoreState.selectionIsOpenRepeat)}),w.jsx(OT,{selected:n,disabled:s,onClick:o=>{s||(t(o),n?r.actionDispatcher.setCloseRepeat(0):r.actionDispatcher.setCloseRepeat(1))}}),n&&w.jsx(Jx,{disabled:!1,selected:!1,onClick:o=>{s||t(e?null:o)}}),e&&w.jsx(Tm,{anchorEl:e,open:!0,disablePortal:!0,children:w.jsx(Tb,{type:"number",title:i("Number of repetitions"),value:r.editorScoreState.selectionNumberOfRepetitions,onChange:o=>{r.actionDispatcher.setCloseRepeat(Number.parseInt(o.target.value,10))},style:{width:"40px"}})})]})}function sV(r){const e=n=>{r.editorScoreState.selectionBeatPickStroke===n?r.actionDispatcher.setPickStroke(alphaTab.model.PickStroke.None):r.actionDispatcher.setPickStroke(n)},t=()=>{r.editorScoreState.selectionFermata===null?r.actionDispatcher.setFermata(new alphaTab.model.Fermata):r.actionDispatcher.setFermata(null)},i=!r.editorScoreState.hasSelectedBeat;return w.jsxs(w.Fragment,{children:[w.jsx(RT,{disabled:i,selected:r.editorScoreState.selectionText!==null,onClick:()=>{i||r.setText()}}),w.jsx(ca,{}),w.jsx(FT,{disabled:i,selected:r.editorScoreState.selectionFermata!==null,onClick:t}),w.jsx(ca,{}),w.jsx(LT,{disabled:i,selected:r.editorScoreState.selectionBeatPickStroke===alphaTab.model.PickStroke.Up,onClick:()=>e(alphaTab.model.PickStroke.Up)}),w.jsx(IT,{disabled:i,selected:r.editorScoreState.selectionBeatPickStroke===alphaTab.model.PickStroke.Down,onClick:()=>e(alphaTab.model.PickStroke.Down)}),w.jsx(ca,{}),w.jsx(rV,{disabled:i,currentChord:r.editorScoreState.selectionChord,chords:r.chords,setChord:r.setChord,useChord:r.useChord}),w.jsx(ca,{}),w.jsx(nV,{actionDispatcher:r.actionDispatcher,editorScoreState:r.editorScoreState})]})}function DT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Palm Mute"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"34px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{fontSize:"16px",fontFamily:fl,transform:"translate(4px, 16px)"},children:t("P.M")})})})}function AT(r){const e=lt(r);return w.jsx(xt,{title:"Ghost Note",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"28px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(4px, 16px)"},children:"( )"})})})}function VT(r){const e=lt(r);return w.jsx(xt,{title:"Dead Note",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"23px",width:"20px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(4px, 12px)",fontSize:"40px"},children:""})})})}function zT(r){const e=lt(r);return w.jsx(xt,{title:"Tap",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"23px",width:"20px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 19px)",fontFamily:"Roboto",fontSize:"18px"},children:"T"})})})}function aV(r){const e=lt(r);return w.jsx(xt,{title:"Vibrato",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"23px",width:"20px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 25px)",fontSize:"48px"},children:""})})})}function WT(r){const e=lt(r);return w.jsx(xt,{title:"Hammer On / Pull Off",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"28px",onClick:r.onClick,style:ut(r),children:[w.jsx("text",{fill:e,style:{transform:"translate(4px, 8px)",fontFamily:fl,fontSize:"10px"},children:"HO"}),w.jsx("path",{d:"M 0 20 C 6 12 16 12 22 20 M 20 20 C 14 14 8 14 2 20 Z",fill:e,style:{stroke:"none"}})]})})}function HT(r){const e=lt(r);return w.jsx(xt,{title:"Staccato",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:"35px",width:"10px",style:ut(r),children:[w.jsx("text",{fill:e,style:{transform:"translate(0px, 24px)",fontSize:pl},children:""}),w.jsx("text",{fill:e,style:{transform:"translate(4px, 30px)",fontSize:pl},children:""})]})})}function GT(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Let Ring"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"34px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{fontSize:"16px",fontFamily:fl,transform:"translate(4px, 16px)"},children:t("L.R")})})})}function kc(r){const e=lt(r);return w.jsx(xt,{ref:r.ref,title:r.hideTooltip?"":r.title??"",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,height:r.height??"18px",width:r.width??"32px",style:ut(r),children:w.jsx("text",{fill:e,style:{fontSize:"16px",fontFamily:fl,transform:"translate(4px, 16px)"},children:r.children})})})}function UT(r){const{t:e}=Tt();return w.jsx(kc,{...r,title:e("Natural Harmonic"),children:"N.H"})}function $T(r){const{t:e}=Tt();return w.jsx(kc,{...r,title:e("Artificial Harmonic"),children:"A.H"})}function jT(r){const{t:e}=Tt();return w.jsx(kc,{...r,title:e("Pinch Harmonic"),children:"P.H"})}function YT(r){const{t:e}=Tt();return w.jsx(kc,{...r,title:e("Tap Harmonic"),children:"T.H"})}function qT(r){const{t:e}=Tt();return w.jsx(kc,{...r,title:e("Semi Harmonic"),children:"S.H"})}function XT(r){const{t:e}=Tt();return w.jsx(kc,{...r,title:e("Feedback Harmonic"),children:"F.H"})}function oV(r){switch(r){case 0:return"H.";case 1:return"N.H";case 2:return"A.H";case 3:return"P.H";case 4:return"T.H";case 5:return"S.H";case 6:return"F.H";default:return""}}function lV(r){const[e,t]=Kf(),{t:i}=Tt(),n=p=>{t(p),r.updateOpenPopper("harmonic")},s=!r.editorScoreState.hasSelectedNote,o=[{name:"offset",options:{offset:[0,14]}}],c=r.openPopper==="harmonic",h=p=>{r.currentHarmonicType===p?r.actionDispatcher.setHarmonicType(alphaTab.model.HarmonicType.None):r.actionDispatcher.setHarmonicType(p)};return w.jsxs("div",{children:[w.jsx(kc,{title:i("Harmonics"),hideTooltip:c,selected:r.currentHarmonicType!==0,disabled:s,onClick:n,children:oV(r.currentHarmonicType)}),c&&e&&w.jsxs(Tm,{modifiers:o,open:c,anchorEl:e,disablePortal:!0,children:[w.jsx(UT,{disabled:s,selected:r.currentHarmonicType===alphaTab.model.HarmonicType.Natural,onClick:()=>h(alphaTab.model.HarmonicType.Natural)}),w.jsx($T,{disabled:s,selected:r.currentHarmonicType===alphaTab.model.HarmonicType.Artificial,onClick:()=>h(alphaTab.model.HarmonicType.Artificial)}),w.jsx(jT,{disabled:s,selected:r.currentHarmonicType===alphaTab.model.HarmonicType.Pinch,onClick:()=>h(alphaTab.model.HarmonicType.Pinch)}),w.jsx(YT,{disabled:s,selected:r.currentHarmonicType===alphaTab.model.HarmonicType.Tap,onClick:()=>h(alphaTab.model.HarmonicType.Tap)}),w.jsx(qT,{disabled:s,selected:r.currentHarmonicType===alphaTab.model.HarmonicType.Semi,onClick:()=>h(alphaTab.model.HarmonicType.Semi)}),w.jsx(XT,{disabled:s,selected:r.currentHarmonicType===alphaTab.model.HarmonicType.Feedback,onClick:()=>h(alphaTab.model.HarmonicType.Feedback)})]})]})}function KT(r){const e=lt(r);return w.jsx(xt,{title:"Slide",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"28px",onClick:r.onClick,style:ut(r),children:[w.jsx("text",{fill:e,style:{fontSize:"12px",fontFamily:fl,transform:"translate(2px, 8px)"},children:"1"}),w.jsx("text",{fill:e,style:{fontSize:"12px",fontFamily:fl,transform:"translate(14px, 16px)"},children:"3"}),w.jsx("path",{d:"M 2 16 L 18 1 Z Z",fill:e,strokeWidth:"1",stroke:e})]})})}function QT(r){const e=lt(r);return w.jsx(xt,{title:"Slide in",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"24px",onClick:r.onClick,style:ut(r),children:w.jsx("path",{d:"M 0 12 L 20 4 Z Z",fill:e,strokeWidth:"1",stroke:e})})})}function JT(r){const e=lt(r);return w.jsx(xt,{title:"Slide out",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"24px",onClick:r.onClick,style:ut(r),children:w.jsx("path",{d:"M 20 12 L 0 4 Z Z",fill:e,strokeWidth:"1",stroke:e})})})}function uV(r){const e=()=>{r.editorScoreState.selectionSlideOut===null||r.editorScoreState.selectionSlideOut===alphaTab.model.SlideOutType.None?r.actionDispatcher.setSlideOut(alphaTab.model.SlideOutType.OutUp):r.actionDispatcher.setSlideOut(alphaTab.model.SlideOutType.None)},t=()=>{r.editorScoreState.selectionSlideIn===null||r.editorScoreState.selectionSlideIn===alphaTab.model.SlideInType.None?r.actionDispatcher.setSlideIn(alphaTab.model.SlideInType.IntoFromBelow):r.actionDispatcher.setSlideIn(alphaTab.model.SlideInType.None)},i=()=>{r.actionDispatcher.setSlide(!r.editorScoreState.selectionNoteSlide)},n=r.editorScoreState.selectionSlideIn!==null&&r.editorScoreState.selectionSlideIn!==alphaTab.model.SlideInType.None,s=r.editorScoreState.selectionSlideOut!==null&&r.editorScoreState.selectionSlideOut!==alphaTab.model.SlideOutType.None,o=r.editorScoreState.selectionNoteSlide??!1;return w.jsxs(w.Fragment,{children:[w.jsx(QT,{disabled:!r.editorScoreState.hasSelectedNote,onClick:t,selected:n}),w.jsx(KT,{disabled:!r.editorScoreState.hasSelectedNote,onClick:i,selected:o}),w.jsx(JT,{disabled:!r.editorScoreState.hasSelectedNote,onClick:e,selected:s&&!o})]})}function ZT(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"16px",onClick:r.onClick,style:ut(r),children:[w.jsx("path",{d:"M 8 26 C 8 24 8 24 8 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 8 4 L 6 9 L 10 9 z",fill:e,style:{stroke:"none"}})]})})}function uu(){return{fontSize:"10px",fontFamily:fl}}function cV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Full Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:{...ut(r)},children:[w.jsx("text",{style:{...uu(),transform:"translate(0px, 10px)"},fill:e,children:"Full"}),w.jsx("path",{d:"M 23 24 C 23 24 23 24 23 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 23 4 L 20 9 L 26 9 z",fill:e,style:{stroke:"none"}})]})})}function hV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Half Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:{...ut(r)},children:[w.jsx("text",{style:{...uu(),transform:"translate(0px, 10px)"},fill:e,children:"1/2"}),w.jsx("path",{d:"M 23 24 C 23 24 23 24 23 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 23 4 L 20 9 L 26 9 z",fill:e,style:{stroke:"none"}})]})})}function dV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Quarter Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:ut(r),children:[w.jsx("text",{style:{...uu(),transform:"translate(0px, 10px)"},fill:e,children:"1/4"}),w.jsx("path",{d:"M 23 24 C 23 24 23 24 23 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 23 4 L 20 9 L 26 9 z",fill:e,style:{stroke:"none"}})]})})}function Zx(r){const[e,t]=Kf(),i=o=>{r.disabled||(t(o),r.setPopperOpen())},n={hideTooltip:r.isPopperOpen,disabled:r.disabled,onClick:i},s=[{name:"offset",options:{offset:[0,8]}}];return w.jsxs(w.Fragment,{children:[r.currentBendType==="quarter"&&w.jsx(r.quarter,{...n,selected:!0}),r.currentBendType==="half"&&w.jsx(r.half,{...n,selected:!0}),r.currentBendType==="full"&&w.jsx(r.full,{...n,selected:!0}),r.currentBendType===null&&w.jsx(r.default,{...n,selected:!1}),r.isPopperOpen&&e&&w.jsxs(Tm,{modifiers:s,open:!0,anchorEl:e,disablePortal:!0,children:[w.jsx(r.quarter,{selected:r.currentBendType==="quarter",disabled:!1,onClick:()=>{r.setCurrentBendType("quarter")}}),w.jsx(r.half,{selected:r.currentBendType==="half",disabled:!1,onClick:()=>{r.setCurrentBendType("half")}}),w.jsx(r.full,{selected:r.currentBendType==="full",disabled:!1,onClick:()=>{r.setCurrentBendType("full")}})]})]})}function fV(r){return w.jsx(Zx,{currentBendType:r.bend,setPopperOpen:r.setPopperOpen,default:ZT,quarter:dV,half:hV,full:cV,disabled:r.disabled,isPopperOpen:r.isPopperOpen,setCurrentBendType:r.setBend})}function pV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Full Pre Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:{...ut(r)},children:[w.jsx("text",{style:{...uu(),transform:"translate(0px, 10px)"},fill:e,children:"Full"}),w.jsx("path",{d:"M 15 24 c 4 0 8 0 8 -19",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 23 4 L 20 9 L 26 9 z",fill:e,style:{stroke:"none"}})]})})}function gV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Full Pre Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:{...ut(r)},children:[w.jsx("text",{style:{...uu(),transform:"translate(0px, 10px)"},fill:e,children:"1/2"}),w.jsx("path",{d:"M 15 24 c 4 0 8 0 8 -19",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 23 4 L 20 9 L 26 9 z",fill:e,style:{stroke:"none"}})]})})}function eC(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Pre-Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"10px",onClick:r.onClick,style:ut(r),children:[w.jsx("path",{d:"M 0 24 C 4 24 8 24 8 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 8 4 L 6 9 L 10 9 z",fill:e,style:{stroke:"none"}})]})})}function mV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Quarter Pre Bend",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:ut(r),children:[w.jsx("text",{style:{...uu(),transform:"translate(0px, 10px)"},fill:e,children:"1/4"}),w.jsx("path",{d:"M 15 24 c 4 0 8 0 8 -19",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 23 4 L 20 9 L 26 9 z",fill:e,style:{stroke:"none"}})]})})}function yV(r){return w.jsx(Zx,{currentBendType:r.preBend,setPopperOpen:r.setPopperOpen,default:eC,quarter:mV,half:gV,full:pV,disabled:r.disabled,isPopperOpen:r.isPopperOpen,setCurrentBendType:r.setPreBend})}function tC(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Release",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"10px",onClick:r.onClick,style:ut(r),children:[w.jsx("path",{d:"M 11 24 C 7 24 3 24 3 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 3 4 L 1 9 L 5 9 z",fill:e,style:{stroke:"none"}})]})})}function bV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Half Release",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:ut(r),children:[w.jsx("text",{style:{...uu(),transform:"translate(10px, 10px)"},fill:e,children:"1/2"}),w.jsx("path",{d:"M 11 24 C 7 24 3 24 3 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 3 4 L 1 9 L 5 9 z",fill:e,style:{stroke:"none"}})]})})}function vV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Release",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:ut(r),children:[w.jsx("text",{style:{...uu(),transform:"translate(10px, 10px)"},fill:e,children:"Full"}),w.jsx("path",{d:"M 11 24 C 7 24 3 24 3 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 3 4 L 1 9 L 5 9 z",fill:e,style:{stroke:"none"}})]})})}function wV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Quarter Release",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"32px",onClick:r.onClick,style:ut(r),children:[w.jsx("text",{style:{...uu(),transform:"translate(10px, 10px)"},fill:e,children:"1/4"}),w.jsx("path",{d:"M 11 24 C 7 24 3 24 3 5",stroke:e,style:{fill:"none"}}),w.jsx("path",{d:"M 3 4 L 1 9 L 5 9 z",fill:e,style:{stroke:"none"}})]})})}function xV(r){return w.jsx(Zx,{currentBendType:r.release,setPopperOpen:r.setPopperOpen,default:tC,quarter:wV,half:bV,full:vV,disabled:r.disabled,isPopperOpen:r.isPopperOpen,setCurrentBendType:r.setRelease})}function SV(r){var t,i,n;const e=(s,o)=>{r.editorScoreState.selectiondBend!==null&&(r.editorScoreState.selectiondBend[s]===o?r.actionDispatcher.setBend({...r.editorScoreState.selectiondBend,[s]:null}):r.actionDispatcher.setBend({...r.editorScoreState.selectiondBend,[s]:o}))};return w.jsxs(w.Fragment,{children:[w.jsx(yV,{disabled:!r.editorScoreState.hasSelectedNote,preBend:((t=r.editorScoreState.selectiondBend)==null?void 0:t.preBend)??null,setPreBend:s=>{e("preBend",s)},isPopperOpen:r.openPopper==="pre-bend",setPopperOpen:()=>r.updateOpenPopper("pre-bend")}),w.jsx(fV,{disabled:!r.editorScoreState.hasSelectedNote,bend:((i=r.editorScoreState.selectiondBend)==null?void 0:i.bend)??null,setBend:s=>{e("bend",s)},isPopperOpen:r.openPopper==="bend",setPopperOpen:()=>r.updateOpenPopper("bend")}),w.jsx(xV,{disabled:!r.editorScoreState.hasSelectedNote,release:((n=r.editorScoreState.selectiondBend)==null?void 0:n.release)??null,setRelease:s=>{e("release",s)},isPopperOpen:r.openPopper==="release",setPopperOpen:()=>r.updateOpenPopper("release")})]})}function iC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Accentuated Note"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"20px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(4px, 16px)",fontSize:"40px"},children:""})})})}function rC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Heavy Accentuated Note"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",width:"20px",onClick:r.onClick,style:ut(r),children:w.jsx("text",{fill:e,style:{transform:"translate(4px, 16px)",fontSize:"40px"},children:""})})})}function kV(r){const e=t=>{r.editorScoreState.selectionNoteAccentuation===t?r.actionDispatcher.setAccentuationNote(alphaTab.model.AccentuationType.None):r.actionDispatcher.setAccentuationNote(t)};return w.jsxs(w.Fragment,{children:[w.jsx(iC,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionNoteAccentuation===alphaTab.model.AccentuationType.Normal,onClick:()=>e(alphaTab.model.AccentuationType.Normal)}),w.jsx(rC,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionNoteAccentuation===alphaTab.model.AccentuationType.Heavy,onClick:()=>e(alphaTab.model.AccentuationType.Heavy)})]})}function _V(r){const[e,t]=F.useState(null),i=n=>{t(s=>s===n?null:n)};return w.jsxs(w.Fragment,{children:[w.jsx(DT,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionIsPalmMute??!1,onClick:()=>r.actionDispatcher.setPalmMute(!r.editorScoreState.selectionIsPalmMute)}),w.jsx(GT,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionIsLetRing??!1,onClick:()=>r.actionDispatcher.setLetRing(!r.editorScoreState.selectionIsLetRing)}),w.jsx(AT,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionNoteIsGhost??!1,onClick:()=>r.actionDispatcher.setGhostNote(!r.editorScoreState.selectionNoteIsGhost)}),w.jsx(VT,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionNoteDead??!1,onClick:()=>r.actionDispatcher.setDeadNote(!r.editorScoreState.selectionNoteDead)}),w.jsx(zT,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionIsLeftHandTap??!1,onClick:()=>r.actionDispatcher.setTapNote(!r.editorScoreState.selectionIsLeftHandTap)}),w.jsx(aV,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionIsVibrato??!1,onClick:()=>r.actionDispatcher.setVibratoNote(r.editorScoreState.selectionIsVibrato?alphaTab.model.VibratoType.None:alphaTab.model.VibratoType.Slight)}),w.jsx(lV,{actionDispatcher:r.actionDispatcher,editorScoreState:r.editorScoreState,currentHarmonicType:r.editorScoreState.selectionNoteHarmonicType??0,openPopper:e,updateOpenPopper:i}),w.jsx(WT,{disabled:!r.editorScoreState.hasSelectedNote,onClick:()=>{r.actionDispatcher.setHammer(!r.editorScoreState.selectionNoteHammerOrPull)},selected:r.editorScoreState.selectionNoteHammerOrPull??!1}),w.jsx(ca,{}),w.jsx(kV,{actionDispatcher:r.actionDispatcher,editorScoreState:r.editorScoreState}),w.jsx(ca,{}),w.jsx(SV,{actionDispatcher:r.actionDispatcher,editorScoreState:r.editorScoreState,openPopper:e,updateOpenPopper:i}),w.jsx(ca,{}),w.jsx(uV,{actionDispatcher:r.actionDispatcher,editorScoreState:r.editorScoreState}),w.jsx(ca,{}),w.jsx(HT,{disabled:!r.editorScoreState.hasSelectedNote,selected:r.editorScoreState.selectionIsStaccato,onClick:()=>r.actionDispatcher.setStaccato(!r.editorScoreState.selectionIsStaccato)})]})}function nC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Open File"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,style:ut(r),fill:e,children:[w.jsx("g",{children:w.jsx("rect",{fill:"none",height:"24",width:"24"})}),w.jsx("g",{children:w.jsx("path",{d:"M14,2H6C4.9,2,4,2.9,4,4v16c0,1.1,0.89,2,1.99,2H15v-8h5V8L14,2z M13,9V3.5L18.5,9H13z M17,21.66V16h5.66v2h-2.24 l2.95,2.95l-1.41,1.41L19,19.41l0,2.24H17z"})})]})})}function sC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Score Information"),children:w.jsxs("svg",{id:r.id,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})]})})}function aC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Undo"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"})]})})}function oC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Redo"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"})]})})}function lC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Print"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"})]})})}function uC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:r.hideTooltip?"":t("Download"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})]})})}function BV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Guitar Pro",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,height:"24px",viewBox:"0 0 24 24",width:"30px",onClick:r.onClick,style:ut(r),fill:e,children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 18px)",fontFamily:fl,fontSize:"15px"},children:".gp"})})})}function TV(r){const e=lt(r);return w.jsx(xt,{title:r.hideTooltip?"":"Midi",children:w.jsx("svg",{id:r.id,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"30px",onClick:r.onClick,style:ut(r),fill:e,children:w.jsx("text",{fill:e,style:{transform:"translate(0px, 18px)",fontFamily:fl,fontSize:"15px"},children:".mid"})})})}function cC(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("New File"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"})]})})}function hC(r){const e=lt(r);return w.jsx(xt,{title:"Tempo",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,width:"24px",viewBox:"0 0 48 48",onClick:r.onClick,style:ut(r),fill:e,children:w.jsx("path",{d:"M18 5V2H30V5ZM22.5 27.35H25.5V15.85H22.5ZM24 43.95Q20.3 43.95 17.025 42.525Q13.75 41.1 11.3 38.65Q8.85 36.2 7.425 32.925Q6 29.65 6 25.95Q6 22.25 7.425 18.975Q8.85 15.7 11.3 13.25Q13.75 10.8 17.025 9.375Q20.3 7.95 24 7.95Q27.35 7.95 30.3 9.075Q33.25 10.2 35.55 12.2L38.1 9.65L40.2 11.75L37.65 14.3Q39.45 16.3 40.725 19.15Q42 22 42 25.95Q42 29.65 40.575 32.925Q39.15 36.2 36.7 38.65Q34.25 41.1 30.975 42.525Q27.7 43.95 24 43.95ZM24 40.95Q30.25 40.95 34.625 36.575Q39 32.2 39 25.95Q39 19.7 34.625 15.325Q30.25 10.95 24 10.95Q17.75 10.95 13.375 15.325Q9 19.7 9 25.95Q9 32.2 13.375 36.575Q17.75 40.95 24 40.95ZM24 26Q24 26 24 26Q24 26 24 26Q24 26 24 26Q24 26 24 26Q24 26 24 26Q24 26 24 26Q24 26 24 26Q24 26 24 26Z"})})})}function CV(r){const[e,t]=Kf(),i=n=>{t(e!==null?null:n)};return w.jsxs(w.Fragment,{children:[w.jsx(cC,{id:"new",disabled:!1,selected:!1,onClick:r.newFile}),w.jsxs("label",{style:{height:"24px"},htmlFor:"open-input",children:[w.jsx("input",{id:"open-input",style:{display:"none"},type:"file",accept:".gp,.gp3,.gp4,.gp5,.gpx,.musicxml,.mxml,.xml,.capx",onChange:n=>{var o,c;const s=(c=(o=n.target)==null?void 0:o.files)==null?void 0:c[0];s&&r.openFile(s)}}),w.jsx(nC,{id:"open",disabled:!1,selected:!1,onClick:()=>{}})]}),w.jsx(ca,{}),w.jsx(sC,{id:"info",disabled:!1,selected:!1,onClick:r.openScoreInfo}),w.jsx(ca,{}),w.jsx(aC,{id:"undo",disabled:!r.canUndo,selected:!1,onClick:r.undo}),w.jsx(oC,{id:"redo",disabled:!r.canRedo,selected:!1,onClick:r.redo}),w.jsx(ca,{}),w.jsx(lC,{id:"print",disabled:!1,selected:!1,onClick:r.print}),w.jsx(uC,{hideTooltip:e!==null,selected:!1,disabled:!1,onClick:i}),w.jsxs(Tm,{open:e!==null,anchorEl:e,disablePortal:!0,children:[w.jsx(BV,{id:"guitar-pro",disabled:!1,selected:!1,onClick:r.exportGuitarPro}),w.jsx(TV,{id:"midi",disabled:!1,selected:!1,onClick:r.exportMidi})]}),w.jsx(ca,{}),w.jsx(hC,{id:"new",disabled:!1,selected:!1,onClick:r.openTempoDialog})]})}function NV(r){const e=F.useMemo(()=>fc("input")({width:`${r.firstFret.toString().length}ch`,height:"15px",position:"absolute",top:"20px",left:`calc(-16px - ${r.firstFret.toString().length}ch)`,textAlign:"center",MozAppearance:"textfield","&::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"&::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}}),[r.firstFret]),t=i=>{const n=Number.parseInt(i.target.value,10);Number.isNaN(n)||n<0?r.setFirstFret(0):r.setFirstFret(Number.parseInt(i.target.value,10))};return w.jsx(e,{type:"number",title:"First fret",onChange:t,value:r.firstFret})}var Wg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var PV=Wg.exports,Wk;function EV(){return Wk||(Wk=1,function(r,e){(function(){var t,i="4.17.21",n=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,g="__lodash_placeholder__",b=1,v=2,S=4,B=1,T=2,C=1,L=2,O=4,I=8,V=16,P=32,G=64,W=128,J=256,re=512,j=30,oe="...",ge=800,he=16,ve=1,Be=2,te=3,ue=1/0,ne=9007199254740991,Se=17976931348623157e292,z=NaN,Z=4294967295,pe=Z-1,We=Z>>>1,Ie=[["ary",W],["bind",C],["bindKey",L],["curry",I],["curryRight",V],["flip",re],["partial",P],["partialRight",G],["rearg",J]],Ue="[object Arguments]",Ee="[object Array]",Qe="[object AsyncFunction]",Oe="[object Boolean]",et="[object Date]",wt="[object DOMException]",pt="[object Error]",ei="[object Function]",gi="[object GeneratorFunction]",At="[object Map]",Bi="[object Number]",Ai="[object Null]",$t="[object Object]",Ki="[object Promise]",Xi="[object Proxy]",zt="[object RegExp]",Wt="[object Set]",Li="[object String]",Qi="[object Symbol]",Ve="[object Undefined]",qe="[object WeakMap]",bt="[object WeakSet]",Xe="[object ArrayBuffer]",se="[object DataView]",Re="[object Float32Array]",ke="[object Float64Array]",Je="[object Int8Array]",Ht="[object Int16Array]",Xt="[object Int32Array]",Ji="[object Uint8Array]",jn="[object Uint8ClampedArray]",bl="[object Uint16Array]",Hs="[object Uint32Array]",vl=/\b__p \+= '';/g,_c=/\b(__p \+=) '' \+/g,Ua=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gs=/&(?:amp|lt|gt|quot|#39);/g,jr=/[&<>"']/g,vo=RegExp(Gs.source),Vh=RegExp(jr.source),wo=/<%-([\s\S]+?)%>/g,pu=/<%([\s\S]+?)%>/g,gu=/<%=([\s\S]+?)%>/g,mu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bc=/^\w*$/,xo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wl=/[\\^$.*+?()[\]{}|]/g,xl=RegExp(wl.source),Tc=/^\s+/,Sl=/\s/,ai=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Er=/\{\n\/\* \[wrapped with (.+)\] \*/,yu=/,? & /,Fb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ob=/[()=,{}\[\]\/\s]/,Mb=/\\(\\)?/g,kl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ep=/\w*$/,Em=/^[-+]0x[0-9a-f]+$/i,Db=/^0b[01]+$/i,Rm=/^\[object .+?Constructor\]$/,Lm=/^0o[0-7]+$/i,Im=/^(?:0|[1-9]\d*)$/,Fm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zh=/($^)/,Ab=/['\n\r\u2028\u2029\\]/g,hr="\\ud800-\\udfff",Vb="\\u0300-\\u036f",tp="\\ufe20-\\ufe2f",Om="\\u20d0-\\u20ff",Cc=Vb+tp+Om,Mm="\\u2700-\\u27bf",ip="a-z\\xdf-\\xf6\\xf8-\\xff",Wh="\\xac\\xb1\\xd7\\xf7",fa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zb="\\u2000-\\u206f",Us=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dm="A-Z\\xc0-\\xd6\\xd8-\\xde",Am="\\ufe0e\\ufe0f",Vm=Wh+fa+zb+Us,bu="[']",Hh="["+hr+"]",vu="["+Vm+"]",_l="["+Cc+"]",zm="\\d+",Wb="["+Mm+"]",Gh="["+ip+"]",rp="[^"+hr+Vm+zm+Mm+ip+Dm+"]",Nc="\\ud83c[\\udffb-\\udfff]",Pc="(?:"+_l+"|"+Nc+")",Wm="[^"+hr+"]",Ec="(?:\\ud83c[\\udde6-\\uddff]){2}",Ii="[\\ud800-\\udbff][\\udc00-\\udfff]",Bl="["+Dm+"]",np="\\u200d",Uh="(?:"+Gh+"|"+rp+")",Hm="(?:"+Bl+"|"+rp+")",sp="(?:"+bu+"(?:d|ll|m|re|s|t|ve))?",ap="(?:"+bu+"(?:D|LL|M|RE|S|T|VE))?",$h=Pc+"?",Rc="["+Am+"]?",So="(?:"+np+"(?:"+[Wm,Ec,Ii].join("|")+")"+Rc+$h+")*",ko="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_o="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wu=Rc+$h+So,Lc="(?:"+[Wb,Ec,Ii].join("|")+")"+wu,Bo="(?:"+[Wm+_l+"?",_l,Ec,Ii,Hh].join("|")+")",Hb=RegExp(bu,"g"),Gm=RegExp(_l,"g"),Tl=RegExp(Nc+"(?="+Nc+")|"+Bo+wu,"g"),Gb=RegExp([Bl+"?"+Gh+"+"+sp+"(?="+[vu,Bl,"$"].join("|")+")",Hm+"+"+ap+"(?="+[vu,Bl+Uh,"$"].join("|")+")",Bl+"?"+Uh+"+"+sp,Bl+"+"+ap,_o,ko,zm,Lc].join("|"),"g"),Um=RegExp("["+np+hr+Cc+Am+"]"),jh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$m=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ub=-1,Vi={};Vi[Re]=Vi[ke]=Vi[Je]=Vi[Ht]=Vi[Xt]=Vi[Ji]=Vi[jn]=Vi[bl]=Vi[Hs]=!0,Vi[Ue]=Vi[Ee]=Vi[Xe]=Vi[Oe]=Vi[se]=Vi[et]=Vi[pt]=Vi[ei]=Vi[At]=Vi[Bi]=Vi[$t]=Vi[zt]=Vi[Wt]=Vi[Li]=Vi[qe]=!1;var Oi={};Oi[Ue]=Oi[Ee]=Oi[Xe]=Oi[se]=Oi[Oe]=Oi[et]=Oi[Re]=Oi[ke]=Oi[Je]=Oi[Ht]=Oi[Xt]=Oi[At]=Oi[Bi]=Oi[$t]=Oi[zt]=Oi[Wt]=Oi[Li]=Oi[Qi]=Oi[Ji]=Oi[jn]=Oi[bl]=Oi[Hs]=!0,Oi[pt]=Oi[ei]=Oi[qe]=!1;var xu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Yh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},op=parseFloat,qh=parseInt,Xh=typeof o0=="object"&&o0&&o0.Object===Object&&o0,jm=typeof self=="object"&&self&&self.Object===Object&&self,dr=Xh||jm||Function("return this")(),Ic=e&&!e.nodeType&&e,pa=Ic&&!0&&r&&!r.nodeType&&r,lp=pa&&pa.exports===Ic,Su=lp&&Xh.process,Dn=function(){try{var ee=pa&&pa.require&&pa.require("util").types;return ee||Su&&Su.binding&&Su.binding("util")}catch{}}(),up=Dn&&Dn.isArrayBuffer,Yn=Dn&&Dn.isDate,Cl=Dn&&Dn.isMap,Kh=Dn&&Dn.isRegExp,ku=Dn&&Dn.isSet,Ym=Dn&&Dn.isTypedArray;function An(ee,_e,ce){switch(ce.length){case 0:return ee.call(_e);case 1:return ee.call(_e,ce[0]);case 2:return ee.call(_e,ce[0],ce[1]);case 3:return ee.call(_e,ce[0],ce[1],ce[2])}return ee.apply(_e,ce)}function cp(ee,_e,ce,it){for(var Kt=-1,Pi=ee==null?0:ee.length;++Kt<Pi;){var Dr=ee[Kt];_e(it,Dr,ce(Dr),ee)}return it}function xn(ee,_e){for(var ce=-1,it=ee==null?0:ee.length;++ce<it&&_e(ee[ce],ce,ee)!==!1;);return ee}function Qh(ee,_e){for(var ce=ee==null?0:ee.length;ce--&&_e(ee[ce],ce,ee)!==!1;);return ee}function hp(ee,_e){for(var ce=-1,it=ee==null?0:ee.length;++ce<it;)if(!_e(ee[ce],ce,ee))return!1;return!0}function To(ee,_e){for(var ce=-1,it=ee==null?0:ee.length,Kt=0,Pi=[];++ce<it;){var Dr=ee[ce];_e(Dr,ce,ee)&&(Pi[Kt++]=Dr)}return Pi}function Jh(ee,_e){var ce=ee==null?0:ee.length;return!!ce&&_u(ee,_e,0)>-1}function dp(ee,_e,ce){for(var it=-1,Kt=ee==null?0:ee.length;++it<Kt;)if(ce(_e,ee[it]))return!0;return!1}function Zi(ee,_e){for(var ce=-1,it=ee==null?0:ee.length,Kt=Array(it);++ce<it;)Kt[ce]=_e(ee[ce],ce,ee);return Kt}function Co(ee,_e){for(var ce=-1,it=_e.length,Kt=ee.length;++ce<it;)ee[Kt+ce]=_e[ce];return ee}function fp(ee,_e,ce,it){var Kt=-1,Pi=ee==null?0:ee.length;for(it&&Pi&&(ce=ee[++Kt]);++Kt<Pi;)ce=_e(ce,ee[Kt],Kt,ee);return ce}function Yb(ee,_e,ce,it){var Kt=ee==null?0:ee.length;for(it&&Kt&&(ce=ee[--Kt]);Kt--;)ce=_e(ce,ee[Kt],Kt,ee);return ce}function pp(ee,_e){for(var ce=-1,it=ee==null?0:ee.length;++ce<it;)if(_e(ee[ce],ce,ee))return!0;return!1}var qb=mp("length");function qm(ee){return ee.split("")}function Xb(ee){return ee.match(Fb)||[]}function Xm(ee,_e,ce){var it;return ce(ee,function(Kt,Pi,Dr){if(_e(Kt,Pi,Dr))return it=Pi,!1}),it}function Zh(ee,_e,ce,it){for(var Kt=ee.length,Pi=ce+(it?1:-1);it?Pi--:++Pi<Kt;)if(_e(ee[Pi],Pi,ee))return Pi;return-1}function _u(ee,_e,ce){return _e===_e?id(ee,_e,ce):Zh(ee,Km,ce)}function gp(ee,_e,ce,it){for(var Kt=ce-1,Pi=ee.length;++Kt<Pi;)if(it(ee[Kt],_e))return Kt;return-1}function Km(ee){return ee!==ee}function Qm(ee,_e){var ce=ee==null?0:ee.length;return ce?yp(ee,_e)/ce:z}function mp(ee){return function(_e){return _e==null?t:_e[ee]}}function ed(ee){return function(_e){return ee==null?t:ee[_e]}}function Jm(ee,_e,ce,it,Kt){return Kt(ee,function(Pi,Dr,Hi){ce=it?(it=!1,Pi):_e(ce,Pi,Dr,Hi)}),ce}function Kb(ee,_e){var ce=ee.length;for(ee.sort(_e);ce--;)ee[ce]=ee[ce].value;return ee}function yp(ee,_e){for(var ce,it=-1,Kt=ee.length;++it<Kt;){var Pi=_e(ee[it]);Pi!==t&&(ce=ce===t?Pi:ce+Pi)}return ce}function bp(ee,_e){for(var ce=-1,it=Array(ee);++ce<ee;)it[ce]=_e(ce);return it}function Qb(ee,_e){return Zi(_e,function(ce){return[ce,ee[ce]]})}function Zm(ee){return ee&&ee.slice(0,rd(ee)+1).replace(Tc,"")}function ts(ee){return function(_e){return ee(_e)}}function Fc(ee,_e){return Zi(_e,function(ce){return ee[ce]})}function $a(ee,_e){return ee.has(_e)}function ey(ee,_e){for(var ce=-1,it=ee.length;++ce<it&&_u(_e,ee[ce],0)>-1;);return ce}function vp(ee,_e){for(var ce=ee.length;ce--&&_u(_e,ee[ce],0)>-1;);return ce}function ty(ee,_e){for(var ce=ee.length,it=0;ce--;)ee[ce]===_e&&++it;return it}var iy=ed(xu),ry=ed(Yh);function ny(ee){return"\\"+jb[ee]}function Bu(ee,_e){return ee==null?t:ee[_e]}function Tu(ee){return Um.test(ee)}function Jb(ee){return jh.test(ee)}function Zb(ee){for(var _e,ce=[];!(_e=ee.next()).done;)ce.push(_e.value);return ce}function td(ee){var _e=-1,ce=Array(ee.size);return ee.forEach(function(it,Kt){ce[++_e]=[Kt,it]}),ce}function wp(ee,_e){return function(ce){return ee(_e(ce))}}function ws(ee,_e){for(var ce=-1,it=ee.length,Kt=0,Pi=[];++ce<it;){var Dr=ee[ce];(Dr===_e||Dr===g)&&(ee[ce]=g,Pi[Kt++]=ce)}return Pi}function No(ee){var _e=-1,ce=Array(ee.size);return ee.forEach(function(it){ce[++_e]=it}),ce}function ev(ee){var _e=-1,ce=Array(ee.size);return ee.forEach(function(it){ce[++_e]=[it,it]}),ce}function id(ee,_e,ce){for(var it=ce-1,Kt=ee.length;++it<Kt;)if(ee[it]===_e)return it;return-1}function tv(ee,_e,ce){for(var it=ce+1;it--;)if(ee[it]===_e)return it;return it}function Nl(ee){return Tu(ee)?ay(ee):qb(ee)}function is(ee){return Tu(ee)?oy(ee):qm(ee)}function rd(ee){for(var _e=ee.length;_e--&&Sl.test(ee.charAt(_e)););return _e}var sy=ed($b);function ay(ee){for(var _e=Tl.lastIndex=0;Tl.test(ee);)++_e;return _e}function oy(ee){return ee.match(Tl)||[]}function iv(ee){return ee.match(Gb)||[]}var rv=function ee(_e){_e=_e==null?dr:Cu.defaults(dr.Object(),_e,Cu.pick(dr,$m));var ce=_e.Array,it=_e.Date,Kt=_e.Error,Pi=_e.Function,Dr=_e.Math,Hi=_e.Object,Oc=_e.RegExp,nv=_e.String,xs=_e.TypeError,ja=ce.prototype,xp=Pi.prototype,ga=Hi.prototype,Nu=_e["__core-js_shared__"],Mc=xp.toString,Ei=ga.hasOwnProperty,Pu=0,nd=function(){var u=/[^.]+$/.exec(Nu&&Nu.keys&&Nu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Dc=ga.toString,sd=Mc.call(Hi),ly=dr._,uy=Oc("^"+Mc.call(Ei).replace(wl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ac=lp?_e.Buffer:t,Ya=_e.Symbol,Vc=_e.Uint8Array,Sp=Ac?Ac.allocUnsafe:t,$s=wp(Hi.getPrototypeOf,Hi),ad=Hi.create,od=ga.propertyIsEnumerable,ld=ja.splice,cy=Ya?Ya.isConcatSpreadable:t,qa=Ya?Ya.iterator:t,Pl=Ya?Ya.toStringTag:t,zc=function(){try{var u=eo(Hi,"defineProperty");return u({},"",{}),u}catch{}}(),hy=_e.clearTimeout!==dr.clearTimeout&&_e.clearTimeout,rr=it&&it.now!==dr.Date.now&&it.now,kp=_e.setTimeout!==dr.setTimeout&&_e.setTimeout,El=Dr.ceil,Po=Dr.floor,ud=Hi.getOwnPropertySymbols,_p=Ac?Ac.isBuffer:t,Eu=_e.isFinite,cd=ja.join,Ru=wp(Hi.keys,Hi),Ar=Dr.max,Sn=Dr.min,sv=it.now,dy=_e.parseInt,Wc=Dr.random,hd=ja.reverse,Hc=eo(_e,"DataView"),Rl=eo(_e,"Map"),Gc=eo(_e,"Promise"),Eo=eo(_e,"Set"),Uc=eo(_e,"WeakMap"),Lu=eo(Hi,"create"),dd=Uc&&new Uc,Iu={},Bp=Uo(Hc),Ro=Uo(Rl),fy=Uo(Gc),Fu=Uo(Eo),ma=Uo(Uc),Lo=Ya?Ya.prototype:t,rs=Lo?Lo.valueOf:t,fd=Lo?Lo.toString:t;function M(u){if(zr(u)&&!ui(u)&&!(u instanceof oi)){if(u instanceof kn)return u;if(Ei.call(u,"__wrapped__"))return ng(u)}return new kn(u)}var Ou=function(){function u(){}return function(d){if(!Lr(d))return{};if(ad)return ad(d);u.prototype=d;var y=new u;return u.prototype=t,y}}();function ya(){}function kn(u,d){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=t}M.templateSettings={escape:wo,evaluate:pu,interpolate:gu,variable:"",imports:{_:M}},M.prototype=ya.prototype,M.prototype.constructor=M,kn.prototype=Ou(ya.prototype),kn.prototype.constructor=kn;function oi(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function pd(){var u=new oi(this.__wrapped__);return u.__actions__=Wn(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Wn(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Wn(this.__views__),u}function Tp(){if(this.__filtered__){var u=new oi(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Mu(){var u=this.__wrapped__.value(),d=this.__dir__,y=ui(u),_=d<0,E=y?u.length:0,A=Dy(0,E,this.__views__),U=A.start,X=A.end,ie=X-U,Ne=_?X:U-1,Pe=this.__iteratees__,Ae=Pe.length,tt=0,St=Sn(ie,this.__takeCount__);if(!y||!_&&E==ie&&St==ie)return Ap(u,this.__actions__);var Gt=[];e:for(;ie--&&tt<St;){Ne+=d;for(var mi=-1,Ut=u[Ne];++mi<Ae;){var wi=Pe[mi],Ci=wi.iteratee,ta=wi.type,cs=Ci(Ut);if(ta==Be)Ut=cs;else if(!cs){if(ta==ve)continue e;break e}}Gt[tt++]=Ut}return Gt}oi.prototype=Ou(ya.prototype),oi.prototype.constructor=oi;function qn(u){var d=-1,y=u==null?0:u.length;for(this.clear();++d<y;){var _=u[d];this.set(_[0],_[1])}}function nr(){this.__data__=Lu?Lu(null):{},this.size=0}function er(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}function Io(u){var d=this.__data__;if(Lu){var y=d[u];return y===h?t:y}return Ei.call(d,u)?d[u]:t}function _n(u){var d=this.__data__;return Lu?d[u]!==t:Ei.call(d,u)}function Xn(u,d){var y=this.__data__;return this.size+=this.has(u)?0:1,y[u]=Lu&&d===t?h:d,this}qn.prototype.clear=nr,qn.prototype.delete=er,qn.prototype.get=Io,qn.prototype.has=_n,qn.prototype.set=Xn;function Vn(u){var d=-1,y=u==null?0:u.length;for(this.clear();++d<y;){var _=u[d];this.set(_[0],_[1])}}function Du(){this.__data__=[],this.size=0}function Kn(u){var d=this.__data__,y=Tn(d,u);if(y<0)return!1;var _=d.length-1;return y==_?d.pop():ld.call(d,y,1),--this.size,!0}function gd(u){var d=this.__data__,y=Tn(d,u);return y<0?t:d[y][1]}function py(u){return Tn(this.__data__,u)>-1}function gy(u,d){var y=this.__data__,_=Tn(y,u);return _<0?(++this.size,y.push([u,d])):y[_][1]=d,this}Vn.prototype.clear=Du,Vn.prototype.delete=Kn,Vn.prototype.get=gd,Vn.prototype.has=py,Vn.prototype.set=gy;function Ss(u){var d=-1,y=u==null?0:u.length;for(this.clear();++d<y;){var _=u[d];this.set(_[0],_[1])}}function my(){this.size=0,this.__data__={hash:new qn,map:new(Rl||Vn),string:new qn}}function Xa(u){var d=Hd(this,u).delete(u);return this.size-=d?1:0,d}function md(u){return Hd(this,u).get(u)}function Cp(u){return Hd(this,u).has(u)}function yy(u,d){var y=Hd(this,u),_=y.size;return y.set(u,d),this.size+=y.size==_?0:1,this}Ss.prototype.clear=my,Ss.prototype.delete=Xa,Ss.prototype.get=md,Ss.prototype.has=Cp,Ss.prototype.set=yy;function Ll(u){var d=-1,y=u==null?0:u.length;for(this.__data__=new Ss;++d<y;)this.add(u[d])}function Fo(u){return this.__data__.set(u,h),this}function Au(u){return this.__data__.has(u)}Ll.prototype.add=Ll.prototype.push=Fo,Ll.prototype.has=Au;function Bn(u){var d=this.__data__=new Vn(u);this.size=d.size}function yd(){this.__data__=new Vn,this.size=0}function bd(u){var d=this.__data__,y=d.delete(u);return this.size=d.size,y}function ks(u){return this.__data__.get(u)}function _s(u){return this.__data__.has(u)}function Il(u,d){var y=this.__data__;if(y instanceof Vn){var _=y.__data__;if(!Rl||_.length<n-1)return _.push([u,d]),this.size=++y.size,this;y=this.__data__=new Ss(_)}return y.set(u,d),this.size=y.size,this}Bn.prototype.clear=yd,Bn.prototype.delete=bd,Bn.prototype.get=ks,Bn.prototype.has=_s,Bn.prototype.set=Il;function ba(u,d){var y=ui(u),_=!y&&gh(u),E=!y&&!_&&tc(u),A=!y&&!_&&!E&&df(u),U=y||_||E||A,X=U?bp(u.length,nv):[],ie=X.length;for(var Ne in u)(d||Ei.call(u,Ne))&&!(U&&(Ne=="length"||E&&(Ne=="offset"||Ne=="parent")||A&&(Ne=="buffer"||Ne=="byteLength"||Ne=="byteOffset")||Ts(Ne,ie)))&&X.push(Ne);return X}function va(u){var d=u.length;return d?u[Jc(0,d-1)]:t}function Fl(u,d){return os(Wn(u),Ka(d,0,u.length))}function by(u){return os(Wn(u))}function $c(u,d,y){(y!==t&&!ro(u[d],y)||y===t&&!(d in u))&&wa(u,d,y)}function Ol(u,d,y){var _=u[d];(!(Ei.call(u,d)&&ro(_,y))||y===t&&!(d in u))&&wa(u,d,y)}function Tn(u,d){for(var y=u.length;y--;)if(ro(u[y][0],d))return y;return-1}function ns(u,d,y,_){return Sa(u,function(E,A,U){d(_,E,y(E),U)}),_}function sr(u,d){return u&&Qs(d,In(d),u)}function js(u,d){return u&&Qs(d,Es(d),u)}function wa(u,d,y){d=="__proto__"&&zc?zc(u,d,{configurable:!0,enumerable:!0,value:y,writable:!0}):u[d]=y}function vd(u,d){for(var y=-1,_=d.length,E=ce(_),A=u==null;++y<_;)E[y]=A?t:Nv(u,d[y]);return E}function Ka(u,d,y){return u===u&&(y!==t&&(u=u<=y?u:y),d!==t&&(u=u>=d?u:d)),u}function Qn(u,d,y,_,E,A){var U,X=d&b,ie=d&v,Ne=d&S;if(y&&(U=E?y(u,_,E,A):y(u)),U!==t)return U;if(!Lr(u))return u;var Pe=ui(u);if(Pe){if(U=Ay(u),!X)return Wn(u,U)}else{var Ae=En(u),tt=Ae==ei||Ae==gi;if(tc(u))return zp(u,X);if(Ae==$t||Ae==Ue||tt&&!E){if(U=ie||tt?{}:Xu(u),!X)return ie?ov(u,js(U,u)):Ny(u,sr(U,u))}else{if(!Oi[Ae])return E?u:{};U=Rn(u,Ae,X)}}A||(A=new Bn);var St=A.get(u);if(St)return St;A.set(u,U),xS(u)?u.forEach(function(Ut){U.add(Qn(Ut,d,y,Ut,u,A))}):vS(u)&&u.forEach(function(Ut,wi){U.set(wi,Qn(Ut,d,y,wi,u,A))});var Gt=Ne?ie?sh:Wd:ie?Es:In,mi=Pe?t:Gt(u);return xn(mi||u,function(Ut,wi){mi&&(wi=Ut,Ut=u[wi]),Ol(U,wi,Qn(Ut,d,y,wi,u,A))}),U}function vy(u){var d=In(u);return function(y){return jc(y,u,d)}}function jc(u,d,y){var _=y.length;if(u==null)return!_;for(u=Hi(u);_--;){var E=y[_],A=d[E],U=u[E];if(U===t&&!(E in u)||!A(U))return!1}return!0}function Np(u,d,y){if(typeof u!="function")throw new xs(o);return Qu(function(){u.apply(t,y)},d)}function xa(u,d,y,_){var E=-1,A=Jh,U=!0,X=u.length,ie=[],Ne=d.length;if(!X)return ie;y&&(d=Zi(d,ts(y))),_?(A=dp,U=!1):d.length>=n&&(A=$a,U=!1,d=new Ll(d));e:for(;++E<X;){var Pe=u[E],Ae=y==null?Pe:y(Pe);if(Pe=_||Pe!==0?Pe:0,U&&Ae===Ae){for(var tt=Ne;tt--;)if(d[tt]===Ae)continue e;ie.push(Pe)}else A(d,Ae,_)||ie.push(Pe)}return ie}var Sa=Py(Bs),wy=Py(Oo,!0);function Ys(u,d){var y=!0;return Sa(u,function(_,E,A){return y=!!d(_,E,A),y}),y}function Ml(u,d,y){for(var _=-1,E=u.length;++_<E;){var A=u[_],U=d(A);if(U!=null&&(X===t?U===U&&!ea(U):y(U,X)))var X=U,ie=A}return ie}function wd(u,d,y,_){var E=u.length;for(y=pi(y),y<0&&(y=-y>E?0:E+y),_=_===t||_>E?E:pi(_),_<0&&(_+=E),_=y>_?0:kS(_);y<_;)u[y++]=d;return u}function Dl(u,d){var y=[];return Sa(u,function(_,E,A){d(_,E,A)&&y.push(_)}),y}function Yr(u,d,y,_,E){var A=-1,U=u.length;for(y||(y=cv),E||(E=[]);++A<U;){var X=u[A];d>0&&y(X)?d>1?Yr(X,d-1,y,_,E):Co(E,X):_||(E[E.length]=X)}return E}var Yc=$p(),xd=$p(!0);function Bs(u,d){return u&&Yc(u,d,In)}function Oo(u,d){return u&&xd(u,d,In)}function zn(u,d){return To(d,function(y){return $l(u[y])})}function ss(u,d){d=Qa(d,u);for(var y=0,_=d.length;u!=null&&y<_;)u=u[Js(d[y++])];return y&&y==_?u:t}function Sd(u,d,y){var _=d(u);return ui(u)?_:Co(_,y(u))}function Cn(u){return u==null?u===t?Ve:Ai:Pl&&Pl in Hi(u)?My(u):Hy(u)}function qs(u,d){return u>d}function Mo(u,d){return u!=null&&Ei.call(u,d)}function Pp(u,d){return u!=null&&d in Hi(u)}function xy(u,d,y){return u>=Sn(d,y)&&u<Ar(d,y)}function Xs(u,d,y){for(var _=y?dp:Jh,E=u[0].length,A=u.length,U=A,X=ce(A),ie=1/0,Ne=[];U--;){var Pe=u[U];U&&d&&(Pe=Zi(Pe,ts(d))),ie=Sn(Pe.length,ie),X[U]=!y&&(d||E>=120&&Pe.length>=120)?new Ll(U&&Pe):t}Pe=u[0];var Ae=-1,tt=X[0];e:for(;++Ae<E&&Ne.length<ie;){var St=Pe[Ae],Gt=d?d(St):St;if(St=y||St!==0?St:0,!(tt?$a(tt,Gt):_(Ne,Gt,y))){for(U=A;--U;){var mi=X[U];if(!(mi?$a(mi,Gt):_(u[U],Gt,y)))continue e}tt&&tt.push(Gt),Ne.push(St)}}return Ne}function Do(u,d,y,_){return Bs(u,function(E,A,U){d(_,y(E),A,U)}),_}function Ao(u,d,y){d=Qa(d,u),u=$d(u,d);var _=u==null?u:u[Js(Jr(d))];return _==null?t:An(_,u,y)}function Ep(u){return zr(u)&&Cn(u)==Ue}function kd(u){return zr(u)&&Cn(u)==Xe}function Sy(u){return zr(u)&&Cn(u)==et}function Vu(u,d,y,_,E){return u===d?!0:u==null||d==null||!zr(u)&&!zr(d)?u!==u&&d!==d:Rp(u,d,y,_,Vu,E)}function Rp(u,d,y,_,E,A){var U=ui(u),X=ui(d),ie=U?Ee:En(u),Ne=X?Ee:En(d);ie=ie==Ue?$t:ie,Ne=Ne==Ue?$t:Ne;var Pe=ie==$t,Ae=Ne==$t,tt=ie==Ne;if(tt&&tc(u)){if(!tc(d))return!1;U=!0,Pe=!1}if(tt&&!Pe)return A||(A=new Bn),U||df(u)?zd(u,d,y,_,E,A):Oy(u,d,ie,y,_,E,A);if(!(y&B)){var St=Pe&&Ei.call(u,"__wrapped__"),Gt=Ae&&Ei.call(d,"__wrapped__");if(St||Gt){var mi=St?u.value():u,Ut=Gt?d.value():d;return A||(A=new Bn),E(mi,Ut,y,_,A)}}return tt?(A||(A=new Bn),Qp(u,d,y,_,E,A)):!1}function _d(u){return zr(u)&&En(u)==At}function Bd(u,d,y,_){var E=y.length,A=E,U=!_;if(u==null)return!A;for(u=Hi(u);E--;){var X=y[E];if(U&&X[2]?X[1]!==u[X[0]]:!(X[0]in u))return!1}for(;++E<A;){X=y[E];var ie=X[0],Ne=u[ie],Pe=X[1];if(U&&X[2]){if(Ne===t&&!(ie in u))return!1}else{var Ae=new Bn;if(_)var tt=_(Ne,Pe,ie,u,d,Ae);if(!(tt===t?Vu(Pe,Ne,B|T,_,Ae):tt))return!1}}return!0}function Lp(u){if(!Lr(u)||tg(u))return!1;var d=$l(u)?uy:Rm;return d.test(Uo(u))}function ky(u){return zr(u)&&Cn(u)==zt}function Ip(u){return zr(u)&&En(u)==Wt}function qc(u){return zr(u)&&n0(u.length)&&!!Vi[Cn(u)]}function Xc(u){return typeof u=="function"?u:u==null?Rs:typeof u=="object"?ui(u)?Ks(u[0],u[1]):zu(u):FS(u)}function Td(u){if(!lh(u))return Ru(u);var d=[];for(var y in Hi(u))Ei.call(u,y)&&y!="constructor"&&d.push(y);return d}function _y(u){if(!Lr(u))return Wy(u);var d=lh(u),y=[];for(var _ in u)_=="constructor"&&(d||!Ei.call(u,_))||y.push(_);return y}function Vo(u,d){return u<d}function Fp(u,d){var y=-1,_=Ps(u)?ce(u.length):[];return Sa(u,function(E,A,U){_[++y]=d(E,A,U)}),_}function zu(u){var d=Gd(u);return d.length==1&&d[0][2]?uh(d[0][0],d[0][1]):function(y){return y===u||Bd(y,u,d)}}function Ks(u,d){return eg(u)&&Ku(d)?uh(Js(u),d):function(y){var _=Nv(y,u);return _===t&&_===d?Pv(y,u):Vu(d,_,B|T)}}function zo(u,d,y,_,E){u!==d&&Yc(d,function(A,U){if(E||(E=new Bn),Lr(A))Kc(u,d,U,y,zo,_,E);else{var X=_?_(as(u,U),A,U+"",u,d,E):t;X===t&&(X=A),$c(u,U,X)}},Es)}function Kc(u,d,y,_,E,A,U){var X=as(u,y),ie=as(d,y),Ne=U.get(ie);if(Ne){$c(u,y,Ne);return}var Pe=A?A(X,ie,y+"",u,d,U):t,Ae=Pe===t;if(Ae){var tt=ui(ie),St=!tt&&tc(ie),Gt=!tt&&!St&&df(ie);Pe=ie,tt||St||Gt?ui(X)?Pe=X:Zr(X)?Pe=Wn(X):St?(Ae=!1,Pe=zp(ie,!0)):Gt?(Ae=!1,Pe=Hp(ie,!0)):Pe=[]:Sg(ie)||gh(ie)?(Pe=X,gh(X)?Pe=_S(X):(!Lr(X)||$l(X))&&(Pe=Xu(ie))):Ae=!1}Ae&&(U.set(ie,Pe),E(Pe,ie,_,A,U),U.delete(ie)),$c(u,y,Pe)}function Wo(u,d){var y=u.length;if(y)return d+=d<0?y:0,Ts(d,y)?u[d]:t}function Cd(u,d,y){d.length?d=Zi(d,function(A){return ui(A)?function(U){return ss(U,A.length===1?A[0]:A)}:A}):d=[Rs];var _=-1;d=Zi(d,ts(Nt()));var E=Fp(u,function(A,U,X){var ie=Zi(d,function(Ne){return Ne(A)});return{criteria:ie,index:++_,value:A}});return Kb(E,function(A,U){return Cy(A,U,y)})}function Wu(u,d){return Op(u,d,function(y,_){return Pv(u,_)})}function Op(u,d,y){for(var _=-1,E=d.length,A={};++_<E;){var U=d[_],X=ss(u,U);y(X,U)&&gr(A,Qa(U,u),X)}return A}function Mp(u){return function(d){return ss(d,u)}}function ar(u,d,y,_){var E=_?gp:_u,A=-1,U=d.length,X=u;for(u===d&&(d=Wn(d)),y&&(X=Zi(u,ts(y)));++A<U;)for(var ie=0,Ne=d[A],Pe=y?y(Ne):Ne;(ie=E(X,Pe,ie,_))>-1;)X!==u&&ld.call(X,ie,1),ld.call(u,ie,1);return u}function Qc(u,d){for(var y=u?d.length:0,_=y-1;y--;){var E=d[y];if(y==_||E!==A){var A=E;Ts(E)?ld.call(u,E,1):Vl(u,E)}}return u}function Jc(u,d){return u+Po(Wc()*(d-u+1))}function Dp(u,d,y,_){for(var E=-1,A=Ar(El((d-u)/(y||1)),0),U=ce(A);A--;)U[_?A:++E]=u,u+=y;return U}function Hu(u,d){var y="";if(!u||d<1||d>ne)return y;do d%2&&(y+=u),d=Po(d/2),d&&(u+=u);while(d);return y}function li(u,d){return jd(Ud(u,d,Rs),u+"")}function Al(u){return va(ff(u))}function pr(u,d){var y=ff(u);return os(y,Ka(d,0,y.length))}function gr(u,d,y,_){if(!Lr(u))return u;d=Qa(d,u);for(var E=-1,A=d.length,U=A-1,X=u;X!=null&&++E<A;){var ie=Js(d[E]),Ne=y;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return u;if(E!=U){var Pe=X[ie];Ne=_?_(Pe,ie,X):t,Ne===t&&(Ne=Lr(Pe)?Pe:Ts(d[E+1])?[]:{})}Ol(X,ie,Ne),X=X[ie]}return u}var qr=dd?function(u,d){return dd.set(u,d),u}:Rs,Nd=zc?function(u,d){return zc(u,"toString",{configurable:!0,enumerable:!1,value:Rv(d),writable:!0})}:Rs;function Zc(u){return os(ff(u))}function Nn(u,d,y){var _=-1,E=u.length;d<0&&(d=-d>E?0:E+d),y=y>E?E:y,y<0&&(y+=E),E=d>y?0:y-d>>>0,d>>>=0;for(var A=ce(E);++_<E;)A[_]=u[_+d];return A}function av(u,d){var y;return Sa(u,function(_,E,A){return y=d(_,E,A),!y}),!!y}function Xr(u,d,y){var _=0,E=u==null?_:u.length;if(typeof d=="number"&&d===d&&E<=We){for(;_<E;){var A=_+E>>>1,U=u[A];U!==null&&!ea(U)&&(y?U<=d:U<d)?_=A+1:E=A}return E}return eh(u,d,Rs,y)}function eh(u,d,y,_){var E=0,A=u==null?0:u.length;if(A===0)return 0;d=y(d);for(var U=d!==d,X=d===null,ie=ea(d),Ne=d===t;E<A;){var Pe=Po((E+A)/2),Ae=y(u[Pe]),tt=Ae!==t,St=Ae===null,Gt=Ae===Ae,mi=ea(Ae);if(U)var Ut=_||Gt;else Ne?Ut=Gt&&(_||tt):X?Ut=Gt&&tt&&(_||!St):ie?Ut=Gt&&tt&&!St&&(_||!mi):St||mi?Ut=!1:Ut=_?Ae<=d:Ae<d;Ut?E=Pe+1:A=Pe}return Sn(A,pe)}function Pd(u,d){for(var y=-1,_=u.length,E=0,A=[];++y<_;){var U=u[y],X=d?d(U):U;if(!y||!ro(X,ie)){var ie=X;A[E++]=U===0?0:U}}return A}function Ed(u){return typeof u=="number"?u:ea(u)?z:+u}function wr(u){if(typeof u=="string")return u;if(ui(u))return Zi(u,wr)+"";if(ea(u))return fd?fd.call(u):"";var d=u+"";return d=="0"&&1/u==-1/0?"-0":d}function Kr(u,d,y){var _=-1,E=Jh,A=u.length,U=!0,X=[],ie=X;if(y)U=!1,E=dp;else if(A>=n){var Ne=d?null:Hn(u);if(Ne)return No(Ne);U=!1,E=$a,ie=new Ll}else ie=d?[]:X;e:for(;++_<A;){var Pe=u[_],Ae=d?d(Pe):Pe;if(Pe=y||Pe!==0?Pe:0,U&&Ae===Ae){for(var tt=ie.length;tt--;)if(ie[tt]===Ae)continue e;d&&ie.push(Ae),X.push(Pe)}else E(ie,Ae,y)||(ie!==X&&ie.push(Ae),X.push(Pe))}return X}function Vl(u,d){return d=Qa(d,u),u=$d(u,d),u==null||delete u[Js(Jr(d))]}function Rd(u,d,y,_){return gr(u,d,y(ss(u,d)),_)}function Gu(u,d,y,_){for(var E=u.length,A=_?E:-1;(_?A--:++A<E)&&d(u[A],A,u););return y?Nn(u,_?0:A,_?A+1:E):Nn(u,_?A+1:0,_?E:A)}function Ap(u,d){var y=u;return y instanceof oi&&(y=y.value()),fp(d,function(_,E){return E.func.apply(E.thisArg,Co([_],E.args))},y)}function Ld(u,d,y){var _=u.length;if(_<2)return _?Kr(u[0]):[];for(var E=-1,A=ce(_);++E<_;)for(var U=u[E],X=-1;++X<_;)X!=E&&(A[E]=xa(A[E]||U,u[X],d,y));return Kr(Yr(A,1),d,y)}function Vp(u,d,y){for(var _=-1,E=u.length,A=d.length,U={};++_<E;){var X=_<A?d[_]:t;y(U,u[_],X)}return U}function Id(u){return Zr(u)?u:[]}function Fd(u){return typeof u=="function"?u:Rs}function Qa(u,d){return ui(u)?u:eg(u,d)?[u]:Gy(Gi(u))}var By=li;function Ja(u,d,y){var _=u.length;return y=y===t?_:y,!d&&y>=_?u:Nn(u,d,y)}var Uu=hy||function(u){return dr.clearTimeout(u)};function zp(u,d){if(d)return u.slice();var y=u.length,_=Sp?Sp(y):new u.constructor(y);return u.copy(_),_}function $u(u){var d=new u.constructor(u.byteLength);return new Vc(d).set(new Vc(u)),d}function Od(u,d){var y=d?$u(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.byteLength)}function Ty(u){var d=new u.constructor(u.source,ep.exec(u));return d.lastIndex=u.lastIndex,d}function Wp(u){return rs?Hi(rs.call(u)):{}}function Hp(u,d){var y=d?$u(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.length)}function Gp(u,d){if(u!==d){var y=u!==t,_=u===null,E=u===u,A=ea(u),U=d!==t,X=d===null,ie=d===d,Ne=ea(d);if(!X&&!Ne&&!A&&u>d||A&&U&&ie&&!X&&!Ne||_&&U&&ie||!y&&ie||!E)return 1;if(!_&&!A&&!Ne&&u<d||Ne&&y&&E&&!_&&!A||X&&y&&E||!U&&E||!ie)return-1}return 0}function Cy(u,d,y){for(var _=-1,E=u.criteria,A=d.criteria,U=E.length,X=y.length;++_<U;){var ie=Gp(E[_],A[_]);if(ie){if(_>=X)return ie;var Ne=y[_];return ie*(Ne=="desc"?-1:1)}}return u.index-d.index}function Up(u,d,y,_){for(var E=-1,A=u.length,U=y.length,X=-1,ie=d.length,Ne=Ar(A-U,0),Pe=ce(ie+Ne),Ae=!_;++X<ie;)Pe[X]=d[X];for(;++E<U;)(Ae||E<A)&&(Pe[y[E]]=u[E]);for(;Ne--;)Pe[X++]=u[E++];return Pe}function Md(u,d,y,_){for(var E=-1,A=u.length,U=-1,X=y.length,ie=-1,Ne=d.length,Pe=Ar(A-X,0),Ae=ce(Pe+Ne),tt=!_;++E<Pe;)Ae[E]=u[E];for(var St=E;++ie<Ne;)Ae[St+ie]=d[ie];for(;++U<X;)(tt||E<A)&&(Ae[St+y[U]]=u[E++]);return Ae}function Wn(u,d){var y=-1,_=u.length;for(d||(d=ce(_));++y<_;)d[y]=u[y];return d}function Qs(u,d,y,_){var E=!y;y||(y={});for(var A=-1,U=d.length;++A<U;){var X=d[A],ie=_?_(y[X],u[X],X,y,u):t;ie===t&&(ie=u[X]),E?wa(y,X,ie):Ol(y,X,ie)}return y}function Ny(u,d){return Qs(u,qu(u),d)}function ov(u,d){return Qs(u,Ba(u),d)}function th(u,d){return function(y,_){var E=ui(y)?cp:ns,A=d?d():{};return E(y,u,Nt(_,2),A)}}function ju(u){return li(function(d,y){var _=-1,E=y.length,A=E>1?y[E-1]:t,U=E>2?y[2]:t;for(A=u.length>3&&typeof A=="function"?(E--,A):t,U&&Mi(y[0],y[1],U)&&(A=E<3?t:A,E=1),d=Hi(d);++_<E;){var X=y[_];X&&u(d,X,_,A)}return d})}function Py(u,d){return function(y,_){if(y==null)return y;if(!Ps(y))return u(y,_);for(var E=y.length,A=d?E:-1,U=Hi(y);(d?A--:++A<E)&&_(U[A],A,U)!==!1;);return y}}function $p(u){return function(d,y,_){for(var E=-1,A=Hi(d),U=_(d),X=U.length;X--;){var ie=U[u?X:++E];if(y(A[ie],ie,A)===!1)break}return d}}function Ey(u,d,y){var _=d&C,E=ih(u);function A(){var U=this&&this!==dr&&this instanceof A?E:u;return U.apply(_?y:this,arguments)}return A}function jp(u){return function(d){d=Gi(d);var y=Tu(d)?is(d):t,_=y?y[0]:d.charAt(0),E=y?Ja(y,1).join(""):d.slice(1);return _[u]()+E}}function Za(u){return function(d){return fp(LS(RS(d).replace(Hb,"")),u,"")}}function ih(u){return function(){var d=arguments;switch(d.length){case 0:return new u;case 1:return new u(d[0]);case 2:return new u(d[0],d[1]);case 3:return new u(d[0],d[1],d[2]);case 4:return new u(d[0],d[1],d[2],d[3]);case 5:return new u(d[0],d[1],d[2],d[3],d[4]);case 6:return new u(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new u(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var y=Ou(u.prototype),_=u.apply(y,d);return Lr(_)?_:y}}function lv(u,d,y){var _=ih(u);function E(){for(var A=arguments.length,U=ce(A),X=A,ie=Ho(E);X--;)U[X]=arguments[X];var Ne=A<3&&U[0]!==ie&&U[A-1]!==ie?[]:ws(U,ie);if(A-=Ne.length,A<y)return Iy(u,d,Yu,E.placeholder,t,U,Ne,t,t,y-A);var Pe=this&&this!==dr&&this instanceof E?_:u;return An(Pe,this,U)}return E}function Ry(u){return function(d,y,_){var E=Hi(d);if(!Ps(d)){var A=Nt(y,3);d=In(d),y=function(X){return A(E[X],X,E)}}var U=u(d,y,_);return U>-1?E[A?d[U]:U]:t}}function zl(u){return _a(function(d){var y=d.length,_=y,E=kn.prototype.thru;for(u&&d.reverse();_--;){var A=d[_];if(typeof A!="function")throw new xs(o);if(E&&!U&&oh(A)=="wrapper")var U=new kn([],!0)}for(_=U?_:y;++_<y;){A=d[_];var X=oh(A),ie=X=="wrapper"?ah(A):t;ie&&Go(ie[0])&&ie[1]==(W|I|P|J)&&!ie[4].length&&ie[9]==1?U=U[oh(ie[0])].apply(U,ie[3]):U=A.length==1&&Go(A)?U[X]():U.thru(A)}return function(){var Ne=arguments,Pe=Ne[0];if(U&&Ne.length==1&&ui(Pe))return U.plant(Pe).value();for(var Ae=0,tt=y?d[Ae].apply(this,Ne):Pe;++Ae<y;)tt=d[Ae].call(this,tt);return tt}})}function Yu(u,d,y,_,E,A,U,X,ie,Ne){var Pe=d&W,Ae=d&C,tt=d&L,St=d&(I|V),Gt=d&re,mi=tt?t:ih(u);function Ut(){for(var wi=arguments.length,Ci=ce(wi),ta=wi;ta--;)Ci[ta]=arguments[ta];if(St)var cs=Ho(Ut),ia=ty(Ci,cs);if(_&&(Ci=Up(Ci,_,E,St)),A&&(Ci=Md(Ci,A,U,St)),wi-=ia,St&&wi<Ne){var en=ws(Ci,cs);return Iy(u,d,Yu,Ut.placeholder,y,Ci,en,X,ie,Ne-wi)}var no=Ae?y:this,Yl=tt?no[u]:u;return wi=Ci.length,X?Ci=gn(Ci,X):Gt&&wi>1&&Ci.reverse(),Pe&&ie<wi&&(Ci.length=ie),this&&this!==dr&&this instanceof Ut&&(Yl=mi||ih(Yl)),Yl.apply(no,Ci)}return Ut}function Dd(u,d){return function(y,_){return Do(y,u,d(_),{})}}function Ad(u,d){return function(y,_){var E;if(y===t&&_===t)return d;if(y!==t&&(E=y),_!==t){if(E===t)return _;typeof y=="string"||typeof _=="string"?(y=wr(y),_=wr(_)):(y=Ed(y),_=Ed(_)),E=u(y,_)}return E}}function Vd(u){return _a(function(d){return d=Zi(d,ts(Nt())),li(function(y){var _=this;return u(d,function(E){return An(E,_,y)})})})}function rh(u,d){d=d===t?" ":wr(d);var y=d.length;if(y<2)return y?Hu(d,u):d;var _=Hu(d,El(u/Nl(d)));return Tu(d)?Ja(is(_),0,u).join(""):_.slice(0,u)}function Ly(u,d,y,_){var E=d&C,A=ih(u);function U(){for(var X=-1,ie=arguments.length,Ne=-1,Pe=_.length,Ae=ce(Pe+ie),tt=this&&this!==dr&&this instanceof U?A:u;++Ne<Pe;)Ae[Ne]=_[Ne];for(;ie--;)Ae[Ne++]=arguments[++X];return An(tt,E?y:this,Ae)}return U}function Yp(u){return function(d,y,_){return _&&typeof _!="number"&&Mi(d,y,_)&&(y=_=t),d=jl(d),y===t?(y=d,d=0):y=jl(y),_=_===t?d<y?1:-1:jl(_),Dp(d,y,_,u)}}function nh(u){return function(d,y){return typeof d=="string"&&typeof y=="string"||(d=Ta(d),y=Ta(y)),u(d,y)}}function Iy(u,d,y,_,E,A,U,X,ie,Ne){var Pe=d&I,Ae=Pe?U:t,tt=Pe?t:U,St=Pe?A:t,Gt=Pe?t:A;d|=Pe?P:G,d&=~(Pe?G:P),d&O||(d&=-4);var mi=[u,d,E,St,Ae,Gt,tt,X,ie,Ne],Ut=y.apply(t,mi);return Go(u)&&to(Ut,mi),Ut.placeholder=_,Cs(Ut,u,d)}function Pn(u){var d=Dr[u];return function(y,_){if(y=Ta(y),_=_==null?0:Sn(pi(_),292),_&&Eu(y)){var E=(Gi(y)+"e").split("e"),A=d(E[0]+"e"+(+E[1]+_));return E=(Gi(A)+"e").split("e"),+(E[0]+"e"+(+E[1]-_))}return d(y)}}var Hn=Eo&&1/No(new Eo([,-0]))[1]==ue?function(u){return new Eo(u)}:Fv;function qp(u){return function(d){var y=En(d);return y==At?td(d):y==Wt?ev(d):Qb(d,u(d))}}function ka(u,d,y,_,E,A,U,X){var ie=d&L;if(!ie&&typeof u!="function")throw new xs(o);var Ne=_?_.length:0;if(Ne||(d&=-97,_=E=t),U=U===t?U:Ar(pi(U),0),X=X===t?X:pi(X),Ne-=E?E.length:0,d&G){var Pe=_,Ae=E;_=E=t}var tt=ie?t:ah(u),St=[u,d,y,_,E,Pe,Ae,A,U,X];if(tt&&zy(St,tt),u=St[0],d=St[1],y=St[2],_=St[3],E=St[4],X=St[9]=St[9]===t?ie?0:u.length:Ar(St[9]-Ne,0),!X&&d&(I|V)&&(d&=-25),!d||d==C)var Gt=Ey(u,d,y);else d==I||d==V?Gt=lv(u,d,X):(d==P||d==(C|P))&&!E.length?Gt=Ly(u,d,y,_):Gt=Yu.apply(t,St);var mi=tt?qr:to;return Cs(mi(Gt,St),u,d)}function Xp(u,d,y,_){return u===t||ro(u,ga[y])&&!Ei.call(_,y)?d:u}function Kp(u,d,y,_,E,A){return Lr(u)&&Lr(d)&&(A.set(d,u),zo(u,d,t,Kp,A),A.delete(d)),u}function Fy(u){return Sg(u)?t:u}function zd(u,d,y,_,E,A){var U=y&B,X=u.length,ie=d.length;if(X!=ie&&!(U&&ie>X))return!1;var Ne=A.get(u),Pe=A.get(d);if(Ne&&Pe)return Ne==d&&Pe==u;var Ae=-1,tt=!0,St=y&T?new Ll:t;for(A.set(u,d),A.set(d,u);++Ae<X;){var Gt=u[Ae],mi=d[Ae];if(_)var Ut=U?_(mi,Gt,Ae,d,u,A):_(Gt,mi,Ae,u,d,A);if(Ut!==t){if(Ut)continue;tt=!1;break}if(St){if(!pp(d,function(wi,Ci){if(!$a(St,Ci)&&(Gt===wi||E(Gt,wi,y,_,A)))return St.push(Ci)})){tt=!1;break}}else if(!(Gt===mi||E(Gt,mi,y,_,A))){tt=!1;break}}return A.delete(u),A.delete(d),tt}function Oy(u,d,y,_,E,A,U){switch(y){case se:if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case Xe:return!(u.byteLength!=d.byteLength||!A(new Vc(u),new Vc(d)));case Oe:case et:case Bi:return ro(+u,+d);case pt:return u.name==d.name&&u.message==d.message;case zt:case Li:return u==d+"";case At:var X=td;case Wt:var ie=_&B;if(X||(X=No),u.size!=d.size&&!ie)return!1;var Ne=U.get(u);if(Ne)return Ne==d;_|=T,U.set(u,d);var Pe=zd(X(u),X(d),_,E,A,U);return U.delete(u),Pe;case Qi:if(rs)return rs.call(u)==rs.call(d)}return!1}function Qp(u,d,y,_,E,A){var U=y&B,X=Wd(u),ie=X.length,Ne=Wd(d),Pe=Ne.length;if(ie!=Pe&&!U)return!1;for(var Ae=ie;Ae--;){var tt=X[Ae];if(!(U?tt in d:Ei.call(d,tt)))return!1}var St=A.get(u),Gt=A.get(d);if(St&&Gt)return St==d&&Gt==u;var mi=!0;A.set(u,d),A.set(d,u);for(var Ut=U;++Ae<ie;){tt=X[Ae];var wi=u[tt],Ci=d[tt];if(_)var ta=U?_(Ci,wi,tt,d,u,A):_(wi,Ci,tt,u,d,A);if(!(ta===t?wi===Ci||E(wi,Ci,y,_,A):ta)){mi=!1;break}Ut||(Ut=tt=="constructor")}if(mi&&!Ut){var cs=u.constructor,ia=d.constructor;cs!=ia&&"constructor"in u&&"constructor"in d&&!(typeof cs=="function"&&cs instanceof cs&&typeof ia=="function"&&ia instanceof ia)&&(mi=!1)}return A.delete(u),A.delete(d),mi}function _a(u){return jd(Ud(u,t,ch),u+"")}function Wd(u){return Sd(u,In,qu)}function sh(u){return Sd(u,Es,Ba)}var ah=dd?function(u){return dd.get(u)}:Fv;function oh(u){for(var d=u.name+"",y=Iu[d],_=Ei.call(Iu,d)?y.length:0;_--;){var E=y[_],A=E.func;if(A==null||A==u)return E.name}return d}function Ho(u){var d=Ei.call(M,"placeholder")?M:u;return d.placeholder}function Nt(){var u=M.iteratee||Lv;return u=u===Lv?Xc:u,arguments.length?u(arguments[0],arguments[1]):u}function Hd(u,d){var y=u.__data__;return ct(d)?y[typeof d=="string"?"string":"hash"]:y.map}function Gd(u){for(var d=In(u),y=d.length;y--;){var _=d[y],E=u[_];d[y]=[_,E,Ku(E)]}return d}function eo(u,d){var y=Bu(u,d);return Lp(y)?y:t}function My(u){var d=Ei.call(u,Pl),y=u[Pl];try{u[Pl]=t;var _=!0}catch{}var E=Dc.call(u);return _&&(d?u[Pl]=y:delete u[Pl]),E}var qu=ud?function(u){return u==null?[]:(u=Hi(u),To(ud(u),function(d){return od.call(u,d)}))}:Ov,Ba=ud?function(u){for(var d=[];u;)Co(d,qu(u)),u=$s(u);return d}:Ov,En=Cn;(Hc&&En(new Hc(new ArrayBuffer(1)))!=se||Rl&&En(new Rl)!=At||Gc&&En(Gc.resolve())!=Ki||Eo&&En(new Eo)!=Wt||Uc&&En(new Uc)!=qe)&&(En=function(u){var d=Cn(u),y=d==$t?u.constructor:t,_=y?Uo(y):"";if(_)switch(_){case Bp:return se;case Ro:return At;case fy:return Ki;case Fu:return Wt;case ma:return qe}return d});function Dy(u,d,y){for(var _=-1,E=y.length;++_<E;){var A=y[_],U=A.size;switch(A.type){case"drop":u+=U;break;case"dropRight":d-=U;break;case"take":d=Sn(d,u+U);break;case"takeRight":u=Ar(u,d-U);break}}return{start:u,end:d}}function Jp(u){var d=u.match(Er);return d?d[1].split(yu):[]}function Zp(u,d,y){d=Qa(d,u);for(var _=-1,E=d.length,A=!1;++_<E;){var U=Js(d[_]);if(!(A=u!=null&&y(u,U)))break;u=u[U]}return A||++_!=E?A:(E=u==null?0:u.length,!!E&&n0(E)&&Ts(U,E)&&(ui(u)||gh(u)))}function Ay(u){var d=u.length,y=new u.constructor(d);return d&&typeof u[0]=="string"&&Ei.call(u,"index")&&(y.index=u.index,y.input=u.input),y}function Xu(u){return typeof u.constructor=="function"&&!lh(u)?Ou($s(u)):{}}function Rn(u,d,y){var _=u.constructor;switch(d){case Xe:return $u(u);case Oe:case et:return new _(+u);case se:return Od(u,y);case Re:case ke:case Je:case Ht:case Xt:case Ji:case jn:case bl:case Hs:return Hp(u,y);case At:return new _;case Bi:case Li:return new _(u);case zt:return Ty(u);case Wt:return new _;case Qi:return Wp(u)}}function uv(u,d){var y=d.length;if(!y)return u;var _=y-1;return d[_]=(y>1?"& ":"")+d[_],d=d.join(y>2?", ":" "),u.replace(ai,`{
/* [wrapped with `+d+`] */
`)}function cv(u){return ui(u)||gh(u)||!!(cy&&u&&u[cy])}function Ts(u,d){var y=typeof u;return d=d??ne,!!d&&(y=="number"||y!="symbol"&&Im.test(u))&&u>-1&&u%1==0&&u<d}function Mi(u,d,y){if(!Lr(y))return!1;var _=typeof d;return(_=="number"?Ps(y)&&Ts(d,y.length):_=="string"&&d in y)?ro(y[d],u):!1}function eg(u,d){if(ui(u))return!1;var y=typeof u;return y=="number"||y=="symbol"||y=="boolean"||u==null||ea(u)?!0:Bc.test(u)||!mu.test(u)||d!=null&&u in Hi(d)}function ct(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}function Go(u){var d=oh(u),y=M[d];if(typeof y!="function"||!(d in oi.prototype))return!1;if(u===y)return!0;var _=ah(y);return!!_&&u===_[0]}function tg(u){return!!nd&&nd in u}var Vy=Nu?$l:Mv;function lh(u){var d=u&&u.constructor,y=typeof d=="function"&&d.prototype||ga;return u===y}function Ku(u){return u===u&&!Lr(u)}function uh(u,d){return function(y){return y==null?!1:y[u]===d&&(d!==t||u in Hi(y))}}function ig(u){var d=K(u,function(_){return y.size===p&&y.clear(),_}),y=d.cache;return d}function zy(u,d){var y=u[1],_=d[1],E=y|_,A=E<(C|L|W),U=_==W&&y==I||_==W&&y==J&&u[7].length<=d[8]||_==(W|J)&&d[7].length<=d[8]&&y==I;if(!(A||U))return u;_&C&&(u[2]=d[2],E|=y&C?0:O);var X=d[3];if(X){var ie=u[3];u[3]=ie?Up(ie,X,d[4]):X,u[4]=ie?ws(u[3],g):d[4]}return X=d[5],X&&(ie=u[5],u[5]=ie?Md(ie,X,d[6]):X,u[6]=ie?ws(u[5],g):d[6]),X=d[7],X&&(u[7]=X),_&W&&(u[8]=u[8]==null?d[8]:Sn(u[8],d[8])),u[9]==null&&(u[9]=d[9]),u[0]=d[0],u[1]=E,u}function Wy(u){var d=[];if(u!=null)for(var y in Hi(u))d.push(y);return d}function Hy(u){return Dc.call(u)}function Ud(u,d,y){return d=Ar(d===t?u.length-1:d,0),function(){for(var _=arguments,E=-1,A=Ar(_.length-d,0),U=ce(A);++E<A;)U[E]=_[d+E];E=-1;for(var X=ce(d+1);++E<d;)X[E]=_[E];return X[d]=y(U),An(u,this,X)}}function $d(u,d){return d.length<2?u:ss(u,Nn(d,0,-1))}function gn(u,d){for(var y=u.length,_=Sn(d.length,y),E=Wn(u);_--;){var A=d[_];u[_]=Ts(A,y)?E[A]:t}return u}function as(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}var to=rg(qr),Qu=kp||function(u,d){return dr.setTimeout(u,d)},jd=rg(Nd);function Cs(u,d,y){var _=d+"";return jd(u,uv(_,Uy(Jp(_),y)))}function rg(u){var d=0,y=0;return function(){var _=sv(),E=he-(_-y);if(y=_,E>0){if(++d>=ge)return arguments[0]}else d=0;return u.apply(t,arguments)}}function os(u,d){var y=-1,_=u.length,E=_-1;for(d=d===t?_:d;++y<d;){var A=Jc(y,E),U=u[A];u[A]=u[y],u[y]=U}return u.length=d,u}var Gy=ig(function(u){var d=[];return u.charCodeAt(0)===46&&d.push(""),u.replace(xo,function(y,_,E,A){d.push(E?A.replace(Mb,"$1"):_||y)}),d});function Js(u){if(typeof u=="string"||ea(u))return u;var d=u+"";return d=="0"&&1/u==-1/0?"-0":d}function Uo(u){if(u!=null){try{return Mc.call(u)}catch{}try{return u+""}catch{}}return""}function Uy(u,d){return xn(Ie,function(y){var _="_."+y[0];d&y[1]&&!Jh(u,_)&&u.push(_)}),u.sort()}function ng(u){if(u instanceof oi)return u.clone();var d=new kn(u.__wrapped__,u.__chain__);return d.__actions__=Wn(u.__actions__),d.__index__=u.__index__,d.__values__=u.__values__,d}function hv(u,d,y){(y?Mi(u,d,y):d===t)?d=1:d=Ar(pi(d),0);var _=u==null?0:u.length;if(!_||d<1)return[];for(var E=0,A=0,U=ce(El(_/d));E<_;)U[A++]=Nn(u,E,E+=d);return U}function Yd(u){for(var d=-1,y=u==null?0:u.length,_=0,E=[];++d<y;){var A=u[d];A&&(E[_++]=A)}return E}function sg(){var u=arguments.length;if(!u)return[];for(var d=ce(u-1),y=arguments[0],_=u;_--;)d[_-1]=arguments[_];return Co(ui(y)?Wn(y):[y],Yr(d,1))}var Ns=li(function(u,d){return Zr(u)?xa(u,Yr(d,1,Zr,!0)):[]}),Ti=li(function(u,d){var y=Jr(d);return Zr(y)&&(y=t),Zr(u)?xa(u,Yr(d,1,Zr,!0),Nt(y,2)):[]}),on=li(function(u,d){var y=Jr(d);return Zr(y)&&(y=t),Zr(u)?xa(u,Yr(d,1,Zr,!0),t,y):[]});function Vr(u,d,y){var _=u==null?0:u.length;return _?(d=y||d===t?1:pi(d),Nn(u,d<0?0:d,_)):[]}function mn(u,d,y){var _=u==null?0:u.length;return _?(d=y||d===t?1:pi(d),d=_-d,Nn(u,0,d<0?0:d)):[]}function ls(u,d){return u&&u.length?Gu(u,Nt(d,3),!0,!0):[]}function Ju(u,d){return u&&u.length?Gu(u,Nt(d,3),!0):[]}function Qr(u,d,y,_){var E=u==null?0:u.length;return E?(y&&typeof y!="number"&&Mi(u,d,y)&&(y=0,_=E),wd(u,d,y,_)):[]}function Zu(u,d,y){var _=u==null?0:u.length;if(!_)return-1;var E=y==null?0:pi(y);return E<0&&(E=Ar(_+E,0)),Zh(u,Nt(d,3),E)}function $o(u,d,y){var _=u==null?0:u.length;if(!_)return-1;var E=_-1;return y!==t&&(E=pi(y),E=y<0?Ar(_+E,0):Sn(E,_-1)),Zh(u,Nt(d,3),E,!0)}function ch(u){var d=u==null?0:u.length;return d?Yr(u,1):[]}function ag(u){var d=u==null?0:u.length;return d?Yr(u,ue):[]}function hh(u,d){var y=u==null?0:u.length;return y?(d=d===t?1:pi(d),Yr(u,d)):[]}function Jn(u){for(var d=-1,y=u==null?0:u.length,_={};++d<y;){var E=u[d];_[E[0]]=E[1]}return _}function qd(u){return u&&u.length?u[0]:t}function ec(u,d,y){var _=u==null?0:u.length;if(!_)return-1;var E=y==null?0:pi(y);return E<0&&(E=Ar(_+E,0)),_u(u,d,E)}function io(u){var d=u==null?0:u.length;return d?Nn(u,0,-1):[]}var Xd=li(function(u){var d=Zi(u,Id);return d.length&&d[0]===u[0]?Xs(d):[]}),og=li(function(u){var d=Jr(u),y=Zi(u,Id);return d===Jr(y)?d=t:y.pop(),y.length&&y[0]===u[0]?Xs(y,Nt(d,2)):[]}),jo=li(function(u){var d=Jr(u),y=Zi(u,Id);return d=typeof d=="function"?d:t,d&&y.pop(),y.length&&y[0]===u[0]?Xs(y,t,d):[]});function Kd(u,d){return u==null?"":cd.call(u,d)}function Jr(u){var d=u==null?0:u.length;return d?u[d-1]:t}function Qd(u,d,y){var _=u==null?0:u.length;if(!_)return-1;var E=_;return y!==t&&(E=pi(y),E=E<0?Ar(_+E,0):Sn(E,_-1)),d===d?tv(u,d,E):Zh(u,Km,E,!0)}function dh(u,d){return u&&u.length?Wo(u,pi(d)):t}var lg=li(fh);function fh(u,d){return u&&u.length&&d&&d.length?ar(u,d):u}function Jd(u,d,y){return u&&u.length&&d&&d.length?ar(u,d,Nt(y,2)):u}function Gn(u,d,y){return u&&u.length&&d&&d.length?ar(u,d,t,y):u}var Yo=_a(function(u,d){var y=u==null?0:u.length,_=vd(u,d);return Qc(u,Zi(d,function(E){return Ts(E,y)?+E:E}).sort(Gp)),_});function Zs(u,d){var y=[];if(!(u&&u.length))return y;var _=-1,E=[],A=u.length;for(d=Nt(d,3);++_<A;){var U=u[_];d(U,_,u)&&(y.push(U),E.push(_))}return Qc(u,E),y}function Ln(u){return u==null?u:hd.call(u)}function $y(u,d,y){var _=u==null?0:u.length;return _?(y&&typeof y!="number"&&Mi(u,d,y)?(d=0,y=_):(d=d==null?0:pi(d),y=y===t?_:pi(y)),Nn(u,d,y)):[]}function ug(u,d){return Xr(u,d)}function cg(u,d,y){return eh(u,d,Nt(y,2))}function dv(u,d){var y=u==null?0:u.length;if(y){var _=Xr(u,d);if(_<y&&ro(u[_],d))return _}return-1}function qo(u,d){return Xr(u,d,!0)}function jy(u,d,y){return eh(u,d,Nt(y,2),!0)}function hg(u,d){var y=u==null?0:u.length;if(y){var _=Xr(u,d,!0)-1;if(ro(u[_],d))return _}return-1}function Wl(u){return u&&u.length?Pd(u):[]}function dg(u,d){return u&&u.length?Pd(u,Nt(d,2)):[]}function Hl(u){var d=u==null?0:u.length;return d?Nn(u,1,d):[]}function Yy(u,d,y){return u&&u.length?(d=y||d===t?1:pi(d),Nn(u,0,d<0?0:d)):[]}function qy(u,d,y){var _=u==null?0:u.length;return _?(d=y||d===t?1:pi(d),d=_-d,Nn(u,d<0?0:d,_)):[]}function fg(u,d){return u&&u.length?Gu(u,Nt(d,3),!1,!0):[]}function Zd(u,d){return u&&u.length?Gu(u,Nt(d,3)):[]}var fv=li(function(u){return Kr(Yr(u,1,Zr,!0))}),pv=li(function(u){var d=Jr(u);return Zr(d)&&(d=t),Kr(Yr(u,1,Zr,!0),Nt(d,2))}),Xy=li(function(u){var d=Jr(u);return d=typeof d=="function"?d:t,Kr(Yr(u,1,Zr,!0),t,d)});function Ky(u){return u&&u.length?Kr(u):[]}function Gl(u,d){return u&&u.length?Kr(u,Nt(d,2)):[]}function gv(u,d){return d=typeof d=="function"?d:t,u&&u.length?Kr(u,t,d):[]}function Xo(u){if(!(u&&u.length))return[];var d=0;return u=To(u,function(y){if(Zr(y))return d=Ar(y.length,d),!0}),bp(d,function(y){return Zi(u,mp(y))})}function pg(u,d){if(!(u&&u.length))return[];var y=Xo(u);return d==null?y:Zi(y,function(_){return An(d,t,_)})}var xr=li(function(u,d){return Zr(u)?xa(u,d):[]}),mv=li(function(u){return Ld(To(u,Zr))}),Qy=li(function(u){var d=Jr(u);return Zr(d)&&(d=t),Ld(To(u,Zr),Nt(d,2))}),yv=li(function(u){var d=Jr(u);return d=typeof d=="function"?d:t,Ld(To(u,Zr),t,d)}),bv=li(Xo);function Jy(u,d){return Vp(u||[],d||[],Ol)}function Zy(u,d){return Vp(u||[],d||[],gr)}var vv=li(function(u){var d=u.length,y=d>1?u[d-1]:t;return y=typeof y=="function"?(u.pop(),y):t,pg(u,y)});function us(u){var d=M(u);return d.__chain__=!0,d}function gg(u,d){return d(u),u}function ef(u,d){return d(u)}var Ko=_a(function(u){var d=u.length,y=d?u[0]:0,_=this.__wrapped__,E=function(A){return vd(A,u)};return d>1||this.__actions__.length||!(_ instanceof oi)||!Ts(y)?this.thru(E):(_=_.slice(y,+y+(d?1:0)),_.__actions__.push({func:ef,args:[E],thisArg:t}),new kn(_,this.__chain__).thru(function(A){return d&&!A.length&&A.push(t),A}))});function tf(){return us(this)}function Ul(){return new kn(this.value(),this.__chain__)}function rf(){this.__values__===t&&(this.__values__=SS(this.value()));var u=this.__index__>=this.__values__.length,d=u?t:this.__values__[this.__index__++];return{done:u,value:d}}function mg(){return this}function yg(u){for(var d,y=this;y instanceof ya;){var _=ng(y);_.__index__=0,_.__values__=t,d?E.__wrapped__=_:d=_;var E=_;y=y.__wrapped__}return E.__wrapped__=u,d}function wv(){var u=this.__wrapped__;if(u instanceof oi){var d=u;return this.__actions__.length&&(d=new oi(this)),d=d.reverse(),d.__actions__.push({func:ef,args:[Ln],thisArg:t}),new kn(d,this.__chain__)}return this.thru(Ln)}function bg(){return Ap(this.__wrapped__,this.__actions__)}var xv=th(function(u,d,y){Ei.call(u,y)?++u[y]:wa(u,y,1)});function e0(u,d,y){var _=ui(u)?hp:Ys;return y&&Mi(u,d,y)&&(d=t),_(u,Nt(d,3))}function t0(u,d){var y=ui(u)?To:Dl;return y(u,Nt(d,3))}var nf=Ry(Zu),sf=Ry($o);function i0(u,d){return Yr(uf(u,d),1)}function vg(u,d){return Yr(uf(u,d),ue)}function Sv(u,d,y){return y=y===t?1:pi(y),Yr(uf(u,d),y)}function wg(u,d){var y=ui(u)?xn:Sa;return y(u,Nt(d,3))}function af(u,d){var y=ui(u)?Qh:wy;return y(u,Nt(d,3))}var of=th(function(u,d,y){Ei.call(u,y)?u[y].push(d):wa(u,y,[d])});function xg(u,d,y,_){u=Ps(u)?u:ff(u),y=y&&!_?pi(y):0;var E=u.length;return y<0&&(y=Ar(E+y,0)),s0(u)?y<=E&&u.indexOf(d,y)>-1:!!E&&_u(u,d,y)>-1}var lf=li(function(u,d,y){var _=-1,E=typeof d=="function",A=Ps(u)?ce(u.length):[];return Sa(u,function(U){A[++_]=E?An(d,U,y):Ao(U,d,y)}),A}),r0=th(function(u,d,y){wa(u,y,d)});function uf(u,d){var y=ui(u)?Zi:Fp;return y(u,Nt(d,3))}function cf(u,d,y,_){return u==null?[]:(ui(d)||(d=d==null?[]:[d]),y=_?t:y,ui(y)||(y=y==null?[]:[y]),Cd(u,d,y))}var kv=th(function(u,d,y){u[y?0:1].push(d)},function(){return[[],[]]});function ph(u,d,y){var _=ui(u)?fp:Jm,E=arguments.length<3;return _(u,Nt(d,4),y,E,Sa)}function _v(u,d,y){var _=ui(u)?Yb:Jm,E=arguments.length<3;return _(u,Nt(d,4),y,E,wy)}function hf(u,d){var y=ui(u)?To:Dl;return y(u,le(Nt(d,3)))}function a(u){var d=ui(u)?va:Al;return d(u)}function l(u,d,y){(y?Mi(u,d,y):d===t)?d=1:d=pi(d);var _=ui(u)?Fl:pr;return _(u,d)}function f(u){var d=ui(u)?by:Zc;return d(u)}function m(u){if(u==null)return 0;if(Ps(u))return s0(u)?Nl(u):u.length;var d=En(u);return d==At||d==Wt?u.size:Td(u).length}function x(u,d,y){var _=ui(u)?pp:av;return y&&Mi(u,d,y)&&(d=t),_(u,Nt(d,3))}var k=li(function(u,d){if(u==null)return[];var y=d.length;return y>1&&Mi(u,d[0],d[1])?d=[]:y>2&&Mi(d[0],d[1],d[2])&&(d=[d[0]]),Cd(u,Yr(d,1),[])}),R=rr||function(){return dr.Date.now()};function H(u,d){if(typeof d!="function")throw new xs(o);return u=pi(u),function(){if(--u<1)return d.apply(this,arguments)}}function q(u,d,y){return d=y?t:d,d=u&&d==null?u.length:d,ka(u,W,t,t,t,t,d)}function fe(u,d){var y;if(typeof d!="function")throw new xs(o);return u=pi(u),function(){return--u>0&&(y=d.apply(this,arguments)),u<=1&&(d=t),y}}var Me=li(function(u,d,y){var _=C;if(y.length){var E=ws(y,Ho(Me));_|=P}return ka(u,_,d,y,E)}),ze=li(function(u,d,y){var _=C|L;if(y.length){var E=ws(y,Ho(ze));_|=P}return ka(d,_,u,y,E)});function Fe(u,d,y){d=y?t:d;var _=ka(u,I,t,t,t,t,t,d);return _.placeholder=Fe.placeholder,_}function rt(u,d,y){d=y?t:d;var _=ka(u,V,t,t,t,t,t,d);return _.placeholder=rt.placeholder,_}function ht(u,d,y){var _,E,A,U,X,ie,Ne=0,Pe=!1,Ae=!1,tt=!0;if(typeof u!="function")throw new xs(o);d=Ta(d)||0,Lr(y)&&(Pe=!!y.leading,Ae="maxWait"in y,A=Ae?Ar(Ta(y.maxWait)||0,d):A,tt="trailing"in y?!!y.trailing:tt);function St(en){var no=_,Yl=E;return _=E=t,Ne=en,U=u.apply(Yl,no),U}function Gt(en){return Ne=en,X=Qu(wi,d),Pe?St(en):U}function mi(en){var no=en-ie,Yl=en-Ne,OS=d-no;return Ae?Sn(OS,A-Yl):OS}function Ut(en){var no=en-ie,Yl=en-Ne;return ie===t||no>=d||no<0||Ae&&Yl>=A}function wi(){var en=R();if(Ut(en))return Ci(en);X=Qu(wi,mi(en))}function Ci(en){return X=t,tt&&_?St(en):(_=E=t,U)}function ta(){X!==t&&Uu(X),Ne=0,_=ie=E=X=t}function cs(){return X===t?U:Ci(R())}function ia(){var en=R(),no=Ut(en);if(_=arguments,E=this,ie=en,no){if(X===t)return Gt(ie);if(Ae)return Uu(X),X=Qu(wi,d),St(ie)}return X===t&&(X=Qu(wi,d)),U}return ia.cancel=ta,ia.flush=cs,ia}var yt=li(function(u,d){return Np(u,1,d)}),Rr=li(function(u,d,y){return Np(u,Ta(d)||0,y)});function ae(u){return ka(u,re)}function K(u,d){if(typeof u!="function"||d!=null&&typeof d!="function")throw new xs(o);var y=function(){var _=arguments,E=d?d.apply(this,_):_[0],A=y.cache;if(A.has(E))return A.get(E);var U=u.apply(this,_);return y.cache=A.set(E,U)||A,U};return y.cache=new(K.Cache||Ss),y}K.Cache=Ss;function le(u){if(typeof u!="function")throw new xs(o);return function(){var d=arguments;switch(d.length){case 0:return!u.call(this);case 1:return!u.call(this,d[0]);case 2:return!u.call(this,d[0],d[1]);case 3:return!u.call(this,d[0],d[1],d[2])}return!u.apply(this,d)}}function $e(u){return fe(2,u)}var vt=By(function(u,d){d=d.length==1&&ui(d[0])?Zi(d[0],ts(Nt())):Zi(Yr(d,1),ts(Nt()));var y=d.length;return li(function(_){for(var E=-1,A=Sn(_.length,y);++E<A;)_[E]=d[E].call(this,_[E]);return An(u,this,_)})}),Pt=li(function(u,d){var y=ws(d,Ho(Pt));return ka(u,P,t,d,y)}),Rt=li(function(u,d){var y=ws(d,Ho(Rt));return ka(u,G,t,d,y)}),jt=_a(function(u,d){return ka(u,J,t,t,t,d)});function ln(u,d){if(typeof u!="function")throw new xs(o);return d=d===t?d:pi(d),li(u,d)}function Ri(u,d){if(typeof u!="function")throw new xs(o);return d=d==null?0:Ar(pi(d),0),li(function(y){var _=y[d],E=Ja(y,0,d);return _&&Co(E,_),An(u,this,E)})}function Qo(u,d,y){var _=!0,E=!0;if(typeof u!="function")throw new xs(o);return Lr(y)&&(_="leading"in y?!!y.leading:_,E="trailing"in y?!!y.trailing:E),ht(u,d,{leading:_,maxWait:d,trailing:E})}function Bv(u){return q(u,1)}function r2(u,d){return Pt(Fd(d),u)}function n2(){if(!arguments.length)return[];var u=arguments[0];return ui(u)?u:[u]}function s2(u){return Qn(u,S)}function a2(u,d){return d=typeof d=="function"?d:t,Qn(u,S,d)}function o2(u){return Qn(u,b|S)}function l2(u,d){return d=typeof d=="function"?d:t,Qn(u,b|S,d)}function u2(u,d){return d==null||jc(u,d,In(d))}function ro(u,d){return u===d||u!==u&&d!==d}var c2=nh(qs),h2=nh(function(u,d){return u>=d}),gh=Ep(function(){return arguments}())?Ep:function(u){return zr(u)&&Ei.call(u,"callee")&&!od.call(u,"callee")},ui=ce.isArray,d2=up?ts(up):kd;function Ps(u){return u!=null&&n0(u.length)&&!$l(u)}function Zr(u){return zr(u)&&Ps(u)}function f2(u){return u===!0||u===!1||zr(u)&&Cn(u)==Oe}var tc=_p||Mv,p2=Yn?ts(Yn):Sy;function g2(u){return zr(u)&&u.nodeType===1&&!Sg(u)}function m2(u){if(u==null)return!0;if(Ps(u)&&(ui(u)||typeof u=="string"||typeof u.splice=="function"||tc(u)||df(u)||gh(u)))return!u.length;var d=En(u);if(d==At||d==Wt)return!u.size;if(lh(u))return!Td(u).length;for(var y in u)if(Ei.call(u,y))return!1;return!0}function y2(u,d){return Vu(u,d)}function b2(u,d,y){y=typeof y=="function"?y:t;var _=y?y(u,d):t;return _===t?Vu(u,d,t,y):!!_}function Tv(u){if(!zr(u))return!1;var d=Cn(u);return d==pt||d==wt||typeof u.message=="string"&&typeof u.name=="string"&&!Sg(u)}function v2(u){return typeof u=="number"&&Eu(u)}function $l(u){if(!Lr(u))return!1;var d=Cn(u);return d==ei||d==gi||d==Qe||d==Xi}function bS(u){return typeof u=="number"&&u==pi(u)}function n0(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=ne}function Lr(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}function zr(u){return u!=null&&typeof u=="object"}var vS=Cl?ts(Cl):_d;function w2(u,d){return u===d||Bd(u,d,Gd(d))}function x2(u,d,y){return y=typeof y=="function"?y:t,Bd(u,d,Gd(d),y)}function S2(u){return wS(u)&&u!=+u}function k2(u){if(Vy(u))throw new Kt(s);return Lp(u)}function _2(u){return u===null}function B2(u){return u==null}function wS(u){return typeof u=="number"||zr(u)&&Cn(u)==Bi}function Sg(u){if(!zr(u)||Cn(u)!=$t)return!1;var d=$s(u);if(d===null)return!0;var y=Ei.call(d,"constructor")&&d.constructor;return typeof y=="function"&&y instanceof y&&Mc.call(y)==sd}var Cv=Kh?ts(Kh):ky;function T2(u){return bS(u)&&u>=-9007199254740991&&u<=ne}var xS=ku?ts(ku):Ip;function s0(u){return typeof u=="string"||!ui(u)&&zr(u)&&Cn(u)==Li}function ea(u){return typeof u=="symbol"||zr(u)&&Cn(u)==Qi}var df=Ym?ts(Ym):qc;function C2(u){return u===t}function N2(u){return zr(u)&&En(u)==qe}function P2(u){return zr(u)&&Cn(u)==bt}var E2=nh(Vo),R2=nh(function(u,d){return u<=d});function SS(u){if(!u)return[];if(Ps(u))return s0(u)?is(u):Wn(u);if(qa&&u[qa])return Zb(u[qa]());var d=En(u),y=d==At?td:d==Wt?No:ff;return y(u)}function jl(u){if(!u)return u===0?u:0;if(u=Ta(u),u===ue||u===-1/0){var d=u<0?-1:1;return d*Se}return u===u?u:0}function pi(u){var d=jl(u),y=d%1;return d===d?y?d-y:d:0}function kS(u){return u?Ka(pi(u),0,Z):0}function Ta(u){if(typeof u=="number")return u;if(ea(u))return z;if(Lr(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=Lr(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=Zm(u);var y=Db.test(u);return y||Lm.test(u)?qh(u.slice(2),y?2:8):Em.test(u)?z:+u}function _S(u){return Qs(u,Es(u))}function L2(u){return u?Ka(pi(u),-9007199254740991,ne):u===0?u:0}function Gi(u){return u==null?"":wr(u)}var I2=ju(function(u,d){if(lh(d)||Ps(d)){Qs(d,In(d),u);return}for(var y in d)Ei.call(d,y)&&Ol(u,y,d[y])}),BS=ju(function(u,d){Qs(d,Es(d),u)}),a0=ju(function(u,d,y,_){Qs(d,Es(d),u,_)}),F2=ju(function(u,d,y,_){Qs(d,In(d),u,_)}),O2=_a(vd);function M2(u,d){var y=Ou(u);return d==null?y:sr(y,d)}var D2=li(function(u,d){u=Hi(u);var y=-1,_=d.length,E=_>2?d[2]:t;for(E&&Mi(d[0],d[1],E)&&(_=1);++y<_;)for(var A=d[y],U=Es(A),X=-1,ie=U.length;++X<ie;){var Ne=U[X],Pe=u[Ne];(Pe===t||ro(Pe,ga[Ne])&&!Ei.call(u,Ne))&&(u[Ne]=A[Ne])}return u}),A2=li(function(u){return u.push(t,Kp),An(TS,t,u)});function V2(u,d){return Xm(u,Nt(d,3),Bs)}function z2(u,d){return Xm(u,Nt(d,3),Oo)}function W2(u,d){return u==null?u:Yc(u,Nt(d,3),Es)}function H2(u,d){return u==null?u:xd(u,Nt(d,3),Es)}function G2(u,d){return u&&Bs(u,Nt(d,3))}function U2(u,d){return u&&Oo(u,Nt(d,3))}function $2(u){return u==null?[]:zn(u,In(u))}function j2(u){return u==null?[]:zn(u,Es(u))}function Nv(u,d,y){var _=u==null?t:ss(u,d);return _===t?y:_}function Y2(u,d){return u!=null&&Zp(u,d,Mo)}function Pv(u,d){return u!=null&&Zp(u,d,Pp)}var q2=Dd(function(u,d,y){d!=null&&typeof d.toString!="function"&&(d=Dc.call(d)),u[d]=y},Rv(Rs)),X2=Dd(function(u,d,y){d!=null&&typeof d.toString!="function"&&(d=Dc.call(d)),Ei.call(u,d)?u[d].push(y):u[d]=[y]},Nt),K2=li(Ao);function In(u){return Ps(u)?ba(u):Td(u)}function Es(u){return Ps(u)?ba(u,!0):_y(u)}function Q2(u,d){var y={};return d=Nt(d,3),Bs(u,function(_,E,A){wa(y,d(_,E,A),_)}),y}function J2(u,d){var y={};return d=Nt(d,3),Bs(u,function(_,E,A){wa(y,E,d(_,E,A))}),y}var Z2=ju(function(u,d,y){zo(u,d,y)}),TS=ju(function(u,d,y,_){zo(u,d,y,_)}),eN=_a(function(u,d){var y={};if(u==null)return y;var _=!1;d=Zi(d,function(A){return A=Qa(A,u),_||(_=A.length>1),A}),Qs(u,sh(u),y),_&&(y=Qn(y,b|v|S,Fy));for(var E=d.length;E--;)Vl(y,d[E]);return y});function tN(u,d){return CS(u,le(Nt(d)))}var iN=_a(function(u,d){return u==null?{}:Wu(u,d)});function CS(u,d){if(u==null)return{};var y=Zi(sh(u),function(_){return[_]});return d=Nt(d),Op(u,y,function(_,E){return d(_,E[0])})}function rN(u,d,y){d=Qa(d,u);var _=-1,E=d.length;for(E||(E=1,u=t);++_<E;){var A=u==null?t:u[Js(d[_])];A===t&&(_=E,A=y),u=$l(A)?A.call(u):A}return u}function nN(u,d,y){return u==null?u:gr(u,d,y)}function sN(u,d,y,_){return _=typeof _=="function"?_:t,u==null?u:gr(u,d,y,_)}var NS=qp(In),PS=qp(Es);function aN(u,d,y){var _=ui(u),E=_||tc(u)||df(u);if(d=Nt(d,4),y==null){var A=u&&u.constructor;E?y=_?new A:[]:Lr(u)?y=$l(A)?Ou($s(u)):{}:y={}}return(E?xn:Bs)(u,function(U,X,ie){return d(y,U,X,ie)}),y}function oN(u,d){return u==null?!0:Vl(u,d)}function lN(u,d,y){return u==null?u:Rd(u,d,Fd(y))}function uN(u,d,y,_){return _=typeof _=="function"?_:t,u==null?u:Rd(u,d,Fd(y),_)}function ff(u){return u==null?[]:Fc(u,In(u))}function cN(u){return u==null?[]:Fc(u,Es(u))}function hN(u,d,y){return y===t&&(y=d,d=t),y!==t&&(y=Ta(y),y=y===y?y:0),d!==t&&(d=Ta(d),d=d===d?d:0),Ka(Ta(u),d,y)}function dN(u,d,y){return d=jl(d),y===t?(y=d,d=0):y=jl(y),u=Ta(u),xy(u,d,y)}function fN(u,d,y){if(y&&typeof y!="boolean"&&Mi(u,d,y)&&(d=y=t),y===t&&(typeof d=="boolean"?(y=d,d=t):typeof u=="boolean"&&(y=u,u=t)),u===t&&d===t?(u=0,d=1):(u=jl(u),d===t?(d=u,u=0):d=jl(d)),u>d){var _=u;u=d,d=_}if(y||u%1||d%1){var E=Wc();return Sn(u+E*(d-u+op("1e-"+((E+"").length-1))),d)}return Jc(u,d)}var pN=Za(function(u,d,y){return d=d.toLowerCase(),u+(y?ES(d):d)});function ES(u){return Ev(Gi(u).toLowerCase())}function RS(u){return u=Gi(u),u&&u.replace(Fm,iy).replace(Gm,"")}function gN(u,d,y){u=Gi(u),d=wr(d);var _=u.length;y=y===t?_:Ka(pi(y),0,_);var E=y;return y-=d.length,y>=0&&u.slice(y,E)==d}function mN(u){return u=Gi(u),u&&Vh.test(u)?u.replace(jr,ry):u}function yN(u){return u=Gi(u),u&&xl.test(u)?u.replace(wl,"\\$&"):u}var bN=Za(function(u,d,y){return u+(y?"-":"")+d.toLowerCase()}),vN=Za(function(u,d,y){return u+(y?" ":"")+d.toLowerCase()}),wN=jp("toLowerCase");function xN(u,d,y){u=Gi(u),d=pi(d);var _=d?Nl(u):0;if(!d||_>=d)return u;var E=(d-_)/2;return rh(Po(E),y)+u+rh(El(E),y)}function SN(u,d,y){u=Gi(u),d=pi(d);var _=d?Nl(u):0;return d&&_<d?u+rh(d-_,y):u}function kN(u,d,y){u=Gi(u),d=pi(d);var _=d?Nl(u):0;return d&&_<d?rh(d-_,y)+u:u}function _N(u,d,y){return y||d==null?d=0:d&&(d=+d),dy(Gi(u).replace(Tc,""),d||0)}function BN(u,d,y){return(y?Mi(u,d,y):d===t)?d=1:d=pi(d),Hu(Gi(u),d)}function TN(){var u=arguments,d=Gi(u[0]);return u.length<3?d:d.replace(u[1],u[2])}var CN=Za(function(u,d,y){return u+(y?"_":"")+d.toLowerCase()});function NN(u,d,y){return y&&typeof y!="number"&&Mi(u,d,y)&&(d=y=t),y=y===t?Z:y>>>0,y?(u=Gi(u),u&&(typeof d=="string"||d!=null&&!Cv(d))&&(d=wr(d),!d&&Tu(u))?Ja(is(u),0,y):u.split(d,y)):[]}var PN=Za(function(u,d,y){return u+(y?" ":"")+Ev(d)});function EN(u,d,y){return u=Gi(u),y=y==null?0:Ka(pi(y),0,u.length),d=wr(d),u.slice(y,y+d.length)==d}function RN(u,d,y){var _=M.templateSettings;y&&Mi(u,d,y)&&(d=t),u=Gi(u),d=a0({},d,_,Xp);var E=a0({},d.imports,_.imports,Xp),A=In(E),U=Fc(E,A),X,ie,Ne=0,Pe=d.interpolate||zh,Ae="__p += '",tt=Oc((d.escape||zh).source+"|"+Pe.source+"|"+(Pe===gu?kl:zh).source+"|"+(d.evaluate||zh).source+"|$","g"),St="//# sourceURL="+(Ei.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ub+"]")+`
`;u.replace(tt,function(Ut,wi,Ci,ta,cs,ia){return Ci||(Ci=ta),Ae+=u.slice(Ne,ia).replace(Ab,ny),wi&&(X=!0,Ae+=`' +
__e(`+wi+`) +
'`),cs&&(ie=!0,Ae+=`';
`+cs+`;
__p += '`),Ci&&(Ae+=`' +
((__t = (`+Ci+`)) == null ? '' : __t) +
'`),Ne=ia+Ut.length,Ut}),Ae+=`';
`;var Gt=Ei.call(d,"variable")&&d.variable;if(!Gt)Ae=`with (obj) {
`+Ae+`
}
`;else if(Ob.test(Gt))throw new Kt(c);Ae=(ie?Ae.replace(vl,""):Ae).replace(_c,"$1").replace(Ua,"$1;"),Ae="function("+(Gt||"obj")+`) {
`+(Gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ae+`return __p
}`;var mi=IS(function(){return Pi(A,St+"return "+Ae).apply(t,U)});if(mi.source=Ae,Tv(mi))throw mi;return mi}function LN(u){return Gi(u).toLowerCase()}function IN(u){return Gi(u).toUpperCase()}function FN(u,d,y){if(u=Gi(u),u&&(y||d===t))return Zm(u);if(!u||!(d=wr(d)))return u;var _=is(u),E=is(d),A=ey(_,E),U=vp(_,E)+1;return Ja(_,A,U).join("")}function ON(u,d,y){if(u=Gi(u),u&&(y||d===t))return u.slice(0,rd(u)+1);if(!u||!(d=wr(d)))return u;var _=is(u),E=vp(_,is(d))+1;return Ja(_,0,E).join("")}function MN(u,d,y){if(u=Gi(u),u&&(y||d===t))return u.replace(Tc,"");if(!u||!(d=wr(d)))return u;var _=is(u),E=ey(_,is(d));return Ja(_,E).join("")}function DN(u,d){var y=j,_=oe;if(Lr(d)){var E="separator"in d?d.separator:E;y="length"in d?pi(d.length):y,_="omission"in d?wr(d.omission):_}u=Gi(u);var A=u.length;if(Tu(u)){var U=is(u);A=U.length}if(y>=A)return u;var X=y-Nl(_);if(X<1)return _;var ie=U?Ja(U,0,X).join(""):u.slice(0,X);if(E===t)return ie+_;if(U&&(X+=ie.length-X),Cv(E)){if(u.slice(X).search(E)){var Ne,Pe=ie;for(E.global||(E=Oc(E.source,Gi(ep.exec(E))+"g")),E.lastIndex=0;Ne=E.exec(Pe);)var Ae=Ne.index;ie=ie.slice(0,Ae===t?X:Ae)}}else if(u.indexOf(wr(E),X)!=X){var tt=ie.lastIndexOf(E);tt>-1&&(ie=ie.slice(0,tt))}return ie+_}function AN(u){return u=Gi(u),u&&vo.test(u)?u.replace(Gs,sy):u}var VN=Za(function(u,d,y){return u+(y?" ":"")+d.toUpperCase()}),Ev=jp("toUpperCase");function LS(u,d,y){return u=Gi(u),d=y?t:d,d===t?Jb(u)?iv(u):Xb(u):u.match(d)||[]}var IS=li(function(u,d){try{return An(u,t,d)}catch(y){return Tv(y)?y:new Kt(y)}}),zN=_a(function(u,d){return xn(d,function(y){y=Js(y),wa(u,y,Me(u[y],u))}),u});function WN(u){var d=u==null?0:u.length,y=Nt();return u=d?Zi(u,function(_){if(typeof _[1]!="function")throw new xs(o);return[y(_[0]),_[1]]}):[],li(function(_){for(var E=-1;++E<d;){var A=u[E];if(An(A[0],this,_))return An(A[1],this,_)}})}function HN(u){return vy(Qn(u,b))}function Rv(u){return function(){return u}}function GN(u,d){return u==null||u!==u?d:u}var UN=zl(),$N=zl(!0);function Rs(u){return u}function Lv(u){return Xc(typeof u=="function"?u:Qn(u,b))}function jN(u){return zu(Qn(u,b))}function YN(u,d){return Ks(u,Qn(d,b))}var qN=li(function(u,d){return function(y){return Ao(y,u,d)}}),XN=li(function(u,d){return function(y){return Ao(u,y,d)}});function Iv(u,d,y){var _=In(d),E=zn(d,_);y==null&&!(Lr(d)&&(E.length||!_.length))&&(y=d,d=u,u=this,E=zn(d,In(d)));var A=!(Lr(y)&&"chain"in y)||!!y.chain,U=$l(u);return xn(E,function(X){var ie=d[X];u[X]=ie,U&&(u.prototype[X]=function(){var Ne=this.__chain__;if(A||Ne){var Pe=u(this.__wrapped__),Ae=Pe.__actions__=Wn(this.__actions__);return Ae.push({func:ie,args:arguments,thisArg:u}),Pe.__chain__=Ne,Pe}return ie.apply(u,Co([this.value()],arguments))})}),u}function KN(){return dr._===this&&(dr._=ly),this}function Fv(){}function QN(u){return u=pi(u),li(function(d){return Wo(d,u)})}var JN=Vd(Zi),ZN=Vd(hp),eP=Vd(pp);function FS(u){return eg(u)?mp(Js(u)):Mp(u)}function tP(u){return function(d){return u==null?t:ss(u,d)}}var iP=Yp(),rP=Yp(!0);function Ov(){return[]}function Mv(){return!1}function nP(){return{}}function sP(){return""}function aP(){return!0}function oP(u,d){if(u=pi(u),u<1||u>ne)return[];var y=Z,_=Sn(u,Z);d=Nt(d),u-=Z;for(var E=bp(_,d);++y<u;)d(y);return E}function lP(u){return ui(u)?Zi(u,Js):ea(u)?[u]:Wn(Gy(Gi(u)))}function uP(u){var d=++Pu;return Gi(u)+d}var cP=Ad(function(u,d){return u+d},0),hP=Pn("ceil"),dP=Ad(function(u,d){return u/d},1),fP=Pn("floor");function pP(u){return u&&u.length?Ml(u,Rs,qs):t}function gP(u,d){return u&&u.length?Ml(u,Nt(d,2),qs):t}function mP(u){return Qm(u,Rs)}function yP(u,d){return Qm(u,Nt(d,2))}function bP(u){return u&&u.length?Ml(u,Rs,Vo):t}function vP(u,d){return u&&u.length?Ml(u,Nt(d,2),Vo):t}var wP=Ad(function(u,d){return u*d},1),xP=Pn("round"),SP=Ad(function(u,d){return u-d},0);function kP(u){return u&&u.length?yp(u,Rs):0}function _P(u,d){return u&&u.length?yp(u,Nt(d,2)):0}return M.after=H,M.ary=q,M.assign=I2,M.assignIn=BS,M.assignInWith=a0,M.assignWith=F2,M.at=O2,M.before=fe,M.bind=Me,M.bindAll=zN,M.bindKey=ze,M.castArray=n2,M.chain=us,M.chunk=hv,M.compact=Yd,M.concat=sg,M.cond=WN,M.conforms=HN,M.constant=Rv,M.countBy=xv,M.create=M2,M.curry=Fe,M.curryRight=rt,M.debounce=ht,M.defaults=D2,M.defaultsDeep=A2,M.defer=yt,M.delay=Rr,M.difference=Ns,M.differenceBy=Ti,M.differenceWith=on,M.drop=Vr,M.dropRight=mn,M.dropRightWhile=ls,M.dropWhile=Ju,M.fill=Qr,M.filter=t0,M.flatMap=i0,M.flatMapDeep=vg,M.flatMapDepth=Sv,M.flatten=ch,M.flattenDeep=ag,M.flattenDepth=hh,M.flip=ae,M.flow=UN,M.flowRight=$N,M.fromPairs=Jn,M.functions=$2,M.functionsIn=j2,M.groupBy=of,M.initial=io,M.intersection=Xd,M.intersectionBy=og,M.intersectionWith=jo,M.invert=q2,M.invertBy=X2,M.invokeMap=lf,M.iteratee=Lv,M.keyBy=r0,M.keys=In,M.keysIn=Es,M.map=uf,M.mapKeys=Q2,M.mapValues=J2,M.matches=jN,M.matchesProperty=YN,M.memoize=K,M.merge=Z2,M.mergeWith=TS,M.method=qN,M.methodOf=XN,M.mixin=Iv,M.negate=le,M.nthArg=QN,M.omit=eN,M.omitBy=tN,M.once=$e,M.orderBy=cf,M.over=JN,M.overArgs=vt,M.overEvery=ZN,M.overSome=eP,M.partial=Pt,M.partialRight=Rt,M.partition=kv,M.pick=iN,M.pickBy=CS,M.property=FS,M.propertyOf=tP,M.pull=lg,M.pullAll=fh,M.pullAllBy=Jd,M.pullAllWith=Gn,M.pullAt=Yo,M.range=iP,M.rangeRight=rP,M.rearg=jt,M.reject=hf,M.remove=Zs,M.rest=ln,M.reverse=Ln,M.sampleSize=l,M.set=nN,M.setWith=sN,M.shuffle=f,M.slice=$y,M.sortBy=k,M.sortedUniq=Wl,M.sortedUniqBy=dg,M.split=NN,M.spread=Ri,M.tail=Hl,M.take=Yy,M.takeRight=qy,M.takeRightWhile=fg,M.takeWhile=Zd,M.tap=gg,M.throttle=Qo,M.thru=ef,M.toArray=SS,M.toPairs=NS,M.toPairsIn=PS,M.toPath=lP,M.toPlainObject=_S,M.transform=aN,M.unary=Bv,M.union=fv,M.unionBy=pv,M.unionWith=Xy,M.uniq=Ky,M.uniqBy=Gl,M.uniqWith=gv,M.unset=oN,M.unzip=Xo,M.unzipWith=pg,M.update=lN,M.updateWith=uN,M.values=ff,M.valuesIn=cN,M.without=xr,M.words=LS,M.wrap=r2,M.xor=mv,M.xorBy=Qy,M.xorWith=yv,M.zip=bv,M.zipObject=Jy,M.zipObjectDeep=Zy,M.zipWith=vv,M.entries=NS,M.entriesIn=PS,M.extend=BS,M.extendWith=a0,Iv(M,M),M.add=cP,M.attempt=IS,M.camelCase=pN,M.capitalize=ES,M.ceil=hP,M.clamp=hN,M.clone=s2,M.cloneDeep=o2,M.cloneDeepWith=l2,M.cloneWith=a2,M.conformsTo=u2,M.deburr=RS,M.defaultTo=GN,M.divide=dP,M.endsWith=gN,M.eq=ro,M.escape=mN,M.escapeRegExp=yN,M.every=e0,M.find=nf,M.findIndex=Zu,M.findKey=V2,M.findLast=sf,M.findLastIndex=$o,M.findLastKey=z2,M.floor=fP,M.forEach=wg,M.forEachRight=af,M.forIn=W2,M.forInRight=H2,M.forOwn=G2,M.forOwnRight=U2,M.get=Nv,M.gt=c2,M.gte=h2,M.has=Y2,M.hasIn=Pv,M.head=qd,M.identity=Rs,M.includes=xg,M.indexOf=ec,M.inRange=dN,M.invoke=K2,M.isArguments=gh,M.isArray=ui,M.isArrayBuffer=d2,M.isArrayLike=Ps,M.isArrayLikeObject=Zr,M.isBoolean=f2,M.isBuffer=tc,M.isDate=p2,M.isElement=g2,M.isEmpty=m2,M.isEqual=y2,M.isEqualWith=b2,M.isError=Tv,M.isFinite=v2,M.isFunction=$l,M.isInteger=bS,M.isLength=n0,M.isMap=vS,M.isMatch=w2,M.isMatchWith=x2,M.isNaN=S2,M.isNative=k2,M.isNil=B2,M.isNull=_2,M.isNumber=wS,M.isObject=Lr,M.isObjectLike=zr,M.isPlainObject=Sg,M.isRegExp=Cv,M.isSafeInteger=T2,M.isSet=xS,M.isString=s0,M.isSymbol=ea,M.isTypedArray=df,M.isUndefined=C2,M.isWeakMap=N2,M.isWeakSet=P2,M.join=Kd,M.kebabCase=bN,M.last=Jr,M.lastIndexOf=Qd,M.lowerCase=vN,M.lowerFirst=wN,M.lt=E2,M.lte=R2,M.max=pP,M.maxBy=gP,M.mean=mP,M.meanBy=yP,M.min=bP,M.minBy=vP,M.stubArray=Ov,M.stubFalse=Mv,M.stubObject=nP,M.stubString=sP,M.stubTrue=aP,M.multiply=wP,M.nth=dh,M.noConflict=KN,M.noop=Fv,M.now=R,M.pad=xN,M.padEnd=SN,M.padStart=kN,M.parseInt=_N,M.random=fN,M.reduce=ph,M.reduceRight=_v,M.repeat=BN,M.replace=TN,M.result=rN,M.round=xP,M.runInContext=ee,M.sample=a,M.size=m,M.snakeCase=CN,M.some=x,M.sortedIndex=ug,M.sortedIndexBy=cg,M.sortedIndexOf=dv,M.sortedLastIndex=qo,M.sortedLastIndexBy=jy,M.sortedLastIndexOf=hg,M.startCase=PN,M.startsWith=EN,M.subtract=SP,M.sum=kP,M.sumBy=_P,M.template=RN,M.times=oP,M.toFinite=jl,M.toInteger=pi,M.toLength=kS,M.toLower=LN,M.toNumber=Ta,M.toSafeInteger=L2,M.toString=Gi,M.toUpper=IN,M.trim=FN,M.trimEnd=ON,M.trimStart=MN,M.truncate=DN,M.unescape=AN,M.uniqueId=uP,M.upperCase=VN,M.upperFirst=Ev,M.each=wg,M.eachRight=af,M.first=qd,Iv(M,function(){var u={};return Bs(M,function(d,y){Ei.call(M.prototype,y)||(u[y]=d)}),u}(),{chain:!1}),M.VERSION=i,xn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){M[u].placeholder=M}),xn(["drop","take"],function(u,d){oi.prototype[u]=function(y){y=y===t?1:Ar(pi(y),0);var _=this.__filtered__&&!d?new oi(this):this.clone();return _.__filtered__?_.__takeCount__=Sn(y,_.__takeCount__):_.__views__.push({size:Sn(y,Z),type:u+(_.__dir__<0?"Right":"")}),_},oi.prototype[u+"Right"]=function(y){return this.reverse()[u](y).reverse()}}),xn(["filter","map","takeWhile"],function(u,d){var y=d+1,_=y==ve||y==te;oi.prototype[u]=function(E){var A=this.clone();return A.__iteratees__.push({iteratee:Nt(E,3),type:y}),A.__filtered__=A.__filtered__||_,A}}),xn(["head","last"],function(u,d){var y="take"+(d?"Right":"");oi.prototype[u]=function(){return this[y](1).value()[0]}}),xn(["initial","tail"],function(u,d){var y="drop"+(d?"":"Right");oi.prototype[u]=function(){return this.__filtered__?new oi(this):this[y](1)}}),oi.prototype.compact=function(){return this.filter(Rs)},oi.prototype.find=function(u){return this.filter(u).head()},oi.prototype.findLast=function(u){return this.reverse().find(u)},oi.prototype.invokeMap=li(function(u,d){return typeof u=="function"?new oi(this):this.map(function(y){return Ao(y,u,d)})}),oi.prototype.reject=function(u){return this.filter(le(Nt(u)))},oi.prototype.slice=function(u,d){u=pi(u);var y=this;return y.__filtered__&&(u>0||d<0)?new oi(y):(u<0?y=y.takeRight(-u):u&&(y=y.drop(u)),d!==t&&(d=pi(d),y=d<0?y.dropRight(-d):y.take(d-u)),y)},oi.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},oi.prototype.toArray=function(){return this.take(Z)},Bs(oi.prototype,function(u,d){var y=/^(?:filter|find|map|reject)|While$/.test(d),_=/^(?:head|last)$/.test(d),E=M[_?"take"+(d=="last"?"Right":""):d],A=_||/^find/.test(d);E&&(M.prototype[d]=function(){var U=this.__wrapped__,X=_?[1]:arguments,ie=U instanceof oi,Ne=X[0],Pe=ie||ui(U),Ae=function(wi){var Ci=E.apply(M,Co([wi],X));return _&&tt?Ci[0]:Ci};Pe&&y&&typeof Ne=="function"&&Ne.length!=1&&(ie=Pe=!1);var tt=this.__chain__,St=!!this.__actions__.length,Gt=A&&!tt,mi=ie&&!St;if(!A&&Pe){U=mi?U:new oi(this);var Ut=u.apply(U,X);return Ut.__actions__.push({func:ef,args:[Ae],thisArg:t}),new kn(Ut,tt)}return Gt&&mi?u.apply(this,X):(Ut=this.thru(Ae),Gt?_?Ut.value()[0]:Ut.value():Ut)})}),xn(["pop","push","shift","sort","splice","unshift"],function(u){var d=ja[u],y=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",_=/^(?:pop|shift)$/.test(u);M.prototype[u]=function(){var E=arguments;if(_&&!this.__chain__){var A=this.value();return d.apply(ui(A)?A:[],E)}return this[y](function(U){return d.apply(ui(U)?U:[],E)})}}),Bs(oi.prototype,function(u,d){var y=M[d];if(y){var _=y.name+"";Ei.call(Iu,_)||(Iu[_]=[]),Iu[_].push({name:d,func:y})}}),Iu[Yu(t,L).name]=[{name:"wrapper",func:t}],oi.prototype.clone=pd,oi.prototype.reverse=Tp,oi.prototype.value=Mu,M.prototype.at=Ko,M.prototype.chain=tf,M.prototype.commit=Ul,M.prototype.next=rf,M.prototype.plant=yg,M.prototype.reverse=wv,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=bg,M.prototype.first=M.prototype.head,qa&&(M.prototype[qa]=mg),M},Cu=rv();pa?((pa.exports=Cu)._=Cu,Ic._=Cu):dr._=Cu}).call(PV)}(Wg,Wg.exports)),Wg.exports}var qw=EV();function RV({fret:r,string:e,isSelected:t,noteClick:i}){const n=es(),s="20px",o=fc("div")({opacity:t?"1 !important":"0",cursor:"pointer",width:s,height:s,backgroundColor:n.palette.text.primary,gridColumnStart:1+e*2,gridRowStart:2+(r-1)*2,borderRadius:"50%",placeSelf:"center","&:focus":{opacity:"0.5"},"&:hover":{opacity:"0.5"}});return w.jsx(o,{id:`fret-${r}-string-${e}`,"aria-label":`fret ${r} string ${e}`,onClick:()=>i(r,e),role:"button",tabIndex:0})}function LV({numberOfFrets:r,numberOfStrings:e,strings:t,noteClick:i}){const n=es(),s="5px",o="5px";return w.jsx("div",{style:{position:"absolute",display:"grid",gridTemplateRows:`repeat(${r-1}, ${o} 1fr) ${o}`,gridTemplateColumns:`repeat(${e-1}, ${s} 1fr) ${s}`,backgroundColor:n.palette.text.primary,width:"100%",top:"0",height:"100%"},children:qw.range(1,r).map((c,h)=>qw.range(e).map((p,g)=>w.jsxs(Mn.Fragment,{children:[w.jsx("div",{style:{backgroundColor:n.palette.mode==="dark"?"rgb(56 56 56)":"white",gridColumnStart:2+g*2,gridRowStart:2+h*2}}),w.jsx(RV,{fret:c,string:g,isSelected:t[g]===c,noteClick:i},`${h+1}-${g+1}`)]},`${c}-${p}`)))})}function IV(){const r=es();return w.jsx("div",{"aria-hidden":"true",style:{position:"absolute",backgroundColor:r.palette.text.primary,left:"-12px",width:"calc(100% + 24px)",height:"8px",zIndex:"99"}})}function FV({numberOfStrings:r,strings:e,noteClick:t}){const i=n=>n===-1?"X":n===0?"O":"";return w.jsx("div",{style:{display:"flex",justifyContent:"space-between",maxWidth:"100%",marginRight:"12px",marginLeft:"12px"},children:qw.range(r).map(n=>w.jsx("div",{style:{width:"20px",fontSize:"28px",cursor:"pointer"},onClick:()=>{e[n]===0?t(-1,n):t(0,n)},children:i(e[n])},n))})}const OV=-1;function MV(r){const e=(t,i)=>{const n=[...r.strings];n[i]===t?n[i]=OV:n[i]=t,r.setStrings(n)};return w.jsxs(w.Fragment,{children:[w.jsx(FV,{noteClick:e,numberOfStrings:r.numberOfStrings,strings:r.strings}),w.jsxs("div",{style:{position:"relative",width:"85%",height:"300px",margin:"auto"},children:[w.jsx(NV,{setFirstFret:r.setFirstFret,firstFret:r.firstFret}),w.jsx(IV,{}),w.jsx(LV,{noteClick:e,numberOfFrets:r.numberOfFrets,numberOfStrings:r.numberOfStrings,strings:r.strings})]})]})}const dC=-1,DV=6;function sw(r){return Array(r).fill(dC)}function AV(r){var g;const[e,t]=F.useState(1),[i,n]=F.useState(((g=r.chord)==null?void 0:g.name)??""),[s,o]=F.useState(sw(r.numberOfStrings)),c=b=>{n(b.target.value)},{t:h}=Tt();F.useEffect(()=>{o(sw(r.numberOfStrings))},[r.numberOfStrings]),F.useEffect(()=>{var b,v;n(((b=r.chord)==null?void 0:b.name)??""),t(((v=r.chord)==null?void 0:v.firstFret)??1),o(r.chord?[...r.chord.strings].reverse():sw(r.numberOfStrings))},[r.chord]);const p=()=>{const b=new alphaTab.model.Chord;b.name=i,b.showDiagram=!0,b.showFingering=!0,b.showName=!0,b.firstFret=e,b.strings=s.map(v=>v===0||v===dC?v:v+e-1).reverse(),r.onSave(b)};return w.jsxs(Oh,{open:r.isOpen,onClose:r.onClose,children:[w.jsxs(Mh,{children:[w.jsx(Ea,{id:"chord-name",label:h("Chord Name"),autoFocus:!0,type:"text",value:i,onChange:c}),w.jsx("div",{"aria-label":"Chord grid",style:{position:"relative",marginTop:"30px"},children:w.jsx(MV,{firstFret:e,setFirstFret:t,numberOfFrets:DV,numberOfStrings:r.numberOfStrings,setStrings:o,strings:s})})]}),w.jsx(_m,{children:w.jsx(au,{disabled:i.length===0,id:"chord-save",onClick:p,title:h("Save"),children:h("Save")})})]})}function VV(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Keyboard Shortcuts"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",fill:e,onClick:r.onClick,style:ut(r),children:[w.jsx("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"}),w.jsx("path",{d:"M0 0h24v24H0zm0 0h24v24H0z",fill:"none"})]})})}function zV(r){return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#ffffff",style:ut(r),children:[w.jsx("rect",{fill:"none",height:"24",width:"24"}),w.jsx("path",{d:"M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"})]})}function WV(r){return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:r.onClick,enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",style:ut(r),children:[w.jsx("rect",{fill:"none",height:"24",width:"24"}),w.jsx("path",{d:"M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"})]})}function HV(r){const e=es(),{t}=Tt();return w.jsx(xt,{title:t("Dark mode"),children:e.palette.mode==="dark"?zV(r):WV(r)})}function GV(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:r.hideTooltip?"":t("Language"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",onClick:r.onClick,width:"24px",style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"})]})})}const UV=[["set_fret","set_fret_shortcut"],["remove_note","remove_note_shortcut"],["undo","undo_shortcut"],["redo","redo_shortcut"],["move_cursor_left","move_cursor_left_shortcut"],["move_cursor_right","move_cursor_right_shortcut"],["move_cursor_up","move_cursor_up_shortcut"],["move_cursor_down","move_cursor_down_shortcut"],["move_cursor_next_bar","move_cursor_next_bar_shortcut"],["move_cursor_previous_bar","move_cursor_previous_bar_shortcut"]];function $V(r){const{t:e}=Tt(void 0,{keyPrefix:"shortcuts"});return w.jsxs(Oh,{open:r.isOpen,onClose:r.onClose,children:[w.jsx(qf,{children:e("title")}),w.jsx(Mh,{className:"score-info-content",children:w.jsx(lT,{component:Uf,children:w.jsx(aT,{size:"small",children:w.jsx(oT,{children:UV.map(([t,i])=>w.jsxs(uT,{children:[w.jsx(tb,{children:e(t)}),w.jsx(tb,{children:e(i)})]},t))})})})})]})}function jV(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Help"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",style:ut(r),onClick:r.onClick,fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"})]})})}function k0({src:r}){return w.jsx("video",{autoPlay:!0,loop:!0,width:"220",children:w.jsx("source",{src:r})})}function YV(){const{t:r}=Tt();return w.jsxs(w.Fragment,{children:[w.jsx(ps,{variant:"h6",children:r("Getting started")}),w.jsx("p",{children:r("help.basic.mouse_select")}),w.jsx(k0,{src:"videos/mouse-select.webm"}),w.jsx("p",{children:r("help.basic.arrow_keys")}),w.jsx(k0,{src:"videos/arrow-keys.webm"}),w.jsx("p",{children:r("help.basic.create_note")}),w.jsx(k0,{src:"videos/create-note.webm"}),w.jsx("p",{children:r("help.basic.delete")}),w.jsx(k0,{src:"videos/delete-note.webm"})]})}function Xl({rows:r}){return w.jsx(lT,{component:Uf,children:w.jsx(aT,{size:"small",children:w.jsx(oT,{children:r.map(([e,t])=>w.jsxs(uT,{children:[w.jsx(tb,{align:"center",children:w.jsx(e,{disabled:!1,selected:!1})}),w.jsx(tb,{children:t})]},t))})})})}function qV(){const{t:r}=Tt(),e=[[cC,r("help.document.new")],[nC,r("help.document.open")],[sC,r("help.document.info")],[aC,r("help.document.undo")],[oC,r("help.document.redo")],[lC,r("help.document.print")],[uC,r("help.document.export")],[hC,r("help.document.tempo")]];return w.jsxs(w.Fragment,{children:[w.jsx(ps,{variant:"h6",children:r("Document")}),w.jsx(Xl,{rows:e})]})}function XV(){const{t:r}=Tt(),e=[[gT,r("help.dynamic.ppp")],[mT,r("help.dynamic.pp")],[yT,r("help.dynamic.p")],[bT,r("help.dynamic.mp")],[xT,r("help.dynamic.mf")],[vT,r("help.dynamic.f")],[wT,r("help.dynamic.ff")],[ST,r("help.dynamic.fff")]];return w.jsxs(w.Fragment,{children:[w.jsx(ps,{variant:"h6",children:r("How strong the note should be played")}),w.jsx(Xl,{rows:e})]})}function KV(){const{t:r}=Tt(),e=[[kT,"1/1"],[_T,"1/2"],[BT,"1/4"],[TT,"1/8"],[CT,"1/16"],[NT,"1/32"],[PT,"1/64"],[ET,r("help.duration.tie")]];return w.jsxs(w.Fragment,{children:[w.jsx(ps,{variant:"h6",children:r("How long the note should be played")}),w.jsx(Xl,{rows:e})]})}function QV(){const{t:r}=Tt(),e=[[RT,r("help.beat.text")],[FT,r("help.beat.fermata")],[LT,r("help.beat.upstroke")],[IT,r("help.beat.downstroke")],[MT,r("help.beat.open_repeat")],[OT,r("help.beat.close_repeat")]];return w.jsxs(w.Fragment,{children:[w.jsx(ps,{variant:"h6",children:r("Beat")}),w.jsx(Xl,{rows:e})]})}function JV(r){const{t:e}=Tt();return w.jsx(kc,{...r,title:e("Harmonic"),children:"H."})}function ZV(){const{t:r}=Tt(void 0,{keyPrefix:"help"}),{t:e}=Tt(),t=[[DT,r("effects.palm_mute")],[GT,r("effects.let_ring")],[AT,r("effects.ghost_note")],[VT,r("effects.dead_note")],[zT,r("effects.tap")],[WT,r("effects.hammer_pull")],[HT,r("effects.staccato")]],i=[[JV,r("harmonic.main")],[UT,r("harmonic.natural")],[$T,r("harmonic.artificial")],[jT,r("harmonic.pinch")],[YT,r("harmonic.tap")],[qT,r("harmonic.semi")],[XT,r("harmonic.feedback")]],n=[[iC,r("effects.accentuated")],[rC,r("effects.accentuated_heavy")]],s=[[eC,r("effects.bend_pre")],[ZT,r("effects.bend")],[tC,r("effects.bend_release")]],o=[[QT,r("effects.slide_in")],[KT,r("effects.slide")],[JT,r("effects.slide_out")]];return w.jsxs(w.Fragment,{children:[w.jsx(ps,{variant:"h6",children:e("Effects")}),w.jsx(Xl,{rows:t}),w.jsx(ps,{variant:"h6",children:e("Harmonics")}),w.jsx(Xl,{rows:i}),w.jsx(ps,{variant:"h6",children:e("Bends")}),w.jsx(Xl,{rows:s}),w.jsx(ps,{variant:"h6",children:e("Accentuation")}),w.jsx(Xl,{rows:n}),w.jsx(ps,{variant:"h6",children:e("Slides")}),w.jsx(Xl,{rows:o})]})}const ez=fc(Mh)({display:"flex",overflowY:"hidden",height:"600px",width:"600px"}),tz=fc("div")({overflowY:"auto",padding:"12px",width:"100%"});function iz(r){const{t:e}=Tt(),[t,i]=F.useState("Basics"),n=["Basics","Document","Effects","Beat","Duration","Dynamics"];return w.jsxs(Oh,{className:"score-info",maxWidth:!1,open:r.isOpen,onClose:r.onClose,children:[w.jsx(qf,{children:e("Help")}),w.jsxs(ez,{children:[w.jsx(Yx,{children:n.map(s=>w.jsx(ZB,{disablePadding:!0,children:w.jsx(QB,{onClick:()=>i(s),selected:s===t,children:w.jsx(eT,{primary:e(s)})})},s))}),w.jsxs(tz,{children:[t==="Basics"&&w.jsx(YV,{}),t==="Document"&&w.jsx(qV,{}),t==="Dynamics"&&w.jsx(XV,{}),t==="Duration"&&w.jsx(KV,{}),t==="Beat"&&w.jsx(QV,{}),t==="Effects"&&w.jsx(ZV,{})]})]})]})}function Hk({language:r,onClick:e,isSelected:t}){const i=lt({disabled:!1,selected:t});return w.jsx(Zo,{selected:t,onClick:e,children:w.jsx("span",{style:{color:i},children:r})})}function rz(){const{openDialog:r,closeDialog:e,isDialogOpen:t}=Sh(),{openDialog:i,closeDialog:n,isDialogOpen:s}=Sh(),{i18n:o}=Tt(),c=Mn.useContext(cT),[h,p]=Kf(),g=v=>{p(h?null:v)},b=v=>{o.changeLanguage(v),p(null)};return w.jsxs(w.Fragment,{children:[w.jsx($V,{isOpen:t,onClose:e}),w.jsx(iz,{isOpen:s,onClose:n}),w.jsx(VV,{disabled:!1,selected:!1,onClick:()=>{r()}}),w.jsx(HV,{disabled:!1,selected:!1,onClick:()=>{c.toggleColorMode()}}),w.jsx(GV,{hideTooltip:h!==null,disabled:!1,selected:!1,onClick:g}),w.jsx(jV,{disabled:!1,selected:!1,onClick:i}),h&&w.jsxs(iT,{open:!0,onClose:()=>p(null),anchorEl:h,children:[w.jsx(Hk,{language:"Portugus",isSelected:o.language==="pt",onClick:()=>b("pt")}),w.jsx(Hk,{language:"Ingls",isSelected:o.language==="en",onClick:()=>b("en")})]})]})}function nz(r){var re,j,oe,ge;const[e,t]=F.useState(0),{openDialog:i,closeDialog:n,isDialogOpen:s}=Sh(),{openDialog:o,closeDialog:c,isDialogOpen:h}=Sh(),{openDialog:p,closeDialog:g,isDialogOpen:b}=Sh(),{openDialog:v,closeDialog:S,isDialogOpen:B}=Sh(),T=he=>{r.actionDispatcher.setText(he),n()},C=he=>{c(),r.actionDispatcher.setScoreInfo(he)},L=he=>{S(),r.actionDispatcher.setChord(he)},O=he=>{g(),r.actionDispatcher.setTempo(he)},I=He("div")(({theme:he})=>({display:"flex",backgroundColor:he.palette.mode==="dark"?he.palette.grey[800]:he.palette.grey[100],borderTopColor:he.palette.mode==="dark"?he.palette.grey[900]:"#ede9e9",height:"45px",alignItems:"center",overflowX:"auto",overflowY:"hidden",gap:"10px",paddingLeft:"10px",paddingRight:"10px",boxShadow:`0 4px 2px -2px ${he.palette.mode==="dark"?"#312f2f":"#e6e6e6"}`})),V=((oe=(j=(re=r.score)==null?void 0:re.tracks[r.selectedTrackIndex])==null?void 0:j.staves[0])==null?void 0:oe.stringTuning.tunings.length)??6,P=es(),G=P.palette.mode==="dark"?P.palette.grey[800]:P.palette.grey[100],W=P.palette.mode==="dark"?P.palette.grey[900]:"#ede9e9",{t:J}=Tt();return w.jsxs("div",{children:[w.jsx(q6,{isOpen:s,currentText:r.editorScoreState.selectionText,onClose:n,onSave:T}),r.score&&w.jsx(K6,{currentTempo:((ge=r.score)==null?void 0:ge.tempo)??0,isOpen:b,onClose:g,onSet:O}),r.score&&w.jsx(X6,{isOpen:h,score:r.score,onClose:c,onSave:C}),w.jsx(AV,{isOpen:B,chord:r.editorScoreState.selectionChord,numberOfStrings:V,onClose:S,onSave:L}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingRight:"10px",alignItems:"center",backgroundColor:G,borderBottom:`1px solid ${W}`},children:[w.jsxs(v5,{style:{backgroundColor:G},value:e,onChange:(he,ve)=>t(ve),children:[w.jsx(Fg,{label:J("Document")}),w.jsx(Fg,{label:J("Effects")}),w.jsx(Fg,{label:J("Beat")}),w.jsx(Fg,{label:J("Duration")}),w.jsx(Fg,{label:J("Dynamics")})]}),w.jsx("div",{style:{backgroundColor:G,display:"flex",gap:"10px"},children:w.jsx(rz,{})})]}),w.jsx("div",{children:w.jsxs(I,{children:[e===0&&w.jsx(CV,{newFile:r.newFile,openFile:r.open,canRedo:r.canRedo,canUndo:r.canUndo,exportGuitarPro:r.exportGuitarPro,exportMidi:r.exportMidi,print:r.print,redo:r.actionDispatcher.redo,undo:r.actionDispatcher.undo,openTempoDialog:p,openScoreInfo:o}),e===1&&w.jsx(_V,{editorScoreState:r.editorScoreState,actionDispatcher:r.actionDispatcher}),e===2&&w.jsx(sV,{actionDispatcher:r.actionDispatcher,editorScoreState:r.editorScoreState,setText:i,setChord:v,useChord:r.actionDispatcher.setChord,chords:r.currentAvailableChords}),e===3&&w.jsx(eV,{editorScoreState:r.editorScoreState,actionDispatcher:r.actionDispatcher}),e===4&&w.jsx(Z6,{editorScoreState:r.editorScoreState,actionDispatcher:r.actionDispatcher})]})})]})}const _0=2,sz=(r,e)=>{if(r===null)return e;let t;return r>=0&&r<=9?t=r*10+e:t=e,t>=30&&(t=e),t};function az(r){const e=es(),t=F.useCallback(s=>{setTimeout(()=>{s.target.focus()},10)},[]),i=F.useCallback(s=>{s&&(s.removeEventListener("focusout",t),r.hasDialogOpen||s.addEventListener("focusout",t))},[r.hasDialogOpen,t]);if(!r.bounds)return w.jsx("div",{});const n=fc("input")({width:"10px",opacity:"0",MozAppearance:"textfield","&::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"&::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}});return w.jsx("div",{id:"editor-cursor",style:{position:"absolute",borderStyle:"solid",borderWidth:"1px",borderColor:`${e.palette.mode==="dark"?"white":"black"}`,left:`${r.bounds.x-_0}px`,top:`${r.bounds.y-_0}px`,zIndex:1e3,width:`${r.bounds.w+_0*2}px`,height:`${r.bounds.h+_0*2}px`,pointerEvents:"none"},children:w.jsx(n,{ref:i,autoFocus:!0,type:"number",onChange:s=>{const o=Number.parseInt(s.target.value[s.target.value.length-1],10);r.setFret(sz(r.fret,o))}})})}function oz(r){const e=lt({...r,selected:!1});return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"40px",fill:e,onClick:r.onClick,viewBox:"0 0 24 24",width:"40px",style:ut(r),children:[w.jsx("g",{children:w.jsx("rect",{fill:"none",height:"24",width:"24"})}),w.jsx("g",{children:w.jsx("g",{children:w.jsx("path",{d:"M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M11,16H9V8h2V16z M15,16h-2V8h2V16z"})})})]})}function lz(r){const e=lt({...r,selected:!1});return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"40px",fill:e,onClick:r.onClick,viewBox:"0 0 24 24",width:"40px",style:ut(r),children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"})]})}function uz(r){return r.selected?oz(r):lz(r)}function cz(r){const e=lt(r);return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:e,onClick:r.onClick,style:ut(r),children:[w.jsx("g",{children:w.jsx("rect",{fill:"none",height:"24",width:"24"})}),w.jsx("g",{children:w.jsx("path",{d:"M6,2l0.01,6L10,12l-3.99,4.01L6,22h12v-6l-4-4l4-3.99V2H6z M16,16.5V20H8v-3.5l4-4L16,16.5z"})})]})}function hz(r){const e=lt(r);return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:e,onClick:r.onClick,style:ut(r),children:[w.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),w.jsx("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z"})]})}function dz(r){const e=r.selected?cz:hz;return w.jsx(xt,{title:"Count-in",children:e(r)})}function fz(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Metronome"),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:e,height:"20px",viewBox:"0 0 18 18",width:"20px",onClick:r.onClick,style:ut(r),children:w.jsx("path",{d:"M 0 18 q 2.5 -9 5 -17 Q 6 0 9 0 Q 12 0 13 1 L 18 18 L 16 18 L 12 2 L 6 2 L 2 18 M 10 17 L 2 4 L 3 3 L 11 16 Z M 2 18 L 2 16 L 16 16 L 16 18"})})})}function pz(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Repeat"),children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:e,onClick:r.onClick,style:ut(r),children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"})]})})}function gz(r){const e=lt({disabled:!1,selected:!1});return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"26px",viewBox:"0 0 24 24",width:"26px",onClick:r.onClick,fill:e,style:ut(r),children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})]})}function mz(r){const e=lt({disabled:!1,selected:!1});return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"26px",viewBox:"0 0 24 24",width:"26px",onClick:r.onClick,fill:e,style:ut(r),children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"})]})}function yz(r){return r.selected?gz(r):mz(r)}const bz=He("div")(()=>({display:"flex",width:"140px",gap:"20px",alignItems:"center"}));function vz(r){const[e,t]=F.useState(.5),i=()=>{r.setVolume(0)},n=()=>{const c=e===0?.5:e;r.setVolume(c)},s=c=>{t(r.volume),r.setVolume(c)},o=()=>{r.volume!==0?i():n()};return w.jsxs(bz,{children:[w.jsx(yz,{selected:r.volume!==0,disabled:!1,onClick:o}),w.jsx(b4,{size:"small",value:r.volume,min:0,max:1,step:.05,onChange:(c,h)=>s(h)})]})}function wz(r){return w.jsxs(Cb,{label:"Speed",size:"small",value:r.speed,onChange:e=>r.onChangeSpeed(e.target.value),children:[w.jsx(Zo,{value:.25,children:"0.25x"}),w.jsx(Zo,{value:.5,children:"0.5x"}),w.jsx(Zo,{value:.75,children:"0.75x"}),w.jsx(Zo,{value:1,children:"1x"}),w.jsx(Zo,{value:1.25,children:"1.25x"}),w.jsx(Zo,{value:1.5,children:"1.5x"}),w.jsx(Zo,{value:1.75,children:"1.75x"}),w.jsx(Zo,{value:2,children:"2x"})]})}const xz=He("div")(({theme:r})=>({display:"flex",justifyContent:"center",alignItems:"center",height:"65px",paddingLeft:"10px",paddingRight:"10px",backgroundColor:r.palette.mode==="dark"?r.palette.grey[800]:r.palette.grey[100]})),Sz=He("div")({width:"40%"}),kz=He("div")({display:"flex",justifyContent:"center",alignItems:"center",width:"20%"}),_z=He("div")({width:"40%",gap:"10px",display:"flex",justifyContent:"right",alignItems:"center"});function Bz(r){const[e,t]=F.useState(.5),[i,n]=F.useState(1),s=c=>{t(c),r.onVolumeChange(c)},o=c=>{n(c),r.onSpeedChange(c)};return w.jsxs(xz,{children:[w.jsx(Sz,{}),w.jsx(kz,{children:w.jsx(uz,{selected:r.isPlaying,onClick:r.playPause,disabled:!1})}),w.jsxs(_z,{children:[w.jsx(dz,{selected:r.isCountIn,onClick:()=>r.onCountInChange(!r.isCountIn),disabled:!1}),w.jsx(fz,{selected:r.isMetronome,onClick:()=>r.onMetronomeChange(!r.isMetronome),disabled:!1}),w.jsx(pz,{selected:r.isLooping,onClick:()=>r.onLoopingChange(!r.isLooping),disabled:!1}),w.jsx(vz,{volume:e,setVolume:s}),w.jsx(wz,{speed:i,onChangeSpeed:o})]})]})}var ru;(function(r){r[r.Page=0]="Page",r[r.Horizontal=1]="Horizontal"})(ru||(ru={}));var Os;(function(r){r[r.Default=0]="Default",r[r.ScoreTab=1]="ScoreTab",r[r.Score=2]="Score",r[r.Tab=3]="Tab",r[r.TabMixed=4]="TabMixed"})(Os||(Os={}));class Jl{static getValue(e){return Jl._values||(Jl._values=new Map),e=e.toLowerCase().replaceAll(" ",""),Jl._values.has(e)?Jl._values.get(e):0}static isPiano(e){return e<=7||e>=16&&e<=23}static isGuitar(e){return e>=24&&e<=39||e===105||e===43}}Jl._values=new Map([["acousticgrandpiano",0],["brightacousticpiano",1],["electricgrandpiano",2],["honkytonkpiano",3],["electricpiano1",4],["electricpiano2",5],["harpsichord",6],["clavinet",7],["celesta",8],["glockenspiel",9],["musicbox",10],["vibraphone",11],["marimba",12],["xylophone",13],["tubularbells",14],["dulcimer",15],["drawbarorgan",16],["percussiveorgan",17],["rockorgan",18],["churchorgan",19],["reedorgan",20],["accordion",21],["harmonica",22],["tangoaccordion",23],["acousticguitarnylon",24],["acousticguitarsteel",25],["electricguitarjazz",26],["electricguitarclean",27],["electricguitarmuted",28],["overdrivenguitar",29],["distortionguitar",30],["guitarharmonics",31],["acousticbass",32],["electricbassfinger",33],["electricbasspick",34],["fretlessbass",35],["slapbass1",36],["slapbass2",37],["synthbass1",38],["synthbass2",39],["violin",40],["viola",41],["cello",42],["contrabass",43],["tremolostrings",44],["pizzicatostrings",45],["orchestralharp",46],["timpani",47],["stringensemble1",48],["stringensemble2",49],["synthstrings1",50],["synthstrings2",51],["choiraahs",52],["voiceoohs",53],["synthvoice",54],["orchestrahit",55],["trumpet",56],["trombone",57],["tuba",58],["mutedtrumpet",59],["frenchhorn",60],["brasssection",61],["synthbrass1",62],["synthbrass2",63],["sopranosax",64],["altosax",65],["tenorsax",66],["baritonesax",67],["oboe",68],["englishhorn",69],["bassoon",70],["clarinet",71],["piccolo",72],["flute",73],["recorder",74],["panflute",75],["blownbottle",76],["shakuhachi",77],["whistle",78],["ocarina",79],["lead1square",80],["lead2sawtooth",81],["lead3calliope",82],["lead4chiff",83],["lead5charang",84],["lead6voice",85],["lead7fifths",86],["lead8bassandlead",87],["pad1newage",88],["pad2warm",89],["pad3polysynth",90],["pad4choir",91],["pad5bowed",92],["pad6metallic",93],["pad7halo",94],["pad8sweep",95],["fx1rain",96],["fx2soundtrack",97],["fx3crystal",98],["fx4atmosphere",99],["fx5brightness",100],["fx6goblins",101],["fx7echoes",102],["fx8scifi",103],["sitar",104],["banjo",105],["shamisen",106],["koto",107],["kalimba",108],["bagpipe",109],["fiddle",110],["shanai",111],["tinklebell",112],["agogo",113],["steeldrums",114],["woodblock",115],["taikodrum",116],["melodictom",117],["synthdrum",118],["reversecymbal",119],["guitarfretnoise",120],["breathnoise",121],["seashore",122],["birdtweet",123],["telephonering",124],["helicopter",125],["applause",126],["gunshot",127]]);class Qf{init(e,t){this.data=e,this.settings=t}}var nn;(function(r){r[r.General=0]="General",r[r.Format=1]="Format",r[r.AlphaTex=2]="AlphaTex"})(nn||(nn={}));class sn extends Error{constructor(e,t="",i){super(t??"",{cause:i}),this.type=e,this.inner=i??null,Object.setPrototypeOf(this,sn.prototype)}}class Or extends sn{constructor(e=null,t=null){super(nn.Format,e??"Unsupported format"),this.inner=t,Object.setPrototypeOf(this,Or.prototype)}}var Mr;(function(r){r[r.None=0]="None",r[r.Normal=1]="Normal",r[r.Heavy=2]="Heavy"})(Mr||(Mr={}));var Ur;(function(r){r[r.Tempo=0]="Tempo",r[r.Volume=1]="Volume",r[r.Instrument=2]="Instrument",r[r.Balance=3]="Balance"})(Ur||(Ur={}));class yn{constructor(){this.isLinear=!1,this.type=Ur.Tempo,this.value=0,this.ratioPosition=0,this.text=""}static buildTempoAutomation(e,t,i,n){(n<1||n>5)&&(n=2);let s=new Float32Array([1,.5,1,1.5,2,3]),o=new yn;return o.type=Ur.Tempo,o.isLinear=e,o.ratioPosition=t,o.value=i*s[n],o}static buildInstrumentAutomation(e,t,i){let n=new yn;return n.type=Ur.Instrument,n.isLinear=e,n.ratioPosition=t,n.value=i,n}}var _t;(function(r){r[r.Neutral=0]="Neutral",r[r.C3=1]="C3",r[r.C4=2]="C4",r[r.F4=3]="F4",r[r.G2=4]="G2"})(_t||(_t={}));var hi;(function(r){r[r._15ma=0]="_15ma",r[r._8va=1]="_8va",r[r.Regular=2]="Regular",r[r._8vb=3]="_8vb",r[r._15mb=4]="_15mb"})(hi||(hi={}));var da;(function(r){r[r.None=0]="None",r[r.Simple=1]="Simple",r[r.FirstOfDouble=2]="FirstOfDouble",r[r.SecondOfDouble=3]="SecondOfDouble"})(da||(da={}));class cu{constructor(){this.id=cu._globalBarId++,this.index=0,this.nextBar=null,this.previousBar=null,this.clef=_t.G2,this.clefOttava=hi.Regular,this.voices=[],this.simileMark=da.None,this.isMultiVoice=!1,this.displayScale=1,this.displayWidth=-1}get masterBar(){return this.staff.track.score.masterBars[this.index]}get isEmpty(){for(let e=0,t=this.voices.length;e<t;e++)if(!this.voices[e].isEmpty)return!1;return!0}addVoice(e){e.bar=this,e.index=this.voices.length,this.voices.push(e)}finish(e,t=null){this.isMultiVoice=!1;for(let i=0,n=this.voices.length;i<n;i++){let s=this.voices[i];s.finish(e,t),i>0&&!s.isEmpty&&(this.isMultiVoice=!0)}}calculateDuration(){let e=0;for(let t of this.voices){let i=t.calculateDuration();i>e&&(e=i)}return e}}cu._globalBarId=0;class Ct{static ticksToMillis(e,t){return e*(6e4/(t*Ct.QuarterTime))|0}static millisToTicks(e,t){return e/(6e4/(t*Ct.QuarterTime))|0}static toTicks(e){return Ct.valueToTicks(e)}static valueToTicks(e){let t=e;return t<0&&(t=1/-t),Ct.QuarterTime*(4/t)|0}static applyDot(e,t){return t?e+(e/4|0)*3:e+(e/2|0)}static applyTuplet(e,t,i){return e*i/t|0}static removeTuplet(e,t,i){return e*t/i|0}static dynamicToVelocity(e){return Ct.MinVelocity+e*Ct.VelocityIncrement}}Ct.QuarterTime=960;Ct.MinVelocity=15;Ct.VelocityIncrement=16;class De{constructor(e=0,t=0){this.offset=e,this.value=t}}De.MaxPosition=60;De.MaxValue=12;var Si;(function(r){r[r.Default=0]="Default",r[r.Gradual=1]="Gradual",r[r.Fast=2]="Fast"})(Si||(Si={}));var Ye;(function(r){r[r.None=0]="None",r[r.Custom=1]="Custom",r[r.Bend=2]="Bend",r[r.Release=3]="Release",r[r.BendRelease=4]="BendRelease",r[r.Hold=5]="Hold",r[r.Prebend=6]="Prebend",r[r.PrebendBend=7]="PrebendBend",r[r.PrebendRelease=8]="PrebendRelease"})(Ye||(Ye={}));var Di;(function(r){r[r.None=0]="None",r[r.BrushUp=1]="BrushUp",r[r.BrushDown=2]="BrushDown",r[r.ArpeggioUp=3]="ArpeggioUp",r[r.ArpeggioDown=4]="ArpeggioDown"})(Di||(Di={}));var bs;(function(r){r[r.None=0]="None",r[r.Crescendo=1]="Crescendo",r[r.Decrescendo=2]="Decrescendo"})(bs||(bs={}));var Y;(function(r){r[r.QuadrupleWhole=-4]="QuadrupleWhole",r[r.DoubleWhole=-2]="DoubleWhole",r[r.Whole=1]="Whole",r[r.Half=2]="Half",r[r.Quarter=4]="Quarter",r[r.Eighth=8]="Eighth",r[r.Sixteenth=16]="Sixteenth",r[r.ThirtySecond=32]="ThirtySecond",r[r.SixtyFourth=64]="SixtyFourth",r[r.OneHundredTwentyEighth=128]="OneHundredTwentyEighth",r[r.TwoHundredFiftySixth=256]="TwoHundredFiftySixth"})(Y||(Y={}));var Dt;(function(r){r[r.PPP=0]="PPP",r[r.PP=1]="PP",r[r.P=2]="P",r[r.MP=3]="MP",r[r.MF=4]="MF",r[r.F=5]="F",r[r.FF=6]="FF",r[r.FFF=7]="FFF"})(Dt||(Dt={}));var ot;(function(r){r[r.None=0]="None",r[r.OnBeat=1]="OnBeat",r[r.BeforeBeat=2]="BeforeBeat",r[r.BendGrace=3]="BendGrace"})(ot||(ot={}));var kt;(function(r){r[r.Unknown=-2]="Unknown",r[r.NoOrDead=-1]="NoOrDead",r[r.Thumb=0]="Thumb",r[r.IndexFinger=1]="IndexFinger",r[r.MiddleFinger=2]="MiddleFinger",r[r.AnnularFinger=3]="AnnularFinger",r[r.LittleFinger=4]="LittleFinger"})(kt||(kt={}));var Ze;(function(r){r[r.None=0]="None",r[r.Natural=1]="Natural",r[r.Artificial=2]="Artificial",r[r.Pinch=3]="Pinch",r[r.Tap=4]="Tap",r[r.Semi=5]="Semi",r[r.Feedback=6]="Feedback"})(Ze||(Ze={}));var Tr;(function(r){r[r.Default=0]="Default",r[r.ForceNone=1]="ForceNone",r[r.ForceNatural=2]="ForceNatural",r[r.ForceSharp=3]="ForceSharp",r[r.ForceDoubleSharp=4]="ForceDoubleSharp",r[r.ForceFlat=5]="ForceFlat",r[r.ForceDoubleFlat=6]="ForceDoubleFlat"})(Tr||(Tr={}));var rn;(function(r){r[r.None=0]="None",r[r.IntoFromBelow=1]="IntoFromBelow",r[r.IntoFromAbove=2]="IntoFromAbove"})(rn||(rn={}));var Et;(function(r){r[r.None=0]="None",r[r.Shift=1]="Shift",r[r.Legato=2]="Legato",r[r.OutUp=3]="OutUp",r[r.OutDown=4]="OutDown",r[r.PickSlideDown=5]="PickSlideDown",r[r.PickSlideUp=6]="PickSlideUp"})(Et||(Et={}));var ni;(function(r){r[r.None=0]="None",r[r.Slight=1]="Slight",r[r.Wide=2]="Wide"})(ni||(ni={}));var Zl;(function(r){r[r.Hidden=0]="Hidden",r[r.ShowWithBeams=1]="ShowWithBeams",r[r.ShowWithBars=2]="ShowWithBars"})(Zl||(Zl={}));var po;(function(r){r[r.ScoreDefault=0]="ScoreDefault",r[r.ScoreForcePiano=1]="ScoreForcePiano",r[r.SingleNoteEffectBand=2]="SingleNoteEffectBand",r[r.SingleNoteEffectBandForcePiano=3]="SingleNoteEffectBandForcePiano"})(po||(po={}));var Gr;(function(r){r[r.GuitarPro=0]="GuitarPro",r[r.SongBook=1]="SongBook"})(Gr||(Gr={}));var ft;(function(r){r[r.ScoreTitle=0]="ScoreTitle",r[r.ScoreSubTitle=1]="ScoreSubTitle",r[r.ScoreArtist=2]="ScoreArtist",r[r.ScoreAlbum=3]="ScoreAlbum",r[r.ScoreWords=4]="ScoreWords",r[r.ScoreMusic=5]="ScoreMusic",r[r.ScoreWordsAndMusic=6]="ScoreWordsAndMusic",r[r.ScoreCopyright=7]="ScoreCopyright",r[r.GuitarTuning=8]="GuitarTuning",r[r.TrackNames=9]="TrackNames",r[r.ChordDiagrams=10]="ChordDiagrams",r[r.ParenthesisOnTiedBends=11]="ParenthesisOnTiedBends",r[r.TabNotesOnTiedBends=12]="TabNotesOnTiedBends",r[r.ZerosOnDiveWhammys=13]="ZerosOnDiveWhammys",r[r.EffectAlternateEndings=14]="EffectAlternateEndings",r[r.EffectCapo=15]="EffectCapo",r[r.EffectChordNames=16]="EffectChordNames",r[r.EffectCrescendo=17]="EffectCrescendo",r[r.EffectDynamics=18]="EffectDynamics",r[r.EffectFadeIn=19]="EffectFadeIn",r[r.EffectFermata=20]="EffectFermata",r[r.EffectFingering=21]="EffectFingering",r[r.EffectHarmonics=22]="EffectHarmonics",r[r.EffectLetRing=23]="EffectLetRing",r[r.EffectLyrics=24]="EffectLyrics",r[r.EffectMarker=25]="EffectMarker",r[r.EffectOttavia=26]="EffectOttavia",r[r.EffectPalmMute=27]="EffectPalmMute",r[r.EffectPickSlide=28]="EffectPickSlide",r[r.EffectPickStroke=29]="EffectPickStroke",r[r.EffectSlightBeatVibrato=30]="EffectSlightBeatVibrato",r[r.EffectSlightNoteVibrato=31]="EffectSlightNoteVibrato",r[r.EffectTap=32]="EffectTap",r[r.EffectTempo=33]="EffectTempo",r[r.EffectText=34]="EffectText",r[r.EffectTrill=35]="EffectTrill",r[r.EffectTripletFeel=36]="EffectTripletFeel",r[r.EffectWhammyBar=37]="EffectWhammyBar",r[r.EffectWideBeatVibrato=38]="EffectWideBeatVibrato",r[r.EffectWideNoteVibrato=39]="EffectWideNoteVibrato",r[r.EffectLeftHandTap=40]="EffectLeftHandTap"})(ft||(ft={}));class nm{constructor(){this.notationMode=Gr.GuitarPro,this.fingeringMode=po.ScoreDefault,this.elements=new Map,this.rhythmMode=Zl.Hidden,this.rhythmHeight=15,this.transpositionPitches=[],this.displayTranspositionPitches=[],this.smallGraceTabNotes=!0,this.extendBendArrowsOnTiedNotes=!0,this.extendLineEffectsToBeatEnd=!1,this.slurHeight=5}isNotationElementVisible(e){return this.elements.has(e)?this.elements.get(e):nm.defaultElements.has(e)?nm.defaultElements.get(e):!0}}nm.defaultElements=new Map([[ft.ZerosOnDiveWhammys,!1]]);class fC{constructor(e){this._value=void 0,this._factory=e}get value(){return this._value===void 0&&(this._value=this._factory()),this._value}}var Fa;(function(r){r[r.None=0]="None",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error"})(Fa||(Fa={}));class kh{static format(e,t){return`[AlphaTab][${e}] ${t}`}debug(e,t,...i){console.debug(kh.format(e,t),...i)}warning(e,t,...i){console.warn(kh.format(e,t),...i)}info(e,t,...i){console.info(kh.format(e,t),...i)}error(e,t,...i){console.error(kh.format(e,t),...i)}}kh.logLevel=Fa.Info;class ye{static shouldLog(e){return ye.logLevel!==Fa.None&&e>=ye.logLevel}static debug(e,t,...i){ye.shouldLog(Fa.Debug)&&ye.log.debug(e,t,...i)}static warning(e,t,...i){ye.shouldLog(Fa.Warning)&&ye.log.warning(e,t,...i)}static info(e,t,...i){ye.shouldLog(Fa.Info)&&ye.log.info(e,t,...i)}static error(e,t,...i){ye.shouldLog(Fa.Error)&&ye.log.error(e,t,...i)}}ye.logLevel=Fa.Info;ye.log=new kh;class Tz{constructor(){this.note=null,this.noteValue=0,this.octave=0}get realValue(){return this.octave*12+this.noteValue}}class Fi{static getIndex(e){let t=0;return e<0?t:Math.log2(e)|0}static keySignatureIsFlat(e){return e<0}static keySignatureIsNatural(e){return e===0}static keySignatureIsSharp(e){return e>0}static applyPitchOffsets(e,t){for(let i=0;i<t.tracks.length;i++){if(i<e.notation.displayTranspositionPitches.length)for(let n of t.tracks[i].staves)n.displayTranspositionPitch=-e.notation.displayTranspositionPitches[i];if(i<e.notation.transpositionPitches.length)for(let n of t.tracks[i].staves)n.transpositionPitch=-e.notation.transpositionPitches[i]}}static fingerToString(e,t,i,n){if(e.notation.fingeringMode===po.ScoreForcePiano||e.notation.fingeringMode===po.SingleNoteEffectBandForcePiano||Jl.isPiano(t.voice.bar.staff.track.playbackInfo.program))switch(i){case kt.Unknown:case kt.NoOrDead:return null;case kt.Thumb:return"1";case kt.IndexFinger:return"2";case kt.MiddleFinger:return"3";case kt.AnnularFinger:return"4";case kt.LittleFinger:return"5";default:return null}if(n)switch(i){case kt.Unknown:case kt.NoOrDead:return"0";case kt.Thumb:return"T";case kt.IndexFinger:return"1";case kt.MiddleFinger:return"2";case kt.AnnularFinger:return"3";case kt.LittleFinger:return"4";default:return null}switch(i){case kt.Unknown:case kt.NoOrDead:return null;case kt.Thumb:return"p";case kt.IndexFinger:return"i";case kt.MiddleFinger:return"m";case kt.AnnularFinger:return"a";case kt.LittleFinger:return"c";default:return null}}static isTuning(e){return!!Fi.parseTuning(e)}static parseTuning(e){let t="",i="";for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);if(o>=48&&o<=57){if(!t)return null;i+=String.fromCharCode(o)}else if(o>=65&&o<=90||o>=97&&o<=122||o===35)t+=String.fromCharCode(o);else return null}if(!i||!t)return null;let n=new Tz;return n.octave=parseInt(i)+1,n.note=t.toLowerCase(),n.noteValue=Fi.getToneForText(n.note),n}static getTuningForText(e){let t=Fi.parseTuning(e);return t?t.realValue:-1}static getToneForText(e){switch(e.toLowerCase()){case"c":return 0;case"c#":case"db":return 1;case"d":return 2;case"d#":case"eb":return 3;case"e":return 4;case"f":return 5;case"f#":case"gb":return 6;case"g":return 7;case"g#":case"ab":return 8;case"a":return 9;case"a#":case"bb":return 10;case"b":return 11;default:return 0}}static newGuid(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)+Math.floor((1+Math.random())*65536).toString(16).substring(1)+"-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)+"-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)+"-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)+"-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)+Math.floor((1+Math.random())*65536).toString(16).substring(1)+Math.floor((1+Math.random())*65536).toString(16).substring(1)}static isAlmostEqualTo(e,t){return Math.abs(e-t)<1e-5}static toHexString(e,t=0){let i="",n="0123456789ABCDEF";do i=String.fromCharCode(n.charCodeAt(e&15))+i,e=e>>4;while(e>0);for(;i.length<t;)i="0"+i;return i}}var pn;(function(r){r[r.None=0]="None",r[r.Up=1]="Up",r[r.Down=2]="Down"})(pn||(pn={}));var N;(function(r){r[r.None=-1]="None",r[r.GClef=57424]="GClef",r[r.CClef=57436]="CClef",r[r.FClef=57442]="FClef",r[r.UnpitchedPercussionClef1=57449]="UnpitchedPercussionClef1",r[r.SixStringTabClef=57453]="SixStringTabClef",r[r.FourStringTabClef=57454]="FourStringTabClef",r[r.TimeSig0=57472]="TimeSig0",r[r.TimeSig1=57473]="TimeSig1",r[r.TimeSig2=57474]="TimeSig2",r[r.TimeSig3=57475]="TimeSig3",r[r.TimeSig4=57476]="TimeSig4",r[r.TimeSig5=57477]="TimeSig5",r[r.TimeSig6=57478]="TimeSig6",r[r.TimeSig7=57479]="TimeSig7",r[r.TimeSig8=57480]="TimeSig8",r[r.TimeSig9=57481]="TimeSig9",r[r.TimeSigCommon=57482]="TimeSigCommon",r[r.TimeSigCutCommon=57483]="TimeSigCutCommon",r[r.NoteheadDoubleWholeSquare=57505]="NoteheadDoubleWholeSquare",r[r.NoteheadDoubleWhole=57504]="NoteheadDoubleWhole",r[r.NoteheadWhole=57506]="NoteheadWhole",r[r.NoteheadHalf=57507]="NoteheadHalf",r[r.NoteheadBlack=57508]="NoteheadBlack",r[r.NoteheadNull=57509]="NoteheadNull",r[r.NoteheadXOrnate=57514]="NoteheadXOrnate",r[r.NoteheadTriangleUpWhole=57531]="NoteheadTriangleUpWhole",r[r.NoteheadTriangleUpHalf=57532]="NoteheadTriangleUpHalf",r[r.NoteheadTriangleUpBlack=57534]="NoteheadTriangleUpBlack",r[r.NoteheadDiamondBlackWide=57564]="NoteheadDiamondBlackWide",r[r.NoteheadDiamondWhite=57565]="NoteheadDiamondWhite",r[r.NoteheadDiamondWhiteWide=57566]="NoteheadDiamondWhiteWide",r[r.NoteheadCircleX=57523]="NoteheadCircleX",r[r.NoteheadXWhole=57511]="NoteheadXWhole",r[r.NoteheadXHalf=57512]="NoteheadXHalf",r[r.NoteheadXBlack=57513]="NoteheadXBlack",r[r.NoteheadParenthesis=57550]="NoteheadParenthesis",r[r.NoteheadSlashedBlack2=57552]="NoteheadSlashedBlack2",r[r.NoteheadCircleSlash=57591]="NoteheadCircleSlash",r[r.NoteheadHeavyX=57592]="NoteheadHeavyX",r[r.NoteheadHeavyXHat=57593]="NoteheadHeavyXHat",r[r.NoteQuarterUp=57813]="NoteQuarterUp",r[r.NoteEighthUp=57815]="NoteEighthUp",r[r.Tremolo3=57890]="Tremolo3",r[r.Tremolo2=57889]="Tremolo2",r[r.Tremolo1=57888]="Tremolo1",r[r.FlagEighthUp=57920]="FlagEighthUp",r[r.FlagEighthDown=57921]="FlagEighthDown",r[r.FlagSixteenthUp=57922]="FlagSixteenthUp",r[r.FlagSixteenthDown=57923]="FlagSixteenthDown",r[r.FlagThirtySecondUp=57924]="FlagThirtySecondUp",r[r.FlagThirtySecondDown=57925]="FlagThirtySecondDown",r[r.FlagSixtyFourthUp=57926]="FlagSixtyFourthUp",r[r.FlagSixtyFourthDown=57927]="FlagSixtyFourthDown",r[r.FlagOneHundredTwentyEighthUp=57928]="FlagOneHundredTwentyEighthUp",r[r.FlagOneHundredTwentyEighthDown=57929]="FlagOneHundredTwentyEighthDown",r[r.FlagTwoHundredFiftySixthUp=57930]="FlagTwoHundredFiftySixthUp",r[r.FlagTwoHundredFiftySixthDown=57931]="FlagTwoHundredFiftySixthDown",r[r.AccidentalFlat=57952]="AccidentalFlat",r[r.AccidentalNatural=57953]="AccidentalNatural",r[r.AccidentalSharp=57954]="AccidentalSharp",r[r.AccidentalDoubleSharp=57955]="AccidentalDoubleSharp",r[r.AccidentalDoubleFlat=57956]="AccidentalDoubleFlat",r[r.AccidentalQuarterToneFlatArrowUp=57968]="AccidentalQuarterToneFlatArrowUp",r[r.AccidentalQuarterToneSharpArrowUp=57972]="AccidentalQuarterToneSharpArrowUp",r[r.AccidentalQuarterToneNaturalArrowUp=57970]="AccidentalQuarterToneNaturalArrowUp",r[r.ArticAccentAbove=58528]="ArticAccentAbove",r[r.ArticStaccatoAbove=58530]="ArticStaccatoAbove",r[r.ArticMarcatoAbove=58540]="ArticMarcatoAbove",r[r.FermataAbove=58560]="FermataAbove",r[r.FermataShortAbove=58564]="FermataShortAbove",r[r.FermataLongAbove=58566]="FermataLongAbove",r[r.RestLonga=58593]="RestLonga",r[r.RestDoubleWhole=58594]="RestDoubleWhole",r[r.RestWhole=58595]="RestWhole",r[r.RestHalf=58596]="RestHalf",r[r.RestQuarter=58597]="RestQuarter",r[r.RestEighth=58598]="RestEighth",r[r.RestSixteenth=58599]="RestSixteenth",r[r.RestThirtySecond=58600]="RestThirtySecond",r[r.RestSixtyFourth=58601]="RestSixtyFourth",r[r.RestOneHundredTwentyEighth=58602]="RestOneHundredTwentyEighth",r[r.RestTwoHundredFiftySixth=58603]="RestTwoHundredFiftySixth",r[r.Repeat1Bar=58624]="Repeat1Bar",r[r.Repeat2Bars=58625]="Repeat2Bars",r[r.Ottava=58640]="Ottava",r[r.OttavaAlta=58641]="OttavaAlta",r[r.OttavaBassaVb=58652]="OttavaBassaVb",r[r.Quindicesima=58644]="Quindicesima",r[r.QuindicesimaAlta=58645]="QuindicesimaAlta",r[r.DynamicPPP=58666]="DynamicPPP",r[r.DynamicPP=58667]="DynamicPP",r[r.DynamicPiano=58656]="DynamicPiano",r[r.DynamicMP=58668]="DynamicMP",r[r.DynamicMF=58669]="DynamicMF",r[r.DynamicForte=58658]="DynamicForte",r[r.DynamicFF=58671]="DynamicFF",r[r.DynamicFFF=58672]="DynamicFFF",r[r.OrnamentTrill=58726]="OrnamentTrill",r[r.StringsDownBow=58896]="StringsDownBow",r[r.StringsUpBow=58898]="StringsUpBow",r[r.PictEdgeOfCymbal=59177]="PictEdgeOfCymbal",r[r.GuitarString0=59443]="GuitarString0",r[r.GuitarString1=59444]="GuitarString1",r[r.GuitarString2=59445]="GuitarString2",r[r.GuitarString3=59446]="GuitarString3",r[r.GuitarString4=59447]="GuitarString4",r[r.GuitarString5=59448]="GuitarString5",r[r.GuitarString6=59449]="GuitarString6",r[r.GuitarString7=59450]="GuitarString7",r[r.GuitarString8=59451]="GuitarString8",r[r.GuitarString9=59452]="GuitarString9",r[r.GuitarGolpe=59458]="GuitarGolpe",r[r.FretboardX=59481]="FretboardX",r[r.FretboardO=59482]="FretboardO",r[r.WiggleTrill=60068]="WiggleTrill",r[r.WiggleVibratoMediumFast=60126]="WiggleVibratoMediumFast",r[r.OctaveBaselineM=60565]="OctaveBaselineM",r[r.OctaveBaselineB=60563]="OctaveBaselineB"})(N||(N={}));var at;(function(r){r[r.Left=0]="Left",r[r.Center=1]="Center",r[r.Right=2]="Right"})(at||(at={}));var It;(function(r){r[r.Top=0]="Top",r[r.Middle=1]="Middle",r[r.Bottom=2]="Bottom"})(It||(It={}));class Ge{constructor(e="",t=0,i=0,n=N.None,s=N.None,o=N.None,c=N.None,h=It.Middle){this.elementType=e,this.outputMidiNumber=i,this.staffLine=t,this.noteHeadDefault=n,this.noteHeadHalf=s!==N.None?s:n,this.noteHeadWhole=o!==N.None?o:n,this.techniqueSymbol=c,this.techniqueSymbolPlacement=h}getSymbol(e){switch(e){case Y.Whole:return this.noteHeadWhole;case Y.Half:return this.noteHeadHalf;default:return this.noteHeadDefault}}}class hn{static articulationFromElementVariation(e,t){return e<hn.gp6ElementAndVariationToArticulation.length?(t>=hn.gp6ElementAndVariationToArticulation.length&&(t=0),hn.gp6ElementAndVariationToArticulation[e][t]):38}static getArticulation(e){const t=e.percussionArticulation,i=e.beat.voice.bar.staff.track.percussionArticulations;return t<i.length?i[t]:hn.getArticulationByValue(t)}static getElementAndVariation(e){const t=hn.getArticulation(e);if(!t)return[-1,-1];for(let i=0;i<hn.gp6ElementAndVariationToArticulation.length;i++){const n=hn.gp6ElementAndVariationToArticulation[i];for(let s=0;s<n.length;s++){const o=hn.getArticulationByValue(n[s]);if((o==null?void 0:o.outputMidiNumber)===t.outputMidiNumber)return[i,s]}}return[-1,-1]}static getArticulationByValue(e){return hn.instrumentArticulations.has(e)?hn.instrumentArticulations.get(e):null}}hn.gp6ElementAndVariationToArticulation=[[35,35,35],[38,91,37],[99,100,99],[56,100,56],[102,103,102],[43,43,43],[45,45,45],[47,47,47],[48,48,48],[50,50,50],[42,92,46],[44,44,44],[57,98,57],[49,97,49],[55,95,55],[51,93,127],[52,96,52]];hn.instrumentArticulations=new Map([[38,new Ge("snare",3,38,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[37,new Ge("snare",3,37,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[91,new Ge("snare",3,38,N.NoteheadDiamondWhite,N.NoteheadDiamondWhite,N.NoteheadDiamondWhite)],[42,new Ge("hiHat",-1,42,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[92,new Ge("hiHat",-1,46,N.NoteheadCircleSlash,N.NoteheadCircleSlash,N.NoteheadCircleSlash)],[46,new Ge("hiHat",-1,46,N.NoteheadCircleX,N.NoteheadCircleX,N.NoteheadCircleX)],[44,new Ge("hiHat",9,44,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[35,new Ge("kickDrum",8,35,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[36,new Ge("kickDrum",7,36,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[50,new Ge("tom",1,50,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[48,new Ge("tom",2,48,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[47,new Ge("tom",4,47,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[45,new Ge("tom",5,45,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[43,new Ge("tom",6,43,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[93,new Ge("ride",0,51,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack,N.PictEdgeOfCymbal,It.Bottom)],[51,new Ge("ride",0,51,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[53,new Ge("ride",0,53,N.NoteheadDiamondWhite,N.NoteheadDiamondWhite,N.NoteheadDiamondWhite)],[94,new Ge("ride",0,51,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack,N.ArticStaccatoAbove,It.Top)],[55,new Ge("splash",-2,55,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[95,new Ge("splash",-2,55,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack,N.ArticStaccatoAbove,It.Bottom)],[52,new Ge("china",-3,52,N.NoteheadHeavyXHat,N.NoteheadHeavyXHat,N.NoteheadHeavyXHat)],[96,new Ge("china",-3,52,N.NoteheadHeavyXHat,N.NoteheadHeavyXHat,N.NoteheadHeavyXHat)],[49,new Ge("crash",-2,49,N.NoteheadHeavyX,N.NoteheadHeavyX,N.NoteheadHeavyX)],[97,new Ge("crash",-2,49,N.NoteheadHeavyX,N.NoteheadHeavyX,N.NoteheadHeavyX,N.ArticStaccatoAbove,It.Bottom)],[57,new Ge("crash",-1,57,N.NoteheadHeavyX,N.NoteheadHeavyX,N.NoteheadHeavyX)],[98,new Ge("crash",-1,57,N.NoteheadHeavyX,N.NoteheadHeavyX,N.NoteheadHeavyX,N.ArticStaccatoAbove,It.Bottom)],[99,new Ge("cowbell",1,56,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpHalf,N.NoteheadTriangleUpWhole)],[100,new Ge("cowbell",1,56,N.NoteheadXBlack,N.NoteheadXHalf,N.NoteheadXWhole)],[56,new Ge("cowbell",0,56,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpHalf,N.NoteheadTriangleUpWhole)],[101,new Ge("cowbell",0,56,N.NoteheadXBlack,N.NoteheadXHalf,N.NoteheadXWhole)],[102,new Ge("cowbell",-1,56,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpHalf,N.NoteheadTriangleUpWhole)],[103,new Ge("cowbell",-1,56,N.NoteheadXBlack,N.NoteheadXHalf,N.NoteheadXWhole)],[77,new Ge("woodblock",-9,77,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack)],[76,new Ge("woodblock",-10,76,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack)],[60,new Ge("bongo",-4,60,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[104,new Ge("bongo",-5,60,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.NoteheadParenthesis,It.Middle)],[105,new Ge("bongo",-6,60,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[61,new Ge("bongo",-7,61,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[106,new Ge("bongo",-8,61,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.NoteheadParenthesis,It.Middle)],[107,new Ge("bongo",-16,61,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[66,new Ge("timbale",10,66,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[65,new Ge("timbale",9,65,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[68,new Ge("agogo",12,68,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[67,new Ge("agogo",11,67,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[64,new Ge("conga",17,64,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[108,new Ge("conga",16,64,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[109,new Ge("conga",15,64,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.NoteheadParenthesis,It.Middle)],[63,new Ge("conga",14,63,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[110,new Ge("conga",13,63,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[62,new Ge("conga",19,62,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.NoteheadParenthesis,It.Middle)],[72,new Ge("whistle",-11,72,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[71,new Ge("whistle",-17,71,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[73,new Ge("guiro",38,73,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[74,new Ge("guiro",37,74,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[86,new Ge("surdo",36,86,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[87,new Ge("surdo",35,87,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadParenthesis,It.Middle)],[54,new Ge("tambourine",3,54,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack)],[111,new Ge("tambourine",2,54,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack,N.StringsUpBow,It.Bottom)],[112,new Ge("tambourine",1,54,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack,N.NoteheadTriangleUpBlack,N.StringsDownBow,It.Bottom)],[113,new Ge("tambourine",-7,54,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[79,new Ge("cuica",30,79,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[78,new Ge("cuica",29,78,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[58,new Ge("vibraslap",28,58,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[81,new Ge("triangle",27,81,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[80,new Ge("triangle",26,80,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadParenthesis,It.Middle)],[114,new Ge("grancassa",25,43,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[115,new Ge("piatti",18,49,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[116,new Ge("piatti",24,49,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[69,new Ge("cabasa",23,69,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[117,new Ge("cabasa",22,69,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.StringsUpBow,It.Bottom)],[85,new Ge("castanets",21,85,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[75,new Ge("claves",20,75,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[70,new Ge("maraca",-12,70,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[118,new Ge("maraca",-13,70,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.StringsUpBow,It.Bottom)],[119,new Ge("maraca",-14,70,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[120,new Ge("maraca",-15,70,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.StringsUpBow,It.Bottom)],[82,new Ge("shaker",-23,54,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[122,new Ge("shaker",-24,54,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.StringsUpBow,It.Bottom)],[84,new Ge("bellTree",-18,53,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[123,new Ge("bellTree",-19,53,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole,N.StringsUpBow,It.Bottom)],[83,new Ge("jingleBell",-20,53,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[124,new Ge("unpitched",-21,62,N.NoteheadNull,N.NoteheadNull,N.NoteheadNull,N.GuitarGolpe,It.Top)],[125,new Ge("unpitched",-22,62,N.NoteheadNull,N.NoteheadNull,N.NoteheadNull,N.GuitarGolpe,It.Bottom)],[39,new Ge("handClap",3,39,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[40,new Ge("snare",3,40,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[31,new Ge("snare",3,40,N.NoteheadSlashedBlack2,N.NoteheadSlashedBlack2,N.NoteheadSlashedBlack2)],[41,new Ge("tom",5,41,N.NoteheadBlack,N.NoteheadHalf,N.NoteheadWhole)],[59,new Ge("ride",2,59,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack,N.PictEdgeOfCymbal,It.Bottom)],[126,new Ge("ride",2,59,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[127,new Ge("ride",2,59,N.NoteheadDiamondWhite,N.NoteheadDiamondWhite,N.NoteheadDiamondWhite)],[29,new Ge("ride",2,59,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack,N.ArticStaccatoAbove,It.Top)],[30,new Ge("crash",-3,49,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[33,new Ge("snare",3,37,N.NoteheadXBlack,N.NoteheadXBlack,N.NoteheadXBlack)],[34,new Ge("snare",3,38,N.NoteheadBlack,N.NoteheadBlack,N.NoteheadBlack)]]);class kf{constructor(){this.tieDestinationNoteId=-1,this.tieOriginNoteId=-1,this.slurDestinationNoteId=-1,this.slurOriginNoteId=-1,this.hammerPullDestinationNoteId=-1,this.hammerPullOriginNoteId=-1}}class fr{constructor(){this.id=fr.GlobalNoteId++,this.index=0,this.accentuated=Mr.None,this.bendType=Ye.None,this.bendStyle=Si.Default,this.bendOrigin=null,this.isContinuedBend=!1,this.bendPoints=null,this.maxBendPoint=null,this.fret=-1,this.string=-1,this.octave=-1,this.tone=-1,this.percussionArticulation=-1,this.isVisible=!0,this.isLeftHandTapped=!1,this.isHammerPullOrigin=!1,this.hammerPullOrigin=null,this.hammerPullDestination=null,this.isSlurDestination=!1,this.slurOrigin=null,this.slurDestination=null,this.harmonicType=Ze.None,this.harmonicValue=0,this.isGhost=!1,this.isLetRing=!1,this.letRingDestination=null,this.isPalmMute=!1,this.palmMuteDestination=null,this.isDead=!1,this.isStaccato=!1,this.slideInType=rn.None,this.slideOutType=Et.None,this.slideTarget=null,this.slideOrigin=null,this.vibrato=ni.None,this.tieOrigin=null,this.tieDestination=null,this.isTieDestination=!1,this.leftHandFinger=kt.Unknown,this.rightHandFinger=kt.Unknown,this.isFingering=!1,this.trillValue=-1,this.trillSpeed=Y.ThirtySecond,this.durationPercent=1,this.accidentalMode=Tr.Default,this.dynamics=Dt.F,this.isEffectSlurOrigin=!1,this.hasEffectSlur=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null,this._noteIdBag=null}get hasBend(){return this.bendPoints!==null&&this.bendType!==Ye.None}get isStringed(){return this.string>=0}get isPiano(){return!this.isStringed&&this.octave>=0&&this.tone>=0}get isPercussion(){return!this.isStringed&&this.percussionArticulation>=0}get element(){return this.isPercussion?hn.getElementAndVariation(this)[0]:-1}get variation(){return this.isPercussion?hn.getElementAndVariation(this)[1]:-1}get isHammerPullDestination(){return!!this.hammerPullOrigin}get isSlurOrigin(){return!!this.slurDestination}get isHarmonic(){return this.harmonicType!==Ze.None}get isTieOrigin(){return this.tieDestination!==null}get trillFret(){return this.trillValue-this.stringTuning}get isTrill(){return this.trillValue>=0}get isEffectSlurDestination(){return!!this.effectSlurOrigin}get stringTuning(){return this.beat.voice.bar.staff.capo+fr.getStringTuning(this.beat.voice.bar.staff,this.string)}static getStringTuning(e,t){return e.tuning.length>0?e.tuning[e.tuning.length-(t-1)-1]:0}get realValue(){return this.calculateRealValue(!0,!0)}get realValueWithoutHarmonic(){return this.calculateRealValue(!0,!1)}calculateRealValue(e,t){const i=e?this.beat.voice.bar.staff.transpositionPitch:0;if(t){let n=this.calculateRealValue(e,!1);return this.isStringed&&(this.harmonicType===Ze.Natural?n=this.harmonicPitch+this.stringTuning-i:n+=this.harmonicPitch),n}else return this.isPercussion?this.percussionArticulation:this.isStringed?this.fret+this.stringTuning-i:this.isPiano?this.octave*12+this.tone-i:0}get harmonicPitch(){if(this.harmonicType===Ze.None||!this.isStringed)return 0;let e=this.harmonicValue;return Fi.isAlmostEqualTo(e,2.4)?36:Fi.isAlmostEqualTo(e,2.7)?34:e<3?0:e<=3.5?31:e<=4?28:e<=5?24:e<=6?34:e<=7?19:e<=8.5?36:e<=9?28:e<=10?34:e<=11?0:e<=12?12:e<14?0:e<=15?34:e<=16?28:e<=17?36:e<=18?0:e<=19?19:e<=21?0:e<=22?36:e<=24?24:0}get initialBendValue(){return this.hasBend?Math.floor(this.bendPoints[0].value/2):this.bendOrigin?Math.floor(this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value/2):this.isTieDestination&&this.tieOrigin.bendOrigin?Math.floor(this.tieOrigin.bendOrigin.bendPoints[this.tieOrigin.bendOrigin.bendPoints.length-1].value/2):this.beat.hasWhammyBar?Math.floor(this.beat.whammyBarPoints[0].value/2):this.beat.isContinuedWhammy?Math.floor(this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value/2):0}get displayValue(){return this.displayValueWithoutBend+this.initialBendValue}get displayValueWithoutBend(){let e=this.realValue;switch(this.harmonicType!==Ze.Natural&&this.harmonicType!==Ze.None&&(e-=this.harmonicPitch),this.beat.ottava){case hi._15ma:e-=24;break;case hi._8va:e-=12;break;case hi.Regular:break;case hi._8vb:e+=12;break;case hi._15mb:e+=24;break}switch(this.beat.voice.bar.clefOttava){case hi._15ma:e-=24;break;case hi._8va:e-=12;break;case hi.Regular:break;case hi._8vb:e+=12;break;case hi._15mb:e+=24;break}return e-this.beat.voice.bar.staff.displayTranspositionPitch}get hasQuarterToneOffset(){return this.hasBend?this.bendPoints[0].value%2!==0:this.bendOrigin?this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value%2!==0:this.beat.hasWhammyBar?this.beat.whammyBarPoints[0].value%2!==0:this.beat.isContinuedWhammy?this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value%2!==0:!1}addBendPoint(e){let t=this.bendPoints;t===null&&(t=[],this.bendPoints=t),t.push(e),(!this.maxBendPoint||e.value>this.maxBendPoint.value)&&(this.maxBendPoint=e),this.bendType===Ye.None&&(this.bendType=Ye.Custom)}finish(e,t=null){let i=new fC(()=>fr.nextNoteOnSameLine(this)),n=e&&e.notation.notationMode===Gr.SongBook;if(this.isTieDestination&&(this.chain(t),n&&this.tieOrigin&&this.tieOrigin.isLetRing&&(this.isLetRing=!0)),this.isLetRing&&(!i.value||!i.value.isLetRing?this.letRingDestination=this:this.letRingDestination=i.value,n&&this.isTieDestination&&!this.tieOrigin.hasBend&&(this.isVisible=!1)),this.isPalmMute&&(!i.value||!i.value.isPalmMute?this.palmMuteDestination=this:this.palmMuteDestination=i.value),this.isHammerPullOrigin){let c=fr.findHammerPullDestination(this);c?(this.hammerPullDestination=c,c.hammerPullOrigin=this):this.isHammerPullOrigin=!1}switch(this.slideOutType){case Et.Shift:case Et.Legato:this.slideTarget=i.value,this.slideTarget?this.slideTarget.slideOrigin=this:this.slideOutType=Et.None;break}let s=null;this.isHammerPullOrigin&&this.hammerPullDestination?s=this.hammerPullDestination:this.slideOutType===Et.Legato&&this.slideTarget&&(s=this.slideTarget),s&&(this.hasEffectSlur=!0,this.effectSlurOrigin&&this.beat.pickStroke===pn.None?(this.effectSlurOrigin.effectSlurDestination=s,this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin,this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=s,this.effectSlurDestination.effectSlurOrigin=this));const o=this.bendPoints;if(o!=null&&o.length>0&&this.bendType===Ye.Custom){let c=this.isTieDestination&&this.tieOrigin.hasBend;if(this.isContinuedBend=c,o.length===4){let h=o[0],p=o[1],g=o[2],b=o[3];p.value===g.value?b.value>h.value?p.value>b.value?this.bendType=Ye.BendRelease:!c&&h.value>0?(this.bendType=Ye.PrebendBend,o.splice(2,1),o.splice(1,1)):(this.bendType=Ye.Bend,o.splice(2,1),o.splice(1,1)):b.value<h.value?c?(this.bendType=Ye.Release,o.splice(2,1),o.splice(1,1)):(this.bendType=Ye.PrebendRelease,o.splice(2,1),o.splice(1,1)):p.value>h.value?this.bendType=Ye.BendRelease:h.value>0&&!c?(this.bendType=Ye.Prebend,o.splice(2,1),o.splice(1,1)):(this.bendType=Ye.Hold,o.splice(2,1),o.splice(1,1)):ye.warning("Model","Unsupported bend type detected, fallback to custom",null)}else if(o.length===2){let h=o[0],p=o[1];p.value>h.value?!c&&h.value>0?this.bendType=Ye.PrebendBend:this.bendType=Ye.Bend:p.value<h.value?c?this.bendType=Ye.Release:this.bendType=Ye.PrebendRelease:this.bendType=Ye.Hold}}else(o===null||o.length===0)&&(this.bendType=Ye.None);this.initialBendValue>0&&(this.accidentalMode=Tr.Default)}static nextNoteOnSameLine(e){let t=e.beat.nextBeat;for(;t&&t.voice.bar.index<=e.beat.voice.bar.index+fr.MaxOffsetForSameLineSearch;){let i=t.getNoteOnString(e.string);if(i)return i;t=t.nextBeat}return null}static findHammerPullDestination(e){let t=e.beat.nextBeat;for(;t&&t.voice.bar.index<=e.beat.voice.bar.index+fr.MaxOffsetForSameLineSearch;){let i=t.getNoteOnString(e.string);if(i)return i;for(let n=e.string;n>0;n--)if(i=t.getNoteOnString(n),i){if(i.isLeftHandTapped)return i;break}for(let n=e.string;n<=e.beat.voice.bar.staff.tuning.length;n++)if(i=t.getNoteOnString(n),i){if(i.isLeftHandTapped)return i;break}t=t.nextBeat}return null}static findTieOrigin(e){let t=e.beat.previousBeat;for(;t&&t.voice.bar.index>=e.beat.voice.bar.index-fr.MaxOffsetForSameLineSearch;){if(e.isStringed){let i=t.getNoteOnString(e.string);if(i)return i}else if(e.octave===-1&&e.tone===-1){if(e.index<t.notes.length)return t.notes[e.index]}else{let i=t.getNoteWithRealValue(e.realValue);if(i)return i}t=t.previousBeat}return null}chain(e=null){if(e!==null)if(this._noteIdBag!==null){let t;e.has(fr.NoteIdLookupKey)?t=e.get(fr.NoteIdLookupKey):(t=new Map,e.set(fr.NoteIdLookupKey,t)),(this._noteIdBag.hammerPullDestinationNoteId!==-1||this._noteIdBag.tieDestinationNoteId!==-1||this._noteIdBag.slurDestinationNoteId!==-1)&&t.set(this.id,this),this._noteIdBag.hammerPullOriginNoteId!==-1&&(this.hammerPullOrigin=t.get(this._noteIdBag.hammerPullOriginNoteId),this.hammerPullOrigin.hammerPullDestination=this),this._noteIdBag.tieOriginNoteId!==-1&&(this.tieOrigin=t.get(this._noteIdBag.tieOriginNoteId),this.tieOrigin.tieDestination=this),this._noteIdBag.slurOriginNoteId!==-1&&(this.slurOrigin=t.get(this._noteIdBag.slurOriginNoteId),this.slurOrigin.slurDestination=this),this._noteIdBag=null}else{if(!this.isTieDestination&&this.tieOrigin===null)return;let t=this.tieOrigin??fr.findTieOrigin(this);t?(t.tieDestination=this,this.tieOrigin=t,this.fret=t.fret,this.octave=t.octave,this.tone=t.tone,t.hasBend&&(this.bendOrigin=this.tieOrigin)):this.isTieDestination=!1}}toJson(e){this.tieDestination!==null&&e.set("tiedestinationnoteid",this.tieDestination.id),this.tieOrigin!==null&&e.set("tieoriginnoteid",this.tieOrigin.id),this.slurDestination!==null&&e.set("slurdestinationnoteid",this.slurDestination.id),this.slurOrigin!==null&&e.set("sluroriginnoteid",this.slurOrigin.id),this.hammerPullOrigin!==null&&e.set("hammerpulloriginnoteid",this.hammerPullOrigin.id),this.hammerPullDestination!==null&&e.set("hammerpulldestinationnoteid",this.hammerPullDestination.id)}setProperty(e,t){switch(e){case"tiedestinationnoteid":return this._noteIdBag==null&&(this._noteIdBag=new kf),this._noteIdBag.tieDestinationNoteId=t,!0;case"tieoriginnoteid":return this._noteIdBag==null&&(this._noteIdBag=new kf),this._noteIdBag.tieOriginNoteId=t,!0;case"slurdestinationnoteid":return this._noteIdBag==null&&(this._noteIdBag=new kf),this._noteIdBag.slurDestinationNoteId=t,!0;case"sluroriginnoteid":return this._noteIdBag==null&&(this._noteIdBag=new kf),this._noteIdBag.slurOriginNoteId=t,!0;case"hammerpulloriginnoteid":return this._noteIdBag==null&&(this._noteIdBag=new kf),this._noteIdBag.hammerPullOriginNoteId=t,!0;case"hammerpulldestinationnoteid":return this._noteIdBag==null&&(this._noteIdBag=new kf),this._noteIdBag.hammerPullDestinationNoteId=t,!0}return!1}}fr.GlobalNoteId=0;fr.MaxOffsetForSameLineSearch=3;fr.NoteIdLookupKey="NoteIdLookup";class dn{constructor(e){this._isEqualLengthTuplet=!0,this.totalDuration=0,this.beats=[],this.isFull=!1,this.voice=e}check(e){if(this.beats.length===0)return this.beats.push(e),this.totalDuration+=e.playbackDuration,!0;if(e.graceType!==ot.None)return!0;if(e.voice!==this.voice||this.isFull||e.tupletNumerator!==this.beats[0].tupletNumerator||e.tupletDenominator!==this.beats[0].tupletDenominator)return!1;if(e.playbackDuration!==this.beats[0].playbackDuration&&(this._isEqualLengthTuplet=!1),this.beats.push(e),this.totalDuration+=e.playbackDuration,this._isEqualLengthTuplet)this.beats.length===this.beats[0].tupletNumerator&&(this.isFull=!0);else{let t=this.beats[0].tupletNumerator/this.beats[0].tupletDenominator|0;for(let i of dn.AllTicks)if(this.totalDuration===i*t){this.isFull=!0;break}}return!0}}dn.HalfTicks=1920;dn.QuarterTicks=960;dn.EighthTicks=480;dn.SixteenthTicks=240;dn.ThirtySecondTicks=120;dn.SixtyFourthTicks=60;dn.OneHundredTwentyEighthTicks=30;dn.TwoHundredFiftySixthTicks=15;dn.AllTicks=[dn.HalfTicks,dn.QuarterTicks,dn.EighthTicks,dn.SixteenthTicks,dn.ThirtySecondTicks,dn.SixtyFourthTicks,dn.OneHundredTwentyEighthTicks,dn.TwoHundredFiftySixthTicks];var ci;(function(r){r[r.None=0]="None",r[r.Custom=1]="Custom",r[r.Dive=2]="Dive",r[r.Dip=3]="Dip",r[r.Hold=4]="Hold",r[r.Predive=5]="Predive",r[r.PrediveDive=6]="PrediveDive"})(ci||(ci={}));class pC{static clone(e){const t=new De;return t.offset=e.offset,t.value=e.value,t}}class gC{static clone(e){const t=new fr;if(t.index=e.index,t.accentuated=e.accentuated,t.bendType=e.bendType,t.bendStyle=e.bendStyle,t.isContinuedBend=e.isContinuedBend,e.bendPoints){t.bendPoints=[];for(const i of e.bendPoints)t.addBendPoint(pC.clone(i))}return t.fret=e.fret,t.string=e.string,t.octave=e.octave,t.tone=e.tone,t.percussionArticulation=e.percussionArticulation,t.isVisible=e.isVisible,t.isLeftHandTapped=e.isLeftHandTapped,t.isHammerPullOrigin=e.isHammerPullOrigin,t.isSlurDestination=e.isSlurDestination,t.harmonicType=e.harmonicType,t.harmonicValue=e.harmonicValue,t.isGhost=e.isGhost,t.isLetRing=e.isLetRing,t.isPalmMute=e.isPalmMute,t.isDead=e.isDead,t.isStaccato=e.isStaccato,t.slideInType=e.slideInType,t.slideOutType=e.slideOutType,t.vibrato=e.vibrato,t.isTieDestination=e.isTieDestination,t.leftHandFinger=e.leftHandFinger,t.rightHandFinger=e.rightHandFinger,t.isFingering=e.isFingering,t.trillValue=e.trillValue,t.trillSpeed=e.trillSpeed,t.durationPercent=e.durationPercent,t.accidentalMode=e.accidentalMode,t.dynamics=e.dynamics,t}}class Cz{static clone(e){const t=new yn;return t.isLinear=e.isLinear,t.type=e.type,t.value=e.value,t.ratioPosition=e.ratioPosition,t.text=e.text,t}}class eS{static clone(e){const t=new bn;t.index=e.index,t.notes=[];for(const i of e.notes)t.addNote(gC.clone(i));t.isEmpty=e.isEmpty,t.whammyStyle=e.whammyStyle,t.ottava=e.ottava,t.isLegatoOrigin=e.isLegatoOrigin,t.duration=e.duration,t.isLetRing=e.isLetRing,t.isPalmMute=e.isPalmMute,t.automations=[];for(const i of e.automations)t.automations.push(Cz.clone(i));if(t.dots=e.dots,t.fadeIn=e.fadeIn,t.lyrics=e.lyrics?e.lyrics.slice():null,t.hasRasgueado=e.hasRasgueado,t.pop=e.pop,t.slap=e.slap,t.tap=e.tap,t.text=e.text,t.brushType=e.brushType,t.brushDuration=e.brushDuration,t.tupletDenominator=e.tupletDenominator,t.tupletNumerator=e.tupletNumerator,t.isContinuedWhammy=e.isContinuedWhammy,t.whammyBarType=e.whammyBarType,e.whammyBarPoints){t.whammyBarPoints=[];for(const i of e.whammyBarPoints)t.addWhammyBarPoint(pC.clone(i))}return t.vibrato=e.vibrato,t.chordId=e.chordId,t.graceType=e.graceType,t.pickStroke=e.pickStroke,t.tremoloSpeed=e.tremoloSpeed,t.crescendo=e.crescendo,t.displayStart=e.displayStart,t.playbackStart=e.playbackStart,t.displayDuration=e.displayDuration,t.playbackDuration=e.playbackDuration,t.dynamics=e.dynamics,t.invertBeamDirection=e.invertBeamDirection,t.preferredBeamDirection=e.preferredBeamDirection,t.isEffectSlurOrigin=e.isEffectSlurOrigin,t.beamingMode=e.beamingMode,t}}class Xw{constructor(){this.beats=[],this.id="empty",this.isComplete=!1}addBeat(e){e.graceIndex=this.beats.length,e.graceGroup=this,this.beats.push(e)}finish(){this.beats.length>0&&(this.id=this.beats[0].absoluteDisplayStart+"_"+this.beats[0].voice.index)}}var co;(function(r){r[r.Auto=0]="Auto",r[r.ForceSplitToNext=1]="ForceSplitToNext",r[r.ForceMergeWithNext=2]="ForceMergeWithNext"})(co||(co={}));class bn{constructor(){this.id=bn._globalBeatId++,this.index=0,this.previousBeat=null,this.nextBeat=null,this.notes=[],this.noteStringLookup=new Map,this.noteValueLookup=new Map,this.isEmpty=!1,this.whammyStyle=Si.Default,this.ottava=hi.Regular,this.fermata=null,this.isLegatoOrigin=!1,this.minNote=null,this.maxNote=null,this.maxStringNote=null,this.minStringNote=null,this.duration=Y.Quarter,this.isLetRing=!1,this.isPalmMute=!1,this.automations=[],this.dots=0,this.fadeIn=!1,this.lyrics=null,this.hasRasgueado=!1,this.pop=!1,this.slap=!1,this.tap=!1,this.text=null,this.brushType=Di.None,this.brushDuration=0,this.tupletDenominator=-1,this.tupletNumerator=-1,this.tupletGroup=null,this.isContinuedWhammy=!1,this.whammyBarType=ci.None,this.whammyBarPoints=null,this.maxWhammyPoint=null,this.minWhammyPoint=null,this.vibrato=ni.None,this.chordId=null,this.graceType=ot.None,this.graceGroup=null,this.graceIndex=-1,this.pickStroke=pn.None,this.tremoloSpeed=null,this.crescendo=bs.None,this.displayStart=0,this.playbackStart=0,this.displayDuration=0,this.playbackDuration=0,this.dynamics=Dt.F,this.invertBeamDirection=!1,this.preferredBeamDirection=null,this.isEffectSlurOrigin=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null,this.beamingMode=co.Auto}get isLastOfVoice(){return this.index===this.voice.beats.length-1}get isLegatoDestination(){return!!this.previousBeat&&this.previousBeat.isLegatoOrigin}get isRest(){return this.isEmpty||this.notes.length===0}get isFullBarRest(){return this.isRest&&this.voice.beats.length===1&&this.duration===Y.Whole}get hasTuplet(){return!(this.tupletDenominator===-1&&this.tupletNumerator===-1)&&!(this.tupletDenominator===1&&this.tupletNumerator===1)}get hasWhammyBar(){return this.whammyBarPoints!==null&&this.whammyBarType!==ci.None}get hasChord(){return!!this.chordId}get chord(){return this.chordId?this.voice.bar.staff.getChord(this.chordId):null}get isTremolo(){return!!this.tremoloSpeed}get absoluteDisplayStart(){return this.voice.bar.masterBar.start+this.displayStart}get absolutePlaybackStart(){return this.voice.bar.masterBar.start+this.playbackStart}get isEffectSlurDestination(){return!!this.effectSlurOrigin}addWhammyBarPoint(e){let t=this.whammyBarPoints;t===null&&(t=[],this.whammyBarPoints=t),t.push(e),(!this.maxWhammyPoint||e.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=e),(!this.minWhammyPoint||e.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=e),this.whammyBarType===ci.None&&(this.whammyBarType=ci.Custom)}removeWhammyBarPoint(e){const t=this.whammyBarPoints;if(t===null||e<0||e>=t.length)return;t.splice(e,1);let i=t[e];if(i===this.maxWhammyPoint){this.maxWhammyPoint=null;for(let n of t)(!this.maxWhammyPoint||n.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=n)}if(i===this.minWhammyPoint){this.minWhammyPoint=null;for(let n of t)(!this.minWhammyPoint||n.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=n)}}addNote(e){e.beat=this,e.index=this.notes.length,this.notes.push(e),e.isStringed&&this.noteStringLookup.set(e.string,e)}removeNote(e){let t=this.notes.indexOf(e);t>=0&&(this.notes.splice(t,1),e.isStringed&&this.noteStringLookup.delete(e.string))}getAutomation(e){for(let t=0,i=this.automations.length;t<i;t++){let n=this.automations[t];if(n.type===e)return n}return null}getNoteOnString(e){return this.noteStringLookup.has(e)?this.noteStringLookup.get(e):null}calculateDuration(){if(this.isFullBarRest)return this.voice.bar.masterBar.calculateDuration();let e=Ct.toTicks(this.duration);return this.dots===2?e=Ct.applyDot(e,!0):this.dots===1&&(e=Ct.applyDot(e,!1)),this.tupletDenominator>0&&this.tupletNumerator>=0&&(e=Ct.applyTuplet(e,this.tupletNumerator,this.tupletDenominator)),e}updateDurations(){let e=this.calculateDuration();switch(this.playbackDuration=e,this.graceType){case ot.BeforeBeat:case ot.OnBeat:switch(this.duration){case Y.Sixteenth:this.playbackDuration=Ct.toTicks(Y.SixtyFourth);break;case Y.ThirtySecond:this.playbackDuration=Ct.toTicks(Y.OneHundredTwentyEighth);break;default:this.playbackDuration=Ct.toTicks(Y.ThirtySecond);break}this.displayDuration=0;break;case ot.BendGrace:this.playbackDuration/=2,this.displayDuration=0;break;default:this.displayDuration=e;let t=this.previousBeat;t&&t.graceType===ot.BendGrace&&(this.playbackDuration=t.playbackDuration);break}}finishTuplet(){let e=this.previousBeat,t=e?e.tupletGroup:null;(this.hasTuplet||this.graceType!==ot.None&&t)&&((!e||!t||!t.check(this))&&(t=new dn(this.voice),t.check(this)),this.tupletGroup=t)}finish(e,t=null){switch(this.getAutomation(Ur.Instrument)===null&&this.index===0&&this.voice.index===0&&this.voice.bar.index===0&&this.voice.bar.staff.index===0&&this.automations.push(yn.buildInstrumentAutomation(!1,0,this.voice.bar.staff.track.playbackInfo.program)),this.graceType){case ot.OnBeat:case ot.BeforeBeat:let p=this.graceGroup.beats.length;p===1?this.duration=Y.Eighth:p===2?this.duration=Y.Sixteenth:this.duration=Y.ThirtySecond;break}let i=e?e.notation.notationMode:Gr.GuitarPro,n=this.text==="grad"||this.text==="grad.";n&&i===Gr.SongBook&&(this.text="");let s=!1;this.minNote=null,this.maxNote=null,this.minStringNote=null,this.maxStringNote=null;let o=0,c=!1;for(let p=0,g=this.notes.length;p<g;p++){let b=this.notes[p];if(b.dynamics=this.dynamics,b.finish(e,t),b.isLetRing&&(this.isLetRing=!0),b.isPalmMute&&(this.isPalmMute=!0),i===Gr.SongBook&&b.hasBend&&this.graceType!==ot.BendGrace){if(!b.isTieOrigin)switch(b.bendType){case Ye.Bend:case Ye.PrebendRelease:case Ye.PrebendBend:s=!0;break}n||b.bendStyle===Si.Gradual?(n=!0,b.bendStyle=Si.Gradual,s=!1):b.bendStyle=Si.Fast}b.isVisible&&(o++,(!this.minNote||b.realValue<this.minNote.realValue)&&(this.minNote=b),(!this.maxNote||b.realValue>this.maxNote.realValue)&&(this.maxNote=b),(!this.minStringNote||b.string<this.minStringNote.string)&&(this.minStringNote=b),(!this.maxStringNote||b.string>this.maxStringNote.string)&&(this.maxStringNote=b),b.hasEffectSlur&&(c=!0))}if(c&&(this.effectSlurOrigin?(this.effectSlurOrigin.effectSlurDestination=this.nextBeat,this.effectSlurOrigin.effectSlurDestination&&(this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin),this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=this.nextBeat,this.effectSlurDestination&&(this.effectSlurDestination.effectSlurOrigin=this))),this.notes.length>0&&o===0&&(this.isEmpty=!0),!this.isRest&&(!this.isLetRing||!this.isPalmMute)){let p=this.previousBeat;for(;p&&p.isRest;)this.isLetRing||(p.isLetRing=!1),this.isPalmMute||(p.isPalmMute=!1),p=p.previousBeat}else this.isRest&&this.previousBeat&&e&&e.notation.notationMode===Gr.GuitarPro&&(this.previousBeat.isLetRing&&(this.isLetRing=!0),this.previousBeat.isPalmMute&&(this.isPalmMute=!0));const h=this.whammyBarPoints;if(h!==null&&h.length>0&&this.whammyBarType===ci.Custom){i===Gr.SongBook&&(this.whammyStyle=n?Si.Gradual:Si.Fast);let p=!!this.previousBeat&&this.previousBeat.hasWhammyBar;if(this.isContinuedWhammy=p,h.length===4){let g=h[0],b=h[1],v=h[2],S=h[3];b.value===v.value&&(g.value<b.value&&b.value<S.value||g.value>b.value&&b.value>S.value?(g.value!==0&&!p?this.whammyBarType=ci.PrediveDive:this.whammyBarType=ci.Dive,h.splice(2,1),h.splice(1,1)):g.value>b.value&&b.value<S.value||g.value<b.value&&b.value>S.value?(this.whammyBarType=ci.Dip,(b.offset===v.offset||i===Gr.SongBook)&&h.splice(2,1)):g.value===b.value&&b.value===S.value&&(g.value!==0&&!p?this.whammyBarType=ci.Predive:this.whammyBarType=ci.Hold,h.splice(2,1),h.splice(1,1)))}}if(this.updateDurations(),s){let p=eS.clone(this);p.id=bn._globalBeatId++,p.pickStroke=pn.None;for(let g=0,b=p.notes.length;g<b;g++){let v=p.notes[g],S=this.notes[g];if(v.bendType=Ye.None,v.maxBendPoint=null,v.bendPoints=null,v.bendStyle=Si.Default,v.id=fr.GlobalNoteId++,S.isTieOrigin&&(v.tieDestination=S.tieDestination,S.tieDestination.tieOrigin=v),S.isTieDestination&&(v.tieOrigin=S.tieOrigin?S.tieOrigin:null,S.tieOrigin.tieDestination=v),S.hasBend&&S.isTieOrigin){let B=fr.findTieOrigin(S);if(B&&B.hasBend){v.bendType=Ye.Hold;let T=S.bendPoints[S.bendPoints.length-1];v.addBendPoint(new De(0,T.value)),v.addBendPoint(new De(De.MaxPosition,T.value))}}v.isTieDestination=!0}this.graceType=ot.BendGrace,this.graceGroup=new Xw,this.graceGroup.addBeat(this),this.graceGroup.isComplete=!0,this.graceGroup.finish(),this.updateDurations(),this.voice.insertBeat(this,p),p.graceGroup=new Xw,p.graceGroup.addBeat(this),p.graceGroup.isComplete=!0,p.graceGroup.finish()}}isBefore(e){return this.voice.bar.index<e.voice.bar.index||e.voice.bar.index===this.voice.bar.index&&this.index<e.index}isAfter(e){return this.voice.bar.index>e.voice.bar.index||e.voice.bar.index===this.voice.bar.index&&this.index>e.index}hasNoteOnString(e){return this.noteStringLookup.has(e)}getNoteWithRealValue(e){return this.noteValueLookup.has(e)?this.noteValueLookup.get(e):null}chain(e=null){for(const t of this.notes)this.noteValueLookup.set(t.realValue,t),t.chain(e)}}bn._globalBeatId=0;class gc{constructor(){this.name="",this.firstFret=1,this.strings=[],this.barreFrets=[],this.showName=!0,this.showDiagram=!0,this.showFingering=!0}get uniqueId(){return[this.name,this.firstFret.toString(),this.strings.join(","),this.barreFrets.join(","),this.showDiagram.toString(),this.showFingering.toString(),this.showName.toString()].join("|")}}var Wr;(function(r){r[r.Cb=-7]="Cb",r[r.Gb=-6]="Gb",r[r.Db=-5]="Db",r[r.Ab=-4]="Ab",r[r.Eb=-3]="Eb",r[r.Bb=-2]="Bb",r[r.F=-1]="F",r[r.C=0]="C",r[r.G=1]="G",r[r.D=2]="D",r[r.A=3]="A",r[r.E=4]="E",r[r.B=5]="B",r[r.FSharp=6]="FSharp",r[r.CSharp=7]="CSharp"})(Wr||(Wr={}));var Fn;(function(r){r[r.IgnoreSpaces=0]="IgnoreSpaces",r[r.Begin=1]="Begin",r[r.Text=2]="Text",r[r.Comment=3]="Comment",r[r.Dash=4]="Dash"})(Fn||(Fn={}));class Fr{constructor(){this.startBar=0,this.text=""}finish(e=!1){this.chunks=[],this.parse(this.text,0,this.chunks,e)}parse(e,t,i,n){if(!e)return;let s=Fn.Begin,o=Fn.Begin,c=!1,h=0;for(;t<e.length;){let p=e.charCodeAt(t);switch(s){case Fn.IgnoreSpaces:switch(p){case Fr.CharCodeLF:case Fr.CharCodeCR:case Fr.CharCodeTab:break;case Fr.CharCodeSpace:if(!c){s=o;continue}break;default:c=!1,s=o;continue}break;case Fn.Begin:switch(p){case Fr.CharCodeBrackedOpen:s=Fn.Comment;break;default:h=t,s=Fn.Text;continue}break;case Fn.Comment:switch(p){case Fr.CharCodeBrackedClose:s=Fn.Begin;break}break;case Fn.Text:switch(p){case Fr.CharCodeDash:s=Fn.Dash;break;case Fr.CharCodeCR:case Fr.CharCodeLF:case Fr.CharCodeSpace:let g=e.substr(h,t-h);this.addChunk(g,n),s=Fn.IgnoreSpaces,o=Fn.Begin;break}break;case Fn.Dash:switch(p){case Fr.CharCodeDash:break;default:let g=e.substr(h,t-h);this.addChunk(g,n),c=!0,s=Fn.IgnoreSpaces,o=Fn.Begin;continue}break}t+=1}s===Fn.Text&&t!==h&&this.addChunk(e.substr(h,t-h),n)}addChunk(e,t){e=this.prepareChunk(e),(!t||e.length>0&&e!=="-")&&this.chunks.push(e)}prepareChunk(e){let t=e.split("+").join(" "),i=t.length;for(;i>0&&t.charAt(i-1)==="_";)i--;return i!==t.length?t.substr(0,i):t}}Fr.CharCodeLF=10;Fr.CharCodeTab=9;Fr.CharCodeCR=13;Fr.CharCodeSpace=32;Fr.CharCodeBrackedClose=93;Fr.CharCodeBrackedOpen=91;Fr.CharCodeDash=45;var mc;(function(r){r[r.Major=0]="Major",r[r.Minor=1]="Minor"})(mc||(mc={}));var Mt;(function(r){r[r.NoTripletFeel=0]="NoTripletFeel",r[r.Triplet16th=1]="Triplet16th",r[r.Triplet8th=2]="Triplet8th",r[r.Dotted16th=3]="Dotted16th",r[r.Dotted8th=4]="Dotted8th",r[r.Scottish16th=5]="Scottish16th",r[r.Scottish8th=6]="Scottish8th"})(Mt||(Mt={}));class ou{constructor(){this.alternateEndings=0,this.nextMasterBar=null,this.previousMasterBar=null,this.index=0,this.keySignature=Wr.C,this.keySignatureType=mc.Major,this.isDoubleBar=!1,this.isRepeatStart=!1,this.repeatCount=0,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.timeSignatureCommon=!1,this.tripletFeel=Mt.NoTripletFeel,this.section=null,this.tempoAutomation=null,this.fermata=null,this.start=0,this.isAnacrusis=!1,this.displayScale=1,this.displayWidth=-1}get isRepeatEnd(){return this.repeatCount>0}get isSectionStart(){return!!this.section}calculateDuration(e=!0){if(this.isAnacrusis&&e){let t=0;for(let i of this.score.tracks)for(let n of i.staves){let s=this.index<n.bars.length?n.bars[this.index].calculateDuration():0;s>t&&(t=s)}return t}return this.timeSignatureNumerator*Ct.valueToTicks(this.timeSignatureDenominator)}addFermata(e,t){let i=this.fermata;i===null&&(i=new Map,this.fermata=i),i.set(e,t)}getFermata(e){const t=this.fermata;return t===null?null:t.has(e.playbackStart)?t.get(e.playbackStart):null}}ou.MaxAlternateEndings=8;class Nz{constructor(){this.hideDynamics=!1}}class Gk{constructor(){this.masterBars=[],this.opening=null,this.closings=[],this.isClosed=!1}get openings(){const e=this.opening;return e?[e]:[]}get isOpened(){var e;return((e=this.opening)==null?void 0:e.isRepeatStart)===!0}addMasterBar(e){this.opening===null&&(this.opening=e),this.masterBars.push(e),e.repeatGroup=this,e.isRepeatEnd&&(this.closings.push(e),this.isClosed=!0)}}class Dh{constructor(){this._currentRepeatGroup=null,this._openedRepeatGroups=[],this._properlyOpenedRepeatGroups=0,this.album="",this.artist="",this.copyright="",this.instructions="",this.music="",this.notices="",this.subTitle="",this.title="",this.words="",this.tab="",this.tempo=120,this.tempoLabel="",this.masterBars=[],this.tracks=[],this.defaultSystemsLayout=3,this.systemsLayout=[],this.stylesheet=new Nz}rebuildRepeatGroups(){this._currentRepeatGroup=null,this._openedRepeatGroups=[],this._properlyOpenedRepeatGroups=0;for(const e of this.masterBars)this.addMasterBarToRepeatGroups(e)}addMasterBar(e){e.score=this,e.index=this.masterBars.length,this.masterBars.length!==0&&(e.previousMasterBar=this.masterBars[this.masterBars.length-1],e.previousMasterBar.nextMasterBar=e,e.start=e.previousMasterBar.start+(e.previousMasterBar.isAnacrusis?0:e.previousMasterBar.calculateDuration())),this.addMasterBarToRepeatGroups(e),this.masterBars.push(e)}addMasterBarToRepeatGroups(e){var t;e.isRepeatStart?((t=this._currentRepeatGroup)!=null&&t.isClosed&&(this._openedRepeatGroups.pop(),this._properlyOpenedRepeatGroups--),this._currentRepeatGroup=new Gk,this._openedRepeatGroups.push(this._currentRepeatGroup),this._properlyOpenedRepeatGroups++):this._currentRepeatGroup||(this._currentRepeatGroup=new Gk,this._openedRepeatGroups.push(this._currentRepeatGroup)),this._currentRepeatGroup.addMasterBar(e),e.isRepeatEnd&&this._properlyOpenedRepeatGroups>1&&(this._openedRepeatGroups.pop(),this._properlyOpenedRepeatGroups--,this._currentRepeatGroup=this._openedRepeatGroups.length>0?this._openedRepeatGroups[this._openedRepeatGroups.length-1]:null)}addTrack(e){e.score=this,e.index=this.tracks.length,this.tracks.push(e)}finish(e){const t=new Map;for(let i=0,n=this.tracks.length;i<n;i++)this.tracks[i].finish(e,t)}}class Nb{constructor(){this.marker="",this.text=""}}class Ir extends sn{constructor(e){super(nn.Format,e),Object.setPrototypeOf(this,Ir.prototype)}}class _i{constructor(e,t,i,n=255){this.raw=0,this.raw=(n&255)<<24|(e&255)<<16|(t&255)<<8|i&255,this.updateRgba()}updateRgba(){this.a===255?this.rgba="#"+Fi.toHexString(this.r,2)+Fi.toHexString(this.g,2)+Fi.toHexString(this.b,2):this.rgba=`rgba(${this.r},${this.g},${this.b},${this.a/255})`}get a(){return this.raw>>24&255}get r(){return this.raw>>16&255}get g(){return this.raw>>8&255}get b(){return this.raw&255}static random(e=100){return new _i(Math.random()*255|0,Math.random()*255|0,Math.random()*255|0,e)}static fromJson(e){switch(typeof e){case"number":{const t=new _i(0,0,0,0);return t.raw=e,t.updateRgba(),t}case"string":{const t=e;if(t.startsWith("#")){if(t.length===4)return new _i(parseInt(t[1],16)*17,parseInt(t[2],16)*17,parseInt(t[3],16)*17);if(t.length===5)return new _i(parseInt(t[1],16)*17,parseInt(t[2],16)*17,parseInt(t[3],16)*17,parseInt(t[4],16)*17);if(t.length===7)return new _i(parseInt(t.substring(1,3),16),parseInt(t.substring(3,5),16),parseInt(t.substring(5,7),16));if(t.length===9)return new _i(parseInt(t.substring(1,3),16),parseInt(t.substring(3,5),16),parseInt(t.substring(5,7),16),parseInt(t.substring(7,9),16))}else if(t.startsWith("rgba")||t.startsWith("rgb")){const i=t.indexOf("("),n=t.lastIndexOf(")");if(i===-1||n===-1)throw new Ir("No values specified for rgb/rgba function");const s=t.substring(i+1,n).split(",");if(s.length===3)return new _i(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]));if(s.length===4)return new _i(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseFloat(s[3])*255)}return null}}throw new Ir("Unsupported format for color")}static toJson(e){return e.raw}}_i.BlackRgb="#000000";class mC{constructor(){this.volume=15,this.balance=8,this.port=1,this.program=0,this.primaryChannel=0,this.secondaryChannel=0,this.isMute=!1,this.isSolo=!1}}class xe{static getTextForTuning(e,t){let i=xe.getTextPartsForTuning(e);return t?i.join(""):i[0]}static getTextPartsForTuning(e,t=-1){let i=e/12|0,n=e%12;return[["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][n],(i+t).toString()]}static getDefaultTuningFor(e){return xe._defaultTunings.has(e)?xe._defaultTunings.get(e):null}static getPresetsFor(e){switch(e){case 7:return xe._sevenStrings;case 6:return xe._sixStrings;case 5:return xe._fiveStrings;case 4:return xe._fourStrings}return[]}static initialize(){xe._defaultTunings.set(7,new xe("Guitar 7 strings",[64,59,55,50,45,40,35],!0)),xe._sevenStrings.push(xe._defaultTunings.get(7)),xe._defaultTunings.set(6,new xe("Guitar Standard Tuning",[64,59,55,50,45,40],!0)),xe._sixStrings.push(xe._defaultTunings.get(6)),xe._sixStrings.push(new xe("Guitar Tune down  step",[63,58,54,49,44,39],!1)),xe._sixStrings.push(new xe("Guitar Tune down 1 step",[62,57,53,48,43,38],!1)),xe._sixStrings.push(new xe("Guitar Tune down 2 step",[60,55,51,46,41,36],!1)),xe._sixStrings.push(new xe("Guitar Dropped D Tuning",[64,59,55,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Dropped D Tuning variant",[64,57,55,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Double Dropped D Tuning",[62,59,55,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Dropped E Tuning",[66,61,57,52,47,40],!1)),xe._sixStrings.push(new xe("Guitar Dropped C Tuning",[62,57,53,48,43,36],!1)),xe._sixStrings.push(new xe("Guitar Open C Tuning",[64,60,55,48,43,36],!1)),xe._sixStrings.push(new xe("Guitar Open Cm Tuning",[63,60,55,48,43,36],!1)),xe._sixStrings.push(new xe("Guitar Open C6 Tuning",[64,57,55,48,43,36],!1)),xe._sixStrings.push(new xe("Guitar Open Cmaj7 Tuning",[64,59,55,52,43,36],!1)),xe._sixStrings.push(new xe("Guitar Open D Tuning",[62,57,54,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Open Dm Tuning",[62,57,53,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Open D5 Tuning",[62,57,50,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Open D6 Tuning",[62,59,54,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Open Dsus4 Tuning",[62,57,55,50,45,38],!1)),xe._sixStrings.push(new xe("Guitar Open E Tuning",[64,59,56,52,47,40],!1)),xe._sixStrings.push(new xe("Guitar Open Em Tuning",[64,59,55,52,47,40],!1)),xe._sixStrings.push(new xe("Guitar Open Esus11 Tuning",[64,59,55,52,45,40],!1)),xe._sixStrings.push(new xe("Guitar Open F Tuning",[65,60,53,48,45,41],!1)),xe._sixStrings.push(new xe("Guitar Open G Tuning",[62,59,55,50,43,38],!1)),xe._sixStrings.push(new xe("Guitar Open Gm Tuning",[62,58,55,50,43,38],!1)),xe._sixStrings.push(new xe("Guitar Open G6 Tuning",[64,59,55,50,43,38],!1)),xe._sixStrings.push(new xe("Guitar Open Gsus4 Tuning",[62,60,55,50,43,38],!1)),xe._sixStrings.push(new xe("Guitar Open A Tuning",[64,61,57,52,45,40],!1)),xe._sixStrings.push(new xe("Guitar Open Am Tuning",[64,60,57,52,45,40],!1)),xe._sixStrings.push(new xe("Guitar Nashville Tuning",[64,59,67,62,57,52],!1)),xe._sixStrings.push(new xe("Bass 6 Strings Tuning",[48,43,38,33,28,23],!1)),xe._sixStrings.push(new xe("Lute or Vihuela Tuning",[64,59,54,50,45,40],!1)),xe._defaultTunings.set(5,new xe("Bass 5 Strings Tuning",[43,38,33,28,23],!0)),xe._fiveStrings.push(xe._defaultTunings.get(5)),xe._fiveStrings.push(new xe("Banjo Dropped C Tuning",[62,59,55,48,67],!1)),xe._fiveStrings.push(new xe("Banjo Open D Tuning",[62,57,54,50,69],!1)),xe._fiveStrings.push(new xe("Banjo Open G Tuning",[62,59,55,50,67],!1)),xe._fiveStrings.push(new xe("Banjo G Minor Tuning",[62,58,55,50,67],!1)),xe._fiveStrings.push(new xe("Banjo G Modal Tuning",[62,57,55,50,67],!1)),xe._defaultTunings.set(4,new xe("Bass Standard Tuning",[43,38,33,28],!0)),xe._fourStrings.push(xe._defaultTunings.get(4)),xe._fourStrings.push(new xe("Bass Tune down  step",[42,37,32,27],!1)),xe._fourStrings.push(new xe("Bass Tune down 1 step",[41,36,31,26],!1)),xe._fourStrings.push(new xe("Bass Tune down 2 step",[39,34,29,24],!1)),xe._fourStrings.push(new xe("Bass Dropped D Tuning",[43,38,33,26],!1)),xe._fourStrings.push(new xe("Ukulele C Tuning",[45,40,36,43],!1)),xe._fourStrings.push(new xe("Ukulele G Tuning",[52,47,43,38],!1)),xe._fourStrings.push(new xe("Mandolin Standard Tuning",[64,57,50,43],!1)),xe._fourStrings.push(new xe("Mandolin or Violin Tuning",[76,69,62,55],!1)),xe._fourStrings.push(new xe("Viola Tuning",[69,62,55,48],!1)),xe._fourStrings.push(new xe("Cello Tuning",[57,50,43,36],!1))}static findTuning(e){let t=xe.getPresetsFor(e.length);for(let i=0,n=t.length;i<n;i++){let s=t[i],o=!0;for(let c=0,h=e.length;c<h;c++)if(e[c]!==s.tunings[c]){o=!1;break}if(o)return s}return null}constructor(e="",t=null,i=!1){this.isStandard=i,this.name=e,this.tunings=t??[]}finish(){const e=xe.findTuning(this.tunings);e&&(this.name=e.name,this.isStandard=e.isStandard),this.name=this.name.trim()}}xe._sevenStrings=[];xe._sixStrings=[];xe._fiveStrings=[];xe._fourStrings=[];xe._defaultTunings=new Map;xe.defaultAccidentals=["","#","","#","","","#","","#","","#",""];xe.defaultSteps=["C","C","D","D","E","F","F","G","G","A","A","B"];xe.initialize();class yC{constructor(){this.index=0,this.bars=[],this.chords=null,this.capo=0,this.transpositionPitch=0,this.displayTranspositionPitch=0,this.stringTuning=new xe("",[],!1),this.showTablature=!0,this.showStandardNotation=!0,this.isPercussion=!1,this.standardNotationLineCount=5}get tuning(){return this.stringTuning.tunings}get tuningName(){return this.stringTuning.name}get isStringed(){return this.stringTuning.tunings.length>0}finish(e,t=null){this.stringTuning.finish();for(let i=0,n=this.bars.length;i<n;i++)this.bars[i].finish(e,t)}addChord(e,t){t.staff=this;let i=this.chords;i===null&&(i=new Map,this.chords=i),i.set(e,t)}hasChord(e){var t;return((t=this.chords)==null?void 0:t.has(e))??!1}getChord(e){var t;return((t=this.chords)==null?void 0:t.get(e))??null}addBar(e){let t=this.bars;e.staff=this,e.index=t.length,t.length>0&&(e.previousBar=t[t.length-1],e.previousBar.nextBar=e),t.push(e)}}class gl{constructor(){this.index=0,this.staves=[],this.playbackInfo=new mC,this.color=new _i(200,0,0,255),this.name="",this.shortName="",this.defaultSystemsLayout=3,this.systemsLayout=[],this.percussionArticulations=[]}ensureStaveCount(e){for(;this.staves.length<e;)this.addStaff(new yC)}addStaff(e){e.index=this.staves.length,e.track=this,this.staves.push(e)}finish(e,t=null){this.shortName||(this.shortName=this.name,this.shortName.length>gl.ShortNameMaxLength&&(this.shortName=this.shortName.substr(0,gl.ShortNameMaxLength)));for(let i=0,n=this.staves.length;i<n;i++)this.staves[i].finish(e,t)}applyLyrics(e){for(let i of e)i.finish();let t=this.staves[0];for(let i=0;i<e.length;i++){let n=e[i];if(n.startBar>=0&&n.startBar<t.bars.length){let s=t.bars[n.startBar].voices[0].beats[0];for(let o=0;o<n.chunks.length&&s;o++){for(;s&&(s.isEmpty||s.isRest);)s=s.nextBeat;s&&(s.lyrics||(s.lyrics=new Array(e.length),s.lyrics.fill("")),s.lyrics[i]=n.chunks[o],s=s.nextBeat)}}}}}gl.ShortNameMaxLength=10;let ml=class bC{constructor(){this.id=bC._globalBarId++,this.index=0,this.beats=[],this.isEmpty=!0}insertBeat(e,t){t.nextBeat=e.nextBeat,t.nextBeat&&(t.nextBeat.previousBeat=t),t.previousBeat=e,t.voice=this,e.nextBeat=t,this.beats.splice(e.index+1,0,t)}addBeat(e){e.voice=this,e.index=this.beats.length,this.beats.push(e),e.isEmpty||(this.isEmpty=!1)}chain(e,t=null){if(this.bar){if(e.index<this.beats.length-1)e.nextBeat=this.beats[e.index+1],e.nextBeat.previousBeat=e;else if(e.isLastOfVoice&&e.voice.bar.nextBar){let i=this.bar.nextBar.voices[this.index];i.beats.length>0&&(e.nextBeat=i.beats[0]),e.nextBeat.previousBeat=e}e.chain(t)}}addGraceBeat(e){if(this.beats.length===0){this.addBeat(e);return}let t=this.beats[this.beats.length-1];this.beats.splice(this.beats.length-1,1),this.addBeat(e),this.addBeat(t),this.isEmpty=!1}getBeatAtPlaybackStart(e){return this._beatLookup.has(e)?this._beatLookup.get(e):null}finish(e,t=null){this._beatLookup=new Map;let i=null;for(let o=0;o<this.beats.length;o++){let c=this.beats[o];c.index=o,this.chain(c,t),c.graceType===ot.None?(c.graceGroup=i,i&&(i.isComplete=!0),i=null):(i||(i=new Xw),i.addBeat(c))}let n=0,s=0;for(let o=0;o<this.beats.length;o++){let c=this.beats[o];if(c.index=o,c.finish(e,t),c.graceType===ot.None){if(c.graceGroup){const h=c.graceGroup.beats[0],p=c.graceGroup.beats[c.graceGroup.beats.length-1];if(h.graceType!==ot.BendGrace){let g=p.playbackStart+p.playbackDuration-h.playbackStart;switch(h.graceType){case ot.BeforeBeat:h.previousBeat?(h.previousBeat.playbackDuration-=g,h.previousBeat.voice==this?s=h.previousBeat.playbackStart+h.previousBeat.playbackDuration:s=-g):s=-g;for(const b of c.graceGroup.beats)this._beatLookup.delete(b.playbackStart),b.playbackStart=s,this._beatLookup.set(b.playbackStart,c),s+=b.playbackDuration;break;case ot.OnBeat:c.playbackDuration-=g,p.voice===this?s=p.playbackStart+p.playbackDuration:s=-g;break}}}c.displayStart=n,c.playbackStart=s,c.fermata?this.bar.masterBar.addFermata(c.playbackStart,c.fermata):c.fermata=this.bar.masterBar.getFermata(c),this._beatLookup.set(c.playbackStart,c)}else c.displayStart=n,c.playbackStart=s;c.finishTuplet(),c.graceGroup&&c.graceGroup.finish(),n+=c.displayDuration,s+=c.playbackDuration}}calculateDuration(){if(this.isEmpty||this.beats.length===0)return 0;let e=this.beats[this.beats.length-1],t=this.beats[0];return e.playbackStart+e.playbackDuration-t.playbackStart}};ml._globalBarId=0;class Ft{static float64ToBytes(e){return Ft._dataView.setFloat64(0,e,!0),this._conversionByteArray}static bytesToFloat64(e){throw Ft._conversionByteArray.set(e,0),Ft._dataView.getFloat64(0,!0)}static uint16ToInt16(e){return Ft._dataView.setUint16(0,e,!0),Ft._dataView.getInt16(0,!0)}static int16ToUint32(e){return Ft._dataView.setInt16(0,e,!0),Ft._dataView.getUint32(0,!0)}static int32ToUint16(e){return Ft._dataView.setInt32(0,e,!0),Ft._dataView.getUint16(0,!0)}static int32ToInt16(e){return Ft._dataView.setInt32(0,e,!0),Ft._dataView.getInt16(0,!0)}static int32ToUint32(e){return Ft._dataView.setInt32(0,e,!0),Ft._dataView.getUint32(0,!0)}static uint8ToInt8(e){return Ft._dataView.setUint8(0,e),Ft._dataView.getInt8(0)}}Ft._conversionBuffer=new ArrayBuffer(8);Ft._conversionByteArray=new Uint8Array(Ft._conversionBuffer);Ft._dataView=new DataView(Ft._conversionBuffer);class de{static readInt32BE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte(),s=e.readByte();return t<<24|i<<16|n<<8|s}static readInt32LE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte();return e.readByte()<<24|n<<16|i<<8|t}static readUInt32LE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte();return e.readByte()<<24|n<<16|i<<8|t}static decodeUInt32LE(e,t){let i=e[t],n=e[t+1],s=e[t+2];return e[t+3]<<24|s<<16|n<<8|i}static readUInt16LE(e){let t=e.readByte(),i=e.readByte();return Ft.int32ToUint16(i<<8|t)}static readInt16LE(e){let t=e.readByte(),i=e.readByte();return Ft.int32ToInt16(i<<8|t)}static readUInt32BE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte(),s=e.readByte();return Ft.int32ToUint32(t<<24|i<<16|n<<8|s)}static readUInt16BE(e){let t=e.readByte(),i=e.readByte();return Ft.int32ToInt16(t<<8|i)}static readInt16BE(e){let t=e.readByte(),i=e.readByte();return Ft.int32ToInt16(t<<8|i)}static readByteArray(e,t){let i=new Uint8Array(t);return e.read(i,0,t),i}static read8BitChars(e,t){let i=new Uint8Array(t);return e.read(i,0,i.length),de.toString(i,"utf-8")}static read8BitString(e){let t="",i=e.readByte();for(;i!==0;)t+=String.fromCharCode(i),i=e.readByte();return t}static read8BitStringLength(e,t){let i="",n=-1;for(let o=0;o<t;o++){let c=e.readByte();c===0&&n===-1&&(n=o),i+=String.fromCharCode(c)}let s=i;return n>=0?s.substr(0,n):s}static readSInt8(e){let t=e.readByte();return((t&255)>>7)*-256+(t&255)}static readInt24(e,t){let i=e[t]|e[t+1]<<8|e[t+2]<<16;return(i&8388608)===8388608&&(i=i|255<<24),i}static readInt16(e,t){return Ft.int32ToInt16(e[t]|e[t+1]<<8)}static toString(e,t){let i=de.detectEncoding(e);return i&&(t=i),t||(t="utf-8"),new TextDecoder(t).decode(e.buffer)}static detectEncoding(e){return e.length>2&&e[0]===254&&e[1]===255?"utf-16be":e.length>2&&e[0]===255&&e[1]===254?"utf-16le":e.length>4&&e[0]===0&&e[1]===0&&e[2]===254&&e[3]===255?"utf-32be":e.length>4&&e[0]===255&&e[1]===254&&e[2]===0&&e[3]===0?"utf-32le":null}static stringToBytes(e){return new TextEncoder().encode(e)}static writeInt32BE(e,t){e.writeByte(t>>24&255),e.writeByte(t>>16&255),e.writeByte(t>>8&255),e.writeByte(t>>0&255)}static writeInt32LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255),e.writeByte(t>>16&255),e.writeByte(t>>24&255)}static writeUInt16LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255)}static writeInt16LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255)}static writeInt16BE(e,t){e.writeByte(t>>8&255),e.writeByte(t>>0&255)}}class vn{constructor(){this.length=0,this.position=0}get bytesWritten(){return this.position}getBuffer(){return this._buffer}static empty(){return vn.withCapacity(0)}static withCapacity(e){let t=new vn;return t._buffer=new Uint8Array(e),t}static fromBuffer(e){let t=new vn;return t._buffer=e,t.length=e.length,t}static fromString(e){let t=de.stringToBytes(e);return vn.fromBuffer(t)}reset(){this.position=0}skip(e){this.position+=e}readByte(){return this.length-this.position<=0?-1:this._buffer[this.position++]}read(e,t,i){let n=this.length-this.position;return n>i&&(n=i),n<=0?0:(e.set(this._buffer.subarray(this.position,this.position+n),t),this.position+=n,n)}writeByte(e){let t=this.position+1;this.ensureCapacity(t),this._buffer[this.position]=e&255,t>this.length&&(this.length=t),this.position=t}write(e,t,i){let n=this.position+i;this.ensureCapacity(n);let s=Math.min(i,e.length-t);this._buffer.set(e.subarray(t,t+s),this.position),n>this.length&&(this.length=n),this.position=n}ensureCapacity(e){if(e>this._buffer.length){let t=e;t<256&&(t=256),t<this._buffer.length*2&&(t=this._buffer.length*2);let i=new Uint8Array(t);this.length>0&&i.set(this._buffer.subarray(0,0+this.length),0),this._buffer=i}}readAll(){return this.toArray()}toArray(){let e=new Uint8Array(this.length);return e.set(this._buffer.subarray(0,0+this.length),0),e}copyTo(e){e.write(this._buffer,0,this.length)}}var Q;(function(r){r[r.No=0]="No",r[r.Eof=1]="Eof",r[r.Number=2]="Number",r[r.DoubleDot=3]="DoubleDot",r[r.Dot=4]="Dot",r[r.String=5]="String",r[r.Tuning=6]="Tuning",r[r.LParensis=7]="LParensis",r[r.RParensis=8]="RParensis",r[r.LBrace=9]="LBrace",r[r.RBrace=10]="RBrace",r[r.Pipe=11]="Pipe",r[r.MetaCommand=12]="MetaCommand",r[r.Multiply=13]="Multiply",r[r.LowerThan=14]="LowerThan"})(Q||(Q={}));class Nh extends sn{constructor(e,t,i,n,s,o,c,h=null){super(nn.AlphaTex,e),this.position=t,this.line=i,this.col=n,this.nonTerm=s??"",this.expected=o??Q.No,this.symbol=c??Q.No,this.symbolData=h,Object.setPrototypeOf(this,Nh.prototype)}static symbolError(e,t,i,n,s,o,c=null){let h=`MalFormed AlphaTex: @${e} (line ${t}, col ${i}): Error on block ${n}`;return s!==o?(h+=`, expected a ${Q[s]} found a ${Q[o]}`,c!==null&&(h+=`: '${c}'`)):h+=`, invalid value: '${c}'`,new Nh(h,e,t,i,n,s,o,c)}static errorMessage(e,t,i,n){return e=`MalFormed AlphaTex: @${t} (line ${i}, col ${n}): ${e}`,new Nh(e,t,i,n,null,null,null,null)}}class Un extends Qf{constructor(){super(),this._trackChannel=0,this._input="",this._ch=Un.Eof,this._curChPos=0,this._line=1,this._col=0,this._lastValidSpot=[0,1,0],this._sy=Q.No,this._syData="",this._allowNegatives=!1,this._allowFloat=!1,this._allowTuning=!1,this._currentDuration=Y.QuadrupleWhole,this._currentDynamics=Dt.PPP,this._currentTuplet=0,this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this.logErrors=!1}get name(){return"AlphaTex"}initFromString(e,t){this.data=vn.empty(),this._input=e,this.settings=t}readScore(){try{if(this.data.length>0&&(this._input=de.toString(this.data.readAll(),this.settings.importer.encoding)),this._allowTuning=!0,this._lyrics=new Map,this.createDefaultScore(),this._curChPos=0,this._line=1,this._col=0,this.saveValidSpot(),this._currentDuration=Y.Quarter,this._currentDynamics=Dt.F,this._currentTuplet=1,this._ch=this.nextChar(),this._sy=this.newSy(),this._sy===Q.LowerThan)throw new Or("Unknown start sign '<' (meant to import as XML?)");if(this._sy===Q.Eof)throw new Or("Unexpected end of file");const e=this.metaData(),t=this.bars();if(!e&&!t)throw new Or("No alphaTex data found");this.consolidate(),this._score.finish(this.settings),this._score.rebuildRepeatGroups();for(const[i,n]of this._lyrics)this._score.tracks[i].applyLyrics(n);return this._score}catch(e){throw e instanceof Nh?new Or(e.message,e):e}}consolidate(){for(let e of this._score.tracks)for(let t of e.staves)for(;t.bars.length<this._score.masterBars.length;){let i=this.newBar(t),n=new bn;n.isEmpty=!0,i.voices[0].addBeat(n)}}error(e,t,i=!0){let n,s=!1;i?(n=this._sy,(n===Q.String||n===Q.Number||n===Q.MetaCommand)&&(s=!0)):n=t;let o=Nh.symbolError(this._lastValidSpot[0],this._lastValidSpot[1],this._lastValidSpot[2],e,t,n,s?this._syData:null);throw this.logErrors&&ye.error(this.name,o.message),o}errorMessage(e){let t=Nh.errorMessage(e,this._lastValidSpot[0],this._lastValidSpot[1],this._lastValidSpot[2]);throw this.logErrors&&ye.error(this.name,t.message),t}createDefaultScore(){this._score=new Dh,this._score.tempo=120,this._score.tempoLabel="",this.newTrack()}newTrack(){this._currentTrack=new gl,this._currentTrack.ensureStaveCount(1),this._currentTrack.playbackInfo.program=25,this._currentTrack.playbackInfo.primaryChannel=this._trackChannel++,this._currentTrack.playbackInfo.secondaryChannel=this._trackChannel++,this._currentStaff=this._currentTrack.staves[0],this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=xe.getDefaultTuningFor(6).tunings,this._score.addTrack(this._currentTrack),this._lyrics.set(this._currentTrack.index,[]),this._currentDynamics=Dt.F}parseClefFromString(e){switch(e.toLowerCase()){case"g2":case"treble":return _t.G2;case"f4":case"bass":return _t.F4;case"c3":case"tenor":return _t.C3;case"c4":case"alto":return _t.C4;case"n":case"neutral":return _t.Neutral;default:return _t.G2}}parseClefFromInt(e){switch(e){case 43:return _t.G2;case 65:return _t.F4;case 48:return _t.C3;case 60:return _t.C4;default:return _t.G2}}parseTripletFeelFromString(e){switch(e.toLowerCase()){case"no":case"none":return Mt.NoTripletFeel;case"t16":case"triplet-16th":return Mt.Triplet16th;case"t8":case"triplet-8th":return Mt.Triplet8th;case"d16":case"dotted-16th":return Mt.Dotted16th;case"d8":case"dotted-8th":return Mt.Dotted8th;case"s16":case"scottish-16th":return Mt.Scottish16th;case"s8":case"scottish-8th":return Mt.Scottish8th;default:return Mt.NoTripletFeel}}parseTripletFeelFromInt(e){switch(e){case 0:return Mt.NoTripletFeel;case 1:return Mt.Triplet16th;case 2:return Mt.Triplet8th;case 3:return Mt.Dotted16th;case 4:return Mt.Dotted8th;case 5:return Mt.Scottish16th;case 6:return Mt.Scottish8th;default:return Mt.NoTripletFeel}}parseKeySignature(e){switch(e.toLowerCase()){case"cb":case"cbmajor":return Wr.Cb;case"gb":case"gbmajor":case"d#minor":return Wr.Gb;case"db":case"dbmajor":case"bbminor":return Wr.Db;case"ab":case"abmajor":case"fminor":return Wr.Ab;case"eb":case"ebmajor":case"cminor":return Wr.Eb;case"bb":case"bbmajor":case"gminor":return Wr.Bb;case"f":case"fmajor":case"dminor":return Wr.F;case"c":case"cmajor":case"aminor":return Wr.C;case"g":case"gmajor":case"eminor":return Wr.G;case"d":case"dmajor":case"bminor":return Wr.D;case"a":case"amajor":case"f#minor":return Wr.A;case"e":case"emajor":case"c#minor":return Wr.E;case"b":case"bmajor":case"g#minor":return Wr.B;case"f#":case"f#major":case"ebminor":return Wr.FSharp;case"c#":case"c#major":return Wr.CSharp;default:return Wr.C}}nextChar(){return this._curChPos<this._input.length?(this._ch=this._input.charCodeAt(this._curChPos++),this._ch===10?(this._line++,this._col=0):this._col++):this._ch=Un.Eof,this._ch}saveValidSpot(){this._lastValidSpot=[this._curChPos,this._line,this._col]}newSy(){for(this.saveValidSpot(),this._sy=Q.No;this._sy===Q.No;)if(this._ch===Un.Eof)this._sy=Q.Eof;else if(Un.isWhiteSpace(this._ch))this._ch=this.nextChar(),this.saveValidSpot();else if(this._ch===47){if(this._ch=this.nextChar(),this._ch===47)for(;this._ch!==13&&this._ch!==10&&this._ch!==Un.Eof;)this._ch=this.nextChar();else if(this._ch===42)for(;this._ch!==Un.Eof;)if(this._ch===42){if(this._ch=this.nextChar(),this._ch===47){this._ch=this.nextChar();break}}else this._ch=this.nextChar();else this.error("comment",Q.String,!1);this.saveValidSpot()}else if(this._ch===34||this._ch===39){let e=this._ch;this._ch=this.nextChar();let t="";for(this._sy=Q.String;this._ch!==e&&this._ch!==Un.Eof;)t+=String.fromCharCode(this._ch),this._ch=this.nextChar();this._ch===Un.Eof&&this.errorMessage("String opened but never closed"),this._syData=t,this._ch=this.nextChar()}else if(this._ch===45)this._allowNegatives?(this._sy=Q.Number,this._syData=this.readNumber()):(this._sy=Q.String,this._syData=this.readName());else if(this._ch===46)this._sy=Q.Dot,this._ch=this.nextChar();else if(this._ch===58)this._sy=Q.DoubleDot,this._ch=this.nextChar();else if(this._ch===40)this._sy=Q.LParensis,this._ch=this.nextChar();else if(this._ch===92)this._ch=this.nextChar(),this._sy=Q.MetaCommand,this._syData=this.readName();else if(this._ch===41)this._sy=Q.RParensis,this._ch=this.nextChar();else if(this._ch===123)this._sy=Q.LBrace,this._ch=this.nextChar();else if(this._ch===125)this._sy=Q.RBrace,this._ch=this.nextChar();else if(this._ch===124)this._sy=Q.Pipe,this._ch=this.nextChar();else if(this._ch===42)this._sy=Q.Multiply,this._ch=this.nextChar();else if(this._ch===60)this._sy=Q.LowerThan,this._ch=this.nextChar();else if(this.isDigit(this._ch))this._sy=Q.Number,this._syData=this.readNumber();else if(Un.isNameLetter(this._ch)){let e=this.readName(),t=this._allowTuning?Fi.parseTuning(e):null;t?(this._sy=Q.Tuning,this._syData=t):(this._sy=Q.String,this._syData=e)}else this.error("symbol",Q.String,!1);return this._sy}static isNameLetter(e){return!Un.isTerminal(e)&&(33<=e&&e<=47||58<=e&&e<=126||128<=e)}static isTerminal(e){return e===46||e===123||e===125||e===91||e===93||e===40||e===41||e===124||e===39||e===34||e===92}static isWhiteSpace(e){return e===9||e===10||e===11||e===13||e===32}isDigit(e){return e>=48&&e<=57||this._allowNegatives&&e===45||this._allowFloat&&e===46}readName(){let e="";do e+=String.fromCharCode(this._ch),this._ch=this.nextChar();while(Un.isNameLetter(this._ch)||this.isDigit(this._ch));return e}readNumber(){let e="";do e+=String.fromCharCode(this._ch),this._ch=this.nextChar();while(this.isDigit(this._ch));return this._allowFloat?parseFloat(e):parseInt(e)}metaData(){let e=!1,t=!0;for(;this._sy===Q.MetaCommand&&t;){let i=this._syData.toLowerCase();switch(i){case"title":case"subtitle":case"artist":case"album":case"words":case"music":case"copyright":this._sy=this.newSy(),this._sy!==Q.String&&this.error(i,Q.String,!0);let n=this._syData;switch(i){case"title":this._score.title=n;break;case"subtitle":this._score.subTitle=n;break;case"artist":this._score.artist=n;break;case"album":this._score.album=n;break;case"words":this._score.words=n;break;case"music":this._score.music=n;break;case"copyright":this._score.copyright=n;break}this._sy=this.newSy(),e=!0;break;case"tempo":this._allowFloat=!0,this._sy=this.newSy(),this._allowFloat=!1,this._sy===Q.Number?this._score.tempo=this._syData:this.error("tempo",Q.Number,!0),this._sy=this.newSy(),e=!0;break;default:this.handleStaffMeta()?e=!0:e?this.error("metaDataTags",Q.String,!1):t=!1;break}}return e?(this._sy!==Q.Dot&&this.error("song",Q.Dot,!0),this._sy=this.newSy()):this._sy===Q.Dot&&(this._sy=this.newSy()),e}handleStaffMeta(){var e;switch(this._syData.toLowerCase()){case"capo":return this._sy=this.newSy(),this._sy===Q.Number?this._currentStaff.capo=this._syData:this.error("capo",Q.Number,!0),this._sy=this.newSy(),!0;case"tuning":this._sy=this.newSy();let t=this._currentStaff.tuning.length;switch(this._staffHasExplicitTuning=!0,this._staffTuningApplied=!1,this._sy){case Q.String:let s=this._syData.toLowerCase();s==="piano"||s==="none"||s==="voice"?(this._currentStaff.stringTuning.tunings=[],this._currentStaff.displayTranspositionPitch=0):this.error("tuning",Q.Tuning,!0),this._sy=this.newSy();break;case Q.Tuning:let o=[];do{let c=this._syData;o.push(c.realValue),this._sy=this.newSy()}while(this._sy===Q.Tuning);this._currentStaff.stringTuning.tunings=o;break;default:this.error("tuning",Q.Tuning,!0);break}return t!==this._currentStaff.tuning.length&&(((e=this._currentStaff.chords)==null?void 0:e.size)??0)>0&&this.errorMessage("Tuning must be defined before any chord"),!0;case"instrument":if(this._sy=this.newSy(),this._staffTuningApplied=!1,this._sy===Q.Number){let s=this._syData;s>=0&&s<=127?this._currentTrack.playbackInfo.program=this._syData:this.error("instrument",Q.Number,!1)}else if(this._sy===Q.String){let s=this._syData.toLowerCase();this._currentTrack.playbackInfo.program=Jl.getValue(s)}else this.error("instrument",Q.Number,!0);return this._sy=this.newSy(),!0;case"lyrics":this._sy=this.newSy();let i=new Fr;return i.startBar=0,i.text="",this._sy===Q.Number&&(i.startBar=this._syData,this._sy=this.newSy()),this._sy===Q.String?(i.text=this._syData,this._sy=this.newSy()):this.error("lyrics",Q.String,!0),this._lyrics.get(this._currentTrack.index).push(i),!0;case"chord":this._sy=this.newSy();let n=new gc;this.chordProperties(n),this._sy===Q.String?(n.name=this._syData,this._sy=this.newSy()):this.error("chord-name",Q.Number,!0);for(let s=0;s<this._currentStaff.tuning.length;s++)this._sy===Q.Number?n.strings.push(this._syData):this._sy===Q.String&&this._syData.toLowerCase()==="x"&&n.strings.push(-1),this._sy=this.newSy();return this._currentStaff.addChord(this.getChordId(this._currentStaff,n.name),n),!0;default:return!1}}chordProperties(e){if(this._sy===Q.LBrace){for(this._sy=this.newSy();this._sy===Q.String;)switch(this._syData.toLowerCase()){case"firstfret":switch(this._sy=this.newSy(),this._sy){case Q.Number:e.firstFret=this._syData;break;default:this.error("chord-firstfret",Q.Number,!0);break}this._sy=this.newSy();break;case"showdiagram":switch(this._sy=this.newSy(),this._sy){case Q.String:e.showDiagram=this._syData.toLowerCase()!=="false";break;case Q.Number:e.showDiagram=this._syData!==0;break;default:this.error("chord-showdiagram",Q.String,!0);break}this._sy=this.newSy();break;case"showfingering":switch(this._sy=this.newSy(),this._sy){case Q.String:e.showDiagram=this._syData.toLowerCase()!=="false";break;case Q.Number:e.showFingering=this._syData!==0;break;default:this.error("chord-showfingering",Q.String,!0);break}this._sy=this.newSy();break;case"showname":switch(this._sy=this.newSy(),this._sy){case Q.String:e.showName=this._syData.toLowerCase()!=="false";break;case Q.Number:e.showName=this._syData!==0;break;default:this.error("chord-showname",Q.String,!0);break}this._sy=this.newSy();break;case"barre":for(this._sy=this.newSy();this._sy===Q.Number;)e.barreFrets.push(this._syData),this._sy=this.newSy();break;default:this.error("chord-properties",Q.String,!1);break}this._sy!==Q.RBrace&&this.error("chord-properties",Q.RBrace,!0),this._sy=this.newSy()}}bars(){let e=this.bar();for(;this._sy!==Q.Eof;)if(this._sy===Q.Pipe)this._sy=this.newSy(),this.bar();else if(this._sy===Q.MetaCommand)this.bar();else break;return e}trackStaffMeta(){return this._sy!==Q.MetaCommand?!1:(this._syData.toLowerCase()==="track"&&(this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this._sy=this.newSy(),this._score.masterBars.length>0&&this.newTrack(),this._sy===Q.String&&(this._currentTrack.name=this._syData,this._sy=this.newSy()),this._sy===Q.String&&(this._currentTrack.shortName=this._syData,this._sy=this.newSy())),this._sy===Q.MetaCommand&&this._syData.toLowerCase()==="staff"&&(this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this._sy=this.newSy(),this._currentTrack.staves[0].bars.length>0&&(this._currentTrack.ensureStaveCount(this._currentTrack.staves.length+1),this._currentStaff=this._currentTrack.staves[this._currentTrack.staves.length-1],this._currentDynamics=Dt.F),this.staffProperties()),!0)}staffProperties(){if(this._sy!==Q.LBrace)return;this._sy=this.newSy();let e=!1,t=!1;for(;this._sy===Q.String;)switch(this._syData.toLowerCase()){case"score":e=!0,this._sy=this.newSy();break;case"tabs":t=!0,this._sy=this.newSy();break;default:this.error("staff-properties",Q.String,!1);break}(e||t)&&(this._currentStaff.showStandardNotation=e,this._currentStaff.showTablature=t),this._sy!==Q.RBrace&&this.error("staff-properties",Q.RBrace,!0),this._sy=this.newSy()}bar(){const e=this.trackStaffMeta();let t=this.newBar(this._currentStaff);if(this._currentStaff.bars.length>this._score.masterBars.length){let o=new ou;this._score.addMasterBar(o),o.index>0&&(o.keySignature=o.previousMasterBar.keySignature,o.keySignatureType=o.previousMasterBar.keySignatureType,o.timeSignatureDenominator=o.previousMasterBar.timeSignatureDenominator,o.timeSignatureNumerator=o.previousMasterBar.timeSignatureNumerator,o.tripletFeel=o.previousMasterBar.tripletFeel)}const i=this.barMeta(t);if(!this._staffTuningApplied&&!this._staffHasExplicitTuning){const o=this._currentTrack.playbackInfo.program;this._currentStaff.displayTranspositionPitch=0,this._currentStaff.stringTuning.tunings=[],o==15||o>=24&&o<=31?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=xe.getDefaultTuningFor(6).tunings):o>=32&&o<=39?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=[43,38,33,28]):o==40||o==44||o==45||o==48||o==49||o==50||o==51?this._currentStaff.stringTuning.tunings=[52,57,50,43]:o==41?this._currentStaff.stringTuning.tunings=[57,50,43,36]:o==42?this._currentStaff.stringTuning.tunings=[45,38,31,24]:o==43?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=[43,38,33,28]):o==105?this._currentStaff.stringTuning.tunings=[50,47,43,38,55]:o==106?this._currentStaff.stringTuning.tunings=[57,52,45]:o==107?this._currentStaff.stringTuning.tunings=[52,45,38,31]:o==110&&(this._currentStaff.stringTuning.tunings=[64,57,50,43]),this._staffTuningApplied=!0}let n=!1,s=t.voices[0];for(;this._sy!==Q.Pipe&&this._sy!==Q.Eof&&this.beat(s);)n=!0;if(s.beats.length===0){let o=new bn;o.isEmpty=!0,s.addBeat(o)}return e||i||n}newBar(e){let t=new cu;e.addBar(t),t.index>0&&(t.clef=t.previousBar.clef);let i=new ml;return t.addVoice(i),t}beat(e){this.beatDuration();let t=new bn;if(e.addBeat(t),this._sy===Q.LParensis){for(this._sy=this.newSy(),this.note(t);this._sy!==Q.RParensis&&this._sy!==Q.Eof&&this.note(t););this._sy!==Q.RParensis&&this.error("note-list",Q.RParensis,!0),this._sy=this.newSy()}else if(this._sy===Q.String&&this._syData.toLowerCase()==="r")this._sy=this.newSy();else if(!this.note(t))return e.beats.splice(e.beats.length-1,1),!1;this._sy===Q.Dot&&(this._allowNegatives=!0,this._sy=this.newSy(),this._allowNegatives=!1,this._sy!==Q.Number&&this.error("duration",Q.Number,!0),this._currentDuration=this.parseDuration(this._syData),this._sy=this.newSy()),t.duration=this._currentDuration,t.dynamics=this._currentDynamics,this._currentTuplet!==1&&!t.hasTuplet&&Un.applyTuplet(t,this._currentTuplet);let i=1;this._sy===Q.Multiply&&(this._sy=this.newSy(),this._sy!==Q.Number?this.error("multiplier",Q.Number,!0):i=this._syData,this._sy=this.newSy()),this.beatEffects(t);for(let n=0;n<i-1;n++)e.addBeat(eS.clone(t));return!0}beatDuration(){if(this._sy===Q.DoubleDot&&(this._allowNegatives=!0,this._sy=this.newSy(),this._allowNegatives=!1,this._sy!==Q.Number&&this.error("duration",Q.Number,!0),this._currentDuration=this.parseDuration(this._syData),this._currentTuplet=1,this._sy=this.newSy(),this._sy===Q.LBrace)){for(this._sy=this.newSy();this._sy===Q.String;)switch(this._syData.toLowerCase()){case"tu":this._sy=this.newSy(),this._sy!==Q.Number&&this.error("duration-tuplet",Q.Number,!0),this._currentTuplet=this._syData,this._sy=this.newSy();break;default:this.error("beat-duration",Q.String,!1);break}this._sy!==Q.RBrace&&this.error("beat-duration",Q.RBrace,!0),this._sy=this.newSy()}}beatEffects(e){if(this._sy===Q.LBrace){for(this._sy=this.newSy();this._sy===Q.String;)this.applyBeatEffect(e)||this.error("beat-effects",Q.String,!1);this._sy!==Q.RBrace&&this.error("beat-effects",Q.RBrace,!0),this._sy=this.newSy()}}applyBeatEffect(e){let t=this._syData.toLowerCase();if(t==="f")e.fadeIn=!0;else if(t==="v")e.vibrato=ni.Slight;else if(t==="s")e.slap=!0;else if(t==="p")e.pop=!0;else if(t==="tt")e.tap=!0;else if(t==="dd")e.dots=2;else if(t==="d")e.dots=1;else if(t==="su")e.pickStroke=pn.Up;else if(t==="sd")e.pickStroke=pn.Down;else if(t==="tu"){if(this._sy=this.newSy(),this._sy!==Q.Number)return this.error("tuplet",Q.Number,!0),!1;Un.applyTuplet(e,this._syData)}else if(t==="tb"||t==="tbe"){let i=t==="tbe";for(this._sy=this.newSy(),this._sy!==Q.LParensis&&this.error("tremolobar-effect",Q.LParensis,!0),this._allowNegatives=!0,this._sy=this.newSy();this._sy!==Q.RParensis&&this._sy!==Q.Eof;){let n=0,s=0;i?(this._sy!==Q.Number&&this.error("tremolobar-effect",Q.Number,!0),n=this._syData,this._sy=this.newSy(),this._sy!==Q.Number&&this.error("tremolobar-effect",Q.Number,!0),s=this._syData):(this._sy!==Q.Number&&this.error("tremolobar-effect",Q.Number,!0),n=0,s=this._syData),e.addWhammyBarPoint(new De(n,s)),this._sy=this.newSy()}if(e.whammyBarPoints!=null){for(;e.whammyBarPoints.length>60;)e.removeWhammyBarPoint(e.whammyBarPoints.length-1);if(i)e.whammyBarPoints.sort((n,s)=>n.offset-s.offset);else{let n=e.whammyBarPoints.length,s=60/n|0,o=0;for(;o<n;)e.whammyBarPoints[o].offset=Math.min(60,o*s),o++}}this._allowNegatives=!1,this._sy!==Q.RParensis&&this.error("tremolobar-effect",Q.RParensis,!0)}else if(t==="bu"||t==="bd"||t==="au"||t==="ad"){switch(t){case"bu":e.brushType=Di.BrushUp;break;case"bd":e.brushType=Di.BrushDown;break;case"au":e.brushType=Di.ArpeggioUp;break;case"ad":e.brushType=Di.ArpeggioDown;break}return this._sy=this.newSy(),this._sy===Q.Number?(e.brushDuration=this._syData,this._sy=this.newSy(),!0):(e.updateDurations(),t==="bu"||t==="bd"?e.brushDuration=e.playbackDuration/4/e.notes.length:(t==="au"||t==="ad")&&(e.brushDuration=e.playbackDuration/e.notes.length),!0)}else if(t==="ch"){this._sy=this.newSy();let i=this._syData,n=this.getChordId(this._currentStaff,i);if(!this._currentStaff.hasChord(n)){let s=new gc;s.showDiagram=!1,s.name=i,this._currentStaff.addChord(n,s)}e.chordId=n}else{if(t==="gr")return this._sy=this.newSy(),this._syData.toLowerCase()==="ob"?(e.graceType=ot.OnBeat,this._sy=this.newSy()):this._syData.toLowerCase()==="b"?(e.graceType=ot.BendGrace,this._sy=this.newSy()):e.graceType=ot.BeforeBeat,!0;if(t==="dy"){switch(this._sy=this.newSy(),this._syData.toLowerCase()){case"ppp":e.dynamics=Dt.PPP;break;case"pp":e.dynamics=Dt.PP;break;case"p":e.dynamics=Dt.P;break;case"mp":e.dynamics=Dt.MP;break;case"mf":e.dynamics=Dt.MF;break;case"f":e.dynamics=Dt.F;break;case"ff":e.dynamics=Dt.FF;break;case"fff":e.dynamics=Dt.FFF;break}this._currentDynamics=e.dynamics}else if(t==="cre")e.crescendo=bs.Crescendo;else if(t==="dec")e.crescendo=bs.Decrescendo;else if(t==="tp"){if(this._sy=this.newSy(),e.tremoloSpeed=Y.Eighth,this._sy===Q.Number){switch(this._syData){case 8:e.tremoloSpeed=Y.Eighth;break;case 16:e.tremoloSpeed=Y.Sixteenth;break;case 32:e.tremoloSpeed=Y.ThirtySecond;break;default:e.tremoloSpeed=Y.Eighth;break}this._sy=this.newSy()}return!0}else return!1}return this._sy=this.newSy(),!0}getChordId(e,t){return t.toLowerCase()+e.index+e.track.index}static applyTuplet(e,t){switch(t){case 3:e.tupletNumerator=3,e.tupletDenominator=2;break;case 5:e.tupletNumerator=5,e.tupletDenominator=4;break;case 6:e.tupletNumerator=6,e.tupletDenominator=4;break;case 7:e.tupletNumerator=7,e.tupletDenominator=4;break;case 9:e.tupletNumerator=9,e.tupletDenominator=8;break;case 10:e.tupletNumerator=10,e.tupletDenominator=8;break;case 11:e.tupletNumerator=11,e.tupletDenominator=8;break;case 12:e.tupletNumerator=12,e.tupletDenominator=8;break;default:e.tupletNumerator=1,e.tupletDenominator=1;break}}isNoteText(e){return e==="x"||e==="-"||e==="r"}note(e){let t=!1,i=!1,n=-1,s=-1,o=-1;switch(this._sy){case Q.Number:n=this._syData;break;case Q.String:t=this._syData==="x",i=this._syData==="-",i||t?n=0:this.error("note-fret",Q.Number,!0);break;case Q.Tuning:let g=this._syData;s=g.octave,o=g.noteValue;break;default:return!1}this._sy=this.newSy();let c=s===-1&&this._currentStaff.tuning.length>0,h=-1;c&&(this._sy!==Q.Dot&&this.error("note",Q.Dot,!0),this._sy=this.newSy(),this._sy!==Q.Number&&this.error("note-string",Q.Number,!0),h=this._syData,(h<1||h>this._currentStaff.tuning.length)&&this.error("note-string",Q.Number,!1),this._sy=this.newSy());let p=new fr;return c?(p.string=this._currentStaff.tuning.length-(h-1),p.isDead=t,p.isTieDestination=i,i||(p.fret=n)):(p.octave=s,p.tone=o,p.isTieDestination=i),e.addNote(p),this.noteEffects(p),!0}noteEffects(e){if(this._sy===Q.LBrace){for(this._sy=this.newSy();this._sy===Q.String;){let t=this._syData.toLowerCase();if(t==="b"||t==="be"){let i=t==="be";for(this._sy=this.newSy(),this._sy!==Q.LParensis&&this.error("bend-effect",Q.LParensis,!0),this._sy=this.newSy();this._sy!==Q.RParensis&&this._sy!==Q.Eof;){let s=0,o=0;i?(this._sy!==Q.Number&&this.error("bend-effect-value",Q.Number,!0),s=this._syData,this._sy=this.newSy(),this._sy!==Q.Number&&this.error("bend-effect-value",Q.Number,!0),o=this._syData):(this._sy!==Q.Number&&this.error("bend-effect-value",Q.Number,!0),o=this._syData),e.addBendPoint(new De(s,o)),this._sy=this.newSy()}const n=e.bendPoints;if(n!=null){for(;n.length>60;)n.splice(n.length-1,1);if(i)n.sort((s,o)=>s.offset-o.offset);else{let s=n.length,o=60/(s-1)|0,c=0;for(;c<s;)n[c].offset=Math.min(60,c*o),c++}}this._sy!==Q.RParensis&&this.error("bend-effect",Q.RParensis,!0),this._sy=this.newSy()}else if(t==="nh")e.harmonicType=Ze.Natural,this._sy=this.newSy();else if(t==="ah")e.harmonicType=Ze.Artificial,this._sy=this.newSy();else if(t==="th")e.harmonicType=Ze.Tap,this._sy=this.newSy();else if(t==="ph")e.harmonicType=Ze.Pinch,this._sy=this.newSy();else if(t==="sh")e.harmonicType=Ze.Semi,this._sy=this.newSy();else if(t==="tr"){this._sy=this.newSy(),this._sy!==Q.Number&&this.error("trill-effect",Q.Number,!0);let i=this._syData;this._sy=this.newSy();let n=Y.Sixteenth;if(this._sy===Q.Number){switch(this._syData){case 16:n=Y.Sixteenth;break;case 32:n=Y.ThirtySecond;break;case 64:n=Y.SixtyFourth;break;default:n=Y.Sixteenth;break}this._sy=this.newSy()}e.trillValue=i+e.stringTuning,e.trillSpeed=n}else if(t==="v")this._sy=this.newSy(),e.vibrato=ni.Slight;else if(t==="sl")this._sy=this.newSy(),e.slideOutType=Et.Legato;else if(t==="ss")this._sy=this.newSy(),e.slideOutType=Et.Shift;else if(t==="sib")this._sy=this.newSy(),e.slideInType=rn.IntoFromBelow;else if(t==="sia")this._sy=this.newSy(),e.slideInType=rn.IntoFromAbove;else if(t==="sou")this._sy=this.newSy(),e.slideOutType=Et.OutUp;else if(t==="sod")this._sy=this.newSy(),e.slideOutType=Et.OutDown;else if(t==="psd")this._sy=this.newSy(),e.slideOutType=Et.PickSlideDown;else if(t==="psu")this._sy=this.newSy(),e.slideOutType=Et.PickSlideUp;else if(t==="h")this._sy=this.newSy(),e.isHammerPullOrigin=!0;else if(t==="lht")this._sy=this.newSy(),e.isLeftHandTapped=!0;else if(t==="g")this._sy=this.newSy(),e.isGhost=!0;else if(t==="ac")this._sy=this.newSy(),e.accentuated=Mr.Normal;else if(t==="hac")this._sy=this.newSy(),e.accentuated=Mr.Heavy;else if(t==="pm")this._sy=this.newSy(),e.isPalmMute=!0;else if(t==="st")this._sy=this.newSy(),e.isStaccato=!0;else if(t==="lr")this._sy=this.newSy(),e.isLetRing=!0;else if(t==="x")this._sy=this.newSy(),e.fret=0,e.isDead=!0;else if(t==="-"||t==="t")this._sy=this.newSy(),e.isTieDestination=!0;else if(t==="lf"){this._sy=this.newSy();let i=kt.Thumb;this._sy===Q.Number&&(i=this.toFinger(this._syData),this._sy=this.newSy()),e.leftHandFinger=i}else if(t==="rf"){this._sy=this.newSy();let i=kt.Thumb;this._sy===Q.Number&&(i=this.toFinger(this._syData),this._sy=this.newSy()),e.rightHandFinger=i}else this.applyBeatEffect(e.beat)||this.error(t,Q.String,!1)}this._sy!==Q.RBrace&&this.error("note-effect",Q.RBrace,!1),this._sy=this.newSy()}}toFinger(e){switch(e){case 1:return kt.Thumb;case 2:return kt.IndexFinger;case 3:return kt.MiddleFinger;case 4:return kt.AnnularFinger;case 5:return kt.LittleFinger}return kt.Thumb}parseDuration(e){switch(e){case-4:return Y.QuadrupleWhole;case-2:return Y.DoubleWhole;case 1:return Y.Whole;case 2:return Y.Half;case 4:return Y.Quarter;case 8:return Y.Eighth;case 16:return Y.Sixteenth;case 32:return Y.ThirtySecond;case 64:return Y.SixtyFourth;case 128:return Y.OneHundredTwentyEighth;case 256:return Y.TwoHundredFiftySixth;default:return Y.Quarter}}barMeta(e){let t=!1,i=e.masterBar;for(;this._sy===Q.MetaCommand;){t=!0;let n=this._syData.toLowerCase();if(n==="ts")this._sy=this.newSy(),this._sy!==Q.Number&&this.error("timesignature-numerator",Q.Number,!0),i.timeSignatureNumerator=this._syData,this._sy=this.newSy(),this._sy!==Q.Number&&this.error("timesignature-denominator",Q.Number,!0),i.timeSignatureDenominator=this._syData,this._sy=this.newSy();else if(n==="ro")i.isRepeatStart=!0,this._sy=this.newSy();else if(n==="rc")this._sy=this.newSy(),this._sy!==Q.Number&&this.error("repeatclose",Q.Number,!0),this._syData>2048&&this.error("repeatclose",Q.Number,!1),i.repeatCount=this._syData,this._sy=this.newSy();else if(n==="ae")if(this._sy=this.newSy(),this._sy===Q.LParensis){for(this._sy=this.newSy(),this._sy!==Q.Number&&this.error("alternateending",Q.Number,!0),this.applyAlternateEnding(i);this._sy===Q.Number;)this.applyAlternateEnding(i);this._sy!==Q.RParensis&&this.error("alternateending-list",Q.RParensis,!0),this._sy=this.newSy()}else this._sy!==Q.Number&&this.error("alternateending",Q.Number,!0),this.applyAlternateEnding(i);else if(n==="ks")this._sy=this.newSy(),this._sy!==Q.String&&this.error("keysignature",Q.String,!0),i.keySignature=this.parseKeySignature(this._syData),this._sy=this.newSy();else if(n==="clef"){switch(this._sy=this.newSy(),this._sy){case Q.String:e.clef=this.parseClefFromString(this._syData);break;case Q.Number:e.clef=this.parseClefFromInt(this._syData);break;case Q.Tuning:let s=this._syData;e.clef=this.parseClefFromInt(s.realValue);break;default:this.error("clef",Q.String,!0);break}this._sy=this.newSy()}else if(n==="tempo"){this._allowFloat=!0,this._sy=this.newSy(),this._allowFloat=!1,this._sy!==Q.Number&&this.error("tempo",Q.Number,!0);let s=new yn;s.isLinear=!1,s.type=Ur.Tempo,s.value=this._syData,i.tempoAutomation=s,this._sy=this.newSy()}else if(n==="section"){this._sy=this.newSy(),this._sy!==Q.String&&this.error("section",Q.String,!0);let s=this._syData;this._sy=this.newSy();let o="";this._sy===Q.String&&!this.isNoteText(this._syData.toLowerCase())&&(o=s,s=this._syData,this._sy=this.newSy());let c=new Nb;c.marker=o,c.text=s,i.section=c}else if(n==="tf"){switch(this._allowTuning=!1,this._sy=this.newSy(),this._allowTuning=!0,this._sy){case Q.String:i.tripletFeel=this.parseTripletFeelFromString(this._syData);break;case Q.Number:i.tripletFeel=this.parseTripletFeelFromInt(this._syData);break;default:this.error("triplet-feel",Q.String,!0);break}this._sy=this.newSy()}else n==="ac"?(i.isAnacrusis=!0,this._sy=this.newSy()):e.index===0?this.handleStaffMeta()||this.error("measure-effects",Q.String,!1):this.error("measure-effects",Q.String,!1)}if(i.index===0&&!i.tempoAutomation){let n=new yn;n.isLinear=!1,n.type=Ur.Tempo,n.value=this._score.tempo,i.tempoAutomation=n}return t}applyAlternateEnding(e){let t=this._syData;t<1&&this.error("alternateending",Q.Number,!0),e.alternateEndings|=1<<t-1,this._sy=this.newSy()}}Un.Eof=0;class rl extends Qf{get name(){return"Guitar Pro 3-5"}constructor(){super(),this._versionNumber=0,this._globalTripletFeel=Mt.NoTripletFeel,this._lyricsTrack=0,this._lyrics=[],this._barCount=0,this._trackCount=0,this._playbackInfos=[],this._beatTextChunksByTrack=new Map}readScore(){return this.readVersion(),this._score=new Dh,this.readScoreInformation(),this._versionNumber<500&&(this._globalTripletFeel=ii.gpReadBool(this.data)?Mt.Triplet8th:Mt.NoTripletFeel),this._versionNumber>=400&&this.readLyrics(),this._versionNumber>=510&&this.data.skip(19),this._versionNumber>=500&&(this.readPageSetup(),this._score.tempoLabel=ii.gpReadStringIntByte(this.data,this.settings.importer.encoding)),this._score.tempo=de.readInt32LE(this.data),this._versionNumber>=510&&ii.gpReadBool(this.data),de.readInt32LE(this.data),this._versionNumber>=400&&this.data.readByte(),this.readPlaybackInfos(),this._versionNumber>=500&&(this.data.skip(38),this.data.skip(4)),this._barCount=de.readInt32LE(this.data),this._trackCount=de.readInt32LE(this.data),this.readMasterBars(),this.readTracks(),this.readBars(),this._score.masterBars.length>0&&(this._score.masterBars[0].tempoAutomation=yn.buildTempoAutomation(!1,0,this._score.tempo,2),this._score.masterBars[0].tempoAutomation.text=this._score.tempoLabel),this._score.finish(this.settings),this._lyrics&&this._lyricsTrack>=0&&this._score.tracks[this._lyricsTrack].applyLyrics(this._lyrics),this._score}readVersion(){let e=ii.gpReadStringByteLength(this.data,30,this.settings.importer.encoding);if(!e.startsWith(rl.VersionString))throw new Or("Unsupported format");e=e.substr(rl.VersionString.length+1);let t=e.indexOf(".");this._versionNumber=100*parseInt(e.substr(0,t))+parseInt(e.substr(t+1)),ye.debug(this.name,"Guitar Pro version "+e+" detected")}readScoreInformation(){var i;this._score.title=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.subTitle=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.artist=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.album=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.words=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.music=this._versionNumber>=500?ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding):this._score.words,this._score.copyright=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.tab=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.instructions=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding);let e=de.readInt32LE(this.data),t="";for(let n=0;n<e;n++)n>0&&(t+=`\r
`),t+=(i=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding))==null?void 0:i.toString();this._score.notices=t}readLyrics(){this._lyrics=[],this._lyricsTrack=de.readInt32LE(this.data)-1;for(let e=0;e<5;e++){let t=new Fr;t.startBar=de.readInt32LE(this.data)-1,t.text=ii.gpReadStringInt(this.data,this.settings.importer.encoding),this._lyrics.push(t)}}readPageSetup(){this.data.skip(30);for(let e=0;e<10;e++)ii.gpReadStringIntByte(this.data,this.settings.importer.encoding)}readPlaybackInfos(){this._playbackInfos=[];for(let e=0;e<64;e++){let t=new mC;t.primaryChannel=e,t.secondaryChannel=e,t.program=de.readInt32LE(this.data),t.volume=this.data.readByte(),t.balance=this.data.readByte(),this.data.skip(6),this._playbackInfos.push(t)}}readMasterBars(){for(let e=0;e<this._barCount;e++)this.readMasterBar()}readMasterBar(){let e=null;this._score.masterBars.length>0&&(e=this._score.masterBars[this._score.masterBars.length-1]);let t=new ou,i=this.data.readByte();if(i&1?t.timeSignatureNumerator=this.data.readByte():e&&(t.timeSignatureNumerator=e.timeSignatureNumerator),i&2?t.timeSignatureDenominator=this.data.readByte():e&&(t.timeSignatureDenominator=e.timeSignatureDenominator),t.isRepeatStart=(i&4)!==0,i&8&&(t.repeatCount=this.data.readByte()+(this._versionNumber>=500?0:1)),i&16&&this._versionNumber<500){let n=e,s=0;for(;n&&!(n.isRepeatEnd&&n!==e||n.isRepeatStart);)s=s|n.alternateEndings,n=n.previousMasterBar;let o=0,c=this.data.readByte();for(let h=0;h<8;h++){let p=1<<h;c>h&&!(s&p)&&(o=o|p)}t.alternateEndings=o}if(i&32){let n=new Nb;n.text=ii.gpReadStringIntByte(this.data,this.settings.importer.encoding),n.marker="",ii.gpReadColor(this.data,!1),t.section=n}if(i&64?(t.keySignature=de.readSInt8(this.data),t.keySignatureType=this.data.readByte()):e&&(t.keySignature=e.keySignature,t.keySignatureType=e.keySignatureType),this._versionNumber>=500&&i&3&&this.data.skip(4),this._versionNumber>=500&&(t.alternateEndings=this.data.readByte()),this._versionNumber>=500){switch(this.data.readByte()){case 1:t.tripletFeel=Mt.Triplet8th;break;case 2:t.tripletFeel=Mt.Triplet16th;break}this.data.readByte()}else t.tripletFeel=this._globalTripletFeel;t.isDoubleBar=(i&128)!==0,this._score.addMasterBar(t)}readTracks(){for(let e=0;e<this._trackCount;e++)this.readTrack()}readTrack(){let e=new gl;e.ensureStaveCount(1),this._score.addTrack(e);let t=e.staves[0],i=this.data.readByte();e.name=ii.gpReadStringByteLength(this.data,40,this.settings.importer.encoding),i&1&&(t.isPercussion=!0);let n=de.readInt32LE(this.data),s=[];for(let p=0;p<7;p++){let g=de.readInt32LE(this.data);n>p&&s.push(g)}t.stringTuning.tunings=s;let o=de.readInt32LE(this.data),c=de.readInt32LE(this.data)-1,h=de.readInt32LE(this.data)-1;if(this.data.skip(4),c>=0&&c<this._playbackInfos.length){let p=this._playbackInfos[c];p.port=o,p.isSolo=(i&16)!==0,p.isMute=(i&32)!==0,p.secondaryChannel=h,Jl.isGuitar(p.program)&&(t.displayTranspositionPitch=-12),e.playbackInfo=p}t.capo=de.readInt32LE(this.data),e.color=ii.gpReadColor(this.data,!1),this._versionNumber>=500&&(this.data.readByte(),this.data.readByte(),this.data.skip(43)),this._versionNumber>=510&&(this.data.skip(4),ii.gpReadStringIntByte(this.data,this.settings.importer.encoding),ii.gpReadStringIntByte(this.data,this.settings.importer.encoding))}readBars(){for(let e=0;e<this._barCount;e++)for(let t=0;t<this._trackCount;t++)this.readBar(this._score.tracks[t])}readBar(e){let t=new cu,i=e.staves[0];i.isPercussion&&(t.clef=_t.Neutral),i.addBar(t);let n=1;this._versionNumber>=500&&(this.data.readByte(),n=2);for(let s=0;s<n;s++)this.readVoice(e,t)}readVoice(e,t){let i=de.readInt32LE(this.data);if(i===0)return;let n=new ml;t.addVoice(n);for(let s=0;s<i;s++)this.readBeat(e,t,n)}readBeat(e,t,i){let n=new bn,s=this.data.readByte();if(s&1&&(n.dots=1),s&64){let g=this.data.readByte();n.isEmpty=(g&2)===0}switch(i.addBeat(n),de.readSInt8(this.data)){case-2:n.duration=Y.Whole;break;case-1:n.duration=Y.Half;break;case 0:n.duration=Y.Quarter;break;case 1:n.duration=Y.Eighth;break;case 2:n.duration=Y.Sixteenth;break;case 3:n.duration=Y.ThirtySecond;break;case 4:n.duration=Y.SixtyFourth;break;default:n.duration=Y.Quarter;break}if(s&32)switch(n.tupletNumerator=de.readInt32LE(this.data),n.tupletNumerator){case 1:n.tupletDenominator=1;break;case 3:n.tupletDenominator=2;break;case 5:case 6:case 7:n.tupletDenominator=4;break;case 9:case 10:case 11:case 12:case 13:n.tupletDenominator=8;break;case 2:case 4:case 8:break;default:n.tupletNumerator=1,n.tupletDenominator=1;break}s&2&&this.readChord(n);let c=this.settings.importer.beatTextAsLyrics&&e.index!==this._lyricsTrack;if(s&4){const g=ii.gpReadStringIntUnused(this.data,this.settings.importer.encoding);if(c){const b=new Fr;b.text=g.trim(),b.finish(!0);const v=[];for(let S=b.chunks.length-1;S>=0;S--)v.push(b.chunks[S]);this._beatTextChunksByTrack.set(e.index,v)}else n.text=g}let h=Ze.None;s&8&&(h=this.readBeatEffects(n)),s&16&&this.readMixTableChange(n);let p=this.data.readByte();for(let g=6;g>=0;g--)if(p&1<<g&&6-g<t.staff.tuning.length){const b=this.readNote(e,t,i,n,6-g);h!==Ze.None&&(b.harmonicType=h,b.harmonicType===Ze.Natural&&(b.harmonicValue=this.deltaFretToHarmonicValue(b.fret)))}this._versionNumber>=500&&(this.data.readByte(),this.data.readByte()&8&&this.data.readByte()),c&&!n.isRest&&this._beatTextChunksByTrack.has(e.index)&&this._beatTextChunksByTrack.get(e.index).length>0&&(n.lyrics=[this._beatTextChunksByTrack.get(e.index).pop()])}readChord(e){let t=new gc,i=Fi.newGuid();if(this._versionNumber>=500){this.data.skip(17),t.name=ii.gpReadStringByteLength(this.data,21,this.settings.importer.encoding),this.data.skip(4),t.firstFret=de.readInt32LE(this.data);for(let o=0;o<7;o++){let c=de.readInt32LE(this.data);o<e.voice.bar.staff.tuning.length&&t.strings.push(c)}let n=this.data.readByte(),s=new Uint8Array(5);this.data.read(s,0,s.length);for(let o=0;o<n;o++)t.barreFrets.push(s[o]);this.data.skip(26)}else if(this.data.readByte()!==0)if(this._versionNumber>=400){this.data.skip(16),t.name=ii.gpReadStringByteLength(this.data,21,this.settings.importer.encoding),this.data.skip(4),t.firstFret=de.readInt32LE(this.data);for(let o=0;o<7;o++){let c=de.readInt32LE(this.data);o<e.voice.bar.staff.tuning.length&&t.strings.push(c)}let n=this.data.readByte(),s=new Uint8Array(5);this.data.read(s,0,s.length);for(let o=0;o<n;o++)t.barreFrets.push(s[o]);this.data.skip(26)}else{this.data.skip(25),t.name=ii.gpReadStringByteLength(this.data,34,this.settings.importer.encoding),t.firstFret=de.readInt32LE(this.data);for(let n=0;n<6;n++){let s=de.readInt32LE(this.data);n<e.voice.bar.staff.tuning.length&&t.strings.push(s)}this.data.skip(36)}else{let n=this._versionNumber>=406?7:6;if(t.name=ii.gpReadStringIntByte(this.data,this.settings.importer.encoding),t.firstFret=de.readInt32LE(this.data),t.firstFret>0)for(let s=0;s<n;s++){let o=de.readInt32LE(this.data);s<e.voice.bar.staff.tuning.length&&t.strings.push(o)}}t.name&&(e.chordId=i,e.voice.bar.staff.addChord(e.chordId,t))}readBeatEffects(e){let t=this.data.readByte(),i=0;if(this._versionNumber>=400&&(i=this.data.readByte()),e.fadeIn=(t&16)!==0,(this._versionNumber<400&&t&1||t&2)&&(e.vibrato=ni.Slight),e.hasRasgueado=(i&1)!==0,t&32&&this._versionNumber>=400)switch(de.readSInt8(this.data)){case 1:e.tap=!0;break;case 2:e.slap=!0;break;case 3:e.pop=!0;break}else if(t&32){switch(de.readSInt8(this.data)){case 1:e.tap=!0;break;case 2:e.slap=!0;break;case 3:e.pop=!0;break}this.data.skip(4)}if(i&4&&this.readTremoloBarEffect(e),t&64){let n=0,s=0;this._versionNumber<500?(s=this.data.readByte(),n=this.data.readByte()):(n=this.data.readByte(),s=this.data.readByte()),n>0?(e.brushType=Di.BrushUp,e.brushDuration=rl.toStrokeValue(n)):s>0&&(e.brushType=Di.BrushDown,e.brushDuration=rl.toStrokeValue(s))}if(i&2)switch(de.readSInt8(this.data)){case 0:e.pickStroke=pn.None;break;case 1:e.pickStroke=pn.Up;break;case 2:e.pickStroke=pn.Down;break}if(this._versionNumber<400){if(t&4)return Ze.Natural;if(t&8)return Ze.Artificial}return Ze.None}readTremoloBarEffect(e){this.data.readByte(),de.readInt32LE(this.data);let t=de.readInt32LE(this.data);if(t>0)for(let i=0;i<t;i++){let n=new De(0,0);n.offset=de.readInt32LE(this.data),n.value=de.readInt32LE(this.data)/rl.BendStep|0,ii.gpReadBool(this.data),e.addWhammyBarPoint(n)}}static toStrokeValue(e){switch(e){case 1:return 30;case 2:return 30;case 3:return 60;case 4:return 120;case 5:return 240;case 6:return 480;default:return 0}}readMixTableChange(e){let t=new Pz;t.instrument=de.readSInt8(this.data),this._versionNumber>=500&&this.data.skip(16),t.volume=de.readSInt8(this.data),t.balance=de.readSInt8(this.data);let i=de.readSInt8(this.data),n=de.readSInt8(this.data),s=de.readSInt8(this.data),o=de.readSInt8(this.data);if(this._versionNumber>=500&&(t.tempoName=ii.gpReadStringIntByte(this.data,this.settings.importer.encoding)),t.tempo=de.readInt32LE(this.data),t.volume>=0&&this.data.readByte(),t.balance>=0&&this.data.readByte(),i>=0&&this.data.readByte(),n>=0&&this.data.readByte(),s>=0&&this.data.readByte(),o>=0&&this.data.readByte(),t.tempo>=0&&(t.duration=de.readSInt8(this.data),this._versionNumber>=510&&this.data.readByte()),this._versionNumber>=400&&this.data.readByte(),this._versionNumber>=500&&this.data.readByte(),this._versionNumber>=510&&(ii.gpReadStringIntByte(this.data,this.settings.importer.encoding),ii.gpReadStringIntByte(this.data,this.settings.importer.encoding)),t.volume>=0){let c=new yn;c.isLinear=!0,c.type=Ur.Volume,c.value=t.volume,e.automations.push(c)}if(t.balance>=0){let c=new yn;c.isLinear=!0,c.type=Ur.Balance,c.value=t.balance,e.automations.push(c)}if(t.instrument>=0){let c=new yn;c.isLinear=!0,c.type=Ur.Instrument,c.value=t.instrument,e.automations.push(c)}if(t.tempo>=0){let c=new yn;c.isLinear=!0,c.type=Ur.Tempo,c.value=t.tempo,e.automations.push(c),e.voice.bar.masterBar.tempoAutomation=c}}readNote(e,t,i,n,s){let o=new fr;o.string=t.staff.tuning.length-s;let c=this.data.readByte();if(c&2?o.accentuated=Mr.Heavy:c&64&&(o.accentuated=Mr.Normal),o.isGhost=(c&4)!==0,c&32){let p=this.data.readByte();p===3?o.isDead=!0:p===2&&(o.isTieDestination=!0)}if(c&1&&this._versionNumber<500&&(this.data.readByte(),this.data.readByte()),c&16){let p=de.readSInt8(this.data);o.dynamics=this.toDynamicValue(p),n.dynamics=o.dynamics}c&32&&(o.fret=de.readSInt8(this.data)),c&128&&(o.leftHandFinger=de.readSInt8(this.data),o.rightHandFinger=de.readSInt8(this.data),o.isFingering=!0);let h=!1;if(this._versionNumber>=500&&(c&1&&(o.durationPercent=ii.gpReadDouble(this.data)),h=(this.data.readByte()&2)!==0),n.addNote(o),c&8&&this.readNoteEffects(e,i,n,o),t.staff.isPercussion&&(o.percussionArticulation=o.fret,o.string=-1,o.fret=-1),h){const p=xe.defaultAccidentals[o.realValueWithoutHarmonic%12];p==="#"?o.accidentalMode=Tr.ForceFlat:p==="b"&&(o.accidentalMode=Tr.ForceSharp)}return o}toDynamicValue(e){switch(e){case 1:return Dt.PPP;case 2:return Dt.PP;case 3:return Dt.P;case 4:return Dt.MP;case 5:return Dt.MF;case 6:return Dt.F;case 7:return Dt.FF;case 8:return Dt.FFF;default:return Dt.F}}readNoteEffects(e,t,i,n){let s=this.data.readByte(),o=0;this._versionNumber>=400&&(o=this.data.readByte()),s&1&&this.readBend(n),s&16&&this.readGrace(t,n),o&4&&this.readTremoloPicking(i),o&8?this.readSlide(n):this._versionNumber<400&&s&4&&(n.slideOutType=Et.Shift),o&16&&this.readArtificialHarmonic(n),o&32&&this.readTrill(n),n.isLetRing=(s&8)!==0,n.isHammerPullOrigin=(s&2)!==0,o&64&&(n.vibrato=ni.Slight),n.isPalmMute=(o&2)!==0,n.isStaccato=(o&1)!==0}readBend(e){this.data.readByte(),de.readInt32LE(this.data);let t=de.readInt32LE(this.data);if(t>0)for(let i=0;i<t;i++){let n=new De(0,0);n.offset=de.readInt32LE(this.data),n.value=de.readInt32LE(this.data)/rl.BendStep|0,ii.gpReadBool(this.data),e.addBendPoint(n)}}readGrace(e,t){let i=new bn,n=new fr;switch(n.string=t.string,n.fret=de.readSInt8(this.data),i.duration=Y.ThirtySecond,i.dynamics=this.toDynamicValue(de.readSInt8(this.data)),de.readSInt8(this.data)){case 0:break;case 1:n.slideOutType=Et.Legato,n.slideTarget=t;break;case 2:break;case 3:n.isHammerPullOrigin=!0;break}if(n.dynamics=i.dynamics,this.data.skip(1),this._versionNumber<500)i.graceType=ot.BeforeBeat;else{let o=this.data.readByte();n.isDead=(o&1)!==0,i.graceType=o&2?ot.OnBeat:ot.BeforeBeat}e.addGraceBeat(i),i.addNote(n)}readTremoloPicking(e){switch(this.data.readByte()){case 1:e.tremoloSpeed=Y.Eighth;break;case 2:e.tremoloSpeed=Y.Sixteenth;break;case 3:e.tremoloSpeed=Y.ThirtySecond;break}}readSlide(e){if(this._versionNumber>=500){let t=de.readSInt8(this.data);t&1?e.slideOutType=Et.Shift:t&2?e.slideOutType=Et.Legato:t&4?e.slideOutType=Et.OutDown:t&8&&(e.slideOutType=Et.OutUp),t&16?e.slideInType=rn.IntoFromBelow:t&32&&(e.slideInType=rn.IntoFromAbove)}else switch(de.readSInt8(this.data)){case 1:e.slideOutType=Et.Shift;break;case 2:e.slideOutType=Et.Legato;break;case 3:e.slideOutType=Et.OutDown;break;case 4:e.slideOutType=Et.OutUp;break;case-1:e.slideInType=rn.IntoFromBelow;break;case-2:e.slideInType=rn.IntoFromAbove;break}}readArtificialHarmonic(e){let t=this.data.readByte();if(this._versionNumber>=500)switch(t){case 1:e.harmonicType=Ze.Natural,e.harmonicValue=this.deltaFretToHarmonicValue(e.fret);break;case 2:this.data.readByte(),this.data.readByte(),this.data.readByte(),e.harmonicType=Ze.Artificial;break;case 3:e.harmonicType=Ze.Tap,e.harmonicValue=this.deltaFretToHarmonicValue(this.data.readByte());break;case 4:e.harmonicType=Ze.Pinch,e.harmonicValue=12;break;case 5:e.harmonicType=Ze.Semi,e.harmonicValue=12;break}else if(this._versionNumber>=400)switch(t){case 1:e.harmonicType=Ze.Natural;break;case 3:e.harmonicType=Ze.Tap;break;case 4:e.harmonicType=Ze.Pinch;break;case 5:e.harmonicType=Ze.Semi;break;case 15:e.harmonicType=Ze.Artificial;break;case 17:e.harmonicType=Ze.Artificial;break;case 22:e.harmonicType=Ze.Artificial;break}}deltaFretToHarmonicValue(e){switch(e){case 2:return 2.4;case 3:return 3.2;case 4:case 5:case 7:case 9:case 12:case 16:case 17:case 19:case 24:return e;case 8:return 8.2;case 10:return 9.6;case 14:case 15:return 14.7;case 21:case 22:return 21.7;default:return 12}}readTrill(e){switch(e.trillValue=this.data.readByte()+e.stringTuning,this.data.readByte()){case 1:e.trillSpeed=Y.Sixteenth;break;case 2:e.trillSpeed=Y.ThirtySecond;break;case 3:e.trillSpeed=Y.SixtyFourth;break}}}rl.VersionString="FICHIER GUITAR PRO ";rl.BendStep=25;class ii{static gpReadDouble(e){let t=new Uint8Array(8);return e.read(t,0,t.length),new Float64Array(t.buffer)[0]}static gpReadFloat(e){let t=new Uint8Array(4);return t[3]=e.readByte(),t[2]=e.readByte(),t[2]=e.readByte(),t[1]=e.readByte(),new Float32Array(t.buffer)[0]}static gpReadColor(e,t=!1){let i=e.readByte(),n=e.readByte(),s=e.readByte(),o=255;return t?o=e.readByte():e.skip(1),new _i(i,n,s,o)}static gpReadBool(e){return e.readByte()!==0}static gpReadStringIntUnused(e,t){return e.skip(4),ii.gpReadString(e,e.readByte(),t)}static gpReadStringInt(e,t){return ii.gpReadString(e,de.readInt32LE(e),t)}static gpReadStringIntByte(e,t){let i=de.readInt32LE(e)-1;return e.readByte(),ii.gpReadString(e,i,t)}static gpReadString(e,t,i){let n=new Uint8Array(t);return e.read(n,0,n.length),de.toString(n,i)}static gpWriteString(e,t){const i=de.stringToBytes(t);e.writeByte(t.length),e.write(i,0,i.length)}static gpReadStringByteLength(e,t,i){let n=e.readByte(),s=ii.gpReadString(e,n,i);return n<t&&e.skip(t-n),s}}class Pz{constructor(){this.volume=-1,this.balance=-1,this.instrument=-1,this.tempoName="",this.tempo=-1,this.duration=-1}}class gs{constructor(){this.x=0,this.y=0,this.w=0,this.h=0}}var ao;(function(r){r[r.Boolean=0]="Boolean",r[r.Integer=1]="Integer",r[r.Float=2]="Float",r[r.String=3]="String",r[r.Point=4]="Point",r[r.Size=5]="Size",r[r.Rectangle=6]="Rectangle",r[r.Color=7]="Color"})(ao||(ao={}));class Pb{constructor(e){this.raw=new Map;let t=vn.fromBuffer(e),i=de.readInt32BE(t);for(let n=0;n<i;n++){let s=ii.gpReadString(t,t.readByte(),"utf-8");switch(t.readByte()){case ao.Boolean:let c=t.readByte()===1;this.addValue(s,c);break;case ao.Integer:let h=de.readInt32BE(t);this.addValue(s,h);break;case ao.Float:let p=ii.gpReadFloat(t);this.addValue(s,p);break;case ao.String:let g=ii.gpReadString(t,de.readInt16BE(t),"utf-8");this.addValue(s,g);break;case ao.Point:let b=de.readInt32BE(t),v=de.readInt32BE(t);this.addValue(s,new De(b,v));break;case ao.Size:let S=de.readInt32BE(t),B=de.readInt32BE(t);this.addValue(s,new De(S,B));break;case ao.Rectangle:let T=new gs;T.x=de.readInt32BE(t),T.y=de.readInt32BE(t),T.w=de.readInt32BE(t),T.h=de.readInt32BE(t),this.addValue(s,T);break;case ao.Color:let C=ii.gpReadColor(t,!0);this.addValue(s,C);break}}}apply(e){for(const[t,i]of this.raw)switch(t){case"StandardNotation/hideDynamics":e.stylesheet.hideDynamics=i;break}}addValue(e,t){this.raw.set(e,t)}static writeForScore(e){const t=vn.withCapacity(128);return de.writeInt32BE(t,1),Pb.writeBooleanEntry(t,"StandardNotation/hideDynamics",e.stylesheet.hideDynamics),t.toArray()}static writeBooleanEntry(e,t,i){ii.gpWriteString(e,t),e.writeByte(ao.Boolean),e.writeByte(i?1:0)}}var fo;(function(r){r[r.Short=0]="Short",r[r.Medium=1]="Medium",r[r.Long=2]="Long"})(fo||(fo={}));class tS{constructor(){this.type=fo.Short,this.length=0}}var me;(function(r){r[r.None=0]="None",r[r.Element=1]="Element",r[r.Text=2]="Text",r[r.CDATA=3]="CDATA",r[r.Document=4]="Document",r[r.DocumentType=5]="DocumentType"})(me||(me={}));class uo{constructor(){this.nodeType=me.None,this.localName=null,this.value=null,this.childNodes=[],this.attributes=new Map,this.firstChild=null,this.firstElement=null}addChild(e){this.childNodes.push(e),this.firstChild=e,(e.nodeType===me.Element||e.nodeType===me.CDATA)&&(this.firstElement=e)}getAttribute(e){return this.attributes.has(e)?this.attributes.get(e):""}getElementsByTagName(e,t=!1){let i=[];return this.searchElementsByTagName(this.childNodes,i,e,t),i}searchElementsByTagName(e,t,i,n=!1){for(let s of e)s&&s.nodeType===me.Element&&s.localName===i&&t.push(s),n&&this.searchElementsByTagName(s.childNodes,t,i,!0)}findChildElement(e){for(let t of this.childNodes)if(t&&t.nodeType===me.Element&&t.localName===e)return t;return null}addElement(e){const t=new uo;return t.nodeType=me.Element,t.localName=e,this.addChild(t),t}get innerText(){var e;if(this.nodeType===me.Element||this.nodeType===me.Document){if(this.firstElement&&this.firstElement.nodeType===me.CDATA)return this.firstElement.innerText;let t="";for(let n of this.childNodes)t+=(e=n.innerText)==null?void 0:e.toString();return t.trim()}return this.value??""}set innerText(e){const t=new uo;t.nodeType=me.Text,t.value=e,this.childNodes=[t]}setCData(e){const t=new uo;t.nodeType=me.CDATA,t.value=e,this.childNodes=[t]}}class ds extends sn{constructor(e,t,i){super(nn.Format,e),this.pos=0,this.xml=t,this.pos=i,Object.setPrototypeOf(this,ds.prototype)}}var gt;(function(r){r[r.IgnoreSpaces=0]="IgnoreSpaces",r[r.Begin=1]="Begin",r[r.BeginNode=2]="BeginNode",r[r.TagName=3]="TagName",r[r.Body=4]="Body",r[r.AttribName=5]="AttribName",r[r.Equals=6]="Equals",r[r.AttvalBegin=7]="AttvalBegin",r[r.AttribVal=8]="AttribVal",r[r.Childs=9]="Childs",r[r.Close=10]="Close",r[r.WaitEnd=11]="WaitEnd",r[r.WaitEndRet=12]="WaitEndRet",r[r.Pcdata=13]="Pcdata",r[r.Header=14]="Header",r[r.Comment=15]="Comment",r[r.Doctype=16]="Doctype",r[r.Cdata=17]="Cdata",r[r.Escape=18]="Escape"})(gt||(gt={}));class je{static parse(e,t,i){let n=e.charCodeAt(t),s=gt.Begin,o=gt.Begin,c=0,h="",p=gt.Begin,g=null,b=null,v=0,S=0;for(;t<e.length;){switch(n=e.charCodeAt(t),s){case gt.IgnoreSpaces:switch(n){case je.CharCodeLF:case je.CharCodeCR:case je.CharCodeTab:case je.CharCodeSpace:break;default:s=o;continue}break;case gt.Begin:switch(n){case je.CharCodeLowerThan:s=gt.IgnoreSpaces,o=gt.BeginNode;break;default:c=t,s=gt.Pcdata;continue}break;case gt.Pcdata:if(n===je.CharCodeLowerThan){h+=e.substr(c,t-c);let B=new uo;B.nodeType=me.Text,B.value=h,h="",i.addChild(B),s=gt.IgnoreSpaces,o=gt.BeginNode}else n===je.CharCodeAmp&&(h+=e.substr(c,t-c),s=gt.Escape,p=gt.Pcdata,c=t+1);break;case gt.Cdata:if(n===je.CharCodeBrackedClose&&e.charCodeAt(t+1)===je.CharCodeBrackedClose&&e.charCodeAt(t+2)===je.CharCodeGreaterThan){let B=new uo;B.nodeType=me.CDATA,B.value=e.substr(c,t-c),i.addChild(B),t+=2,s=gt.Begin}break;case gt.BeginNode:switch(n){case je.CharCodeExclamation:if(e.charCodeAt(t+1)===je.CharCodeBrackedOpen){if(t+=2,e.substr(t,6).toUpperCase()!=="CDATA[")throw new ds("Expected <![CDATA[",e,t);t+=5,s=gt.Cdata,c=t+1}else if(e.charCodeAt(t+1)===je.CharCodeUpperD||e.charCodeAt(t+1)===je.CharCodeLowerD){if(e.substr(t+2,6).toUpperCase()!=="OCTYPE")throw new ds("Expected <!DOCTYPE",e,t);t+=8,s=gt.Doctype,c=t+1}else{if(e.charCodeAt(t+1)!==je.CharCodeMinus||e.charCodeAt(t+2)!==je.CharCodeMinus)throw new ds("Expected <!--",e,t);t+=2,s=gt.Comment,c=t+1}break;case je.CharCodeQuestion:s=gt.Header,c=t;break;case je.CharCodeSlash:if(!i)throw new ds("Expected node name",e,t);c=t+1,s=gt.IgnoreSpaces,o=gt.Close;break;default:s=gt.TagName,c=t;continue}break;case gt.TagName:if(!je.isValidChar(n)){if(t===c)throw new ds("Expected node name",e,t);g=new uo,g.nodeType=me.Element,g.localName=e.substr(c,t-c),i.addChild(g),s=gt.IgnoreSpaces,o=gt.Body;continue}break;case gt.Body:switch(n){case je.CharCodeSlash:s=gt.WaitEnd;break;case je.CharCodeGreaterThan:s=gt.Childs;break;default:s=gt.AttribName,c=t;continue}break;case gt.AttribName:if(!je.isValidChar(n)){if(c===t)throw new ds("Expected attribute name",e,t);if(b=e.substr(c,t-c),g.attributes.has(b))throw new ds(`Duplicate attribute [${b}]`,e,t);s=gt.IgnoreSpaces,o=gt.Equals;continue}break;case gt.Equals:switch(n){case je.CharCodeEquals:s=gt.IgnoreSpaces,o=gt.AttvalBegin;break;default:throw new ds("Expected =",e,t)}break;case gt.AttvalBegin:switch(n){case je.CharCodeDoubleQuote:case je.CharCodeSingleQuote:h="",s=gt.AttribVal,c=t+1,S=n;break}break;case gt.AttribVal:switch(n){case je.CharCodeAmp:h+=e.substr(c,t-c),s=gt.Escape,p=gt.AttribVal,c=t+1;break;default:if(n===S){h+=e.substr(c,t-c);let B=h;h="",g.attributes.set(b,B),s=gt.IgnoreSpaces,o=gt.Body}break}break;case gt.Childs:t=je.parse(e,t,g),c=t,s=gt.Begin;break;case gt.WaitEnd:switch(n){case je.CharCodeGreaterThan:s=gt.Begin;break;default:throw new ds("Expected >",e,t)}break;case gt.WaitEndRet:switch(n){case je.CharCodeGreaterThan:return t;default:throw new ds("Expected >",e,t)}case gt.Close:if(!je.isValidChar(n)){if(c===t)throw new ds("Expected node name",e,t);if(e.substr(c,t-c)!==i.localName)throw new ds("Expected </"+i.localName+">",e,t);s=gt.IgnoreSpaces,o=gt.WaitEndRet;continue}break;case gt.Comment:n===je.CharCodeMinus&&e.charCodeAt(t+1)===je.CharCodeMinus&&e.charCodeAt(t+2)===je.CharCodeGreaterThan&&(t+=2,s=gt.Begin);break;case gt.Doctype:if(n===je.CharCodeBrackedOpen)v++;else if(n===je.CharCodeBrackedClose)v--;else if(n===je.CharCodeGreaterThan&&v===0){let B=new uo;B.nodeType=me.DocumentType,B.value=e.substr(c,t-c),i.addChild(B),s=gt.Begin}break;case gt.Header:n===je.CharCodeQuestion&&e.charCodeAt(t+1)===je.CharCodeGreaterThan&&(t++,s=gt.Begin);break;case gt.Escape:if(n===je.CharCodeSemi){let B=e.substr(c,t-c);if(B.charCodeAt(0)===je.CharCodeSharp){let T=B.charCodeAt(1)===je.CharCodeLowerX?parseInt("0"+B.substr(1,B.length-1)):parseInt(B.substr(1,B.length-1));h+=String.fromCharCode(T)}else je.Escapes.has(B)?h+=je.Escapes.get(B):h+=("&"+B+";").toString();c=t+1,s=p}else!je.isValidChar(n)&&n!==je.CharCodeSharp&&(h+="&",h+=e.substr(c,t-c),t--,c=t+1,s=p);break}t++}if(s===gt.Begin&&(c=t,s=gt.Pcdata),s===gt.Pcdata){if(t!==c){h+=e.substr(c,t-c);let B=new uo;B.nodeType=me.Text,B.value=h,i.addChild(B)}return t}if(s===gt.Escape&&p===gt.Pcdata){h+="&",h+=e.substr(c,t-c);let B=new uo;return B.nodeType=me.Text,B.value=h,i.addChild(B),t}throw new ds("Unexpected end",e,t)}static isValidChar(e){return e>=je.CharCodeLowerA&&e<=je.CharCodeLowerZ||e>=je.CharCodeUpperA&&e<=je.CharCodeUpperZ||e>=je.CharCode0&&e<=je.CharCode9||e===je.CharCodeColon||e===je.CharCodeDot||e===je.CharCodeUnderscore||e===je.CharCodeMinus}}je.CharCodeLF=10;je.CharCodeTab=9;je.CharCodeCR=13;je.CharCodeSpace=32;je.CharCodeLowerThan=60;je.CharCodeAmp=38;je.CharCodeBrackedClose=93;je.CharCodeBrackedOpen=91;je.CharCodeGreaterThan=62;je.CharCodeExclamation=33;je.CharCodeUpperD=68;je.CharCodeLowerD=100;je.CharCodeMinus=45;je.CharCodeQuestion=63;je.CharCodeSlash=47;je.CharCodeEquals=61;je.CharCodeDoubleQuote=34;je.CharCodeSingleQuote=39;je.CharCodeSharp=35;je.CharCodeLowerX=120;je.CharCodeLowerA=97;je.CharCodeLowerZ=122;je.CharCodeUpperA=65;je.CharCodeUpperZ=90;je.CharCode0=48;je.CharCode9=57;je.CharCodeColon=58;je.CharCodeDot=46;je.CharCodeUnderscore=95;je.CharCodeSemi=59;je.Escapes=new Map([["lt","<"],["gt",">"],["amp","&"],["quot",'"'],["apos","'"]]);class iS{static write(e,t,i){const n=new iS(t,i);return n.writeNode(e),n.toString()}constructor(e,t){this._result=[],this._indention=e,this._xmlHeader=t,this._currentIndention="",this._isStartOfLine=!0}writeNode(e){switch(e.nodeType){case me.None:break;case me.Element:this._result.length>0&&this.writeLine(),this.write(`<${e.localName}`);for(const[t,i]of e.attributes)this.write(` ${t}="`),this.writeAttributeValue(i),this.write('"');if(e.childNodes.length===0)this.write("/>");else{if(this.write(">"),e.childNodes.length===1&&!e.firstElement)this.writeNode(e.childNodes[0]);else{this.indent();for(const t of e.childNodes)t.nodeType===me.Element&&this.writeNode(t);this.unindend(),this.writeLine()}this.write(`</${e.localName}>`)}break;case me.Text:e.value&&this.write(e.value);break;case me.CDATA:e.value!==null&&this.write(`<![CDATA[${e.value}]]>`);break;case me.Document:this._xmlHeader&&this.write('<?xml version="1.0" encoding="utf-8"?>');for(const t of e.childNodes)this.writeNode(t);break;case me.DocumentType:this.write(`<!DOCTYPE ${e.value}>`);break}}unindend(){this._currentIndention=this._currentIndention.substr(0,this._currentIndention.length-this._indention.length)}indent(){this._currentIndention+=this._indention}writeAttributeValue(e){for(let t=0;t<e.length;t++){const i=e.charAt(t);switch(i){case"<":this._result.push("&lt;");break;case">":this._result.push("&gt;");break;case"&":this._result.push("&amp;");break;case"'":this._result.push("&apos;");break;case'"':this._result.push("&quot;");break;default:this._result.push(i);break}}}write(e){this._isStartOfLine&&this._result.push(this._currentIndention),this._result.push(e),this._isStartOfLine=!1}writeLine(e=null){e&&this.write(e),this._indention.length>0&&!this._isStartOfLine&&(this._result.push(`
`),this._isStartOfLine=!0)}toString(){return this._result.join("").trimRight()}}class rS extends uo{constructor(){super(),this.nodeType=me.Document}parse(e){je.parse(e,0,this)}toString(){return this.toFormattedString()}toFormattedString(e="",t=!1){return iS.write(this,e,t)}}var Te;(function(r){r[r.Up=0]="Up",r[r.Down=1]="Down"})(Te||(Te={}));class Ez{constructor(){this.id="",this.dots=0,this.tupletDenominator=-1,this.tupletNumerator=-1,this.value=Y.Quarter}}class Rz{constructor(){this.name="",this.path="",this.role="",this.program=0}get uniqueId(){return this.path+";"+this.name+";"+this.role}}class Ra{constructor(){this._hasAnacrusis=!1,this._skipApplyLyrics=!1}parseXml(e,t){this._masterTrackAutomations=new Map,this._automationsPerTrackIdAndBarIndex=new Map,this._tracksMapping=[],this._tracksById=new Map,this._masterBars=[],this._barsOfMasterBar=[],this._voicesOfBar=new Map,this._barsById=new Map,this._voiceById=new Map,this._beatsOfVoice=new Map,this._beatById=new Map,this._rhythmOfBeat=new Map,this._rhythmById=new Map,this._notesOfBeat=new Map,this._noteById=new Map,this._tappedNotes=new Map,this._lyricsByTrack=new Map,this._soundsByTrack=new Map,this._skipApplyLyrics=!1;let i=new rS;try{i.parse(e)}catch(n){throw new Or("Could not parse XML",n)}if(this.parseDom(i),this.buildModel(),this.score.finish(t),!this._skipApplyLyrics&&this._lyricsByTrack.size>0)for(const[n,s]of this._lyricsByTrack)this._tracksById.get(n).applyLyrics(s)}parseDom(e){let t=e.firstElement;if(t)if(t.localName==="GPIF"){this.score=new Dh;for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Score":this.parseScoreNode(i);break;case"MasterTrack":this.parseMasterTrackNode(i);break;case"Tracks":this.parseTracksNode(i);break;case"MasterBars":this.parseMasterBarsNode(i);break;case"Bars":this.parseBars(i);break;case"Voices":this.parseVoices(i);break;case"Beats":this.parseBeats(i);break;case"Notes":this.parseNotes(i);break;case"Rhythms":this.parseRhythms(i);break}}else throw new Or("Root node of XML was not GPIF")}parseScoreNode(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Title":this.score.title=t.firstChild.innerText;break;case"SubTitle":this.score.subTitle=t.firstChild.innerText;break;case"Artist":this.score.artist=t.firstChild.innerText;break;case"Album":this.score.album=t.firstChild.innerText;break;case"Words":this.score.words=t.firstChild.innerText;break;case"Music":this.score.music=t.firstChild.innerText;break;case"WordsAndMusic":if(t.firstChild&&t.firstChild.innerText!==""){let i=t.firstChild.innerText;i&&!this.score.words&&(this.score.words=i),i&&!this.score.music&&(this.score.music=i)}break;case"Copyright":this.score.copyright=t.firstChild.innerText;break;case"Tabber":this.score.tab=t.firstChild.innerText;break;case"Instructions":this.score.instructions=t.firstChild.innerText;break;case"Notices":this.score.notices=t.firstChild.innerText;break;case"ScoreSystemsDefaultLayout":this.score.defaultSystemsLayout=parseInt(t.innerText);break;case"ScoreSystemsLayout":this.score.systemsLayout=t.innerText.split(" ").map(i=>parseInt(i));break}}parseMasterTrackNode(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Automations":this.parseAutomations(t,this._masterTrackAutomations,null);break;case"Tracks":this._tracksMapping=t.innerText.split(" ");break;case"Anacrusis":this._hasAnacrusis=!0;break}}parseAutomations(e,t,i){for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Automation":this.parseAutomation(n,t,i);break}}parseAutomation(e,t,i){let n=null,s=!1,o=-1,c=0,h=0,p=null,g=0,b=null;for(let S of e.childNodes)if(S.nodeType===me.Element)switch(S.localName){case"Type":n=S.innerText;break;case"Linear":s=S.innerText.toLowerCase()==="true";break;case"Bar":o=parseInt(S.innerText);break;case"Position":c=parseFloat(S.innerText);break;case"Value":if(S.firstElement&&S.firstElement.nodeType===me.CDATA)p=S.innerText;else{let B=S.innerText.split(" ");B.length===1?(h=parseFloat(B[0]),g=1):(h=parseFloat(B[0]),g=parseInt(B[1]))}break;case"Text":b=S.innerText;break}if(!n)return;let v=null;switch(n){case"Tempo":v=yn.buildTempoAutomation(s,c,h,g);break;case"Sound":p&&i&&i.has(p)&&(v=yn.buildInstrumentAutomation(s,c,i.get(p).program));break}v&&(b&&(v.text=b),o>=0&&(t.has(o)||t.set(o,[]),t.get(o).push(v)))}parseTracksNode(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Track":this.parseTrack(t);break}}parseTrack(e){this._articulationByName=new Map;let t=new gl;t.ensureStaveCount(1);let i=t.staves[0];i.showStandardNotation=!0;let n=e.getAttribute("id");for(let s of e.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"Name":t.name=s.innerText;break;case"Color":let o=s.innerText.split(" ");if(o.length>=3){let p=parseInt(o[0]),g=parseInt(o[1]),b=parseInt(o[2]);t.color=new _i(p,g,b,255)}break;case"Instrument":let c=s.getAttribute("ref");(c.endsWith("-gs")||c.endsWith("GrandStaff"))&&(t.ensureStaveCount(2),t.staves[1].showStandardNotation=!0);break;case"InstrumentSet":this.parseInstrumentSet(t,s);break;case"NotationPatch":this.parseNotationPatch(t,s);break;case"ShortName":t.shortName=s.innerText;break;case"SystemsDefautLayout":t.defaultSystemsLayout=parseInt(s.innerText);break;case"SystemsLayout":t.systemsLayout=s.innerText.split(" ").map(p=>parseInt(p));break;case"Lyrics":this.parseLyrics(n,s);break;case"Properties":this.parseTrackProperties(t,s);break;case"GeneralMidi":case"MidiConnection":case"MIDISettings":this.parseGeneralMidi(t,s);break;case"Sounds":this.parseSounds(n,t,s);break;case"PlaybackState":let h=s.innerText;t.playbackInfo.isSolo=h==="Solo",t.playbackInfo.isMute=h==="Mute";break;case"PartSounding":this.parsePartSounding(t,s);break;case"Staves":this.parseStaves(t,s);break;case"Transpose":this.parseTranspose(t,s);break;case"RSE":this.parseRSE(t,s);break;case"Automations":this.parseTrackAutomations(n,s);break}this._tracksById.set(n,t)}parseTrackAutomations(e,t){const i=new Map;this._automationsPerTrackIdAndBarIndex.set(e,i),this.parseAutomations(t,i,this._soundsByTrack.get(e))}parseNotationPatch(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"LineCount":const n=parseInt(i.innerText);for(let s of e.staves)s.standardNotationLineCount=n;break;case"Elements":this.parseElements(e,i);break}}parseInstrumentSet(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Type":switch(i.innerText){case"drumKit":for(let s of e.staves)s.isPercussion=!0;break}if(i.innerText==="drumKit")for(let s of e.staves)s.isPercussion=!0;break;case"Elements":this.parseElements(e,i);break;case"LineCount":const n=parseInt(i.innerText);for(let s of e.staves)s.standardNotationLineCount=n;break}}parseElements(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Element":this.parseElement(e,i);break}}parseElement(e,t){const i=t.findChildElement("Type"),n=i?i.innerText:"";for(let s of t.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"Name":case"Articulations":this.parseArticulations(e,s,n);break}}parseArticulations(e,t,i){for(let n of t.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Articulation":this.parseArticulation(e,n,i);break}}parseArticulation(e,t,i){const n=new Ge;n.outputMidiNumber=-1,n.elementType=i;let s="";for(let o of t.childNodes)if(o.nodeType===me.Element){const c=o.innerText;switch(o.localName){case"Name":s=o.innerText;break;case"OutputMidiNumber":c.length>0&&(n.outputMidiNumber=parseInt(c));break;case"TechniqueSymbol":n.techniqueSymbol=this.parseTechniqueSymbol(c);break;case"TechniquePlacement":switch(c){case"outside":n.techniqueSymbolPlacement=It.Bottom;break;case"inside":n.techniqueSymbolPlacement=It.Middle;break;case"above":n.techniqueSymbolPlacement=It.Bottom;break;case"below":n.techniqueSymbolPlacement=It.Top;break}break;case"Noteheads":const h=c.split(" ");h.length>=1&&(n.noteHeadDefault=this.parseNoteHead(h[0])),h.length>=2&&(n.noteHeadHalf=this.parseNoteHead(h[1])),h.length>=3&&(n.noteHeadWhole=this.parseNoteHead(h[2])),n.noteHeadHalf==N.None&&(n.noteHeadHalf=n.noteHeadDefault),n.noteHeadWhole==N.None&&(n.noteHeadWhole=n.noteHeadDefault);break;case"StaffLine":c.length>0&&(n.staffLine=parseInt(c));break}}n.outputMidiNumber!==-1?(e.percussionArticulations.push(n),s.length>0&&this._articulationByName.set(s,n)):s.length>0&&this._articulationByName.has(s)&&(this._articulationByName.get(s).staffLine=n.staffLine)}parseTechniqueSymbol(e){switch(e){case"pictEdgeOfCymbal":return N.PictEdgeOfCymbal;case"articStaccatoAbove":return N.ArticStaccatoAbove;case"noteheadParenthesis":return N.NoteheadParenthesis;case"stringsUpBow":return N.StringsUpBow;case"stringsDownBow":return N.StringsDownBow;case"guitarGolpe":return N.GuitarGolpe;default:return N.None}}parseNoteHead(e){switch(e){case"noteheadDoubleWholeSquare":return N.NoteheadDoubleWholeSquare;case"noteheadDoubleWhole":return N.NoteheadDoubleWhole;case"noteheadWhole":return N.NoteheadWhole;case"noteheadHalf":return N.NoteheadHalf;case"noteheadBlack":return N.NoteheadBlack;case"noteheadNull":return N.NoteheadNull;case"noteheadXOrnate":return N.NoteheadXOrnate;case"noteheadTriangleUpWhole":return N.NoteheadTriangleUpWhole;case"noteheadTriangleUpHalf":return N.NoteheadTriangleUpHalf;case"noteheadTriangleUpBlack":return N.NoteheadTriangleUpBlack;case"noteheadDiamondBlackWide":return N.NoteheadDiamondBlackWide;case"noteheadDiamondWhite":return N.NoteheadDiamondWhite;case"noteheadDiamondWhiteWide":return N.NoteheadDiamondWhiteWide;case"noteheadCircleX":return N.NoteheadCircleX;case"noteheadXWhole":return N.NoteheadXWhole;case"noteheadXHalf":return N.NoteheadXHalf;case"noteheadXBlack":return N.NoteheadXBlack;case"noteheadParenthesis":return N.NoteheadParenthesis;case"noteheadSlashedBlack2":return N.NoteheadSlashedBlack2;case"noteheadCircleSlash":return N.NoteheadCircleSlash;case"noteheadHeavyX":return N.NoteheadHeavyX;case"noteheadHeavyXHat":return N.NoteheadHeavyXHat;default:return ye.warning("GPIF","Unknown notehead symbol",e),N.None}}parseStaves(e,t){let i=0;for(let n of t.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Staff":e.ensureStaveCount(i+1);let s=e.staves[i];this.parseStaff(s,n),i++;break}}parseStaff(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Properties":this.parseStaffProperties(e,i);break}}parseStaffProperties(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Property":this.parseStaffProperty(e,i);break}}parseStaffProperty(e,t){switch(t.getAttribute("name")){case"Tuning":for(let s of t.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"Pitches":let o=t.findChildElement("Pitches").innerText.split(" "),c=new Array(o.length);for(let h=0;h<c.length;h++)c[c.length-1-h]=parseInt(o[h]);e.stringTuning.tunings=c;break;case"Label":e.stringTuning.name=s.innerText;break}e.isPercussion||(e.showTablature=!0);break;case"DiagramCollection":case"ChordCollection":this.parseDiagramCollectionForStaff(e,t);break;case"CapoFret":let n=parseInt(t.findChildElement("Fret").innerText);e.capo=n;break}}parseLyrics(e,t){let i=[];for(let n of t.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Line":i.push(this.parseLyricsLine(n));break}this._lyricsByTrack.set(e,i)}parseLyricsLine(e){let t=new Fr;for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Offset":t.startBar=parseInt(i.innerText);break;case"Text":t.text=i.innerText;break}return t}parseDiagramCollectionForTrack(e,t){let i=t.findChildElement("Items");for(let n of i.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Item":this.parseDiagramItemForTrack(e,n);break}}parseDiagramCollectionForStaff(e,t){let i=t.findChildElement("Items");for(let n of i.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Item":this.parseDiagramItemForStaff(e,n);break}}parseDiagramItemForTrack(e,t){let i=new gc,n=t.getAttribute("id");for(let s of e.staves)s.addChord(n,i);this.parseDiagramItemForChord(i,t)}parseDiagramItemForStaff(e,t){let i=new gc,n=t.getAttribute("id");e.addChord(n,i),this.parseDiagramItemForChord(i,t)}parseDiagramItemForChord(e,t){e.name=t.getAttribute("name");let i=t.findChildElement("Diagram");if(!i){e.showDiagram=!1,e.showFingering=!1;return}let n=parseInt(i.getAttribute("stringCount")),s=parseInt(i.getAttribute("baseFret"));e.firstFret=s+1;for(let o=0;o<n;o++)e.strings.push(-1);for(let o of i.childNodes)if(o.nodeType===me.Element)switch(o.localName){case"Fret":let c=parseInt(o.getAttribute("string"));e.strings[n-c-1]=s+parseInt(o.getAttribute("fret"));break;case"Fingering":let h=new Map;for(let p of o.childNodes)if(p.nodeType===me.Element)switch(p.localName){case"Position":let g=kt.Unknown,b=s+parseInt(p.getAttribute("fret"));switch(p.getAttribute("finger")){case"Index":g=kt.IndexFinger;break;case"Middle":g=kt.MiddleFinger;break;case"Rank":g=kt.AnnularFinger;break;case"Pinky":g=kt.LittleFinger;break;case"Thumb":g=kt.Thumb;break}g!==kt.Unknown&&(h.has(g)?e.barreFrets.push(b):h.set(g,!0));break}break;case"Property":switch(o.getAttribute("name")){case"ShowName":e.showName=o.getAttribute("value")==="true";break;case"ShowDiagram":e.showDiagram=o.getAttribute("value")==="true";break;case"ShowFingering":e.showFingering=o.getAttribute("value")==="true";break}break}}parseTrackProperties(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Property":this.parseTrackProperty(e,i);break}}parseTrackProperty(e,t){switch(t.getAttribute("name")){case"Tuning":let n=t.findChildElement("Pitches").innerText.split(" "),s=new Array(n.length);for(let c=0;c<s.length;c++)s[s.length-1-c]=parseInt(n[c]);for(let c of e.staves)c.stringTuning.tunings=s,c.showStandardNotation=!0,c.showTablature=!0;break;case"DiagramCollection":case"ChordCollection":this.parseDiagramCollectionForTrack(e,t);break;case"CapoFret":let o=parseInt(t.findChildElement("Fret").innerText);for(let c of e.staves)c.capo=o;break}}parseGeneralMidi(e,t){for(let n of t.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Program":e.playbackInfo.program=parseInt(n.innerText);break;case"Port":e.playbackInfo.port=parseInt(n.innerText);break;case"PrimaryChannel":e.playbackInfo.primaryChannel=parseInt(n.innerText);break;case"SecondaryChannel":e.playbackInfo.secondaryChannel=parseInt(n.innerText);break}if(t.getAttribute("table")==="Percussion")for(let n of e.staves)n.isPercussion=!0}parseSounds(e,t,i){for(let n of i.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Sound":this.parseSound(e,t,n);break}}parseSound(e,t,i){const n=new Rz;for(let s of i.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"Name":n.name=s.innerText;break;case"Path":n.path=s.innerText;break;case"Role":n.role=s.innerText;break;case"MIDI":this.parseSoundMidi(n,s);break}(n.role==="Factory"||t.playbackInfo.program===0)&&(t.playbackInfo.program=n.program),this._soundsByTrack.has(e)||this._soundsByTrack.set(e,new Map),this._soundsByTrack.get(e).set(n.uniqueId,n)}parseSoundMidi(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Program":e.program=parseInt(i.innerText);break}}parsePartSounding(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"TranspositionPitch":for(let n of e.staves)n.displayTranspositionPitch=parseInt(i.innerText);break}}parseTranspose(e,t){let i=0,n=0;for(let s of t.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"Chromatic":n=parseInt(s.innerText);break;case"Octave":i=parseInt(s.innerText);break}for(let s of e.staves)s.displayTranspositionPitch=i*12+n}parseRSE(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"ChannelStrip":this.parseChannelStrip(e,i);break}}parseChannelStrip(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Parameters":this.parseChannelStripParameters(e,i);break}}parseChannelStripParameters(e,t){if(t.firstChild&&t.firstChild.value){let i=t.firstChild.value.split(" ");i.length>=12&&(e.playbackInfo.balance=Math.floor(parseFloat(i[11])*16),e.playbackInfo.volume=Math.floor(parseFloat(i[12])*16))}}parseMasterBarsNode(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"MasterBar":this.parseMasterBar(t);break}}parseMasterBar(e){let t=new ou;this._masterBars.length===0&&this._hasAnacrusis&&(t.isAnacrusis=!0);for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Time":let n=i.innerText.split("/");t.timeSignatureNumerator=parseInt(n[0]),t.timeSignatureDenominator=parseInt(n[1]);break;case"DoubleBar":t.isDoubleBar=!0;break;case"Section":t.section=new Nb,t.section.marker=i.findChildElement("Letter").innerText,t.section.text=i.findChildElement("Text").innerText;break;case"Repeat":i.getAttribute("start").toLowerCase()==="true"&&(t.isRepeatStart=!0),i.getAttribute("end").toLowerCase()==="true"&&i.getAttribute("count")&&(t.repeatCount=parseInt(i.getAttribute("count")));break;case"AlternateEndings":let s=i.innerText.split(" "),o=0;for(let h=0;h<s.length;h++)o=o|1<<-1+parseInt(s[h]);t.alternateEndings=o;break;case"Bars":this._barsOfMasterBar.push(i.innerText.split(" "));break;case"TripletFeel":switch(i.innerText){case"NoTripletFeel":t.tripletFeel=Mt.NoTripletFeel;break;case"Triplet8th":t.tripletFeel=Mt.Triplet8th;break;case"Triplet16th":t.tripletFeel=Mt.Triplet16th;break;case"Dotted8th":t.tripletFeel=Mt.Dotted8th;break;case"Dotted16th":t.tripletFeel=Mt.Dotted16th;break;case"Scottish8th":t.tripletFeel=Mt.Scottish8th;break;case"Scottish16th":t.tripletFeel=Mt.Scottish16th;break}break;case"Key":t.keySignature=parseInt(i.findChildElement("AccidentalCount").innerText);let c=i.findChildElement("Mode");if(c)switch(c.innerText.toLowerCase()){case"major":t.keySignatureType=mc.Major;break;case"minor":t.keySignatureType=mc.Minor;break}break;case"Fermatas":this.parseFermatas(t,i);break;case"XProperties":this.parseMasterBarXProperties(i,t);break}this._masterBars.push(t)}parseFermatas(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Fermata":this.parseFermata(e,i);break}}parseFermata(e,t){let i=0,n=new tS;for(let s of t.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"Type":switch(s.innerText){case"Short":n.type=fo.Short;break;case"Medium":n.type=fo.Medium;break;case"Long":n.type=fo.Long;break}break;case"Length":n.length=parseFloat(s.innerText);break;case"Offset":let o=s.innerText.split("/");if(o.length===2){let c=parseInt(o[0]),h=parseInt(o[1]);i=c/h*Ct.QuarterTime|0}break}e.addFermata(i,n)}parseBars(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Bar":this.parseBar(t);break}}parseBar(e){let t=new cu,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Voices":this._voicesOfBar.set(i,n.innerText.split(" "));break;case"Clef":switch(n.innerText){case"Neutral":t.clef=_t.Neutral;break;case"G2":t.clef=_t.G2;break;case"F4":t.clef=_t.F4;break;case"C4":t.clef=_t.C4;break;case"C3":t.clef=_t.C3;break}break;case"Ottavia":switch(n.innerText){case"8va":t.clefOttava=hi._8va;break;case"15ma":t.clefOttava=hi._15ma;break;case"8vb":t.clefOttava=hi._8vb;break;case"15mb":t.clefOttava=hi._15mb;break}break;case"SimileMark":switch(n.innerText){case"Simple":t.simileMark=da.Simple;break;case"FirstOfDouble":t.simileMark=da.FirstOfDouble;break;case"SecondOfDouble":t.simileMark=da.SecondOfDouble;break}break;case"XProperties":this.parseBarXProperties(n,t);break}this._barsById.set(i,t)}parseVoices(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Voice":this.parseVoice(t);break}}parseVoice(e){let t=new ml,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Beats":this._beatsOfVoice.set(i,n.innerText.split(" "));break}this._voiceById.set(i,t)}parseBeats(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Beat":this.parseBeat(t);break}}parseBeat(e){let t=new bn,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Notes":this._notesOfBeat.set(i,n.innerText.split(" "));break;case"Rhythm":this._rhythmOfBeat.set(i,n.getAttribute("ref"));break;case"Fadding":n.innerText==="FadeIn"&&(t.fadeIn=!0);break;case"Tremolo":switch(n.innerText){case"1/2":t.tremoloSpeed=Y.Eighth;break;case"1/4":t.tremoloSpeed=Y.Sixteenth;break;case"1/8":t.tremoloSpeed=Y.ThirtySecond;break}break;case"Chord":t.chordId=n.innerText;break;case"Hairpin":switch(n.innerText){case"Crescendo":t.crescendo=bs.Crescendo;break;case"Decrescendo":t.crescendo=bs.Decrescendo;break}break;case"Arpeggio":n.innerText==="Up"?t.brushType=Di.ArpeggioUp:t.brushType=Di.ArpeggioDown;break;case"Properties":this.parseBeatProperties(n,t);break;case"XProperties":this.parseBeatXProperties(n,t);break;case"FreeText":t.text=n.innerText;break;case"TransposedPitchStemOrientation":switch(n.innerText){case"Upward":t.preferredBeamDirection=Te.Up;break;case"Downward":t.preferredBeamDirection=Te.Down;break}break;case"Dynamic":switch(n.innerText){case"PPP":t.dynamics=Dt.PPP;break;case"PP":t.dynamics=Dt.PP;break;case"P":t.dynamics=Dt.P;break;case"MP":t.dynamics=Dt.MP;break;case"MF":t.dynamics=Dt.MF;break;case"F":t.dynamics=Dt.F;break;case"FF":t.dynamics=Dt.FF;break;case"FFF":t.dynamics=Dt.FFF;break}break;case"GraceNotes":switch(n.innerText){case"OnBeat":t.graceType=ot.OnBeat;break;case"BeforeBeat":t.graceType=ot.BeforeBeat;break}break;case"Legato":n.getAttribute("origin")==="true"&&(t.isLegatoOrigin=!0);break;case"Whammy":let s=new De(0,0);s.value=this.toBendValue(parseFloat(n.getAttribute("originValue"))),s.offset=this.toBendOffset(parseFloat(n.getAttribute("originOffset"))),t.addWhammyBarPoint(s);let o=new De(0,0);o.value=this.toBendValue(parseFloat(n.getAttribute("middleValue"))),o.offset=this.toBendOffset(parseFloat(n.getAttribute("middleOffset1"))),t.addWhammyBarPoint(o);let c=new De(0,0);c.value=this.toBendValue(parseFloat(n.getAttribute("middleValue"))),c.offset=this.toBendOffset(parseFloat(n.getAttribute("middleOffset2"))),t.addWhammyBarPoint(c);let h=new De(0,0);h.value=this.toBendValue(parseFloat(n.getAttribute("destinationValue"))),h.offset=this.toBendOffset(parseFloat(n.getAttribute("destinationOffset"))),t.addWhammyBarPoint(h);break;case"Ottavia":switch(n.innerText){case"8va":t.ottava=hi._8va;break;case"8vb":t.ottava=hi._8vb;break;case"15ma":t.ottava=hi._15ma;break;case"15mb":t.ottava=hi._15mb;break}break;case"Lyrics":t.lyrics=this.parseBeatLyrics(n),this._skipApplyLyrics=!0;break}this._beatById.set(i,t)}parseBeatLyrics(e){const t=[];for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"Line":t.push(i.innerText);break}return t}parseBeatXProperties(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"XProperty":let n=i.getAttribute("id"),s=0;switch(n){case"1124204545":s=parseInt(i.findChildElement("Int").innerText),t.invertBeamDirection=s===1;break;case"687935489":s=parseInt(i.findChildElement("Int").innerText),t.brushDuration=s;break}break}}parseBarXProperties(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"XProperty":switch(i.getAttribute("id")){case"1124139520":const s=i.findChildElement("Double")??i.findChildElement("Float");t.displayScale=parseFloat(s.innerText);break}break}}parseMasterBarXProperties(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"XProperty":switch(i.getAttribute("id")){case"1124073984":t.displayScale=parseFloat(i.findChildElement("Double").innerText);break}break}}parseBeatProperties(e,t){let i=!1,n=null,s=null,o=null,c=null,h=null;for(let p of e.childNodes)if(p.nodeType===me.Element)switch(p.localName){case"Property":switch(p.getAttribute("name")){case"Brush":p.findChildElement("Direction").innerText==="Up"?t.brushType=Di.BrushUp:t.brushType=Di.BrushDown;break;case"PickStroke":p.findChildElement("Direction").innerText==="Up"?t.pickStroke=pn.Up:t.pickStroke=pn.Down;break;case"Slapped":p.findChildElement("Enable")&&(t.slap=!0);break;case"Popped":p.findChildElement("Enable")&&(t.pop=!0);break;case"VibratoWTremBar":switch(p.findChildElement("Strength").innerText){case"Wide":t.vibrato=ni.Wide;break;case"Slight":t.vibrato=ni.Slight;break}break;case"WhammyBar":i=!0;break;case"WhammyBarExtend":break;case"WhammyBarOriginValue":n||(n=new De(0,0)),n.value=this.toBendValue(parseFloat(p.findChildElement("Float").innerText));break;case"WhammyBarOriginOffset":n||(n=new De(0,0)),n.offset=this.toBendOffset(parseFloat(p.findChildElement("Float").innerText));break;case"WhammyBarMiddleValue":s=this.toBendValue(parseFloat(p.findChildElement("Float").innerText));break;case"WhammyBarMiddleOffset1":o=this.toBendOffset(parseFloat(p.findChildElement("Float").innerText));break;case"WhammyBarMiddleOffset2":c=this.toBendOffset(parseFloat(p.findChildElement("Float").innerText));break;case"WhammyBarDestinationValue":h||(h=new De(De.MaxPosition,0)),h.value=this.toBendValue(parseFloat(p.findChildElement("Float").innerText));break;case"WhammyBarDestinationOffset":h||(h=new De(0,0)),h.offset=this.toBendOffset(parseFloat(p.findChildElement("Float").innerText));break}break}i&&(n||(n=new De(0,0)),h||(h=new De(De.MaxPosition,0)),t.addWhammyBarPoint(n),o&&s&&t.addWhammyBarPoint(new De(o,s)),c&&s&&t.addWhammyBarPoint(new De(c,s)),!o&&!c&&s&&t.addWhammyBarPoint(new De(De.MaxPosition/2|0,s)),t.addWhammyBarPoint(h))}parseNotes(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Note":this.parseNote(t);break}}parseNote(e){let t=new fr,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Properties":this.parseNoteProperties(n,t,i);break;case"AntiAccent":n.innerText.toLowerCase()==="normal"&&(t.isGhost=!0);break;case"LetRing":t.isLetRing=!0;break;case"Trill":t.trillValue=parseInt(n.innerText),t.trillSpeed=Y.Sixteenth;break;case"Accent":let s=parseInt(n.innerText);s&1&&(t.isStaccato=!0),s&4&&(t.accentuated=Mr.Heavy),s&8&&(t.accentuated=Mr.Normal);break;case"Tie":n.getAttribute("destination").toLowerCase()==="true"&&(t.isTieDestination=!0);break;case"Vibrato":switch(n.innerText){case"Slight":t.vibrato=ni.Slight;break;case"Wide":t.vibrato=ni.Wide;break}break;case"LeftFingering":switch(t.isFingering=!0,n.innerText){case"P":t.leftHandFinger=kt.Thumb;break;case"I":t.leftHandFinger=kt.IndexFinger;break;case"M":t.leftHandFinger=kt.MiddleFinger;break;case"A":t.leftHandFinger=kt.AnnularFinger;break;case"C":t.leftHandFinger=kt.LittleFinger;break}break;case"RightFingering":switch(t.isFingering=!0,n.innerText){case"P":t.rightHandFinger=kt.Thumb;break;case"I":t.rightHandFinger=kt.IndexFinger;break;case"M":t.rightHandFinger=kt.MiddleFinger;break;case"A":t.rightHandFinger=kt.AnnularFinger;break;case"C":t.rightHandFinger=kt.LittleFinger;break}break;case"InstrumentArticulation":t.percussionArticulation=parseInt(n.innerText);break}this._noteById.set(i,t)}parseNoteProperties(e,t,i){let n=!1,s=null,o=null,c=null,h=null,p=null,g=-1,b=-1;for(let v of e.childNodes)if(v.nodeType===me.Element)switch(v.localName){case"Property":switch(v.getAttribute("name")){case"String":t.string=parseInt(v.findChildElement("String").innerText)+1;break;case"Fret":t.fret=parseInt(v.findChildElement("Fret").innerText);break;case"Element":g=parseInt(v.findChildElement("Element").innerText);break;case"Variation":b=parseInt(v.findChildElement("Variation").innerText);break;case"Tapped":this._tappedNotes.set(i,!0);break;case"HarmonicType":let B=v.findChildElement("HType");if(B)switch(B.innerText){case"NoHarmonic":t.harmonicType=Ze.None;break;case"Natural":t.harmonicType=Ze.Natural;break;case"Artificial":t.harmonicType=Ze.Artificial;break;case"Pinch":t.harmonicType=Ze.Pinch;break;case"Tap":t.harmonicType=Ze.Tap;break;case"Semi":t.harmonicType=Ze.Semi;break;case"Feedback":t.harmonicType=Ze.Feedback;break}break;case"HarmonicFret":let T=v.findChildElement("HFret");T&&(t.harmonicValue=parseFloat(T.innerText));break;case"Muted":v.findChildElement("Enable")&&(t.isDead=!0);break;case"PalmMuted":v.findChildElement("Enable")&&(t.isPalmMute=!0);break;case"Octave":t.octave=parseInt(v.findChildElement("Number").innerText),t.tone===-1&&(t.tone=0);break;case"Tone":t.tone=parseInt(v.findChildElement("Step").innerText);break;case"ConcertPitch":this.parseConcertPitch(v,t);break;case"Bended":n=!0;break;case"BendOriginValue":s||(s=new De(0,0)),s.value=this.toBendValue(parseFloat(v.findChildElement("Float").innerText));break;case"BendOriginOffset":s||(s=new De(0,0)),s.offset=this.toBendOffset(parseFloat(v.findChildElement("Float").innerText));break;case"BendMiddleValue":o=this.toBendValue(parseFloat(v.findChildElement("Float").innerText));break;case"BendMiddleOffset1":c=this.toBendOffset(parseFloat(v.findChildElement("Float").innerText));break;case"BendMiddleOffset2":h=this.toBendOffset(parseFloat(v.findChildElement("Float").innerText));break;case"BendDestinationValue":p||(p=new De(De.MaxPosition,0)),p.value=this.toBendValue(parseFloat(v.findChildElement("Float").innerText));break;case"BendDestinationOffset":p||(p=new De(0,0)),p.offset=this.toBendOffset(parseFloat(v.findChildElement("Float").innerText));break;case"HopoOrigin":v.findChildElement("Enable")&&(t.isHammerPullOrigin=!0);break;case"HopoDestination":break;case"LeftHandTapped":t.isLeftHandTapped=!0;break;case"Slide":let C=parseInt(v.findChildElement("Flags").innerText);C&1?t.slideOutType=Et.Shift:C&2?t.slideOutType=Et.Legato:C&4?t.slideOutType=Et.OutDown:C&8&&(t.slideOutType=Et.OutUp),C&16?t.slideInType=rn.IntoFromBelow:C&32&&(t.slideInType=rn.IntoFromAbove),C&64?t.slideOutType=Et.PickSlideDown:C&128&&(t.slideOutType=Et.PickSlideUp);break}break}n&&(s||(s=new De(0,0)),p||(p=new De(De.MaxPosition,0)),t.addBendPoint(s),c&&o&&t.addBendPoint(new De(c,o)),h&&o&&t.addBendPoint(new De(h,o)),!c&&!h&&o&&t.addBendPoint(new De(De.MaxPosition/2|0,o)),t.addBendPoint(p)),g!==-1&&b!==-1&&(t.percussionArticulation=hn.articulationFromElementVariation(g,b))}parseConcertPitch(e,t){const i=e.findChildElement("Pitch");if(i){for(let n of i.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"Accidental":switch(n.innerText){case"x":t.accidentalMode=Tr.ForceDoubleSharp;break;case"#":t.accidentalMode=Tr.ForceSharp;break;case"b":t.accidentalMode=Tr.ForceFlat;break;case"bb":t.accidentalMode=Tr.ForceDoubleFlat;break}break}}}toBendValue(e){return e*Ra.BendPointValueFactor|0}toBendOffset(e){return e*Ra.BendPointPositionFactor}parseRhythms(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"Rhythm":this.parseRhythm(t);break}}parseRhythm(e){let t=new Ez,i=e.getAttribute("id");t.id=i;for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"NoteValue":switch(n.innerText){case"Long":t.value=Y.QuadrupleWhole;break;case"DoubleWhole":t.value=Y.DoubleWhole;break;case"Whole":t.value=Y.Whole;break;case"Half":t.value=Y.Half;break;case"Quarter":t.value=Y.Quarter;break;case"Eighth":t.value=Y.Eighth;break;case"16th":t.value=Y.Sixteenth;break;case"32nd":t.value=Y.ThirtySecond;break;case"64th":t.value=Y.SixtyFourth;break;case"128th":t.value=Y.OneHundredTwentyEighth;break;case"256th":t.value=Y.TwoHundredFiftySixth;break}break;case"PrimaryTuplet":t.tupletNumerator=parseInt(n.getAttribute("num")),t.tupletDenominator=parseInt(n.getAttribute("den"));break;case"AugmentationDot":t.dots=parseInt(n.getAttribute("count"));break}this._rhythmById.set(i,t)}buildModel(){for(let e=0,t=this._masterBars.length;e<t;e++){let i=this._masterBars[e];this.score.addMasterBar(i)}for(let e of this._tracksMapping){if(!e)continue;let t=this._tracksById.get(e);this.score.addTrack(t)}for(let e of this._barsOfMasterBar){let t=0;for(let i=0,n=0;i<e.length&&n<this.score.tracks.length;i++){let s=e[i];if(s!==Ra.InvalidId){let o=this._barsById.get(s),c=this.score.tracks[n],h=c.staves[t];if(h.addBar(o),this._voicesOfBar.has(s))for(let p of this._voicesOfBar.get(s))if(p!==Ra.InvalidId){let g=this._voiceById.get(p);if(o.addVoice(g),this._beatsOfVoice.has(p)){for(let b of this._beatsOfVoice.get(p))if(b!==Ra.InvalidId){let v=eS.clone(this._beatById.get(b));g.addBeat(v);let S=this._rhythmOfBeat.get(b),B=this._rhythmById.get(S);if(v.duration=B.value,v.dots=B.dots,v.tupletNumerator=B.tupletNumerator,v.tupletDenominator=B.tupletDenominator,this._notesOfBeat.has(b)){for(let T of this._notesOfBeat.get(b))if(T!==Ra.InvalidId){const C=gC.clone(this._noteById.get(T));h.isPercussion?(C.fret=-1,C.string=-1):C.percussionArticulation=-1,v.addNote(C),this._tappedNotes.has(T)&&(v.tap=!0)}}}}}else{let g=new ml;o.addVoice(g);let b=new bn;b.isEmpty=!0,b.duration=Y.Quarter,g.addBeat(b)}t===c.staves.length-1?(n++,t=0):t++}else n++}}for(let e of this._tracksMapping){if(!e)continue;let t=this._tracksById.get(e),i=!1;for(const n of t.staves)if(n.isPercussion){i=!0;break}if(i||(t.percussionArticulations=[]),this._automationsPerTrackIdAndBarIndex.has(e)){const n=this._automationsPerTrackIdAndBarIndex.get(e);for(const[s,o]of n)if(t.staves.length>0&&s<t.staves[0].bars.length){const c=t.staves[0].bars[s];if(c.voices.length>0&&c.voices[0].beats.length>0){const h=c.voices[0].beats[0];for(const p of o)h.automations.push(p)}}}}for(const[e,t]of this._masterTrackAutomations){let i=this.score.masterBars[e];for(let n=0,s=t.length;n<s;n++){let o=t[n];o.type===Ur.Tempo&&(e===0&&(this.score.tempo=o.value|0,o.text&&(this.score.tempoLabel=o.text)),i.tempoAutomation=o)}}}}Ra.InvalidId="-1";Ra.BendPointPositionFactor=De.MaxPosition/100;Ra.BendPointValueFactor=1/25;class aw{constructor(){this.isMultiRest=!1,this.trackViewGroups=[]}}class Uk{constructor(){this.showSlash=!1,this.showStandardNotation=!1,this.showTablature=!1}}class vC{apply(e){if(this.scoreViews.length>0){let t=0;for(let i of this.scoreViews[0].trackViewGroups){if(t<e.tracks.length){const n=e.tracks[t];for(const s of n.staves)s.showTablature=i.showTablature,s.showStandardNotation=i.showStandardNotation}t++}}}constructor(e){this.scoreViews=[];let t=vn.fromBuffer(e);const i=de.readInt32BE(t);for(let n=0;n<i;n++){const s=new aw;this.scoreViews.push(s),s.isMultiRest=ii.gpReadBool(t);const o=de.readInt32BE(t);for(let c=0;c<o;c++){let h=t.readByte();h===0&&(h=1);let p=new Uk;p.showStandardNotation=(h&1)!==0,p.showTablature=(h&2)!==0,p.showSlash=(h&4)!==0,s.trackViewGroups.push(p)}}}static writeForScore(e){const t=vn.withCapacity(128),i=[new aw];for(const n of e.tracks){const s=new Uk;s.showStandardNotation=n.staves[0].showStandardNotation,s.showTablature=n.staves[0].showTablature,i[0].trackViewGroups.push(s);const o=new aw;o.trackViewGroups.push(s),i.push(o)}de.writeInt32BE(t,i.length);for(const n of i){t.writeByte(n.isMultiRest?1:0),de.writeInt32BE(t,n.trackViewGroups.length);for(const s of n.trackViewGroups){let o=0;s.showStandardNotation&&(o=o|1),s.showTablature&&(o=o|2),s.showSlash&&(o=o|4),t.writeByte(o)}}return de.writeInt32BE(t,1),t.toArray()}}class nS{}class W0 extends nS{constructor(e){super(),this.n=e}}class wh extends nS{constructor(e,t){super(),this.left=e,this.right=t}}class Kw extends nS{constructor(e,t){super(),this.n=e,this.table=t}}class un{static make(e,t,i,n){let s=[],o=[];if(n>32)throw new Ir("Invalid huffman");for(let p=0;p<n;p++)s.push(0),o.push(0);for(let p=0;p<i;p++){let g=e[p+t];if(g>=n)throw new Ir("Invalid huffman");s[g]++}let c=0;for(let p=1;p<n-1;p++)c=c+s[p]<<1,o[p]=c;let h=new Map;for(let p=0;p<i;p++){let g=e[p+t];if(g!==0){let b=o[g-1];o[g-1]=b+1,h.set(b<<5|g,p)}}return un.treeCompress(new wh(un.treeMake(h,n,0,1),un.treeMake(h,n,1,1)))}static treeMake(e,t,i,n){if(n>t)throw new Ir("Invalid huffman");let s=i<<5|n;return e.has(s)?new W0(e.get(s)):(i=i<<1,n+=1,new wh(un.treeMake(e,t,i,n),un.treeMake(e,t,i|1,n)))}static treeCompress(e){let t=un.treeDepth(e);if(t===0)return e;if(t===1){if(e instanceof wh)return new wh(un.treeCompress(e.left),un.treeCompress(e.right));throw new Ir("assert")}let i=1<<t,n=[];for(let s=0;s<i;s++)n.push(new W0(-1));return un.treeWalk(n,0,0,t,e),new Kw(t,n)}static treeWalk(e,t,i,n,s){s instanceof wh&&n>0?(un.treeWalk(e,t,i+1,n-1,s.left),un.treeWalk(e,t|1<<i,i+1,n-1,s.right)):e[t]=un.treeCompress(s)}static treeDepth(e){if(e instanceof W0)return 0;if(e instanceof Kw)throw new Ir("assert");if(e instanceof wh){let t=un.treeDepth(e.left),i=un.treeDepth(e.right);return 1+(t<i?t:i)}return 0}}var _r;(function(r){r[r.Head=0]="Head",r[r.Block=1]="Block",r[r.CData=2]="CData",r[r.Flat=3]="Flat",r[r.Crc=4]="Crc",r[r.Dist=5]="Dist",r[r.DistOne=6]="DistOne",r[r.Done=7]="Done"})(_r||(_r={}));class lo{constructor(){this.buffer=new Uint8Array(lo.BufferSize),this.pos=0}slide(){let e=new Uint8Array(lo.BufferSize);this.pos-=lo.Size,e.set(this.buffer.subarray(lo.Size,lo.Size+this.pos),0),this.buffer=e}addBytes(e,t,i){this.pos+i>lo.BufferSize&&this.slide(),this.buffer.set(e.subarray(t,t+i),this.pos),this.pos+=i}addByte(e){this.pos===lo.BufferSize&&this.slide(),this.buffer[this.pos]=e,this.pos++}getLastChar(){return this.buffer[this.pos-1]}available(){return this.pos}}lo.Size=32768;lo.BufferSize=65536;class $n{static buildFixedHuffman(){let e=[];for(let t=0;t<288;t++)e.push(t<=143?8:t<=255?9:t<=279?7:8);return un.make(e,0,288,10)}constructor(e){this._nbits=0,this._bits=0,this._state=_r.Block,this._isFinal=!1,this._huffman=$n._fixedHuffman,this._huffdist=null,this._len=0,this._dist=0,this._needed=0,this._output=null,this._outpos=0,this._lengths=[],this._window=new lo,this._input=e;for(let t=0;t<19;t++)this._lengths.push(-1)}readBytes(e,t,i){if(this._needed=i,this._outpos=t,this._output=e,i>0)for(;this.inflateLoop(););return i-this._needed}inflateLoop(){switch(this._state){case _r.Head:let e=this._input.readByte();if((e&15)!==8)throw new Ir("Invalid data");let i=this._input.readByte(),n=(i&32)!==0;if(((e<<8)+i)%31!==0)throw new Ir("Invalid data");if(n)throw new Ir("Unsupported dictionary");return this._state=_r.Block,!0;case _r.Crc:return this._state=_r.Done,!0;case _r.Done:return!1;case _r.Block:switch(this._isFinal=this.getBit(),this.getBits(2)){case 0:if(this._len=de.readUInt16LE(this._input),de.readUInt16LE(this._input)!==65535-this._len)throw new Ir("Invalid data");this._state=_r.Flat;let c=this.inflateLoop();return this.resetBits(),c;case 1:return this._huffman=$n._fixedHuffman,this._huffdist=null,this._state=_r.CData,!0;case 2:let h=this.getBits(5)+257,p=this.getBits(5)+1,g=this.getBits(4)+4;for(let v=0;v<g;v++)this._lengths[$n.CodeLengthsPos[v]]=this.getBits(3);for(let v=g;v<19;v++)this._lengths[$n.CodeLengthsPos[v]]=0;this._huffman=un.make(this._lengths,0,19,8);let b=[];for(let v=0;v<h+p;v++)b.push(0);return this.inflateLengths(b,h+p),this._huffdist=un.make(b,h,p,16),this._huffman=un.make(b,0,h,16),this._state=_r.CData,!0;default:throw new Ir("Invalid data")}case _r.Flat:{let o=this._len<this._needed?this._len:this._needed,c=de.readByteArray(this._input,o);return this._len-=o,this.addBytes(c,0,o),this._len===0&&(this._state=this._isFinal?_r.Crc:_r.Block),this._needed>0}case _r.DistOne:{let o=this._len<this._needed?this._len:this._needed;return this.addDistOne(o),this._len-=o,this._len===0&&(this._state=_r.CData),this._needed>0}case _r.Dist:for(;this._len>0&&this._needed>0;){let o=this._len<this._dist?this._len:this._dist,c=this._needed<o?this._needed:o;this.addDist(this._dist,c),this._len-=c}return this._len===0&&(this._state=_r.CData),this._needed>0;case _r.CData:let s=this.applyHuffman(this._huffman);if(s<256)return this.addByte(s),this._needed>0;if(s===256)return this._state=this._isFinal?_r.Crc:_r.Block,!0;{s=s-257&255;let o=$n.LenExtraBitsTbl[s];if(o===-1)throw new Ir("Invalid data");this._len=$n.LenBaseValTbl[s]+this.getBits(o);let c=this._huffdist,h=c?this.applyHuffman(c):this.getRevBits(5);if(o=$n.DistExtraBitsTbl[h],o===-1)throw new Ir("Invalid data");if(this._dist=$n.DistBaseValTbl[h]+this.getBits(o),this._dist>this._window.available())throw new Ir("Invalid data");return this._state=this._dist===1?_r.DistOne:_r.Dist,!0}}return!1}addDistOne(e){let t=this._window.getLastChar();for(let i=0;i<e;i++)this.addByte(t)}addByte(e){this._window.addByte(e),this._output[this._outpos]=e,this._needed--,this._outpos++}addDist(e,t){this.addBytes(this._window.buffer,this._window.pos-e,t)}getBit(){this._nbits===0&&(this._nbits=8,this._bits=this._input.readByte());let e=(this._bits&1)===1;return this._nbits--,this._bits=this._bits>>1,e}getBits(e){for(;this._nbits<e;)this._bits=this._bits|this._input.readByte()<<this._nbits,this._nbits+=8;let t=this._bits&(1<<e)-1;return this._nbits-=e,this._bits=this._bits>>e,t}getRevBits(e){return e===0?0:this.getBit()?1<<e-1|this.getRevBits(e-1):this.getRevBits(e-1)}resetBits(){this._bits=0,this._nbits=0}addBytes(e,t,i){this._window.addBytes(e,t,i),this._output.set(e.subarray(t,t+i),this._outpos),this._needed-=i,this._outpos+=i}inflateLengths(e,t){let i=0,n=0;for(;i<t;){let s=this.applyHuffman(this._huffman);switch(s){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:n=s,e[i]=s,i++;break;case 16:let o=i+3+this.getBits(2);if(o>t)throw new Ir("Invalid data");for(;i<o;)e[i]=n,i++;break;case 17:if(i+=3+this.getBits(3),i>t)throw new Ir("Invalid data");break;case 18:if(i+=11+this.getBits(7),i>t)throw new Ir("Invalid data");break;default:throw new Ir("Invalid data")}}}applyHuffman(e){if(e instanceof W0)return e.n;if(e instanceof wh)return this.applyHuffman(this.getBit()?e.right:e.left);if(e instanceof Kw)return this.applyHuffman(e.table[this.getBits(e.n)]);throw new Ir("Invalid data")}}$n.LenExtraBitsTbl=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];$n.LenBaseValTbl=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];$n.DistExtraBitsTbl=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];$n.DistBaseValTbl=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];$n.CodeLengthsPos=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];$n._fixedHuffman=$n.buildFixedHuffman();class eu{constructor(e,t){this.fullName=e;let i=e.lastIndexOf("/");this.fileName=i===-1||i===e.length-1?this.fullName:e.substr(i+1),this.data=t}}eu.OptionalDataDescriptorSignature=134695760;eu.CompressionMethodDeflate=8;eu.LocalFileHeaderSignature=67324752;eu.CentralFileHeaderSignature=33639248;eu.EndOfCentralDirSignature=101010256;class wC{constructor(e){this._readable=e}read(){let e=[];for(;;){let t=this.readEntry();if(!t)break;e.push(t)}return e}readEntry(){let e=this._readable;if(de.readInt32LE(e)!==eu.LocalFileHeaderSignature)return null;de.readUInt16LE(e);let i=de.readUInt16LE(e),n=de.readUInt16LE(e),s=n!==0;if(s&&n!==eu.CompressionMethodDeflate)return null;de.readInt16LE(this._readable),de.readInt16LE(this._readable),de.readInt32LE(e),de.readInt32LE(e);let o=de.readInt32LE(e),c=de.readInt16LE(e),h=de.readInt16LE(e),p=de.toString(de.readByteArray(e,c),"utf-8");e.skip(h);let g;if(s){let b=vn.empty(),v=new $n(this._readable),S=new Uint8Array(65536);for(;;){let B=v.readBytes(S,0,S.length);if(b.write(S,0,B),B<S.length)break}g=b.toArray()}else g=de.readByteArray(this._readable,o);return i&8&&(de.readInt32LE(this._readable)===eu.OptionalDataDescriptorSignature&&de.readInt32LE(this._readable),de.readInt32LE(this._readable),de.readInt32LE(this._readable)),new eu(p,g)}}class Lz extends Qf{get name(){return"Guitar Pro 7"}constructor(){super()}readScore(){ye.debug(this.name,"Loading ZIP entries");let e=new wC(this.data),t;try{t=e.read()}catch(h){throw new Or("No Zip archive",h)}ye.debug(this.name,"Zip entries loaded");let i=null,n=null,s=null;for(let h of t)switch(h.fileName){case"score.gpif":i=de.toString(h.data,this.settings.importer.encoding);break;case"BinaryStylesheet":n=h.data;break;case"PartConfiguration":s=h.data;break}if(!i)throw new Or("No score.gpif found in zip archive");ye.debug(this.name,"Start Parsing score.gpif");let o=new Ra;o.parseXml(i,this.settings),ye.debug(this.name,"score.gpif parsed");let c=o.score;return n&&(ye.debug(this.name,"Start Parsing BinaryStylesheet"),new Pb(n).apply(c),ye.debug(this.name,"BinaryStylesheet parsed")),s&&(ye.debug(this.name,"Start Parsing Part Configuration"),new vC(s).apply(c),ye.debug(this.name,"Part Configuration parsed")),c}}class sm extends sn{constructor(){super(nn.Format,"Unexpected end of data within reader"),Object.setPrototypeOf(this,sm.prototype)}}class am{constructor(e){this._currentByte=0,this._position=am.ByteSize,this._source=e}readByte(){return this.readBits(8)}readBytes(e){const t=new Uint8Array(e);for(let i=0;i<e;i++)t[i]=this.readByte()&255;return t}readBits(e){let t=0,i=e-1;for(;i>=0;)t=t|this.readBit()<<i,i--;return t}readBitsReversed(e){let t=0;for(let i=0;i<e;i++)t=t|this.readBit()<<i;return t}readBit(){if(this._position>=8){if(this._currentByte=this._source.readByte(),this._currentByte===-1)throw new sm;this._position=0}const e=this._currentByte>>am.ByteSize-this._position-1&1;return this._position++,e}readAll(){let e=vn.empty();try{for(;;)e.writeByte(this.readByte()&255)}catch(t){if(!(t instanceof sm))throw t}return e.toArray()}}am.ByteSize=8;class Iz{constructor(){this.fileName="",this.fileSize=0,this.data=null}}class Jf{constructor(){this.files=[],this.files=[],this.fileFilter=e=>!0}load(e){let t=new am(e);this.readBlock(t)}readHeader(e){return this.getString(e.readBytes(4),0,4)}decompress(e,t=!1){let i=vn.empty(),n,s=this.getInteger(e.readBytes(4),0);try{for(;i.length<s;)if(e.readBits(1)===1){let b=e.readBits(4),v=e.readBitsReversed(b),S=e.readBitsReversed(b),B=i.length-v,T=Math.min(v,S);n=i.getBuffer(),i.write(n,B,T)}else{let b=e.readBitsReversed(2);for(let v=0;v<b;v++)i.writeByte(e.readByte())}}catch(g){if(!(g instanceof sm))throw g}n=i.getBuffer();let o=t?4:0,c=i.length-o,h=new Uint8Array(c),p=c;return h.set(n.subarray(o,o+p),0),h}readBlock(e){let t=this.readHeader(e);if(t==="BCFZ")this.readUncompressedBlock(this.decompress(e,!0));else if(t==="BCFS")this.readUncompressedBlock(e.readAll());else throw new Or("Unsupported format")}readUncompressedBlock(e){let t=4096,i=t;for(;i+3<e.length;){if(this.getInteger(e,i)===2){let s=new Iz;s.fileName=this.getString(e,i+4,127),s.fileSize=this.getInteger(e,i+140);let o=!this.fileFilter||this.fileFilter(s.fileName);o&&this.files.push(s);let c=i+148,h=0,p=0,g=o?vn.withCapacity(s.fileSize):null;for(;h=this.getInteger(e,c+4*p++),h!==0;)i=h*t,o&&g.write(e,i,t);if(o){s.data=new Uint8Array(Math.min(s.fileSize,g.length));let b=g.toArray();s.data.set(b.subarray(0,0+s.data.length),0)}}i+=t}}getString(e,t,i){let n="";for(let s=0;s<i;s++){let o=e[t+s]&255;if(o===0)break;n+=String.fromCharCode(o)}return n}getInteger(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}}Jf.HeaderBcFs="BCFS";Jf.HeaderBcFz="BCFZ";Jf.ScoreGpif="score.gpif";Jf.BinaryStylesheet="BinaryStylesheet";Jf.PartConfiguration="PartConfiguration";class Fz extends Qf{get name(){return"Guitar Pro 6"}constructor(){super()}readScore(){ye.debug(this.name,"Loading GPX filesystem");let e=new Jf;e.fileFilter=c=>c.endsWith("score.gpif")||c.endsWith("BinaryStylesheet")||c.endsWith("PartConfiguration"),e.load(this.data),ye.debug(this.name,"GPX filesystem loaded");let t=null,i=null,n=null;for(let c of e.files)switch(c.fileName){case"score.gpif":t=de.toString(c.data,this.settings.importer.encoding);break;case"BinaryStylesheet":i=c.data;break;case"PartConfiguration":n=c.data;break}if(!t)throw new Or("No score.gpif found in GPX");ye.debug(this.name,"Start Parsing score.gpif");let s=new Ra;s.parseXml(t,this.settings),ye.debug(this.name,"score.gpif parsed");let o=s.score;return i&&(ye.debug(this.name,"Start Parsing BinaryStylesheet"),new Pb(i).apply(o),ye.debug(this.name,"BinaryStylesheet parsed")),n&&(ye.debug(this.name,"Start Parsing Part Configuration"),new vC(n).apply(o),ye.debug(this.name,"Part Configuration parsed")),o}}class Oz extends Qf{get name(){return"MusicXML"}constructor(){super(),this._currentPartGroup=null,this._trackFirstMeasureNumber=0,this._maxVoices=0,this._currentDirection=null,this._currentChord=null,this._divisionsPerQuarterNote=0,this._voiceOfStaff=new Map,this._isBeamContinue=!1,this._previousBeatWasPulled=!1,this._previousBeat=null}readScore(){this._trackById=new Map,this._partGroups=new Map,this._tieStarts=[],this._tieStartIds=new Map,this._slurStarts=new Map;let e=de.toString(this.data.readAll(),this.settings.importer.encoding),t=new rS;try{t.parse(e)}catch{throw new Or("Unsupported format")}return this._score=new Dh,this._score.tempo=120,this.parseDom(t),this.settings.importer.mergePartGroupsInMusicXml&&this.mergePartGroups(),this._score.finish(this.settings),this._score.rebuildRepeatGroups(),this._score}mergePartGroups(){let e=!1;for(const t of this._partGroups.values())t.length>1&&(this.mergeGroup(t),e=!0);if(e)for(let t=0;t<this._score.tracks.length;t++)this._score.tracks[t].index=t}mergeGroup(e){let t=e[0];for(let i=1;i<e.length;i++){let n=e[i];for(let o of n.staves)t.addStaff(o);let s=this._score.tracks.indexOf(n);this._score.tracks.splice(s,1)}}parseDom(e){let t=e.firstElement;if(!t)throw new Or("Unsupported format");switch(t.localName){case"score-partwise":this.parsePartwise(t);break;case"score-timewise":break;default:throw new Or("Unsupported format")}}parsePartwise(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"work":this.parseWork(t);break;case"movement-title":this._score.title=t.innerText;break;case"identification":this.parseIdentification(t);break;case"part-list":this.parsePartList(t);break;case"part":this.parsePart(t);break}}parseWork(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"work-title":this._score.title=t.innerText;break}}parsePart(e){let t=e.getAttribute("id");if(!this._trackById.has(t))if(this._trackById.size===1){for(const[s,o]of this._trackById)(o.staves.length===0||o.staves[0].bars.length===0)&&(t=s);if(!this._trackById.has(t))return}else return;let i=this._trackById.get(t),n=!0;this._maxVoices=0;for(let s of e.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"measure":this.parseMeasure(s,i,n)&&(n=!1);break}for(let s of i.staves)for(let o of s.bars)this.ensureVoices(o)}parseMeasure(e,t,i){if(e.getAttribute("implicit")==="yes"&&e.getElementsByTagName("note",!1).length===0)return!1;let n=0;if(i)this._divisionsPerQuarterNote=0,this._trackFirstMeasureNumber=parseInt(e.getAttribute("number")),this._trackFirstMeasureNumber||(this._trackFirstMeasureNumber=0),n=0;else{if(n=parseInt(e.getAttribute("number")),!n)return!1;n-=this._trackFirstMeasureNumber}if(i){let h=e.getElementsByTagName("attributes",!1);if(h.length>0){let p=h[0].getElementsByTagName("staves",!1);if(p.length>0){let g=parseInt(p[0].innerText);t.ensureStaveCount(g)}}}let s=new Array(t.staves.length),o=null;for(let h=t.staves[0].bars.length;h<=n;h++)for(let p=0;p<t.staves.length;p++){let g=new cu;if(s[p]=g,t.staves[p].bars.length>0){let b=t.staves[p].bars[t.staves[p].bars.length-1];g.clef=b.clef}o=this.getOrCreateMasterBar(n),t.staves[p].addBar(g),this.ensureVoices(g)}let c=new Map;if(o){let h=!1;for(let p of e.childNodes)if(p.nodeType===me.Element)switch(p.localName){case"note":this.parseNoteBeat(p,s);break;case"forward":this.parseForward(p,s);break;case"direction":this.parseDirection(p,o);break;case"attributes":h||(this.parseAttributes(p,s,o,t),h=!0);break;case"harmony":this.parseHarmony(p,t,c);break;case"sound":break;case"barline":this.parseBarline(p,o);break}}return!0}ensureVoices(e){for(;e.voices.length<this._maxVoices;){let t=new ml;e.addVoice(t);let i=new bn;i.isEmpty=!0,i.chordId=this._currentChord,t.addBeat(i)}}getOrCreateBeat(e,t,i){let n=0,s=e.getElementsByTagName("voice",!1);s.length>0&&(n=parseInt(s[0].innerText)-1);let o=this._previousBeatWasPulled;this._previousBeatWasPulled=!1;let c=e.getElementsByTagName("staff",!1),h=1;if(c.length>0){h=parseInt(c[0].innerText),(this._isBeamContinue||o)&&this._previousBeat.voice.bar.staff.index!==h-1&&(h=this._previousBeat.voice.bar.staff.index+1,this._previousBeatWasPulled=!0);let v=t[0].staff.track.index+"-"+h;this._voiceOfStaff.has(v)||this._voiceOfStaff.set(v,n)}h--;let p;h<0?p=t[0]:h>=t.length?p=t[t.length-1]:p=t[h];let g,b=this.getOrCreateVoice(p,n);return i&&b.beats.length>0||b.beats.length===1&&b.isEmpty?g=b.beats[b.beats.length-1]:(g=new bn,g.isEmpty=!1,b.addBeat(g)),this._isBeamContinue=!1,this._previousBeat=g,g}parseForward(e,t){let i=this.getOrCreateBeat(e,t,!1),s=parseInt(e.findChildElement("duration").innerText)*Y.Quarter/this._divisionsPerQuarterNote,o=[Y.SixtyFourth,Y.ThirtySecond,Y.Sixteenth,Y.Eighth,Y.Quarter,Y.Half,Y.Whole];for(let c of o)if(s>=c){i.duration=c,s-=c;break}i.isEmpty=!1}parseStaffDetails(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"staff-lines":for(let n of t.staves)n.stringTuning.tunings=new Array(parseInt(i.innerText)).fill(0);break;case"staff-tuning":this.parseStaffTuning(i,t);break}for(let i of t.staves)this.isEmptyTuning(i.tuning)&&(i.stringTuning.tunings=[])}parseStaffTuning(e,t){let i=parseInt(e.getAttribute("line")),n="C",s="",o=0;for(let h of e.childNodes)if(h.nodeType===me.Element)switch(h.localName){case"tuning-step":n=h.innerText;break;case"tuning-alter":o=parseInt(h.innerText);break;case"tuning-octave":s=h.innerText;break}let c=Fi.getTuningForText(n+s)+o;for(let h of t.staves)h.tuning[h.tuning.length-i]=c}parseHarmony(e,t,i){let n=new gc;for(let o of e.childNodes)if(o.nodeType===me.Element)switch(o.localName){case"root":n.name=this.parseHarmonyRoot(o);break;case"kind":n.name=n.name+this.parseHarmonyKind(o);break;case"frame":this.parseHarmonyFrame(o,n);break}this._currentChord=Fi.newGuid();const s=n.uniqueId;i.has(s)&&(n.showDiagram=!1);for(let o of t.staves)o.addChord(this._currentChord,n);i.set(s,n)}parseHarmonyRoot(e){let t="",i="";for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"root-step":t=n.innerText;break;case"root-alter":switch(parseInt(e.innerText)){case-2:i="bb";break;case-1:i="b";break;case 0:i="";break;case 1:i="#";break;case 2:i="##";break}break}return t+i}parseHarmonyKind(e){const t=e.getAttribute("text");let i="";if(t)i=t;else switch(e.innerText){case"major":i="";break;case"minor":i="m";break;case"augmented":i="+";break;case"diminished":i="";break;case"dominant":i="7";break;case"major-seventh":i="7M";break;case"minor-seventh":i="m7";break;case"diminished-seventh":i="7";break;case"augmented-seventh":i="+7";break;case"half-diminished":i="";break;case"major-minor":i="mMaj";break;case"major-sixth":i="maj6";break;case"minor-sixth":i="m6";break;case"dominant-ninth":i="9";break;case"major-ninth":i="maj9";break;case"minor-ninth":i="m9";break;case"dominant-11th":i="11";break;case"major-11th":i="maj11";break;case"minor-11th":i="m11";break;case"dominant-13th":i="13";break;case"major-13th":i="maj13";break;case"minor-13th":i="m13";break;case"suspended-second":i="sus2";break;case"suspended-fourth":i="sus4";break}return i}parseHarmonyFrame(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"frame-strings":const n=parseInt(i.innerText);t.strings=new Array(n);for(let c=0;c<n;c++)t.strings[c]=-1;break;case"first-fret":t.firstFret=parseInt(i.innerText);break;case"frame-note":let s=null,o=null;for(let c of i.childNodes)switch(c.localName){case"string":s=parseInt(c.innerText);break;case"fret":o=parseInt(c.innerText),s&&o>=0&&(t.strings[s-1]=o);break;case"barre":s&&o&&c.getAttribute("type")==="start"&&t.barreFrets.push(o);break}break}}parseBarline(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"repeat":this.parseRepeat(i,t);break;case"ending":this.parseEnding(i,t);break}}parseEnding(e,t){let i=parseInt(e.getAttribute("number"));i>0&&(--i,t.alternateEndings=t.alternateEndings|1<<i&255)}parseRepeat(e,t){let i=e.getAttribute("direction"),n=parseInt(e.getAttribute("times"));(n<0||isNaN(n))&&(n=2),i==="backward"?t.repeatCount=n:i==="forward"&&(t.isRepeatStart=!0)}parseNoteBeat(e,t){let i=e.getElementsByTagName("chord",!1).length>0,n=this.getOrCreateBeat(e,t,i);!n.chordId&&this._currentChord&&(n.chordId=this._currentChord,this._currentChord=null),this._currentDirection&&(n.text=this._currentDirection,this._currentDirection=null);let s=new fr;n.voice.isEmpty=!1,n.isEmpty=!1,n.addNote(s),n.dots=0;let o=!1;for(let c of e.childNodes)if(c.nodeType===me.Element)switch(c.localName){case"grace":n.graceType=ot.BeforeBeat,n.duration=Y.ThirtySecond;break;case"duration":if(n.isRest&&!o)switch(parseInt(c.innerText)){case 1:n.duration=Y.Whole;break;case 2:n.duration=Y.Half;break;case 4:n.duration=Y.Quarter;break;case 8:n.duration=Y.Eighth;break;case 16:n.duration=Y.Sixteenth;break;case 32:n.duration=Y.ThirtySecond;break;case 64:n.duration=Y.SixtyFourth;break;default:n.duration=Y.Quarter;break}break;case"tie":this.parseTied(c,s);break;case"cue":break;case"instrument":break;case"type":n.duration=this.getDuration(c.innerText),n.graceType!==ot.None&&n.duration<Y.Sixteenth&&(n.duration=Y.Eighth);break;case"dot":n.dots++;break;case"accidental":this.parseAccidental(c,s);break;case"time-modification":this.parseTimeModification(c,n);break;case"stem":break;case"notehead":c.getAttribute("parentheses")==="yes"&&(s.isGhost=!0);break;case"beam":c.innerText==="continue"&&(this._isBeamContinue=!0);break;case"notations":this.parseNotations(c,n,s);break;case"lyric":this.parseLyric(c,n);break;case"pitch":this.parsePitch(c,s);break;case"unpitched":this.parseUnpitched(c,s);break;case"rest":o=c.getAttribute("measure")==="yes",n.isEmpty=!1,n.notes=[],n.duration=Y.Whole;break}if(s.isStringed){for(let c=0;c<n.notes.length;c++)if(n.notes[c].string===s.string&&n.notes[c]!==s){n.removeNote(s);break}}}getDuration(e){switch(e){case"256th":case"128th":case"64th":return Y.SixtyFourth;case"32nd":return Y.ThirtySecond;case"16th":return Y.Sixteenth;case"eighth":return Y.Eighth;case"quarter":return Y.Quarter;case"half":return Y.Half;case"long":case"breve":case"whole":return Y.Whole}return Y.Quarter}parseLyric(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"text":t.text?t.text+=" "+i.innerText:t.text=i.innerText;break}}parseAccidental(e,t){switch(e.innerText){case"sharp":t.accidentalMode=Tr.ForceSharp;break;case"natural":t.accidentalMode=Tr.ForceNatural;break;case"flat":t.accidentalMode=Tr.ForceFlat;break}}parseTied(e,t){if(e.getAttribute("type")==="start")this._tieStartIds.has(t.id)||(this._tieStartIds.set(t.id,!0),this._tieStarts.push(t));else if(e.getAttribute("type")==="stop"&&this._tieStarts.length>0&&!t.isTieDestination){const i=this._tieStarts[0];i.beat.voice.index===t.beat.voice.index&&i.beat.voice.bar.staff.index===t.beat.voice.bar.staff.index&&i.beat.voice.bar.staff.track.index===t.beat.voice.bar.staff.track.index&&(t.isTieDestination=!0,t.tieOrigin=this._tieStarts[0]),this._tieStarts.splice(0,1),this._tieStartIds.delete(t.id)}}parseNotations(e,t,i){for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"articulations":this.parseArticulations(n,i);break;case"tied":this.parseTied(n,i);break;case"slide":case"glissando":n.getAttribute("type")==="start"&&(i.slideOutType=Et.Shift);break;case"dynamics":this.parseDynamics(n,t);break;case"technical":this.parseTechnical(n,i);break;case"ornaments":this.parseOrnaments(n,i);break;case"slur":let s=n.getAttribute("number");switch(s||(s="1"),s=t.voice.bar.staff.index+"_"+s,n.getAttribute("type")){case"start":this._slurStarts.set(s,i);break;case"stop":if(this._slurStarts.has(s)){i.isSlurDestination=!0;let o=this._slurStarts.get(s);o.slurDestination=i,i.slurOrigin=o}break}break}}parseOrnaments(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"tremolo":switch(parseInt(i.innerText)){case 1:t.beat.tremoloSpeed=Y.Eighth;break;case 2:t.beat.tremoloSpeed=Y.Sixteenth;break;case 3:t.beat.tremoloSpeed=Y.ThirtySecond;break}break}}parseTechnical(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"string":t.string=parseInt(i.innerText),t.string!==-2147483648&&(t.string=t.beat.voice.bar.staff.tuning.length-t.string+1);break;case"fret":t.fret=parseInt(i.innerText);break;case"down-bow":t.beat.pickStroke=pn.Down;break;case"up-bow":t.beat.pickStroke=pn.Up;break}(t.string===-2147483648||t.fret===-2147483648)&&(t.string=-1,t.fret=-1)}parseArticulations(e,t){for(let i of e.childNodes)switch(i.localName){case"accent":t.accentuated=Mr.Normal;break;case"strong-accent":t.accentuated=Mr.Heavy;break;case"staccato":case"detached-legato":t.isStaccato=!0;break}}parseDynamics(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"p":t.dynamics=Dt.P;break;case"pp":t.dynamics=Dt.PP;break;case"ppp":t.dynamics=Dt.PPP;break;case"f":t.dynamics=Dt.F;break;case"ff":t.dynamics=Dt.FF;break;case"fff":t.dynamics=Dt.FFF;break;case"mp":t.dynamics=Dt.MP;break;case"mf":t.dynamics=Dt.MF;break}}parseTimeModification(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"actual-notes":t.tupletNumerator=parseInt(i.innerText);break;case"normal-notes":t.tupletDenominator=parseInt(i.innerText);break}}parseUnpitched(e,t){let i="",n=0,s=0;for(let c of e.childNodes)if(c.nodeType===me.Element)switch(c.localName){case"display-step":i=c.innerText;break;case"display-alter":n=parseInt(c.innerText);break;case"display-octave":s=parseInt(c.innerText);break}let o=s*12+Fi.getToneForText(i)+n;t.octave=o/12|0,t.tone=o-t.octave*12}parsePitch(e,t){let i="",n=0,s=0;for(let c of e.childNodes)if(c.nodeType===me.Element)switch(c.localName){case"step":i=c.innerText;break;case"alter":n=parseFloat(c.innerText),isNaN(n)&&(n=0);break;case"octave":s=parseInt(c.innerText)+1;break}let o=s*12+Fi.getToneForText(i)+(n|0);t.octave=o/12|0,t.tone=o-t.octave*12}getOrCreateVoice(e,t){if(t<e.voices.length)return e.voices[t];for(let i=e.voices.length;i<=t;i++)e.addVoice(new ml);return this._maxVoices=Math.max(this._maxVoices,e.voices.length),e.voices[t]}parseDirection(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"sound":let n=i.getAttribute("tempo");if(n){let o=new yn;o.isLinear=!0,o.type=Ur.Tempo,o.value=parseInt(n),t.tempoAutomation=o,t.index===0&&(t.score.tempo=o.value)}break;case"direction-type":let s=i.firstElement;switch(s.localName){case"words":this._currentDirection=s.innerText;break;case"metronome":this.parseMetronome(s,t);break}break}}parseMetronome(e,t){let i=Y.Quarter,n=120;for(let o of e.childNodes)if(o.nodeType===me.Element)switch(o.localName){case"beat-unit":i=this.getDuration(o.innerText);break;case"per-minute":n=parseInt(o.innerText);break}let s=new yn;s.type=Ur.Tempo,s.value=n*(i/4|0),t.tempoAutomation=s,t.index===0&&(t.score.tempo=s.value)}parseAttributes(e,t,i,n){let s=0,o=!1;for(let c of e.childNodes)if(c.nodeType===me.Element)switch(c.localName){case"divisions":this._divisionsPerQuarterNote=parseInt(c.innerText);break;case"key":this.parseKey(c,i);break;case"time":this.parseTime(c,i),o=!0;break;case"clef":s=parseInt(c.getAttribute("number")),isNaN(s)&&(s=1),this.parseClef(c,t[s-1]);break;case"staff-details":this.parseStaffDetails(c,n);break;case"transpose":this.parseTranspose(c,n);break}o||(i.timeSignatureCommon=!0)}parseTranspose(e,t){let i=0;for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"chromatic":i+=parseInt(n.innerText);break;case"octave-change":i+=parseInt(n.innerText)*12;break}for(let n of t.staves)n.transpositionPitch=i}parseClef(e,t){let i="s",n=0;for(let s of e.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"sign":i=s.innerText.toLowerCase();break;case"line":n=parseInt(s.innerText);break;case"clef-octave-change":switch(parseInt(s.innerText)){case-2:t.clefOttava=hi._15mb;break;case-1:t.clefOttava=hi._8vb;break;case 1:t.clefOttava=hi._8va;break;case 2:t.clefOttava=hi._15mb;break}break}switch(i){case"g":t.clef=_t.G2;break;case"f":t.clef=_t.F4;break;case"c":n===3?t.clef=_t.C3:t.clef=_t.C4;break;case"percussion":t.clef=_t.Neutral,t.staff.isPercussion=!0;break;case"tab":t.clef=_t.G2,t.staff.showTablature=!0;break;default:t.clef=_t.G2;break}}parseTime(e,t){e.getAttribute("symbol")==="common"&&(t.timeSignatureCommon=!0);let i=!1,n=!1;for(let s of e.childNodes)if(s.nodeType===me.Element){let o=s.innerText;switch(s.localName){case"beats":i||(o.indexOf("+")===-1?t.timeSignatureNumerator=parseInt(o):t.timeSignatureNumerator=4,i=!0);break;case"beat-type":n||(o.indexOf("+")===-1?t.timeSignatureDenominator=parseInt(o):t.timeSignatureDenominator=4,n=!0);break}}}parseKey(e,t){let i=-2147483648,n="";for(let s of e.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"fifths":i=parseInt(s.innerText);break;case"key-step":break;case"key-alter":break;case"mode":n=s.innerText;break}-7<=i&&i<=7?t.keySignature=i:t.keySignature=Wr.C,n==="minor"?t.keySignatureType=mc.Minor:t.keySignatureType=mc.Major}getOrCreateMasterBar(e){if(e<this._score.masterBars.length)return this._score.masterBars[e];for(let t=this._score.masterBars.length;t<=e;t++){let i=new ou;if(this._score.masterBars.length>0){let n=this._score.masterBars[this._score.masterBars.length-1];i.timeSignatureDenominator=n.timeSignatureDenominator,i.timeSignatureNumerator=n.timeSignatureNumerator,i.keySignature=n.keySignature,i.keySignatureType=n.keySignatureType}this._score.addMasterBar(i)}return this._score.masterBars[e]}parseIdentification(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"creator":t.getAttribute("type")==="composer"&&(this._score.music=t.innerText);break;case"rights":this._score.copyright&&(this._score.copyright+=`
`),this._score.copyright+=t.innerText;break}}parsePartList(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"part-group":this.parsePartGroup(t);break;case"score-part":this.parseScorePart(t);break}}parsePartGroup(e){switch(e.getAttribute("type")){case"start":this._currentPartGroup=e.getAttribute("number"),this._partGroups.set(this._currentPartGroup,[]);break;case"stop":this._currentPartGroup=null;break}}parseScorePart(e){let t=e.getAttribute("id"),i=new gl;i.ensureStaveCount(1);let n=i.staves[0];n.showStandardNotation=!0,this._trackById.set(t,i),this._score.addTrack(i),this._currentPartGroup&&this._partGroups.get(this._currentPartGroup).push(i);for(let s of e.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"part-name":i.name=s.innerText;break;case"part-abbreviation":i.shortName=s.innerText;break;case"midi-instrument":this.parseMidiInstrument(s,i);break}this.isEmptyTuning(i.staves[0].tuning)&&(i.staves[0].stringTuning.tunings=[])}isEmptyTuning(e){if(!e)return!0;for(let t=0;t<e.length;t++)if(e[t]!==0)return!1;return!0}parseMidiInstrument(e,t){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"midi-channel":t.playbackInfo.primaryChannel=parseInt(i.innerText);break;case"midi-program":t.playbackInfo.program=parseInt(i.innerText);break;case"volume":t.playbackInfo.volume=Math.floor(parseInt(i.innerText)/100*16);break;case"pan":t.playbackInfo.balance=Math.max(0,Math.min(16,Math.floor((parseInt(i.innerText)+90)/180*16)));break}}}var Af;(function(r){r[r.SingleTrackMultiChannel=0]="SingleTrackMultiChannel",r[r.MultiTrack=1]="MultiTrack"})(Af||(Af={}));class xC{constructor(){this.events=[]}addEvent(e){if(this.events.length===0||e.tick>=this.events[this.events.length-1].tick)this.events.push(e);else{let t=this.events.length;for(;t>0&&this.events[t-1].tick>e.tick;)t--;this.events.splice(t,0,e)}}writeTo(e){let t=vn.empty(),i=0;for(let o of this.events){let c=o.tick-i;uc.writeVariableInt(t,c),o.writeTo(t),i=o.tick}const n=new Uint8Array([77,84,114,107]);e.write(n,0,n.length);let s=t.toArray();de.writeInt32BE(e,s.length),e.write(s,0,s.length)}}class uc{constructor(){this.format=Af.SingleTrackMultiChannel,this.division=Ct.QuarterTime,this.tracks=[]}get events(){if(this.tracks.length==1)return this.tracks[0].events;{const e=[];for(const t of this.tracks)this.events.push(...t.events);return e.sort((t,i)=>t.tick-i.tick),e}}ensureTracks(e){for(;this.tracks.length<e;)this.tracks.push(new xC)}addEvent(e){this.format==Af.SingleTrackMultiChannel?(this.ensureTracks(1),this.tracks[0].addEvent(e)):(this.ensureTracks(e.track+1),this.tracks[e.track].addEvent(e))}toBinary(){let e=vn.empty();return this.writeTo(e),e.toArray()}writeTo(e){let t=new Uint8Array([77,84,104,100]);e.write(t,0,t.length),de.writeInt32BE(e,6),de.writeInt16BE(e,this.format),de.writeInt16BE(e,this.tracks.length),de.writeInt16BE(e,this.division);for(const i of this.tracks)i.writeTo(e)}static writeVariableInt(e,t){let i=new Uint8Array(4),n=0;do i[n++]=t&127,t>>=7;while(t>0);for(;n>0;)n--,n>0?e.writeByte(i[n]|128):e.writeByte(i[n])}}var qt;(function(r){r[r.TimeSignature=88]="TimeSignature",r[r.NoteOn=128]="NoteOn",r[r.NoteOff=144]="NoteOff",r[r.ControlChange=176]="ControlChange",r[r.ProgramChange=192]="ProgramChange",r[r.TempoChange=81]="TempoChange",r[r.PitchBend=224]="PitchBend",r[r.PerNotePitchBend=96]="PerNotePitchBend",r[r.EndOfTrack=47]="EndOfTrack",r[r.AlphaTabRest=241]="AlphaTabRest",r[r.AlphaTabMetronome=242]="AlphaTabMetronome",r[r.SystemExclusive=240]="SystemExclusive",r[r.SystemExclusive2=247]="SystemExclusive2",r[r.Meta=255]="Meta"})(qt||(qt={}));class hu{constructor(e,t,i){this.track=e,this.tick=t,this.type=i}get command(){return this.type}get message(){return 0}get data1(){return 0}get data2(){return 0}}class SC extends hu{constructor(e,t,i,n,s,o){super(e,t,qt.TimeSignature),this.track=e,this.tick=t,this.numerator=i,this.denominatorIndex=n,this.midiClocksPerMetronomeClick=s,this.thirtySecondNodesInQuarter=o}writeTo(e){e.writeByte(255),e.writeByte(88),uc.writeVariableInt(e,4),e.writeByte(this.numerator&255),e.writeByte(this.denominatorIndex&255),e.writeByte(this.midiClocksPerMetronomeClick&255),e.writeByte(this.thirtySecondNodesInQuarter&255)}}class lu extends hu{constructor(e,t,i){super(e,t,i)}writeTo(e){e.writeByte(240);const t=vn.withCapacity(16);t.writeByte(lu.AlphaTabManufacturerId),this.writeEventData(t),t.writeByte(247),uc.writeVariableInt(e,t.length),t.copyTo(e)}}lu.AlphaTabManufacturerId=125;lu.MetronomeEventId=0;lu.RestEventId=1;class kC extends lu{constructor(e,t,i,n,s){super(e,t,qt.AlphaTabMetronome),this.isMetronome=!0,this.metronomeNumerator=i,this.metronomeDurationInMilliseconds=s,this.metronomeDurationInTicks=n}writeEventData(e){e.writeByte(lu.MetronomeEventId),e.writeByte(this.metronomeNumerator),de.writeInt32LE(e,this.metronomeDurationInTicks),de.writeInt32LE(e,this.metronomeDurationInMilliseconds)}}class _C extends lu{constructor(e,t,i){super(e,t,qt.AlphaTabRest),this.channel=i}writeEventData(e){e.writeByte(lu.RestEventId),e.writeByte(this.channel)}}class BC extends hu{constructor(e,t,i,n,s,o){super(e,t,i),this.channel=n,this.noteKey=s,this.noteVelocity=o}get data1(){return this.noteKey}get data2(){return this.noteVelocity}}class TC extends BC{constructor(e,t,i,n,s){super(e,t,qt.NoteOn,i,n,s)}writeTo(e){e.writeByte(this.channel&15|144),e.writeByte(this.noteKey&255),e.writeByte(this.noteVelocity&255)}}class CC extends BC{constructor(e,t,i,n,s){super(e,t,qt.NoteOff,i,n,s)}writeTo(e){e.writeByte(this.channel&15|128),e.writeByte(this.noteKey&255),e.writeByte(this.noteVelocity&255)}}class NC extends hu{constructor(e,t,i,n,s){super(e,t,qt.ControlChange),this.channel=i,this.controller=n,this.value=s}writeTo(e){e.writeByte(this.channel&15|176),e.writeByte(this.controller&255),e.writeByte(this.value&255)}get data1(){return this.controller}get data2(){return this.value}}class PC extends hu{constructor(e,t,i,n){super(e,t,qt.ProgramChange),this.channel=i,this.program=n}writeTo(e){e.writeByte(this.channel&15|192),e.writeByte(this.program&255)}get data1(){return this.program}}class EC extends hu{constructor(e,t){super(0,e,qt.TempoChange),this.microSecondsPerQuarterNote=t}writeTo(e){e.writeByte(255),e.writeByte(81),e.writeByte(3),e.writeByte(this.microSecondsPerQuarterNote>>16&255),e.writeByte(this.microSecondsPerQuarterNote>>8&255),e.writeByte(this.microSecondsPerQuarterNote&255)}}class RC extends hu{constructor(e,t,i,n){super(e,t,qt.PitchBend),this.channel=i,this.value=n}writeTo(e){e.writeByte(this.channel&15|224),e.writeByte(this.value&127),e.writeByte(this.value>>7&127)}get data1(){return this.value&127}get data2(){return this.value>>7&127}}class LC extends hu{constructor(e,t,i,n,s){super(e,t,qt.PerNotePitchBend),this.channel=i,this.noteKey=n,this.value=s}writeTo(e){throw new sn(nn.General,"Note Bend (Midi2.0) events cannot be exported to SMF1.0")}}class IC extends hu{constructor(e,t){super(e,t,qt.EndOfTrack)}writeTo(e){e.writeByte(255),e.writeByte(47),e.writeByte(0)}}class Kg{constructor(e,t){this.time=0,this.eventIndex=e,this.event=t,this.isMetronome=this.event.type==qt.AlphaTabMetronome}static newMetronomeEvent(e,t,i,n,s){const o=new kC(0,t,i,n,s);return new Kg(e,o)}}class Lt{}Lt.DefaultChannelCount=17;Lt.MetronomeChannel=Lt.DefaultChannelCount-1;Lt.AudioChannels=2;Lt.MinVolume=0;Lt.MinProgram=0;Lt.MaxProgram=127;Lt.MinPlaybackSpeed=.125;Lt.MaxPlaybackSpeed=8;Lt.MaxPitchWheel=16384;Lt.MaxPitchWheel20=4294967296;Lt.DefaultPitchWheel=Lt.MaxPitchWheel/2;Lt.MicroBufferCount=32;Lt.MicroBufferSize=64;class $k{constructor(e,t,i){this.bpm=e,this.ticks=t,this.time=i}}class ow{constructor(){this.tempoChanges=[],this.firstProgramEventPerChannel=new Map,this.firstTimeSignatureNumerator=0,this.firstTimeSignatureDenominator=0,this.synthData=[],this.division=Ct.QuarterTime,this.eventIndex=0,this.currentTime=0,this.playbackRange=null,this.playbackRangeStartTime=0,this.playbackRangeEndTime=0,this.endTick=0,this.endTime=0}}class Mz{get isPlayingMain(){return this._currentState==this._mainState}get isPlayingOneTimeMidi(){return this._currentState==this._oneTimeState}get isPlayingCountIn(){return this._currentState==this._countInState}constructor(e){this._oneTimeState=null,this._countInState=null,this.isLooping=!1,this.playbackSpeed=1,this._synthesizer=e,this._mainState=new ow,this._currentState=this._mainState}get mainPlaybackRange(){return this._mainState.playbackRange}set mainPlaybackRange(e){this._mainState.playbackRange=e,e&&(this._mainState.playbackRangeStartTime=this.tickPositionToTimePositionWithSpeed(this._mainState,e.startTick,1),this._mainState.playbackRangeEndTime=this.tickPositionToTimePositionWithSpeed(this._mainState,e.endTick,1))}get currentTime(){return this._currentState.currentTime/this.playbackSpeed}get currentEndTick(){return this._currentState.endTick}get currentEndTime(){return this._currentState.endTime/this.playbackSpeed}mainSeek(e){if(e*=this.playbackSpeed,this.mainPlaybackRange&&(e<this._mainState.playbackRangeStartTime?e=this._mainState.playbackRangeStartTime:e>this._mainState.playbackRangeEndTime&&(e=this._mainState.playbackRangeEndTime)),e>this._mainState.currentTime)this.mainSilentProcess(e-this._mainState.currentTime);else if(e<this._mainState.currentTime){if(this._mainState.currentTime=0,this._mainState.eventIndex=0,this.isPlayingMain){let t=this._synthesizer.metronomeVolume;this._synthesizer.noteOffAll(!0),this._synthesizer.resetSoft(),this._synthesizer.setupMetronomeChannel(t)}this.mainSilentProcess(e)}}mainSilentProcess(e){if(e<=0)return;let t=Date.now(),i=this._mainState.currentTime+e;if(this.isPlayingMain)for(;this._mainState.currentTime<i;)this.fillMidiEventQueueLimited(i-this._mainState.currentTime)&&this._synthesizer.synthesizeSilent(Lt.MicroBufferSize);this._mainState.currentTime=i;let n=Date.now()-t;ye.debug("Sequencer","Silent seek finished in "+n+"ms (main)")}loadOneTimeMidi(e){this._oneTimeState=this.createStateFromFile(e),this._currentState=this._oneTimeState}loadMidi(e){this._mainState=this.createStateFromFile(e),this._currentState=this._mainState}createStateFromFile(e){const t=new ow;t.tempoChanges=[],t.division=e.division,t.eventIndex=0,t.currentTime=0,t.synthData=[];let i=120,n=0,s=0,o=0,c=0,h=0,p=0,g=0,b=0;for(let v of e.events){let S=new Kg(t.synthData.length,v);t.synthData.push(S);let B=v.tick-b;if(n+=B,s+=B*(6e4/(i*e.division)),S.time=s,b=v.tick,c>0)for(;p<n;){let T=Kg.newMetronomeEvent(t.synthData.length,p,Math.floor(p/c)%o,c,h);t.synthData.push(T),T.time=g,p+=c,g+=h}if(v.type===qt.TempoChange)i=6e7/v.microSecondsPerQuarterNote,t.tempoChanges.push(new $k(i,n,s)),h=c*(6e4/(i*e.division));else if(v.type===qt.TimeSignature){let T=v,C=Math.pow(2,T.denominatorIndex);o=T.numerator,c=t.division*(4/C)|0,h=c*(6e4/(i*e.division)),t.firstTimeSignatureDenominator===0&&(t.firstTimeSignatureNumerator=T.numerator,t.firstTimeSignatureDenominator=C)}else if(v.type===qt.ProgramChange){let T=v.channel;t.firstProgramEventPerChannel.has(T)||t.firstProgramEventPerChannel.set(T,S)}}return t.synthData.sort((v,S)=>v.time>S.time?1:v.time<S.time?-1:v.eventIndex-S.eventIndex),t.endTime=s,t.endTick=n,t}fillMidiEventQueue(){return this.fillMidiEventQueueLimited(-1)}fillMidiEventQueueLimited(e){let t=Lt.MicroBufferSize/this._synthesizer.outSampleRate*1e3*this.playbackSpeed,i=this.internalEndTime;e>0&&(e<t&&(t=e),i=Math.min(this.internalEndTime,this._currentState.currentTime+e));let n=!1;for(this._currentState.currentTime+=t;this._currentState.eventIndex<this._currentState.synthData.length&&this._currentState.synthData[this._currentState.eventIndex].time<this._currentState.currentTime&&this._currentState.currentTime<i;)this._synthesizer.dispatchEvent(this._currentState.synthData[this._currentState.eventIndex]),this._currentState.eventIndex++,n=!0;return n}mainTickPositionToTimePosition(e){return this.tickPositionToTimePositionWithSpeed(this._mainState,e,this.playbackSpeed)}mainTimePositionToTickPosition(e){return this.timePositionToTickPositionWithSpeed(this._mainState,e,this.playbackSpeed)}currentTimePositionToTickPosition(e){return this.timePositionToTickPositionWithSpeed(this._currentState,e,this.playbackSpeed)}tickPositionToTimePositionWithSpeed(e,t,i){let n=0,s=120,o=0;for(const c of e.tempoChanges){if(t<c.ticks)break;n=c.time,s=c.bpm,o=c.ticks}return t-=o,n+=t*(6e4/(s*e.division)),n/i}timePositionToTickPositionWithSpeed(e,t,i){t*=i;let n=0,s=120,o=0;for(const c of e.tempoChanges){if(t<c.time)break;n=c.ticks,s=c.bpm,o=c.time}return t-=o,n+=t/(6e4/(s*e.division))|0,n+1}get internalEndTime(){return this.isPlayingMain?this.mainPlaybackRange?this._currentState.playbackRangeEndTime:this._currentState.endTime:this._currentState.endTime}get isFinished(){return this._currentState.currentTime>=this.internalEndTime}stop(){this.isPlayingMain&&this.mainPlaybackRange?this._currentState.currentTime=this.mainPlaybackRange.startTick:this._currentState.currentTime=0,this._currentState.eventIndex=0}resetOneTimeMidi(){this._oneTimeState=null,this._currentState=this._mainState}resetCountIn(){this._countInState=null,this._currentState=this._mainState}startCountIn(){this.generateCountInMidi(),this._currentState=this._countInState,this.stop(),this._synthesizer.noteOffAll(!0)}generateCountInMidi(){const e=new ow;e.division=this._mainState.division;let t=120,i=4,n=4;this._mainState.eventIndex===0?(t=this._mainState.tempoChanges[0].bpm,i=this._mainState.firstTimeSignatureNumerator,n=this._mainState.firstTimeSignatureDenominator):(t=this._synthesizer.currentTempo,i=this._synthesizer.timeSignatureNumerator,n=this._synthesizer.timeSignatureDenominator),e.tempoChanges.push(new $k(t,0,0));let s=e.division*(4/n)|0,o=s*(6e4/(t*this._mainState.division)),c=0,h=0;for(let p=0;p<i;p++){let g=Kg.newMetronomeEvent(e.synthData.length,c,p,s,o);e.synthData.push(g),g.time=h,c+=s,h+=o}e.synthData.sort((p,g)=>p.time>g.time?1:p.time<g.time?-1:p.eventIndex-g.eventIndex),e.endTime=h,e.endTick=c,this._countInState=e}}var Hr;(function(r){r[r.Paused=0]="Paused",r[r.Playing=1]="Playing"})(Hr||(Hr={}));class H0{constructor(e,t){this.state=e,this.stopped=t}}class ib{constructor(e,t,i,n,s){this.currentTime=e,this.endTime=t,this.currentTick=i,this.endTick=n,this.isSeek=s}}class sa{constructor(){this.id="",this.size=0}static load(e,t,i){if(e&&sa.HeaderSize>e.size||i.position+sa.HeaderSize>=i.length||(t.id=de.read8BitStringLength(i,4),t.id.charCodeAt(0)<=32||t.id.charCodeAt(0)>=122)||(t.size=de.readUInt32LE(i),e&&sa.HeaderSize+t.size>e.size))return!1;e&&(e.size-=sa.HeaderSize+t.size);let n=t.id==="RIFF",s=t.id==="LIST";return n&&e?!1:!n&&!s?!0:(t.id=de.read8BitStringLength(i,4),t.id.charCodeAt(0)<=32||t.id.charCodeAt(0)>=122?!1:(t.size-=4,!0))}}sa.HeaderSize=8;class sS{constructor(){this.phdrs=[],this.pbags=[],this.pmods=[],this.pgens=[],this.insts=[],this.ibags=[],this.imods=[],this.igens=[],this.sHdrs=[],this.fontSamples=new Float32Array(0)}load(e){const t=new sa,i=new sa;if(!sa.load(null,t,e)||t.id!=="sfbk")throw new Ir("Soundfont is not a valid Soundfont2 file");for(;sa.load(t,i,e);){let n=new sa;if(i.id==="pdta")for(;sa.load(i,n,e);)switch(n.id){case"phdr":for(let s=0,o=n.size/ix.SizeInFile|0;s<o;s++)this.phdrs.push(new ix(e));break;case"pbag":for(let s=0,o=n.size/tx.SizeInFile|0;s<o;s++)this.pbags.push(new tx(e));break;case"pmod":for(let s=0,o=n.size/rx.SizeInFile|0;s<o;s++)this.pmods.push(new rx(e));break;case"pgen":for(let s=0,o=n.size/Fs.SizeInFile|0;s<o;s++)this.pgens.push(new Fs(e));break;case"inst":for(let s=0,o=n.size/ex.SizeInFile|0;s<o;s++)this.insts.push(new ex(e));break;case"ibag":for(let s=0,o=n.size/Qw.SizeInFile|0;s<o;s++)this.ibags.push(new Qw(e));break;case"imod":for(let s=0,o=n.size/Jw.SizeInFile|0;s<o;s++)this.imods.push(new Jw(e));break;case"igen":for(let s=0,o=n.size/Zw.SizeInFile|0;s<o;s++)this.igens.push(new Zw(e));break;case"shdr":for(let s=0,o=n.size/nx.SizeInFile|0;s<o;s++)this.sHdrs.push(new nx(e));break;default:e.position+=n.size;break}else if(i.id==="sdta")for(;sa.load(i,n,e);)switch(n.id){case"smpl":this.fontSamples=sS.loadSamples(n,e);break;default:e.position+=n.size;break}else e.position+=i.size}}static loadSamples(e,t){let i=e.size/2|0;const n=new Float32Array(i);let s=0;const o=new Uint8Array(16*1024);for(;i>0;){let c=Math.min(i,o.length/2|0);t.read(o,0,c*2);for(let h=0;h<c;h++){const p=Ft.int32ToInt16(o[h*2+1]<<8|o[h*2]);n[s+h]=p/32767}i-=c,s+=c}return n}}class Qw{constructor(e){this.instGenNdx=de.readUInt16LE(e),this.instModNdx=de.readUInt16LE(e)}}Qw.SizeInFile=4;class Jw{constructor(e){this.modSrcOper=de.readUInt16LE(e),this.modDestOper=de.readUInt16LE(e),this.modAmount=de.readInt16LE(e),this.modAmtSrcOper=de.readUInt16LE(e),this.modTransOper=de.readUInt16LE(e)}}Jw.SizeInFile=10;class Zw{constructor(e){this.genOper=de.readUInt16LE(e),this.genAmount=new FC(e)}}Zw.SizeInFile=4;class ex{constructor(e){this.instName=de.read8BitStringLength(e,20),this.instBagNdx=de.readUInt16LE(e)}}ex.SizeInFile=22;class tx{constructor(e){this.genNdx=de.readUInt16LE(e),this.modNdx=de.readUInt16LE(e)}}tx.SizeInFile=4;class Fs{constructor(e){this.genOper=de.readUInt16LE(e),this.genAmount=new FC(e)}}Fs.SizeInFile=4;Fs.GenInstrument=41;Fs.GenKeyRange=43;Fs.GenVelRange=44;Fs.GenSampleId=53;class ix{constructor(e){this.presetName=de.read8BitStringLength(e,20),this.preset=de.readUInt16LE(e),this.bank=de.readUInt16LE(e),this.presetBagNdx=de.readUInt16LE(e),this.library=de.readUInt32LE(e),this.genre=de.readUInt32LE(e),this.morphology=de.readUInt32LE(e)}}ix.SizeInFile=38;class rx{constructor(e){this.modSrcOper=de.readUInt16LE(e),this.modDestOper=de.readUInt16LE(e),this.modAmount=de.readUInt16LE(e),this.modAmtSrcOper=de.readUInt16LE(e),this.modTransOper=de.readUInt16LE(e)}}rx.SizeInFile=10;class nx{constructor(e){this.sampleName=de.read8BitStringLength(e,20),this.start=de.readUInt32LE(e),this.end=de.readUInt32LE(e),this.startLoop=de.readUInt32LE(e),this.endLoop=de.readUInt32LE(e),this.sampleRate=de.readUInt32LE(e),this.originalPitch=e.readByte(),this.pitchCorrection=de.readSInt8(e),this.sampleLink=de.readUInt16LE(e),this.sampleType=de.readUInt16LE(e)}}nx.SizeInFile=46;class FC{get shortAmount(){return Ft.uint16ToInt16(this.wordAmount)}get lowByteAmount(){return this.wordAmount&255}get highByteAmount(){return(this.wordAmount&65280)>>8&255}constructor(e){this.wordAmount=de.readUInt16LE(e)}}class Dz{constructor(){this.presetIndex=0,this.bank=0,this.pitchWheel=0,this.perNotePitchWheel=new Map,this.midiPan=0,this.midiVolume=0,this.midiExpression=0,this.midiRpn=0,this.midiData=0,this.panOffset=0,this.gainDb=0,this.pitchRange=0,this.tuning=0,this.mixVolume=0,this.mute=!1,this.solo=!1}}class Az{constructor(){this.activeChannel=0,this.channelList=[]}setupVoice(e,t){const i=this.channelList[this.activeChannel],n=t.region.pan+i.panOffset;t.playingChannel=this.activeChannel,t.mixVolume=i.mixVolume,t.noteGainDb+=i.gainDb,t.updatePitchRatio(i,e.outSampleRate),n<=-.5?(t.panFactorLeft=1,t.panFactorRight=0):n>=.5?(t.panFactorLeft=0,t.panFactorRight=1):(t.panFactorLeft=Math.sqrt(.5-n),t.panFactorRight=Math.sqrt(.5+n))}}var Kl;(function(r){r[r.None=0]="None",r[r.Continuous=1]="Continuous",r[r.Sustain=2]="Sustain"})(Kl||(Kl={}));var _h;(function(r){r[r.StereoInterleaved=0]="StereoInterleaved",r[r.StereoUnweaved=1]="StereoUnweaved",r[r.Mono=2]="Mono"})(_h||(_h={}));class Vz{constructor(){this.name="",this.presetNumber=0,this.bank=0,this.regions=null,this.fontSamples=null}}class mr{static timecents2Secs(e){return Math.pow(2,e/1200)}static decibelsToGain(e){return e>-100?Math.pow(10,e*.05):0}static gainToDecibels(e){return e<=1e-5?-100:20*Math.log10(e)}static cents2Hertz(e){return 8.176*Math.pow(2,e/1200)}static clamp(e,t,i){return e<=t?t:e>=i?i:e}}class Hg{constructor(e){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0,e&&(this.delay=e.delay,this.attack=e.attack,this.hold=e.hold,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.keynumToHold=e.keynumToHold,this.keynumToDecay=e.keynumToDecay)}clear(){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0}envToSecs(e){this.delay=this.delay<-11950?0:mr.timecents2Secs(this.delay),this.attack=this.attack<-11950?0:mr.timecents2Secs(this.attack),this.release=this.release<-11950?0:mr.timecents2Secs(this.release),this.keynumToHold===0&&(this.hold=this.hold<-11950?0:mr.timecents2Secs(this.hold)),this.keynumToDecay===0&&(this.decay=this.decay<-11950?0:mr.timecents2Secs(this.decay)),this.sustain<0?this.sustain=0:e?this.sustain=mr.decibelsToGain(-this.sustain/10):this.sustain=1-this.sustain/1e3}}var Yt;(function(r){r[r.StartAddrsOffset=0]="StartAddrsOffset",r[r.EndAddrsOffset=1]="EndAddrsOffset",r[r.StartloopAddrsOffset=2]="StartloopAddrsOffset",r[r.EndloopAddrsOffset=3]="EndloopAddrsOffset",r[r.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",r[r.ModLfoToPitch=5]="ModLfoToPitch",r[r.VibLfoToPitch=6]="VibLfoToPitch",r[r.ModEnvToPitch=7]="ModEnvToPitch",r[r.InitialFilterFc=8]="InitialFilterFc",r[r.InitialFilterQ=9]="InitialFilterQ",r[r.ModLfoToFilterFc=10]="ModLfoToFilterFc",r[r.ModEnvToFilterFc=11]="ModEnvToFilterFc",r[r.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",r[r.ModLfoToVolume=13]="ModLfoToVolume",r[r.Unused1=14]="Unused1",r[r.ChorusEffectsSend=15]="ChorusEffectsSend",r[r.ReverbEffectsSend=16]="ReverbEffectsSend",r[r.Pan=17]="Pan",r[r.Unused2=18]="Unused2",r[r.Unused3=19]="Unused3",r[r.Unused4=20]="Unused4",r[r.DelayModLFO=21]="DelayModLFO",r[r.FreqModLFO=22]="FreqModLFO",r[r.DelayVibLFO=23]="DelayVibLFO",r[r.FreqVibLFO=24]="FreqVibLFO",r[r.DelayModEnv=25]="DelayModEnv",r[r.AttackModEnv=26]="AttackModEnv",r[r.HoldModEnv=27]="HoldModEnv",r[r.DecayModEnv=28]="DecayModEnv",r[r.SustainModEnv=29]="SustainModEnv",r[r.ReleaseModEnv=30]="ReleaseModEnv",r[r.KeynumToModEnvHold=31]="KeynumToModEnvHold",r[r.KeynumToModEnvDecay=32]="KeynumToModEnvDecay",r[r.DelayVolEnv=33]="DelayVolEnv",r[r.AttackVolEnv=34]="AttackVolEnv",r[r.HoldVolEnv=35]="HoldVolEnv",r[r.DecayVolEnv=36]="DecayVolEnv",r[r.SustainVolEnv=37]="SustainVolEnv",r[r.ReleaseVolEnv=38]="ReleaseVolEnv",r[r.KeynumToVolEnvHold=39]="KeynumToVolEnvHold",r[r.KeynumToVolEnvDecay=40]="KeynumToVolEnvDecay",r[r.Instrument=41]="Instrument",r[r.Reserved1=42]="Reserved1",r[r.KeyRange=43]="KeyRange",r[r.VelRange=44]="VelRange",r[r.StartloopAddrsCoarseOffset=45]="StartloopAddrsCoarseOffset",r[r.Keynum=46]="Keynum",r[r.Velocity=47]="Velocity",r[r.InitialAttenuation=48]="InitialAttenuation",r[r.Reserved2=49]="Reserved2",r[r.EndloopAddrsCoarseOffset=50]="EndloopAddrsCoarseOffset",r[r.CoarseTune=51]="CoarseTune",r[r.FineTune=52]="FineTune",r[r.SampleID=53]="SampleID",r[r.SampleModes=54]="SampleModes",r[r.Reserved3=55]="Reserved3",r[r.ScaleTuning=56]="ScaleTuning",r[r.ExclusiveClass=57]="ExclusiveClass",r[r.OverridingRootKey=58]="OverridingRootKey",r[r.Unused5=59]="Unused5",r[r.EndOper=60]="EndOper"})(Yt||(Yt={}));class _f{constructor(e){this.loopMode=Kl.None,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv=new Hg,this.modEnv=new Hg,this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,e&&(this.loopMode=e.loopMode,this.sampleRate=e.sampleRate,this.loKey=e.loKey,this.hiKey=e.hiKey,this.loVel=e.loVel,this.hiVel=e.hiVel,this.group=e.group,this.offset=e.offset,this.end=e.end,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.transpose=e.transpose,this.tune=e.tune,this.pitchKeyCenter=e.pitchKeyCenter,this.pitchKeyTrack=e.pitchKeyTrack,this.attenuation=e.attenuation,this.pan=e.pan,this.ampEnv=new Hg(e.ampEnv),this.modEnv=new Hg(e.modEnv),this.initialFilterQ=e.initialFilterQ,this.initialFilterFc=e.initialFilterFc,this.modEnvToPitch=e.modEnvToPitch,this.modEnvToFilterFc=e.modEnvToFilterFc,this.modLfoToFilterFc=e.modLfoToFilterFc,this.modLfoToVolume=e.modLfoToVolume,this.delayModLFO=e.delayModLFO,this.freqModLFO=e.freqModLFO,this.modLfoToPitch=e.modLfoToPitch,this.delayVibLFO=e.delayVibLFO,this.freqVibLFO=e.freqVibLFO,this.vibLfoToPitch=e.vibLfoToPitch)}clear(e){this.loopMode=Kl.None,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv.clear(),this.modEnv.clear(),this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,this.hiKey=127,this.hiVel=127,this.pitchKeyCenter=60,!e&&(this.pitchKeyTrack=100,this.pitchKeyCenter=-1,this.ampEnv.delay=-12e3,this.ampEnv.attack=-12e3,this.ampEnv.hold=-12e3,this.ampEnv.decay=-12e3,this.ampEnv.release=-12e3,this.modEnv.delay=-12e3,this.modEnv.attack=-12e3,this.modEnv.hold=-12e3,this.modEnv.decay=-12e3,this.modEnv.release=-12e3,this.initialFilterFc=13500,this.delayModLFO=-12e3,this.delayVibLFO=-12e3)}operator(e,t){switch(e){case Yt.StartAddrsOffset:this.offset+=Ft.int16ToUint32(t.shortAmount);break;case Yt.EndAddrsOffset:this.end+=Ft.int16ToUint32(t.shortAmount);break;case Yt.StartloopAddrsOffset:this.loopStart+=Ft.int16ToUint32(t.shortAmount);break;case Yt.EndloopAddrsOffset:this.loopEnd+=Ft.int16ToUint32(t.shortAmount);break;case Yt.StartAddrsCoarseOffset:this.offset+=Ft.int16ToUint32(t.shortAmount)*32768;break;case Yt.ModLfoToPitch:this.modLfoToPitch=t.shortAmount;break;case Yt.VibLfoToPitch:this.vibLfoToPitch=t.shortAmount;break;case Yt.ModEnvToPitch:this.modEnvToPitch=t.shortAmount;break;case Yt.InitialFilterFc:this.initialFilterFc=t.shortAmount;break;case Yt.InitialFilterQ:this.initialFilterQ=t.shortAmount;break;case Yt.ModLfoToFilterFc:this.modLfoToFilterFc=t.shortAmount;break;case Yt.ModEnvToFilterFc:this.modEnvToFilterFc=t.shortAmount;break;case Yt.EndAddrsCoarseOffset:this.end+=Ft.int16ToUint32(t.shortAmount)*32768;break;case Yt.ModLfoToVolume:this.modLfoToVolume=t.shortAmount;break;case Yt.Pan:this.pan=t.shortAmount/1e3;break;case Yt.DelayModLFO:this.delayModLFO=t.shortAmount;break;case Yt.FreqModLFO:this.freqModLFO=t.shortAmount;break;case Yt.DelayVibLFO:this.delayVibLFO=t.shortAmount;break;case Yt.FreqVibLFO:this.freqVibLFO=t.shortAmount;break;case Yt.DelayModEnv:this.modEnv.delay=t.shortAmount;break;case Yt.AttackModEnv:this.modEnv.attack=t.shortAmount;break;case Yt.HoldModEnv:this.modEnv.hold=t.shortAmount;break;case Yt.DecayModEnv:this.modEnv.decay=t.shortAmount;break;case Yt.SustainModEnv:this.modEnv.sustain=t.shortAmount;break;case Yt.ReleaseModEnv:this.modEnv.release=t.shortAmount;break;case Yt.KeynumToModEnvHold:this.modEnv.keynumToHold=t.shortAmount;break;case Yt.KeynumToModEnvDecay:this.modEnv.keynumToDecay=t.shortAmount;break;case Yt.DelayVolEnv:this.ampEnv.delay=t.shortAmount;break;case Yt.AttackVolEnv:this.ampEnv.attack=t.shortAmount;break;case Yt.HoldVolEnv:this.ampEnv.hold=t.shortAmount;break;case Yt.DecayVolEnv:this.ampEnv.decay=t.shortAmount;break;case Yt.SustainVolEnv:this.ampEnv.sustain=t.shortAmount;break;case Yt.ReleaseVolEnv:this.ampEnv.release=t.shortAmount;break;case Yt.KeynumToVolEnvHold:this.ampEnv.keynumToHold=t.shortAmount;break;case Yt.KeynumToVolEnvDecay:this.ampEnv.keynumToDecay=t.shortAmount;break;case Yt.KeyRange:this.loKey=t.lowByteAmount,this.hiKey=t.highByteAmount;break;case Yt.VelRange:this.loVel=t.lowByteAmount,this.hiVel=t.highByteAmount;break;case Yt.StartloopAddrsCoarseOffset:this.loopStart+=Ft.int16ToUint32(t.shortAmount)*32768;break;case Yt.InitialAttenuation:this.attenuation+=t.shortAmount*.1;break;case Yt.EndloopAddrsCoarseOffset:this.loopEnd+=Ft.int16ToUint32(t.shortAmount)*32768;break;case Yt.CoarseTune:this.transpose+=t.shortAmount;break;case Yt.FineTune:this.tune+=t.shortAmount;break;case Yt.SampleModes:this.loopMode=(t.wordAmount&3)===3?Kl.Sustain:(t.wordAmount&3)===1?Kl.Continuous:Kl.None;break;case Yt.ScaleTuning:this.pitchKeyTrack=t.shortAmount;break;case Yt.ExclusiveClass:this.group=t.wordAmount;break;case Yt.OverridingRootKey:this.pitchKeyCenter=t.shortAmount;break}}}var Ni;(function(r){r[r.None=0]="None",r[r.Delay=1]="Delay",r[r.Attack=2]="Attack",r[r.Hold=3]="Hold",r[r.Decay=4]="Decay",r[r.Sustain=5]="Sustain",r[r.Release=6]="Release",r[r.Done=7]="Done"})(Ni||(Ni={}));class om{constructor(){this.level=0,this.slope=0,this.samplesUntilNextSegment=0,this.segment=Ni.None,this.midiVelocity=0,this.parameters=null,this.segmentIsExponential=!1,this.isAmpEnv=!1}nextSegment(e,t){if(this.parameters)for(;;)switch(e){case Ni.None:if(this.samplesUntilNextSegment=this.parameters.delay*t|0,this.samplesUntilNextSegment>0){this.segment=Ni.Delay,this.segmentIsExponential=!1,this.level=0,this.slope=0;return}e=Ni.Delay;break;case Ni.Delay:if(this.samplesUntilNextSegment=this.parameters.attack*t|0,this.samplesUntilNextSegment>0){this.isAmpEnv||(this.samplesUntilNextSegment=this.parameters.attack*((145-this.midiVelocity)/144)*t|0),this.segment=Ni.Attack,this.segmentIsExponential=!1,this.level=0,this.slope=1/this.samplesUntilNextSegment;return}e=Ni.Attack;break;case Ni.Attack:if(this.samplesUntilNextSegment=this.parameters.hold*t|0,this.samplesUntilNextSegment>0){this.segment=Ni.Hold,this.segmentIsExponential=!1,this.level=1,this.slope=0;return}e=Ni.Hold;break;case Ni.Hold:if(this.samplesUntilNextSegment=this.parameters.decay*t|0,this.samplesUntilNextSegment>0){if(this.segment=Ni.Decay,this.level=1,this.isAmpEnv){let i=-9.226/this.samplesUntilNextSegment;this.slope=Math.exp(i),this.segmentIsExponential=!0,this.parameters.sustain>0&&(this.samplesUntilNextSegment=Math.log(this.parameters.sustain)/i|0)}else this.slope=-1/this.samplesUntilNextSegment,this.samplesUntilNextSegment=this.parameters.decay*(1-this.parameters.sustain)*t|0,this.segmentIsExponential=!1;return}e=Ni.Decay;break;case Ni.Decay:this.segment=Ni.Sustain,this.level=this.parameters.sustain,this.slope=0,this.samplesUntilNextSegment=2147483647,this.segmentIsExponential=!1;return;case Ni.Sustain:if(this.segment=Ni.Release,this.samplesUntilNextSegment=(this.parameters.release<=0?om.FastReleaseTime:this.parameters.release)*t|0,this.isAmpEnv){let i=-9.226/this.samplesUntilNextSegment;this.slope=Math.exp(i),this.segmentIsExponential=!0}else this.slope=-this.level/this.samplesUntilNextSegment,this.segmentIsExponential=!1;return;default:this.segment=Ni.Done,this.segmentIsExponential=!1,this.level=0,this.slope=0,this.samplesUntilNextSegment=134217727;return}}setup(e,t,i,n,s){this.parameters=new Hg(e),this.parameters.keynumToHold>0&&(this.parameters.hold+=this.parameters.keynumToHold*(60-t),this.parameters.hold=this.parameters.hold<-1e4?0:mr.timecents2Secs(this.parameters.hold)),this.parameters.keynumToDecay>0&&(this.parameters.decay+=this.parameters.keynumToDecay*(60-t),this.parameters.decay=this.parameters.decay<-1e4?0:mr.timecents2Secs(this.parameters.decay)),this.midiVelocity=i|0,this.isAmpEnv=n,this.nextSegment(Ni.None,s)}process(e,t){this.slope>0&&(this.segmentIsExponential?this.level*=Math.pow(this.slope,e):this.level+=this.slope*e),this.samplesUntilNextSegment-=e,this.samplesUntilNextSegment<=0&&this.nextSegment(this.segment,t)}}om.FastReleaseTime=.01;class jk{constructor(){this.samplesUntil=0,this.level=0,this.delta=0}setup(e,t,i){this.samplesUntil=e*i|0,this.delta=4*mr.cents2Hertz(t)/i,this.level=0}process(e){if(this.samplesUntil>e){this.samplesUntil-=e;return}this.level+=this.delta*e,this.level>1?(this.delta=-this.delta,this.level=2-this.level):this.level<-1&&(this.delta=-this.delta,this.level=-2-this.level)}}class Yk{constructor(e){this.qInv=0,this.a0=0,this.a1=0,this.b1=0,this.b2=0,this.z1=0,this.z2=0,this.active=!1,e&&(this.qInv=e.qInv,this.a0=e.a0,this.a1=e.a1,this.b1=e.b1,this.b2=e.b2,this.z1=e.z1,this.z2=e.z2,this.active=e.active)}setup(e){let t=Math.tan(Math.PI*e),i=t*t,n=1/(1+t*this.qInv+i);this.a0=i*n,this.a1=2*this.a0,this.b1=2*(i-1)*n,this.b2=(1-t*this.qInv+i)*n}process(e){let t=e*this.a0+this.z1;return this.z1=e*this.a1+this.z2-this.b1*t,this.z2=e*this.a0-this.b2*t,t}}class lm{constructor(){this.playingPreset=0,this.playingKey=0,this.playingChannel=0,this.region=null,this.pitchInputTimecents=0,this.pitchOutputFactor=0,this.sourceSamplePosition=0,this.noteGainDb=0,this.panFactorLeft=0,this.panFactorRight=0,this.playIndex=0,this.loopStart=0,this.loopEnd=0,this.ampEnv=new om,this.modEnv=new om,this.lowPass=new Yk,this.modLfo=new jk,this.vibLfo=new jk,this.mixVolume=0,this.mute=!1}updatePitchRatio(e,t){let i=e.pitchWheel;e.perNotePitchWheel.has(this.playingKey)&&(i+=e.perNotePitchWheel.get(this.playingKey)-8192);const n=i===8192?e.tuning:i/16383*e.pitchRange*2-e.pitchRange+e.tuning;this.calcPitchRatio(n,t)}calcPitchRatio(e,t){if(!this.region)return;const i=this.playingKey+this.region.transpose+this.region.tune/100;let n=this.region.pitchKeyCenter+(i-this.region.pitchKeyCenter)*(this.region.pitchKeyTrack/100);e!==0&&(n+=e),this.pitchInputTimecents=n*100,this.pitchOutputFactor=this.region.sampleRate/(mr.timecents2Secs(this.region.pitchKeyCenter*100)*t)}end(e){this.region&&(this.ampEnv.nextSegment(Ni.Sustain,e),this.modEnv.nextSegment(Ni.Sustain,e),this.region.loopMode===Kl.Sustain&&(this.loopEnd=this.loopStart))}endQuick(e){this.ampEnv.parameters.release=0,this.ampEnv.nextSegment(Ni.Sustain,e),this.modEnv.parameters.release=0,this.modEnv.nextSegment(Ni.Sustain,e)}render(e,t,i,n,s){if(!this.region)return;let o=this.region,h=e.presets[this.playingPreset].fontSamples,p=0,g=e.outputMode===_h.StereoUnweaved?n:-1,b=o.modEnvToPitch!==0||o.modEnvToFilterFc!==0,v=this.modLfo.delta>0&&(o.modLfoToPitch!==0||o.modLfoToFilterFc!==0||o.modLfoToVolume!==0),S=this.vibLfo.delta>0&&o.vibLfoToPitch!==0,B=this.loopStart<this.loopEnd,T=this.loopStart,C=this.loopEnd,L=o.end,O=C+1,I=this.sourceSamplePosition,V=new Yk(this.lowPass),P=o.modLfoToFilterFc!==0||o.modEnvToFilterFc!==0,G=0,W=0,J=0,re=0,j=o.modLfoToPitch!==0||o.modEnvToPitch!==0||o.vibLfoToPitch!==0,oe=0,ge=0,he=0,ve=0,Be=o.modLfoToVolume!==0,te=0,ue=0;for(P?(G=e.outSampleRate,W=o.initialFilterFc,J=o.modLfoToFilterFc,re=o.modEnvToFilterFc):(G=0,W=0,J=0,re=0),j?(oe=0,ge=o.modLfoToPitch,he=o.vibLfoToPitch,ve=o.modEnvToPitch):(oe=mr.timecents2Secs(this.pitchInputTimecents)*this.pitchOutputFactor,ge=0,he=0,ve=0),Be?ue=o.modLfoToVolume*.1:(te=mr.decibelsToGain(this.noteGainDb),ue=0);n>0;){let ne,Se,z=0,Z=n>lm.RenderEffectSampleBlock?lm.RenderEffectSampleBlock:n;if(n-=Z,P){let pe=W+this.modLfo.level*J+this.modEnv.level*re;V.active=pe<=13500,V.active&&V.setup(mr.cents2Hertz(pe)/G)}switch(j&&(oe=mr.timecents2Secs(this.pitchInputTimecents+(this.modLfo.level*ge+this.vibLfo.level*he+this.modEnv.level*ve))*this.pitchOutputFactor),Be&&(te=mr.decibelsToGain(this.noteGainDb+this.modLfo.level*ue)),ne=te*this.ampEnv.level,s?ne=0:ne*=this.mixVolume,this.ampEnv.process(Z,e.outSampleRate),b&&this.modEnv.process(Z,e.outSampleRate),v&&this.modLfo.process(Z),S&&this.vibLfo.process(Z),e.outputMode){case _h.StereoInterleaved:for(Se=ne*this.panFactorLeft,z=ne*this.panFactorRight;Z-- >0&&I<L;){let pe=I|0,We=pe>=C&&B?T:pe+1,Ie=I-pe,Ue=h[pe]*(1-Ie)+h[We]*Ie;V.active&&(Ue=V.process(Ue)),t[i+p]+=Ue*Se,p++,t[i+p]+=Ue*z,p++,I+=oe,I>=O&&B&&(I-=C-T+1)}break;case _h.StereoUnweaved:for(Se=ne*this.panFactorLeft,z=ne*this.panFactorRight;Z-- >0&&I<L;){let pe=I|0,We=pe>=C&&B?T:pe+1,Ie=I-pe,Ue=h[pe]*(1-Ie)+h[We]*Ie;V.active&&(Ue=V.process(Ue)),t[i+p]+=Ue*Se,p++,t[i+g]+=Ue*z,g++,I+=oe,I>=O&&B&&(I-=C-T+1)}break;case _h.Mono:for(;Z-- >0&&I<L;){let pe=I|0,We=pe>=C&&B?T:pe+1,Ie=I-pe,Ue=h[pe]*(1-Ie)+h[We]*Ie;V.active&&(Ue=V.process(Ue)),t[i+p]=Ue*ne,p++,I+=oe,I>=O&&B&&(I-=C-T+1)}break}if(I>=L||this.ampEnv.segment===Ni.Done){this.kill();return}}this.sourceSamplePosition=I,(V.active||P)&&(this.lowPass=V)}kill(){this.playingPreset=-1}}lm.RenderEffectSampleBlock=Lt.MicroBufferSize;class sx{constructor(){this._items=[],this._position=0,this.isEmpty=!0}clear(){this._items=[],this._position=0,this.isEmpty=!0}enqueue(e){this.isEmpty=!1,this._items.push(e)}peek(){return this._items[this._position]}dequeue(){const e=this._items[this._position];return this._position++,this._position>=this._items.length/2&&(this._items=this._items.slice(this._position),this._position=0),this.isEmpty=this._items.length==0,e}toArray(){const e=this._items.slice(this._position);return e.reverse(),e}}var ki;(function(r){r[r.BankSelectCoarse=0]="BankSelectCoarse",r[r.ModulationCoarse=1]="ModulationCoarse",r[r.DataEntryCoarse=6]="DataEntryCoarse",r[r.VolumeCoarse=7]="VolumeCoarse",r[r.PanCoarse=10]="PanCoarse",r[r.ExpressionControllerCoarse=11]="ExpressionControllerCoarse",r[r.BankSelectFine=32]="BankSelectFine",r[r.ModulationFine=33]="ModulationFine",r[r.DataEntryFine=38]="DataEntryFine",r[r.VolumeFine=39]="VolumeFine",r[r.PanFine=42]="PanFine",r[r.ExpressionControllerFine=43]="ExpressionControllerFine",r[r.HoldPedal=64]="HoldPedal",r[r.LegatoPedal=68]="LegatoPedal",r[r.NonRegisteredParameterFine=98]="NonRegisteredParameterFine",r[r.NonRegisteredParameterCourse=99]="NonRegisteredParameterCourse",r[r.RegisteredParameterFine=100]="RegisteredParameterFine",r[r.RegisteredParameterCourse=101]="RegisteredParameterCourse",r[r.AllSoundOff=120]="AllSoundOff",r[r.ResetControllers=121]="ResetControllers",r[r.AllNotesOff=123]="AllNotesOff"})(ki||(ki={}));class zz{constructor(e){this._midiEventQueue=new sx,this._mutedChannels=new Map,this._soloChannels=new Map,this._isAnySolo=!1,this._transpositionPitches=new Map,this.currentTempo=0,this.timeSignatureNumerator=0,this.timeSignatureDenominator=0,this.presets=null,this._voices=[],this._channels=null,this._voicePlayIndex=0,this.outputMode=_h.StereoInterleaved,this.outSampleRate=0,this.globalGainDb=0,this.outSampleRate=e}synthesize(e,t,i){return this.fillWorkingBuffer(e,t,i)}synthesizeSilent(e){this.fillWorkingBuffer(null,0,e)}channelGetMixVolume(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].mixVolume:1}channelSetMixVolume(e,t){let i=this.channelInit(e);for(let n of this._voices)n.playingChannel===e&&n.playingPreset!==-1&&(n.mixVolume=t);i.mixVolume=t}channelSetMute(e,t){t?this._mutedChannels.set(e,!0):this._mutedChannels.delete(e)}channelSetSolo(e,t){t?this._soloChannels.set(e,!0):this._soloChannels.delete(e),this._isAnySolo=this._soloChannels.size>0}resetChannelStates(){this._mutedChannels=new Map,this._soloChannels=new Map,this.applyTranspositionPitches(new Map),this._isAnySolo=!1}applyTranspositionPitches(e){const t=this._transpositionPitches;for(const i of this._voices)if(i.playingChannel>=0&&i.playingChannel!==9){let n=0;t.has(i.playingChannel)&&(n-=t.get(i.playingChannel)),e.has(i.playingChannel)&&(n+=e.get(i.playingChannel)),i.playingKey+=n,this._channels&&i.updatePitchRatio(this._channels.channelList[i.playingChannel],this.outSampleRate)}this._transpositionPitches=e}dispatchEvent(e){this._midiEventQueue.enqueue(e)}fillWorkingBuffer(e,t,i){const n=this._isAnySolo,s=[];for(;!this._midiEventQueue.isEmpty;){let o=this._midiEventQueue.dequeue();o.isMetronome&&this.metronomeVolume>0?(this.channelNoteOff(Lt.MetronomeChannel,33),this.channelNoteOn(Lt.MetronomeChannel,33,95/127)):o.event&&this.processMidiMessage(o.event),s.push(o)}for(const o of this._voices)if(o.playingPreset!==-1){const c=o.playingChannel,h=this._mutedChannels.has(c)||n&&c!=Lt.MetronomeChannel&&!this._soloChannels.has(c);e?o.render(this,e,t,i,h):o.kill()}return s}processMidiMessage(e){switch(ye.debug("MIdi","Processing Midi message "+qt[e.type]+"/"+e.tick),e.type){case qt.TimeSignature:const i=e;this.timeSignatureNumerator=i.numerator,this.timeSignatureDenominator=Math.pow(2,i.denominatorIndex);break;case qt.NoteOn:const n=e;this.channelNoteOn(n.channel,n.noteKey,n.noteVelocity/127);break;case qt.NoteOff:const s=e;this.channelNoteOff(s.channel,s.noteKey);break;case qt.ControlChange:const o=e;this.channelMidiControl(o.channel,o.controller,o.value);break;case qt.ProgramChange:const c=e;this.channelSetPresetNumber(c.channel,c.program,c.channel===9);break;case qt.TempoChange:const h=e;this.currentTempo=6e7/h.microSecondsPerQuarterNote;break;case qt.PitchBend:const p=e;this.channelSetPitchWheel(p.channel,p.value);break;case qt.PerNotePitchBend:const g=e;let b=g.value;b=b*Lt.MaxPitchWheel/Lt.MaxPitchWheel20,this.channelSetPerNotePitchWheel(g.channel,g.noteKey,b);break}}get metronomeVolume(){return this.channelGetMixVolume(Lt.MetronomeChannel)}set metronomeVolume(e){this.setupMetronomeChannel(e)}setupMetronomeChannel(e){this.channelSetMixVolume(Lt.MetronomeChannel,e),e>0&&(this.channelSetVolume(Lt.MetronomeChannel,1),this.channelSetPresetNumber(Lt.MetronomeChannel,0,!0))}get masterVolume(){return mr.decibelsToGain(this.globalGainDb)}set masterVolume(e){var t=mr.gainToDecibels(e);const i=t-this.globalGainDb;if(i!==0){for(const n of this._voices)n.playingPreset!==-1&&(n.noteGainDb+=i);this.globalGainDb=t}}resetSoft(){for(const e of this._voices)e.playingPreset!==-1&&(e.ampEnv.segment<Ni.Release||e.ampEnv.parameters.release!==0)&&e.endQuick(this.outSampleRate);if(this._channels)for(const e of this._channels.channelList)e.presetIndex=0,e.bank=0,e.pitchWheel=8192,e.midiPan=8192,e.perNotePitchWheel.clear(),e.midiVolume=16383,e.midiExpression=16383,e.midiRpn=65535,e.midiData=0,e.panOffset=0,e.gainDb=0,e.pitchRange=2,e.tuning=0}get presetCount(){var e;return((e=this.presets)==null?void 0:e.length)??0}reset(){for(let e of this._voices)e.playingPreset!==-1&&(e.ampEnv.segment<Ni.Release||e.ampEnv.parameters.release!==0)&&e.endQuick(this.outSampleRate);this._channels=null}setOutput(e,t,i){this.outputMode=e,this.outSampleRate=t>=1?t:44100,this.globalGainDb=i}noteOn(e,t,i){if(!this.presets)return;const n=i*127|0;if(e<0||e>=this.presets.length)return;if(i<=0){this.noteOff(e,t);return}const s=this._voicePlayIndex++;for(const o of this.presets[e].regions){if(t<o.loKey||t>o.hiKey||n<o.loVel||n>o.hiVel)continue;let c=null;if(o.group!==0)for(const g of this._voices)g.playingPreset===e&&g.region.group===o.group?g.endQuick(this.outSampleRate):g.playingPreset===-1&&!c&&(c=g);else for(let g of this._voices)g.playingPreset===-1&&(c=g);if(!c){for(let g=0;g<4;g++){const b=new lm;b.playingPreset=-1,this._voices.push(b)}c=this._voices[this._voices.length-4]}c.region=o,c.playingPreset=e,c.playingKey=t,c.playIndex=s,c.noteGainDb=this.globalGainDb-o.attenuation-mr.gainToDecibels(1/i),this._channels?this._channels.setupVoice(this,c):(c.calcPitchRatio(0,this.outSampleRate),c.panFactorLeft=Math.sqrt(.5-o.pan),c.panFactorRight=Math.sqrt(.5+o.pan)),c.sourceSamplePosition=o.offset;const h=o.loopMode!==Kl.None&&o.loopStart<o.loopEnd;c.loopStart=h?o.loopStart:0,c.loopEnd=h?o.loopEnd:0,c.ampEnv.setup(o.ampEnv,t,n,!0,this.outSampleRate),c.modEnv.setup(o.modEnv,t,n,!1,this.outSampleRate);const p=o.initialFilterQ/10;c.lowPass.qInv=1/Math.pow(10,p/20),c.lowPass.z1=0,c.lowPass.z2=0,c.lowPass.active=o.initialFilterFc<=13500,c.lowPass.active&&c.lowPass.setup(mr.cents2Hertz(o.initialFilterFc)/this.outSampleRate),c.modLfo.setup(o.delayModLFO,o.freqModLFO,this.outSampleRate),c.vibLfo.setup(o.delayVibLFO,o.freqVibLFO,this.outSampleRate)}}bankNoteOn(e,t,i,n){let s=this.getPresetIndex(e,t);return s===-1?!1:(this.noteOn(s,i,n),!0)}noteOff(e,t){let i=null,n=null,s=[];for(let o of this._voices)o.playingPreset!==e||o.playingKey!==t||o.ampEnv.segment>=Ni.Release||(!i||o.playIndex<i.playIndex?(i=o,n=o,s.push(o)):o.playIndex===i.playIndex&&(n=o,s.push(o)));if(i)for(const o of s)o!==i&&o!==n&&(o.playIndex!==i.playIndex||o.playingPreset!==e||o.playingKey!==t||o.ampEnv.segment>=Ni.Release)||o.end(this.outSampleRate)}bankNoteOff(e,t,i){const n=this.getPresetIndex(e,t);return n===-1?!1:(this.noteOff(n,i),!0)}noteOffAll(e){for(const t of this._voices)t.playingPreset!==-1&&t.ampEnv.segment<Ni.Release&&(e?t.endQuick(this.outSampleRate):t.end(this.outSampleRate))}get activeVoiceCount(){let e=0;for(const t of this._voices)t.playingPreset!==-1&&e++;return e}channelInit(e){if(this._channels&&e<this._channels.channelList.length)return this._channels.channelList[e];this._channels||(this._channels=new Az);for(let t=this._channels.channelList.length;t<=e;t++){let i=new Dz;i.presetIndex=0,i.bank=0,i.pitchWheel=8192,i.midiPan=8192,i.midiVolume=16383,i.midiExpression=16383,i.midiRpn=65535,i.midiData=0,i.panOffset=0,i.gainDb=0,i.pitchRange=2,i.tuning=0,i.mixVolume=1,this._channels.channelList.push(i)}return this._channels.channelList[e]}getPresetIndex(e,t){if(!this.presets)return-1;for(let i=this.presets.length-1;i>=0;i--){let n=this.presets[i];if(n.presetNumber===t&&n.bank===e)return i}return-1}getPresetName(e){return this.presets?e<0||e>=this.presets.length?null:this.presets[e].name:null}bankGetPresetName(e,t){return this.getPresetName(this.getPresetIndex(e,t))}channelNoteOn(e,t,i){!this._channels||e>this._channels.channelList.length||(this._transpositionPitches.has(e)&&(t+=this._transpositionPitches.get(e)),this._channels.activeChannel=e,this.noteOn(this._channels.channelList[e].presetIndex,t,i))}channelNoteOff(e,t){this._transpositionPitches.has(e)&&(t+=this._transpositionPitches.get(e));const i=[];let n=null,s=null;for(const c of this._voices)c.playingPreset===-1||c.playingChannel!==e||c.playingKey!==t||c.ampEnv.segment>=Ni.Release||(!n||c.playIndex<n.playIndex?(n=c,s=c,i.push(c)):c.playIndex===n.playIndex&&(s=c,i.push(c)));if(this.channelInit(e).perNotePitchWheel.delete(t),!!n)for(const c of i)c!==n&&c!==s&&(c.playIndex!==n.playIndex||c.playingPreset===-1||c.playingChannel!==e||c.playingKey!==t||c.ampEnv.segment>=Ni.Release)||c.end(this.outSampleRate)}channelNoteOffAll(e){this.channelInit(e).perNotePitchWheel.clear();for(const i of this._voices)i.playingPreset!==-1&&i.playingChannel===e&&i.ampEnv.segment<Ni.Release&&i.end(this.outSampleRate)}channelSoundsOffAll(e){this.channelInit(e).perNotePitchWheel.clear();for(let i of this._voices)i.playingPreset!==-1&&i.playingChannel===e&&(i.ampEnv.segment<Ni.Release||i.ampEnv.parameters.release===0)&&i.endQuick(this.outSampleRate)}channelSetPresetIndex(e,t){this.channelInit(e).presetIndex=Ft.int32ToUint16(t)}channelSetPresetNumber(e,t,i=!1){const n=this.channelInit(e);let s=0;return i?(s=this.getPresetIndex(128|n.bank&32767,t),s===-1&&(s=this.getPresetIndex(128,t)),s===-1&&(s=this.getPresetIndex(128,0)),s===-1&&(s=this.getPresetIndex(n.bank&2047,t))):s=this.getPresetIndex(n.bank&2047,t),n.presetIndex=s,s!==-1}channelSetBank(e,t){this.channelInit(e).bank=Ft.int32ToUint16(t)}channelSetBankPreset(e,t,i){const n=this.channelInit(e),s=this.getPresetIndex(t,i);return s===-1?!1:(n.presetIndex=Ft.int32ToUint16(s),n.bank=Ft.int32ToUint16(t),!0)}channelSetPan(e,t){for(const i of this._voices)if(i.playingChannel===e&&i.playingPreset!==-1){let n=i.region.pan+t-.5;n<=-.5?(i.panFactorLeft=1,i.panFactorRight=0):n>=.5?(i.panFactorLeft=0,i.panFactorRight=1):(i.panFactorLeft=Math.sqrt(.5-n),i.panFactorRight=Math.sqrt(.5+n))}this.channelInit(e).panOffset=t-.5}channelSetVolume(e,t){const i=this.channelInit(e),n=mr.gainToDecibels(t),s=n-i.gainDb;if(s!==0){for(const o of this._voices)o.playingChannel===e&&o.playingPreset!==-1&&(o.noteGainDb+=s);i.gainDb=n}}channelSetPitchWheel(e,t){const i=this.channelInit(e);i.pitchWheel!==t&&(i.pitchWheel=Ft.int32ToUint16(t),this.channelApplyPitch(e,i))}channelSetPerNotePitchWheel(e,t,i){this._transpositionPitches.has(e)&&(t+=this._transpositionPitches.get(e));const n=this.channelInit(e);n.perNotePitchWheel.has(t)&&n.perNotePitchWheel.get(t)===i||(n.perNotePitchWheel.set(t,i),this.channelApplyPitch(e,n,t))}channelApplyPitch(e,t,i=-1){for(const n of this._voices)n.playingChannel===e&&n.playingPreset!==-1&&(i==-1||n.playingKey===i)&&n.updatePitchRatio(t,this.outSampleRate)}channelSetPitchRange(e,t){const i=this.channelInit(e);i.pitchRange!==t&&(i.pitchRange=t,i.pitchWheel!==8192&&this.channelApplyPitch(e,i))}channelSetTuning(e,t){const i=this.channelInit(e);i.tuning!==t&&(i.tuning=t,this.channelApplyPitch(e,i))}channelMidiControl(e,t,i){let n=this.channelInit(e);switch(t){case ki.DataEntryFine:n.midiData=Ft.int32ToUint16(n.midiData&16256|i),n.midiRpn===0?this.channelSetPitchRange(e,(n.midiData>>7)+.01*(n.midiData&127)):n.midiRpn===1?this.channelSetTuning(e,(n.tuning|0)+(n.midiData-8192)/8192):n.midiRpn===2&&this.channelSetTuning(e,i-64+(n.tuning-(n.tuning|0)));return;case ki.VolumeCoarse:n.midiVolume=Ft.int32ToUint16(n.midiVolume&127|i<<7),this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));return;case ki.VolumeFine:n.midiVolume=Ft.int32ToUint16(n.midiVolume&16256|i),this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));return;case ki.ExpressionControllerCoarse:n.midiExpression=Ft.int32ToUint16(n.midiExpression&127|i<<7),this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));return;case ki.ExpressionControllerFine:n.midiExpression=Ft.int32ToUint16(n.midiExpression&16256|i),this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));return;case ki.PanCoarse:n.midiPan=Ft.int32ToUint16(n.midiPan&127|i<<7),this.channelSetPan(e,n.midiPan/16383);return;case ki.PanFine:n.midiPan=Ft.int32ToUint16(n.midiPan&16256|i),this.channelSetPan(e,n.midiPan/16383);return;case ki.DataEntryCoarse:n.midiData=Ft.int32ToUint16(n.midiData&127|i<<7),n.midiRpn===0?this.channelSetPitchRange(e,(n.midiData>>7)+.01*(n.midiData&127)):n.midiRpn===1?this.channelSetTuning(e,(n.tuning|0)+(n.midiData-8192)/8192):n.midiRpn===2&&t===ki.DataEntryCoarse&&this.channelSetTuning(e,i-64+(n.tuning-(n.tuning|0)));return;case ki.BankSelectCoarse:n.bank=Ft.int32ToUint16(32768|i);return;case ki.BankSelectFine:n.bank=Ft.int32ToUint16((n.bank&32768?(n.bank&127)<<7:0)|i);return;case ki.RegisteredParameterCourse:n.midiRpn=Ft.int32ToUint16((n.midiRpn===65535?0:n.midiRpn)&127|i<<7);return;case ki.RegisteredParameterFine:n.midiRpn=Ft.int32ToUint16((n.midiRpn===65535?0:n.midiRpn)&16256|i);return;case ki.NonRegisteredParameterFine:n.midiRpn=65535;return;case ki.NonRegisteredParameterCourse:n.midiRpn=65535;return;case ki.AllSoundOff:this.channelSoundsOffAll(e);return;case ki.AllNotesOff:this.channelNoteOffAll(e);return;case ki.ResetControllers:n.midiVolume=16383,n.midiExpression=16383,n.midiPan=8192,n.bank=0,this.channelSetVolume(e,1),this.channelSetPan(e,.5),this.channelSetPitchRange(e,2);return}}channelGetPresetIndex(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].presetIndex:0}channelGetPresetBank(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].bank&32767:0}channelGetPan(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].panOffset-.5:.5}channelGetVolume(e){return this._channels&&e<this._channels.channelList.length?mr.decibelsToGain(this._channels.channelList[e].gainDb):1}channelGetPitchWheel(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].pitchWheel:8192}channelGetPitchRange(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].pitchRange:2}channelGetTuning(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].tuning:0}resetPresets(){this.presets=[]}loadPresets(e,t){const i=[];for(let n=0;n<e.phdrs.length-1;n++){const s=e.phdrs[n];let o=0;const c=new Vz;i.push(c),c.name=s.presetName,c.bank=s.bank,c.presetNumber=s.preset,c.fontSamples=e.fontSamples;let h=0;for(let g=s.presetBagNdx;g<e.phdrs[n+1].presetBagNdx;g++){const b=e.pbags[g];let v=0,S=127,B=0,T=127;for(let C=b.genNdx;C<e.pbags[g+1].genNdx;C++){let L=e.pgens[C];if(L.genOper===Fs.GenKeyRange){v=L.genAmount.lowByteAmount,S=L.genAmount.highByteAmount;continue}if(L.genOper===Fs.GenVelRange){B=L.genAmount.lowByteAmount,T=L.genAmount.highByteAmount;continue}if(L.genOper!==Fs.GenInstrument||L.genAmount.wordAmount>=e.insts.length)continue;let O=e.insts[L.genAmount.wordAmount];for(let I=O.instBagNdx;I<e.insts[L.genAmount.wordAmount+1].instBagNdx;I++){let V=e.ibags[I],P=0,G=127,W=0,J=127;for(let re=V.instGenNdx;re<e.ibags[I+1].instGenNdx;re++){let j=e.igens[re];if(j.genOper===Fs.GenKeyRange){P=j.genAmount.lowByteAmount,G=j.genAmount.highByteAmount;continue}if(j.genOper===Fs.GenVelRange){W=j.genAmount.lowByteAmount,J=j.genAmount.highByteAmount;continue}j.genOper===53&&G>=v&&P<=S&&J>=B&&W<=T&&h++}}}}c.regions=new Array(h);let p=new _f;p.clear(!0);for(let g=s.presetBagNdx;g<e.phdrs[n+1].presetBagNdx;g++){const b=e.pbags[g],v=new _f(p);let S=!1;for(let B=b.genNdx;B<e.pbags[g+1].genNdx;B++){const T=e.pgens[B];if(T.genOper===Fs.GenInstrument){let C=T.genAmount.wordAmount;if(C>=e.insts.length)continue;let L=new _f;L.clear(!1);let O=e.insts[C];for(let I=O.instBagNdx;I<e.insts[C+1].instBagNdx;I++){let V=e.ibags[I],P=new _f(L),G=!1;for(let W=V.instGenNdx;W<e.ibags[I+1].instGenNdx;W++){let J=e.igens[W];if(J.genOper===Fs.GenSampleId){if(P.hiKey<v.loKey||P.loKey>v.hiKey||P.hiVel<v.loVel||P.loVel>v.hiVel)continue;v.loKey>P.loKey&&(P.loKey=v.loKey),v.hiKey<P.hiKey&&(P.hiKey=v.hiKey),v.loVel>P.loVel&&(P.loVel=v.loVel),v.hiVel<P.hiVel&&(P.hiVel=v.hiVel),P.offset+=v.offset,P.end+=v.end,P.loopStart+=v.loopStart,P.loopEnd+=v.loopEnd,P.transpose+=v.transpose,P.tune+=v.tune,P.pitchKeyTrack+=v.pitchKeyTrack,P.attenuation+=v.attenuation,P.pan+=v.pan,P.ampEnv.delay+=v.ampEnv.delay,P.ampEnv.attack+=v.ampEnv.attack,P.ampEnv.hold+=v.ampEnv.hold,P.ampEnv.decay+=v.ampEnv.decay,P.ampEnv.sustain+=v.ampEnv.sustain,P.ampEnv.release+=v.ampEnv.release,P.modEnv.delay+=v.modEnv.delay,P.modEnv.attack+=v.modEnv.attack,P.modEnv.hold+=v.modEnv.hold,P.modEnv.decay+=v.modEnv.decay,P.modEnv.sustain+=v.modEnv.sustain,P.modEnv.release+=v.modEnv.release,P.initialFilterQ+=v.initialFilterQ,P.initialFilterFc+=v.initialFilterFc,P.modEnvToPitch+=v.modEnvToPitch,P.modEnvToFilterFc+=v.modEnvToFilterFc,P.delayModLFO+=v.delayModLFO,P.freqModLFO+=v.freqModLFO,P.modLfoToPitch+=v.modLfoToPitch,P.modLfoToFilterFc+=v.modLfoToFilterFc,P.modLfoToVolume+=v.modLfoToVolume,P.delayVibLFO+=v.delayVibLFO,P.freqVibLFO+=v.freqVibLFO,P.vibLfoToPitch+=v.vibLfoToPitch,P.ampEnv.envToSecs(!0),P.modEnv.envToSecs(!1),P.delayModLFO=P.delayModLFO<-11950?0:mr.timecents2Secs(P.delayModLFO),P.delayVibLFO=P.delayVibLFO<-11950?0:mr.timecents2Secs(P.delayVibLFO),P.pan<-.5?P.pan=-.5:P.pan>.5&&(P.pan=.5),(P.initialFilterQ<1500||P.initialFilterQ>13500)&&(P.initialFilterQ=0);let re=e.sHdrs[J.genAmount.wordAmount];P.offset+=re.start,P.end+=re.end,P.loopStart+=re.startLoop,P.loopEnd+=re.endLoop,re.endLoop>0&&(P.loopEnd-=1),P.pitchKeyCenter===-1&&(P.pitchKeyCenter=re.originalPitch),P.tune+=re.pitchCorrection,P.sampleRate=re.sampleRate,P.end!==0&&P.end<c.fontSamples.length?P.end++:P.end=c.fontSamples.length,c.regions[o]=new _f(P),o++,G=!0}else P.operator(J.genOper,J.genAmount)}V===e.ibags[O.instBagNdx]&&!G&&(L=new _f(P))}S=!0}else v.operator(T.genOper,T.genAmount)}b===e.pbags[s.presetBagNdx]&&!S&&(p=v)}}if(!t||!this.presets)this.presets=i;else for(const n of i)this.presets.push(n)}}class $r{constructor(){this._listeners=[]}on(e){this._listeners.push(e)}off(e){this._listeners=this._listeners.filter(t=>t!==e)}trigger(){for(const e of this._listeners)e()}}class Qt{constructor(){this._listeners=[]}on(e){this._listeners.push(e)}off(e){this._listeners=this._listeners.filter(t=>t!==e)}trigger(e){for(const t of this._listeners)t(e)}}class OC{constructor(e){this.events=e}}class MC{constructor(e){this.playbackRange=e}}class Wz{get isReadyForPlayback(){return this.isReady&&this._isSoundFontLoaded&&this._isMidiLoaded}get logLevel(){return ye.logLevel}set logLevel(e){ye.logLevel=e}get masterVolume(){return this._synthesizer.masterVolume}set masterVolume(e){e=Math.max(e,Lt.MinVolume),this._synthesizer.masterVolume=e}get metronomeVolume(){return this._metronomeVolume}set metronomeVolume(e){e=Math.max(e,Lt.MinVolume),this._metronomeVolume=e,this._synthesizer.metronomeVolume=e}get countInVolume(){return this._countInVolume}set countInVolume(e){e=Math.max(e,Lt.MinVolume),this._countInVolume=e}get midiEventsPlayedFilter(){return Array.from(this._midiEventsPlayedFilter)}set midiEventsPlayedFilter(e){this._midiEventsPlayedFilter=new Set(e)}get playbackSpeed(){return this._sequencer.playbackSpeed}set playbackSpeed(e){e=mr.clamp(e,Lt.MinPlaybackSpeed,Lt.MaxPlaybackSpeed);let t=this._sequencer.playbackSpeed;this._sequencer.playbackSpeed=e,this.timePosition=this.timePosition*(t/e)}get tickPosition(){return this._tickPosition}set tickPosition(e){this.timePosition=this._sequencer.mainTickPositionToTimePosition(e)}get timePosition(){return this._timePosition}set timePosition(e){ye.debug("AlphaSynth",`Seeking to position ${e}ms (main)`),this._sequencer.mainSeek(e),this.updateTimePosition(e,!0),this._sequencer.isPlayingMain&&(this._notPlayedSamples=0,this.output.resetSamples())}get playbackRange(){return this._sequencer.mainPlaybackRange}set playbackRange(e){this._sequencer.mainPlaybackRange=e,e&&(this.tickPosition=e.startTick),this.playbackRangeChanged.trigger(new MC(e))}get isLooping(){return this._sequencer.isLooping}set isLooping(e){this._sequencer.isLooping=e}destroy(){ye.debug("AlphaSynth","Destroying player"),this.stop(),this.output.destroy()}constructor(e,t){this._isSoundFontLoaded=!1,this._isMidiLoaded=!1,this._tickPosition=0,this._timePosition=0,this._metronomeVolume=0,this._countInVolume=0,this._playedEventsQueue=new sx,this._midiEventsPlayedFilter=new Set,this._notPlayedSamples=0,this.isReady=!1,this.state=Hr.Paused,this.ready=new $r,this.readyForPlayback=new $r,this.finished=new $r,this.soundFontLoaded=new $r,this.soundFontLoadFailed=new Qt,this.midiLoaded=new Qt,this.midiLoadFailed=new Qt,this.stateChanged=new Qt,this.positionChanged=new Qt,this.midiEventsPlayed=new Qt,this.playbackRangeChanged=new Qt,ye.debug("AlphaSynth","Initializing player"),this.state=Hr.Paused,ye.debug("AlphaSynth","Creating output"),this.output=e,ye.debug("AlphaSynth","Creating synthesizer"),this._synthesizer=new zz(this.output.sampleRate),this._sequencer=new Mz(this._synthesizer),ye.debug("AlphaSynth","Opening output"),this.output.ready.on(()=>{this.isReady=!0,this.ready.trigger(),this.checkReadyForPlayback()}),this.output.sampleRequest.on(()=>{if(this.state==Hr.Playing&&!this._sequencer.isFinished){let i=new Float32Array(Lt.MicroBufferSize*Lt.MicroBufferCount*Lt.AudioChannels),n=0;for(let s=0;s<Lt.MicroBufferCount;s++){this._sequencer.fillMidiEventQueue();const o=this._synthesizer.synthesize(i,n,Lt.MicroBufferSize);n+=Lt.MicroBufferSize*Lt.AudioChannels;for(const c of o)this._midiEventsPlayedFilter.has(c.event.type)&&this._playedEventsQueue.enqueue(c);if(this._sequencer.isFinished)break}n<i.length&&(i=i.subarray(0,n)),this._notPlayedSamples+=i.length,this.output.addSamples(i)}else{let i=new Float32Array(0);this.output.addSamples(i)}}),this.output.samplesPlayed.on(this.onSamplesPlayed.bind(this)),this.output.open(t)}play(){return this.state!==Hr.Paused||!this._isMidiLoaded?!1:(this.output.activate(),this.playInternal(),this._countInVolume>0&&(ye.debug("AlphaSynth","Starting countin"),this._sequencer.startCountIn(),this._synthesizer.setupMetronomeChannel(this._countInVolume),this.updateTimePosition(0,!0)),this.output.play(),!0)}playInternal(){this._sequencer.isPlayingOneTimeMidi&&(ye.debug("AlphaSynth","Cancelling one time midi"),this.stopOneTimeMidi()),ye.debug("AlphaSynth","Starting playback"),this._synthesizer.setupMetronomeChannel(this.metronomeVolume),this.state=Hr.Playing,this.stateChanged.trigger(new H0(this.state,!1))}pause(){this.state===Hr.Paused||!this._isMidiLoaded||(ye.debug("AlphaSynth","Pausing playback"),this.state=Hr.Paused,this.stateChanged.trigger(new H0(this.state,!1)),this.output.pause(),this._synthesizer.noteOffAll(!1))}playPause(){this.state!==Hr.Paused||!this._isMidiLoaded?this.pause():this.play()}stop(){this._isMidiLoaded&&(ye.debug("AlphaSynth","Stopping playback"),this.state=Hr.Paused,this.output.pause(),this._notPlayedSamples=0,this._sequencer.stop(),this._synthesizer.noteOffAll(!0),this.tickPosition=this._sequencer.mainPlaybackRange?this._sequencer.mainPlaybackRange.startTick:0,this.stateChanged.trigger(new H0(this.state,!0)))}playOneTimeMidiFile(e){this._sequencer.isPlayingOneTimeMidi?this.stopOneTimeMidi():this.pause(),this._sequencer.loadOneTimeMidi(e),this._synthesizer.noteOffAll(!0),this.updateTimePosition(0,!0),this._notPlayedSamples=0,this.output.resetSamples(),this.output.play()}resetSoundFonts(){this.stop(),this._synthesizer.resetPresets(),this._isSoundFontLoaded=!1,this.soundFontLoaded.trigger()}loadSoundFont(e,t){this.pause();let i=vn.fromBuffer(e);try{ye.debug("AlphaSynth","Loading soundfont from bytes");let n=new sS;n.load(i),this._synthesizer.loadPresets(n,t),this._isSoundFontLoaded=!0,this.soundFontLoaded.trigger(),ye.debug("AlphaSynth","soundFont successfully loaded"),this.checkReadyForPlayback()}catch(n){ye.error("AlphaSynth","Could not load soundfont from bytes "+n),this.soundFontLoadFailed.trigger(n)}}checkReadyForPlayback(){this.isReadyForPlayback&&(this._synthesizer.setupMetronomeChannel(this.metronomeVolume),this.readyForPlayback.trigger())}loadMidiFile(e){this.stop();try{ye.debug("AlphaSynth","Loading midi from model"),this._sequencer.loadMidi(e),this._isMidiLoaded=!0,this.midiLoaded.trigger(new ib(0,this._sequencer.currentEndTime,0,this._sequencer.currentEndTick,!1)),ye.debug("AlphaSynth","Midi successfully loaded"),this.checkReadyForPlayback(),this.tickPosition=0}catch(t){ye.error("AlphaSynth","Could not load midi from model "+t),this.midiLoadFailed.trigger(t)}}applyTranspositionPitches(e){this._synthesizer.applyTranspositionPitches(e)}setChannelMute(e,t){this._synthesizer.channelSetMute(e,t)}resetChannelStates(){this._synthesizer.resetChannelStates()}setChannelSolo(e,t){this._synthesizer.channelSetSolo(e,t)}setChannelVolume(e,t){t=Math.max(t,Lt.MinVolume),this._synthesizer.channelSetMixVolume(e,t)}onSamplesPlayed(e){if(e===0)return;let t=e/this._synthesizer.outSampleRate*1e3;this._notPlayedSamples-=e*Lt.AudioChannels,this.updateTimePosition(this._timePosition+t,!1),this.checkForFinish()}checkForFinish(){let e=0,t=0;this.playbackRange&&this._sequencer.isPlayingMain?(e=this.playbackRange.startTick,t=this.playbackRange.endTick):t=this._sequencer.currentEndTick,this._tickPosition>=t&&this._notPlayedSamples<=0&&(this._notPlayedSamples=0,this._sequencer.isPlayingCountIn?(ye.debug("AlphaSynth","Finished playback (count-in)"),this._sequencer.resetCountIn(),this.timePosition=this._sequencer.currentTime,this.playInternal(),this.output.resetSamples()):this._sequencer.isPlayingOneTimeMidi?(ye.debug("AlphaSynth","Finished playback (one time)"),this.output.resetSamples(),this.state=Hr.Paused,this.stopOneTimeMidi()):(ye.debug("AlphaSynth","Finished playback (main)"),this.finished.trigger(),this.isLooping?this.tickPosition=e:this.stop()))}stopOneTimeMidi(){this.output.pause(),this._synthesizer.noteOffAll(!0),this._sequencer.resetOneTimeMidi(),this.timePosition=this._sequencer.currentTime}updateTimePosition(e,t){const i=e;this._timePosition=i;const n=this._sequencer.currentTimePositionToTickPosition(i);this._tickPosition=n;const s=this._sequencer.currentEndTime,o=this._sequencer.currentEndTick,c=this._sequencer.isPlayingMain?"main":this._sequencer.isPlayingCountIn?"count-in":"one-time";if(ye.debug("AlphaSynth",`Position changed: (time: ${i}/${s}, tick: ${n}/${o}, Active Voices: ${this._synthesizer.activeVoiceCount} (${c})`),this._sequencer.isPlayingMain&&this.positionChanged.trigger(new ib(i,s,n,o,t)),t)this._playedEventsQueue.clear();else{const h=new sx;for(;!this._playedEventsQueue.isEmpty&&this._playedEventsQueue.peek().time<i;){const p=this._playedEventsQueue.dequeue();h.enqueue(p.event)}h.isEmpty||this.midiEventsPlayed.trigger(new OC(h.toArray()))}}}class Le{static parseEnum(e,t){switch(typeof e){case"string":const i=parseInt(e);return isNaN(i)?t[Object.keys(t).find(n=>n.toLowerCase()===e.toLowerCase())]:i;case"number":return e;case"undefined":case"object":return null}throw new sn(nn.Format,`Could not parse enum value '${e}'`)}static forEach(e,t){if(e instanceof Map)e.forEach(t);else if(typeof e=="object")for(const i in e)t(e[i],i)}static getValue(e,t){return e instanceof Map?e.get(t):typeof e=="object"?e[t]:null}}class Hz{constructor(e,t,i){this.text=e,this.startPos=t,this.endPos=i}}class Nf{constructor(e){this.style="normal",this.variant="normal",this.weight="normal",this.stretch="normal",this.lineHeight="normal",this.size="1rem",this.families=[],this.parseOnlyFamilies=!1,this._currentTokenIndex=-1,this._input="",this._currentToken=null,this._input=e,this._tokens=this.splitToTokens(e)}splitToTokens(e){const t=[];let i=0;for(;i<e.length;){let n=i;for(;n<e.length&&e.charAt(n)!==" ";)n++;n>i&&t.push(new Hz(e.substring(i,n),i,n)),i=n+1}return t}parse(){var e;if(this.reset(),this._tokens.length===1)switch((e=this._currentToken)==null?void 0:e.text){case"caption":case"icon":case"menu":case"message-box":case"small-caption":case"status-bar":case"inherit":return}this.parseOnlyFamilies||(this.fontStyleVariantWeight(),this.fontSizeLineHeight()),this.fontFamily()}static parseFamilies(e){const t=new Nf(e);return t.parseOnlyFamilies=!0,t.parse(),t.families}fontFamily(){if(!this._currentToken){if(this.parseOnlyFamilies)return;throw new Error("Missing font list")}const e=this._input.substr(this._currentToken.startPos).trim();let t=0;for(;t<e.length;){let i=e.charAt(t);if(i===" "||i==",")t++;else if(i==='"'||i==="'"){const n=this.findEndOfQuote(e,t+1,i);this.families.push(e.substring(t+1,n).split("\\"+i).join(i)),t=n+1}else{const n=this.findEndOfQuote(e,t+1,",");this.families.push(e.substring(t,n).trim()),t=n+1}}}findEndOfQuote(e,t,i){let n=!1;for(;t<e.length;){const s=e.charAt(t);if(!n&&s===i)return t;!n&&s==="\\"?n=!0:n=!1,t+=1}return e.length}fontSizeLineHeight(){if(!this._currentToken)throw new Error("Missing font size");const e=this._currentToken.text.split("/");if(e.length>=3)throw new Error(`Invalid font size '${this._currentToken}' specified`);if(this.nextToken(),e.length>=2)if(e[1]==="/"){if(!this._currentToken)throw new Error("Missing line-height after font size");this.lineHeight=this._currentToken.text,this.nextToken()}else this.size=e[0],this.lineHeight=e[1];else if(e.length>=1){if(this.size=e[0],this._currentToken&&this._currentToken.text.indexOf("/")===0)if(this._currentToken.text==="/"){if(this.nextToken(),!this._currentToken)throw new Error("Missing line-height after font size");this.lineHeight=this._currentToken.text,this.nextToken()}else this.lineHeight=this._currentToken.text.substr(1),this.nextToken()}else throw new Error("Missing font size")}nextToken(){this._currentTokenIndex++,this._currentTokenIndex<this._tokens.length?this._currentToken=this._tokens[this._currentTokenIndex]:this._currentToken=null}fontStyleVariantWeight(){let e=!1,t=!1,i=!1,n=3,s=[];for(;;){if(!this._currentToken)return;let o=this._currentToken.text;switch(o){case"normal":case"inherit":s.push(o),n--,this.nextToken();break;case"italic":case"oblique":this.style=o,e=!0,n--,this.nextToken();break;case"small-caps":this.variant=o,t=!0,n--,this.nextToken();break;case"bold":case"bolder":case"lighter":case"100":case"200":case"300":case"400":case"500":case"600":case"700":case"800":case"900":this.weight=o,i=!0,n--,this.nextToken();break;default:return}if(n===0)break}for(;s.length>0;){const o=s.pop();i?t?e||(this.style=o):this.variant=o:this.weight=o}}reset(){this._currentTokenIndex=-1,this.nextToken()}static quoteFont(e){return e.indexOf(" ")===-1?e:`"${e.replaceAll('"','\\"')}"`}}var lr;(function(r){r[r.Plain=0]="Plain",r[r.Italic=1]="Italic"})(lr||(lr={}));var Ms;(function(r){r[r.Regular=0]="Regular",r[r.Bold=1]="Bold"})(Ms||(Ms={}));class ri{reset(){this._cssScale=0,this._css=this.toCssString()}get family(){return this._families[0]}set family(e){this.families=Nf.parseFamilies(e)}get families(){return this._families}set families(e){this._families=e,this.reset()}get size(){return this._size}set size(e){this._size=e,this.reset()}get style(){return this._style}set style(e){this._style=e,this.reset()}get weight(){return this._weight}set weight(e){this._weight=e,this.reset()}get isBold(){return this.weight===Ms.Bold}get isItalic(){return this.style===lr.Italic}constructor(e,t,i=lr.Plain,n=Ms.Regular){this._cssScale=0,this._families=Nf.parseFamilies(e),this._size=t,this._style=i,this._weight=n,this._css=this.toCssString()}static withFamilyList(e,t,i=lr.Plain,n=Ms.Regular){const s=new ri("",t,i,n);return s.families=e,s}toCssString(e=1){if(!this._css||!(Math.abs(e-this._cssScale)<.01)){let t="";this.isBold&&(t+="bold "),this.isItalic&&(t+="italic "),t+=this.size*e,t+="px ",t+=this.families.map(i=>Nf.quoteFont(i)).join(", "),this._css=t,this._cssScale=e}return this._css}static fromJson(e){switch(typeof e){case"undefined":return null;case"object":{const t=e;let i=t.get("families"),n=t.get("size"),s=Le.parseEnum(t.get("style"),lr),o=Le.parseEnum(t.get("weight"),Ms);return ri.withFamilyList(i,n,s,o)}case"string":{const t=new Nf(e);t.parse();let i=t.families,n=t.size.toLowerCase(),s=0;switch(n){case"xx-small":s=7;break;case"x-small":s=10;break;case"small":case"smaller":s=13;break;case"medium":s=16;break;case"large":case"larger":s=18;break;case"x-large":s=24;break;case"xx-large":s=32;break;default:try{n.endsWith("em")?s=parseFloat(n.substr(0,n.length-2))*16:n.endsWith("pt")?s=parseFloat(n.substr(0,n.length-2))*16/12:n.endsWith("px")?s=parseFloat(n.substr(0,n.length-2)):s=12}catch{s=12}break}let o=lr.Plain;t.style==="italic"&&(o=lr.Italic);let c=Ms.Regular;switch(t.weight.toLowerCase()){case"normal":case"lighter":break;default:c=Ms.Bold;break}return ri.withFamilyList(i,s,o,c)}default:return null}}static toJson(e){const t=new Map;return t.set("families",e.families),t.set("size",e.size),t.set("style",e.style),t.set("weight",e.weight),t}}class fs{constructor(){this.copyrightFont=new ri(fs.sansFont,12,lr.Plain,Ms.Bold),this.titleFont=new ri(fs.serifFont,32,lr.Plain),this.subTitleFont=new ri(fs.serifFont,20,lr.Plain),this.wordsFont=new ri(fs.serifFont,15,lr.Plain),this.effectFont=new ri(fs.serifFont,12,lr.Italic),this.fretboardNumberFont=new ri(fs.sansFont,11,lr.Plain),this.tablatureFont=new ri(fs.sansFont,13,lr.Plain),this.graceFont=new ri(fs.sansFont,11,lr.Plain),this.staffLineColor=new _i(165,165,165,255),this.barSeparatorColor=new _i(34,34,17,255),this.barNumberFont=new ri(fs.sansFont,11,lr.Plain),this.barNumberColor=new _i(200,0,0,255),this.fingeringFont=new ri(fs.serifFont,14,lr.Plain),this.markerFont=new ri(fs.serifFont,14,lr.Plain,Ms.Bold),this.mainGlyphColor=new _i(0,0,0,255),this.secondaryGlyphColor=new _i(0,0,0,100),this.scoreInfoColor=new _i(0,0,0,255)}}fs.sansFont="Arial, sans-serif";fs.serifFont="Georgia, serif";var yc;(function(r){r[r.Automatic=0]="Automatic",r[r.UseModelLayout=1]="UseModelLayout"})(yc||(yc={}));class Gz{constructor(){this.scale=1,this.stretchForce=1,this.layoutMode=ru.Page,this.staveProfile=Os.Default,this.barsPerRow=-1,this.startBar=1,this.barCount=-1,this.barCountPerPartial=10,this.justifyLastSystem=!1,this.resources=new fs,this.padding=null,this.systemsLayoutMode=yc.Automatic}}class Uz{constructor(){this.encoding="utf-8",this.mergePartGroupsInMusicXml=!1,this.beatTextAsLyrics=!1}}var Ql;(function(r){r[r.Off=0]="Off",r[r.Continuous=1]="Continuous",r[r.OffScreen=2]="OffScreen"})(Ql||(Ql={}));class $z{constructor(){this.noteWideLength=480,this.noteWideAmplitude=2,this.noteSlightLength=480,this.noteSlightAmplitude=2,this.beatWideLength=240,this.beatWideAmplitude=3,this.beatSlightLength=240,this.beatSlightAmplitude=3}}class jz{constructor(){this.simpleSlidePitchOffset=6,this.simpleSlideDurationRatio=.25,this.shiftSlideDurationRatio=.5}}var um;(function(r){r[r.WebAudioAudioWorklets=0]="WebAudioAudioWorklets",r[r.WebAudioScriptProcessor=1]="WebAudioScriptProcessor"})(um||(um={}));class Yz{constructor(){this.soundFont=null,this.scrollElement="html,body",this.outputMode=um.WebAudioAudioWorklets,this.enablePlayer=!1,this.enableCursor=!0,this.enableAnimatedBeatCursor=!0,this.enableElementHighlighting=!0,this.enableUserInteraction=!0,this.scrollOffsetX=0,this.scrollOffsetY=0,this.scrollMode=Ql.Continuous,this.scrollSpeed=300,this.nativeBrowserSmoothScroll=!0,this.songBookBendDuration=75,this.songBookDipDuration=150,this.vibrato=new $z,this.slide=new jz,this.playTripletFeel=!0,this.bufferTimeInMilliseconds=500}}class lw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("scriptfile",e.scriptFile),t.set("fontdirectory",e.fontDirectory),t.set("file",e.file),t.set("tex",e.tex),t.set("tracks",e.tracks),t.set("enablelazyloading",e.enableLazyLoading),t.set("engine",e.engine),t.set("loglevel",e.logLevel),t.set("useworkers",e.useWorkers),t.set("includenotebounds",e.includeNoteBounds),t}static setProperty(e,t,i){switch(t){case"scriptfile":return e.scriptFile=i,!0;case"fontdirectory":return e.fontDirectory=i,!0;case"file":return e.file=i,!0;case"tex":return e.tex=i,!0;case"tracks":return e.tracks=i,!0;case"enablelazyloading":return e.enableLazyLoading=i,!0;case"engine":return e.engine=i,!0;case"loglevel":return e.logLevel=Le.parseEnum(i,Fa),!0;case"useworkers":return e.useWorkers=i,!0;case"includenotebounds":return e.includeNoteBounds=i,!0}return!1}}class uw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("copyrightfont",ri.toJson(e.copyrightFont)),t.set("titlefont",ri.toJson(e.titleFont)),t.set("subtitlefont",ri.toJson(e.subTitleFont)),t.set("wordsfont",ri.toJson(e.wordsFont)),t.set("effectfont",ri.toJson(e.effectFont)),t.set("fretboardnumberfont",ri.toJson(e.fretboardNumberFont)),t.set("tablaturefont",ri.toJson(e.tablatureFont)),t.set("gracefont",ri.toJson(e.graceFont)),t.set("stafflinecolor",_i.toJson(e.staffLineColor)),t.set("barseparatorcolor",_i.toJson(e.barSeparatorColor)),t.set("barnumberfont",ri.toJson(e.barNumberFont)),t.set("barnumbercolor",_i.toJson(e.barNumberColor)),t.set("fingeringfont",ri.toJson(e.fingeringFont)),t.set("markerfont",ri.toJson(e.markerFont)),t.set("mainglyphcolor",_i.toJson(e.mainGlyphColor)),t.set("secondaryglyphcolor",_i.toJson(e.secondaryGlyphColor)),t.set("scoreinfocolor",_i.toJson(e.scoreInfoColor)),t}static setProperty(e,t,i){switch(t){case"copyrightfont":return e.copyrightFont=ri.fromJson(i),!0;case"titlefont":return e.titleFont=ri.fromJson(i),!0;case"subtitlefont":return e.subTitleFont=ri.fromJson(i),!0;case"wordsfont":return e.wordsFont=ri.fromJson(i),!0;case"effectfont":return e.effectFont=ri.fromJson(i),!0;case"fretboardnumberfont":return e.fretboardNumberFont=ri.fromJson(i),!0;case"tablaturefont":return e.tablatureFont=ri.fromJson(i),!0;case"gracefont":return e.graceFont=ri.fromJson(i),!0;case"stafflinecolor":return e.staffLineColor=_i.fromJson(i),!0;case"barseparatorcolor":return e.barSeparatorColor=_i.fromJson(i),!0;case"barnumberfont":return e.barNumberFont=ri.fromJson(i),!0;case"barnumbercolor":return e.barNumberColor=_i.fromJson(i),!0;case"fingeringfont":return e.fingeringFont=ri.fromJson(i),!0;case"markerfont":return e.markerFont=ri.fromJson(i),!0;case"mainglyphcolor":return e.mainGlyphColor=_i.fromJson(i),!0;case"secondaryglyphcolor":return e.secondaryGlyphColor=_i.fromJson(i),!0;case"scoreinfocolor":return e.scoreInfoColor=_i.fromJson(i),!0}return!1}}class cw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("scale",e.scale),t.set("stretchforce",e.stretchForce),t.set("layoutmode",e.layoutMode),t.set("staveprofile",e.staveProfile),t.set("barsperrow",e.barsPerRow),t.set("startbar",e.startBar),t.set("barcount",e.barCount),t.set("barcountperpartial",e.barCountPerPartial),t.set("justifylastsystem",e.justifyLastSystem),t.set("resources",uw.toJson(e.resources)),t.set("padding",e.padding),t.set("systemslayoutmode",e.systemsLayoutMode),t}static setProperty(e,t,i){switch(t){case"scale":return e.scale=i,!0;case"stretchforce":return e.stretchForce=i,!0;case"layoutmode":return e.layoutMode=Le.parseEnum(i,ru),!0;case"staveprofile":return e.staveProfile=Le.parseEnum(i,Os),!0;case"barsperrow":return e.barsPerRow=i,!0;case"startbar":return e.startBar=i,!0;case"barcount":return e.barCount=i,!0;case"barcountperpartial":return e.barCountPerPartial=i,!0;case"justifylastsystem":return e.justifyLastSystem=i,!0;case"padding":return e.padding=i,!0;case"systemslayoutmode":return e.systemsLayoutMode=Le.parseEnum(i,yc),!0}if(["resources"].indexOf(t)>=0)return uw.fromJson(e.resources,i),!0;for(const n of["resources"])if(t.indexOf(n)===0&&uw.setProperty(e.resources,t.substring(n.length),i))return!0;return!1}}class hw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;t.set("notationmode",e.notationMode),t.set("fingeringmode",e.fingeringMode);{const i=new Map;t.set("elements",i);for(const[n,s]of e.elements)i.set(n.toString(),s)}return t.set("rhythmmode",e.rhythmMode),t.set("rhythmheight",e.rhythmHeight),t.set("transpositionpitches",e.transpositionPitches),t.set("displaytranspositionpitches",e.displayTranspositionPitches),t.set("smallgracetabnotes",e.smallGraceTabNotes),t.set("extendbendarrowsontiednotes",e.extendBendArrowsOnTiedNotes),t.set("extendlineeffectstobeatend",e.extendLineEffectsToBeatEnd),t.set("slurheight",e.slurHeight),t}static setProperty(e,t,i){switch(t){case"notationmode":return e.notationMode=Le.parseEnum(i,Gr),!0;case"fingeringmode":return e.fingeringMode=Le.parseEnum(i,po),!0;case"elements":return e.elements=new Map,Le.forEach(i,(n,s)=>{e.elements.set(Le.parseEnum(s,ft),n)}),!0;case"rhythmmode":return e.rhythmMode=Le.parseEnum(i,Zl),!0;case"rhythmheight":return e.rhythmHeight=i,!0;case"transpositionpitches":return e.transpositionPitches=i,!0;case"displaytranspositionpitches":return e.displayTranspositionPitches=i,!0;case"smallgracetabnotes":return e.smallGraceTabNotes=i,!0;case"extendbendarrowsontiednotes":return e.extendBendArrowsOnTiedNotes=i,!0;case"extendlineeffectstobeatend":return e.extendLineEffectsToBeatEnd=i,!0;case"slurheight":return e.slurHeight=i,!0}return!1}}class dw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("encoding",e.encoding),t.set("mergepartgroupsinmusicxml",e.mergePartGroupsInMusicXml),t.set("beattextaslyrics",e.beatTextAsLyrics),t}static setProperty(e,t,i){switch(t){case"encoding":return e.encoding=i,!0;case"mergepartgroupsinmusicxml":return e.mergePartGroupsInMusicXml=i,!0;case"beattextaslyrics":return e.beatTextAsLyrics=i,!0}return!1}}class fw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("notewidelength",e.noteWideLength),t.set("notewideamplitude",e.noteWideAmplitude),t.set("noteslightlength",e.noteSlightLength),t.set("noteslightamplitude",e.noteSlightAmplitude),t.set("beatwidelength",e.beatWideLength),t.set("beatwideamplitude",e.beatWideAmplitude),t.set("beatslightlength",e.beatSlightLength),t.set("beatslightamplitude",e.beatSlightAmplitude),t}static setProperty(e,t,i){switch(t){case"notewidelength":return e.noteWideLength=i,!0;case"notewideamplitude":return e.noteWideAmplitude=i,!0;case"noteslightlength":return e.noteSlightLength=i,!0;case"noteslightamplitude":return e.noteSlightAmplitude=i,!0;case"beatwidelength":return e.beatWideLength=i,!0;case"beatwideamplitude":return e.beatWideAmplitude=i,!0;case"beatslightlength":return e.beatSlightLength=i,!0;case"beatslightamplitude":return e.beatSlightAmplitude=i,!0}return!1}}class pw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("simpleslidepitchoffset",e.simpleSlidePitchOffset),t.set("simpleslidedurationratio",e.simpleSlideDurationRatio),t.set("shiftslidedurationratio",e.shiftSlideDurationRatio),t}static setProperty(e,t,i){switch(t){case"simpleslidepitchoffset":return e.simpleSlidePitchOffset=i,!0;case"simpleslidedurationratio":return e.simpleSlideDurationRatio=i,!0;case"shiftslidedurationratio":return e.shiftSlideDurationRatio=i,!0}return!1}}class gw{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("soundfont",e.soundFont),t.set("outputmode",e.outputMode),t.set("enableplayer",e.enablePlayer),t.set("enablecursor",e.enableCursor),t.set("enableanimatedbeatcursor",e.enableAnimatedBeatCursor),t.set("enableelementhighlighting",e.enableElementHighlighting),t.set("enableuserinteraction",e.enableUserInteraction),t.set("scrolloffsetx",e.scrollOffsetX),t.set("scrolloffsety",e.scrollOffsetY),t.set("scrollmode",e.scrollMode),t.set("scrollspeed",e.scrollSpeed),t.set("nativebrowsersmoothscroll",e.nativeBrowserSmoothScroll),t.set("songbookbendduration",e.songBookBendDuration),t.set("songbookdipduration",e.songBookDipDuration),t.set("vibrato",fw.toJson(e.vibrato)),t.set("slide",pw.toJson(e.slide)),t.set("playtripletfeel",e.playTripletFeel),t.set("buffertimeinmilliseconds",e.bufferTimeInMilliseconds),t}static setProperty(e,t,i){switch(t){case"soundfont":return e.soundFont=i,!0;case"scrollelement":return e.scrollElement=i,!0;case"outputmode":return e.outputMode=Le.parseEnum(i,um),!0;case"enableplayer":return e.enablePlayer=i,!0;case"enablecursor":return e.enableCursor=i,!0;case"enableanimatedbeatcursor":return e.enableAnimatedBeatCursor=i,!0;case"enableelementhighlighting":return e.enableElementHighlighting=i,!0;case"enableuserinteraction":return e.enableUserInteraction=i,!0;case"scrolloffsetx":return e.scrollOffsetX=i,!0;case"scrolloffsety":return e.scrollOffsetY=i,!0;case"scrollmode":return e.scrollMode=Le.parseEnum(i,Ql),!0;case"scrollspeed":return e.scrollSpeed=i,!0;case"nativebrowsersmoothscroll":return e.nativeBrowserSmoothScroll=i,!0;case"songbookbendduration":return e.songBookBendDuration=i,!0;case"songbookdipduration":return e.songBookDipDuration=i,!0;case"playtripletfeel":return e.playTripletFeel=i,!0;case"buffertimeinmilliseconds":return e.bufferTimeInMilliseconds=i,!0}if(["vibrato"].indexOf(t)>=0)return fw.fromJson(e.vibrato,i),!0;for(const n of["vibrato"])if(t.indexOf(n)===0&&fw.setProperty(e.vibrato,t.substring(n.length),i))return!0;if(["slide"].indexOf(t)>=0)return pw.fromJson(e.slide,i),!0;for(const n of["slide"])if(t.indexOf(n)===0&&pw.setProperty(e.slide,t.substring(n.length),i))return!0;return!1}}class Vf{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n.toLowerCase(),i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("core",lw.toJson(e.core)),t.set("display",cw.toJson(e.display)),t.set("notation",hw.toJson(e.notation)),t.set("importer",dw.toJson(e.importer)),t.set("player",gw.toJson(e.player)),t}static setProperty(e,t,i){if(["core",""].indexOf(t)>=0)return lw.fromJson(e.core,i),!0;for(const n of["core",""])if(t.indexOf(n)===0&&lw.setProperty(e.core,t.substring(n.length),i))return!0;if(["display",""].indexOf(t)>=0)return cw.fromJson(e.display,i),!0;for(const n of["display",""])if(t.indexOf(n)===0&&cw.setProperty(e.display,t.substring(n.length),i))return!0;if(["notation"].indexOf(t)>=0)return hw.fromJson(e.notation,i),!0;for(const n of["notation"])if(t.indexOf(n)===0&&hw.setProperty(e.notation,t.substring(n.length),i))return!0;if(["importer"].indexOf(t)>=0)return dw.fromJson(e.importer,i),!0;for(const n of["importer"])if(t.indexOf(n)===0&&dw.setProperty(e.importer,t.substring(n.length),i))return!0;if(["player"].indexOf(t)>=0)return gw.fromJson(e.player,i),!0;for(const n of["player"])if(t.indexOf(n)===0&&gw.setProperty(e.player,t.substring(n.length),i))return!0;return!1}}class Ih{constructor(){this.core=new i2,this.display=new Gz,this.notation=new nm,this.importer=new Uz,this.player=new Yz}setSongBookModeSettings(){this.notation.notationMode=Gr.SongBook,this.notation.smallGraceTabNotes=!1,this.notation.fingeringMode=po.SingleNoteEffectBand,this.notation.extendBendArrowsOnTiedNotes=!1,this.notation.elements.set(ft.ParenthesisOnTiedBends,!1),this.notation.elements.set(ft.TabNotesOnTiedBends,!1),this.notation.elements.set(ft.ZerosOnDiveWhammys,!0)}static get songBook(){let e=new Ih;return e.setSongBookModeSettings(),e}fillFromJson(e){Vf.fromJson(this,e)}}class qk{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("marker",e.marker),t.set("text",e.text),t}static setProperty(e,t,i){switch(t){case"marker":return e.marker=i,!0;case"text":return e.text=i,!0}return!1}}class rb{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("islinear",e.isLinear),t.set("type",e.type),t.set("value",e.value),t.set("ratioposition",e.ratioPosition),t.set("text",e.text),t}static setProperty(e,t,i){switch(t){case"islinear":return e.isLinear=i,!0;case"type":return e.type=Le.parseEnum(i,Ur),!0;case"value":return e.value=i,!0;case"ratioposition":return e.ratioPosition=i,!0;case"text":return e.text=i,!0}return!1}}class Xk{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("type",e.type),t.set("length",e.length),t}static setProperty(e,t,i){switch(t){case"type":return e.type=Le.parseEnum(i,fo),!0;case"length":return e.length=i,!0}return!1}}class Kk{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;if(t.set("alternateendings",e.alternateEndings),t.set("keysignature",e.keySignature),t.set("keysignaturetype",e.keySignatureType),t.set("isdoublebar",e.isDoubleBar),t.set("isrepeatstart",e.isRepeatStart),t.set("repeatcount",e.repeatCount),t.set("timesignaturenumerator",e.timeSignatureNumerator),t.set("timesignaturedenominator",e.timeSignatureDenominator),t.set("timesignaturecommon",e.timeSignatureCommon),t.set("tripletfeel",e.tripletFeel),t.set("section",qk.toJson(e.section)),t.set("tempoautomation",rb.toJson(e.tempoAutomation)),e.fermata!==null){const i=new Map;t.set("fermata",i);for(const[n,s]of e.fermata)i.set(n.toString(),Xk.toJson(s))}return t.set("start",e.start),t.set("isanacrusis",e.isAnacrusis),t.set("displayscale",e.displayScale),t.set("displaywidth",e.displayWidth),t}static setProperty(e,t,i){switch(t){case"alternateendings":return e.alternateEndings=i,!0;case"keysignature":return e.keySignature=Le.parseEnum(i,Wr),!0;case"keysignaturetype":return e.keySignatureType=Le.parseEnum(i,mc),!0;case"isdoublebar":return e.isDoubleBar=i,!0;case"isrepeatstart":return e.isRepeatStart=i,!0;case"repeatcount":return e.repeatCount=i,!0;case"timesignaturenumerator":return e.timeSignatureNumerator=i,!0;case"timesignaturedenominator":return e.timeSignatureDenominator=i,!0;case"timesignaturecommon":return e.timeSignatureCommon=i,!0;case"tripletfeel":return e.tripletFeel=Le.parseEnum(i,Mt),!0;case"fermata":return e.fermata=new Map,Le.forEach(i,(n,s)=>{const o=new tS;Xk.fromJson(o,n),e.addFermata(parseInt(s),o)}),!0;case"start":return e.start=i,!0;case"isanacrusis":return e.isAnacrusis=i,!0;case"displayscale":return e.displayScale=i,!0;case"displaywidth":return e.displayWidth=i,!0}return["section"].indexOf(t)>=0?(i?(e.section=new Nb,qk.fromJson(e.section,i)):e.section=null,!0):["tempoautomation"].indexOf(t)>=0?(i?(e.tempoAutomation=new yn,rb.fromJson(e.tempoAutomation,i)):e.tempoAutomation=null,!0):!1}}class nb{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("offset",e.offset),t.set("value",e.value),t}static setProperty(e,t,i){switch(t){case"offset":return e.offset=i,!0;case"value":return e.value=i,!0}return!1}}class Qk{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){var i;if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("accentuated",e.accentuated),t.set("bendtype",e.bendType),t.set("bendstyle",e.bendStyle),t.set("iscontinuedbend",e.isContinuedBend),e.bendPoints!==null&&t.set("bendpoints",(i=e.bendPoints)==null?void 0:i.map(n=>nb.toJson(n))),t.set("fret",e.fret),t.set("string",e.string),t.set("octave",e.octave),t.set("tone",e.tone),t.set("percussionarticulation",e.percussionArticulation),t.set("isvisible",e.isVisible),t.set("islefthandtapped",e.isLeftHandTapped),t.set("ishammerpullorigin",e.isHammerPullOrigin),t.set("isslurdestination",e.isSlurDestination),t.set("harmonictype",e.harmonicType),t.set("harmonicvalue",e.harmonicValue),t.set("isghost",e.isGhost),t.set("isletring",e.isLetRing),t.set("ispalmmute",e.isPalmMute),t.set("isdead",e.isDead),t.set("isstaccato",e.isStaccato),t.set("slideintype",e.slideInType),t.set("slideouttype",e.slideOutType),t.set("vibrato",e.vibrato),t.set("istiedestination",e.isTieDestination),t.set("lefthandfinger",e.leftHandFinger),t.set("righthandfinger",e.rightHandFinger),t.set("isfingering",e.isFingering),t.set("trillvalue",e.trillValue),t.set("trillspeed",e.trillSpeed),t.set("durationpercent",e.durationPercent),t.set("accidentalmode",e.accidentalMode),t.set("dynamics",e.dynamics),e.toJson(t),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"accentuated":return e.accentuated=Le.parseEnum(i,Mr),!0;case"bendtype":return e.bendType=Le.parseEnum(i,Ye),!0;case"bendstyle":return e.bendStyle=Le.parseEnum(i,Si),!0;case"iscontinuedbend":return e.isContinuedBend=i,!0;case"bendpoints":if(i){e.bendPoints=[];for(const n of i){const s=new De;nb.fromJson(s,n),e.addBendPoint(s)}}return!0;case"fret":return e.fret=i,!0;case"string":return e.string=i,!0;case"octave":return e.octave=i,!0;case"tone":return e.tone=i,!0;case"percussionarticulation":return e.percussionArticulation=i,!0;case"isvisible":return e.isVisible=i,!0;case"islefthandtapped":return e.isLeftHandTapped=i,!0;case"ishammerpullorigin":return e.isHammerPullOrigin=i,!0;case"isslurdestination":return e.isSlurDestination=i,!0;case"harmonictype":return e.harmonicType=Le.parseEnum(i,Ze),!0;case"harmonicvalue":return e.harmonicValue=i,!0;case"isghost":return e.isGhost=i,!0;case"isletring":return e.isLetRing=i,!0;case"ispalmmute":return e.isPalmMute=i,!0;case"isdead":return e.isDead=i,!0;case"isstaccato":return e.isStaccato=i,!0;case"slideintype":return e.slideInType=Le.parseEnum(i,rn),!0;case"slideouttype":return e.slideOutType=Le.parseEnum(i,Et),!0;case"vibrato":return e.vibrato=Le.parseEnum(i,ni),!0;case"istiedestination":return e.isTieDestination=i,!0;case"lefthandfinger":return e.leftHandFinger=Le.parseEnum(i,kt),!0;case"righthandfinger":return e.rightHandFinger=Le.parseEnum(i,kt),!0;case"isfingering":return e.isFingering=i,!0;case"trillvalue":return e.trillValue=i,!0;case"trillspeed":return e.trillSpeed=Le.parseEnum(i,Y),!0;case"durationpercent":return e.durationPercent=i,!0;case"accidentalmode":return e.accidentalMode=Le.parseEnum(i,Tr),!0;case"dynamics":return e.dynamics=Le.parseEnum(i,Dt),!0}return e.setProperty(t,i)}}class Jk{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){var i;if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("notes",e.notes.map(n=>Qk.toJson(n))),t.set("isempty",e.isEmpty),t.set("whammystyle",e.whammyStyle),t.set("ottava",e.ottava),t.set("islegatoorigin",e.isLegatoOrigin),t.set("duration",e.duration),t.set("automations",e.automations.map(n=>rb.toJson(n))),t.set("dots",e.dots),t.set("fadein",e.fadeIn),t.set("lyrics",e.lyrics),t.set("hasrasgueado",e.hasRasgueado),t.set("pop",e.pop),t.set("slap",e.slap),t.set("tap",e.tap),t.set("text",e.text),t.set("brushtype",e.brushType),t.set("brushduration",e.brushDuration),t.set("tupletdenominator",e.tupletDenominator),t.set("tupletnumerator",e.tupletNumerator),t.set("iscontinuedwhammy",e.isContinuedWhammy),t.set("whammybartype",e.whammyBarType),e.whammyBarPoints!==null&&t.set("whammybarpoints",(i=e.whammyBarPoints)==null?void 0:i.map(n=>nb.toJson(n))),t.set("vibrato",e.vibrato),t.set("chordid",e.chordId),t.set("gracetype",e.graceType),t.set("pickstroke",e.pickStroke),t.set("tremolospeed",e.tremoloSpeed),t.set("crescendo",e.crescendo),t.set("displaystart",e.displayStart),t.set("playbackstart",e.playbackStart),t.set("displayduration",e.displayDuration),t.set("playbackduration",e.playbackDuration),t.set("dynamics",e.dynamics),t.set("invertbeamdirection",e.invertBeamDirection),t.set("preferredbeamdirection",e.preferredBeamDirection),t.set("beamingmode",e.beamingMode),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"notes":e.notes=[];for(const n of i){const s=new fr;Qk.fromJson(s,n),e.addNote(s)}return!0;case"isempty":return e.isEmpty=i,!0;case"whammystyle":return e.whammyStyle=Le.parseEnum(i,Si),!0;case"ottava":return e.ottava=Le.parseEnum(i,hi),!0;case"islegatoorigin":return e.isLegatoOrigin=i,!0;case"duration":return e.duration=Le.parseEnum(i,Y),!0;case"automations":e.automations=[];for(const n of i){const s=new yn;rb.fromJson(s,n),e.automations.push(s)}return!0;case"dots":return e.dots=i,!0;case"fadein":return e.fadeIn=i,!0;case"lyrics":return e.lyrics=i,!0;case"hasrasgueado":return e.hasRasgueado=i,!0;case"pop":return e.pop=i,!0;case"slap":return e.slap=i,!0;case"tap":return e.tap=i,!0;case"text":return e.text=i,!0;case"brushtype":return e.brushType=Le.parseEnum(i,Di),!0;case"brushduration":return e.brushDuration=i,!0;case"tupletdenominator":return e.tupletDenominator=i,!0;case"tupletnumerator":return e.tupletNumerator=i,!0;case"iscontinuedwhammy":return e.isContinuedWhammy=i,!0;case"whammybartype":return e.whammyBarType=Le.parseEnum(i,ci),!0;case"whammybarpoints":if(i){e.whammyBarPoints=[];for(const n of i){const s=new De;nb.fromJson(s,n),e.addWhammyBarPoint(s)}}return!0;case"vibrato":return e.vibrato=Le.parseEnum(i,ni),!0;case"chordid":return e.chordId=i,!0;case"gracetype":return e.graceType=Le.parseEnum(i,ot),!0;case"pickstroke":return e.pickStroke=Le.parseEnum(i,pn),!0;case"tremolospeed":return e.tremoloSpeed=Le.parseEnum(i,Y),!0;case"crescendo":return e.crescendo=Le.parseEnum(i,bs),!0;case"displaystart":return e.displayStart=i,!0;case"playbackstart":return e.playbackStart=i,!0;case"displayduration":return e.displayDuration=i,!0;case"playbackduration":return e.playbackDuration=i,!0;case"dynamics":return e.dynamics=Le.parseEnum(i,Dt),!0;case"invertbeamdirection":return e.invertBeamDirection=i,!0;case"preferredbeamdirection":return e.preferredBeamDirection=Le.parseEnum(i,Te),!0;case"beamingmode":return e.beamingMode=Le.parseEnum(i,co),!0}return!1}}class Zk{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("beats",e.beats.map(i=>Jk.toJson(i))),t.set("isempty",e.isEmpty),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"beats":e.beats=[];for(const n of i){const s=new bn;Jk.fromJson(s,n),e.addBeat(s)}return!0;case"isempty":return e.isEmpty=i,!0}return!1}}class e_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("clef",e.clef),t.set("clefottava",e.clefOttava),t.set("voices",e.voices.map(i=>Zk.toJson(i))),t.set("similemark",e.simileMark),t.set("displayscale",e.displayScale),t.set("displaywidth",e.displayWidth),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"clef":return e.clef=Le.parseEnum(i,_t),!0;case"clefottava":return e.clefOttava=Le.parseEnum(i,hi),!0;case"voices":e.voices=[];for(const n of i){const s=new ml;Zk.fromJson(s,n),e.addVoice(s)}return!0;case"similemark":return e.simileMark=Le.parseEnum(i,da),!0;case"displayscale":return e.displayScale=i,!0;case"displaywidth":return e.displayWidth=i,!0}return!1}}class t_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("name",e.name),t.set("firstfret",e.firstFret),t.set("strings",e.strings),t.set("barrefrets",e.barreFrets),t.set("showname",e.showName),t.set("showdiagram",e.showDiagram),t.set("showfingering",e.showFingering),t}static setProperty(e,t,i){switch(t){case"name":return e.name=i,!0;case"firstfret":return e.firstFret=i,!0;case"strings":return e.strings=i,!0;case"barrefrets":return e.barreFrets=i,!0;case"showname":return e.showName=i,!0;case"showdiagram":return e.showDiagram=i,!0;case"showfingering":return e.showFingering=i,!0}return!1}}class i_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("isstandard",e.isStandard),t.set("name",e.name),t.set("tunings",e.tunings),t}static setProperty(e,t,i){switch(t){case"isstandard":return e.isStandard=i,!0;case"name":return e.name=i,!0;case"tunings":return e.tunings=i,!0}return!1}}class r_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;if(t.set("bars",e.bars.map(i=>e_.toJson(i))),e.chords!==null){const i=new Map;t.set("chords",i);for(const[n,s]of e.chords)i.set(n.toString(),t_.toJson(s))}return t.set("capo",e.capo),t.set("transpositionpitch",e.transpositionPitch),t.set("displaytranspositionpitch",e.displayTranspositionPitch),t.set("stringtuning",i_.toJson(e.stringTuning)),t.set("showtablature",e.showTablature),t.set("showstandardnotation",e.showStandardNotation),t.set("ispercussion",e.isPercussion),t.set("standardnotationlinecount",e.standardNotationLineCount),t}static setProperty(e,t,i){switch(t){case"bars":e.bars=[];for(const n of i){const s=new cu;e_.fromJson(s,n),e.addBar(s)}return!0;case"chords":return e.chords=new Map,Le.forEach(i,(n,s)=>{const o=new gc;t_.fromJson(o,n),e.addChord(s,o)}),!0;case"capo":return e.capo=i,!0;case"transpositionpitch":return e.transpositionPitch=i,!0;case"displaytranspositionpitch":return e.displayTranspositionPitch=i,!0;case"showtablature":return e.showTablature=i,!0;case"showstandardnotation":return e.showStandardNotation=i,!0;case"ispercussion":return e.isPercussion=i,!0;case"standardnotationlinecount":return e.standardNotationLineCount=i,!0}return["stringtuning"].indexOf(t)>=0?(i_.fromJson(e.stringTuning,i),!0):!1}}class n_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("volume",e.volume),t.set("balance",e.balance),t.set("port",e.port),t.set("program",e.program),t.set("primarychannel",e.primaryChannel),t.set("secondarychannel",e.secondaryChannel),t.set("ismute",e.isMute),t.set("issolo",e.isSolo),t}static setProperty(e,t,i){switch(t){case"volume":return e.volume=i,!0;case"balance":return e.balance=i,!0;case"port":return e.port=i,!0;case"program":return e.program=i,!0;case"primarychannel":return e.primaryChannel=i,!0;case"secondarychannel":return e.secondaryChannel=i,!0;case"ismute":return e.isMute=i,!0;case"issolo":return e.isSolo=i,!0}return!1}}class s_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("elementtype",e.elementType),t.set("staffline",e.staffLine),t.set("noteheaddefault",e.noteHeadDefault),t.set("noteheadhalf",e.noteHeadHalf),t.set("noteheadwhole",e.noteHeadWhole),t.set("techniquesymbol",e.techniqueSymbol),t.set("techniquesymbolplacement",e.techniqueSymbolPlacement),t.set("outputmidinumber",e.outputMidiNumber),t}static setProperty(e,t,i){switch(t){case"elementtype":return e.elementType=i,!0;case"staffline":return e.staffLine=i,!0;case"noteheaddefault":return e.noteHeadDefault=Le.parseEnum(i,N),!0;case"noteheadhalf":return e.noteHeadHalf=Le.parseEnum(i,N),!0;case"noteheadwhole":return e.noteHeadWhole=Le.parseEnum(i,N),!0;case"techniquesymbol":return e.techniqueSymbol=Le.parseEnum(i,N),!0;case"techniquesymbolplacement":return e.techniqueSymbolPlacement=Le.parseEnum(i,It),!0;case"outputmidinumber":return e.outputMidiNumber=i,!0}return!1}}class a_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("staves",e.staves.map(i=>r_.toJson(i))),t.set("playbackinfo",n_.toJson(e.playbackInfo)),t.set("color",_i.toJson(e.color)),t.set("name",e.name),t.set("shortname",e.shortName),t.set("defaultsystemslayout",e.defaultSystemsLayout),t.set("systemslayout",e.systemsLayout),t.set("percussionarticulations",e.percussionArticulations.map(i=>s_.toJson(i))),t}static setProperty(e,t,i){switch(t){case"staves":e.staves=[];for(const n of i){const s=new yC;r_.fromJson(s,n),e.addStaff(s)}return!0;case"color":return e.color=_i.fromJson(i),!0;case"name":return e.name=i,!0;case"shortname":return e.shortName=i,!0;case"defaultsystemslayout":return e.defaultSystemsLayout=i,!0;case"systemslayout":return e.systemsLayout=i,!0;case"percussionarticulations":e.percussionArticulations=[];for(const n of i){const s=new Ge;s_.fromJson(s,n),e.percussionArticulations.push(s)}return!0}return["playbackinfo"].indexOf(t)>=0?(n_.fromJson(e.playbackInfo,i),!0):!1}}class o_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("hidedynamics",e.hideDynamics),t}static setProperty(e,t,i){switch(t){case"hidedynamics":return e.hideDynamics=i,!0}return!1}}class l_{static fromJson(e,t){t&&Le.forEach(t,(i,n)=>this.setProperty(e,n,i))}static toJson(e){if(!e)return null;const t=new Map;return t.set("album",e.album),t.set("artist",e.artist),t.set("copyright",e.copyright),t.set("instructions",e.instructions),t.set("music",e.music),t.set("notices",e.notices),t.set("subtitle",e.subTitle),t.set("title",e.title),t.set("words",e.words),t.set("tab",e.tab),t.set("tempo",e.tempo),t.set("tempolabel",e.tempoLabel),t.set("masterbars",e.masterBars.map(i=>Kk.toJson(i))),t.set("tracks",e.tracks.map(i=>a_.toJson(i))),t.set("defaultsystemslayout",e.defaultSystemsLayout),t.set("systemslayout",e.systemsLayout),t.set("stylesheet",o_.toJson(e.stylesheet)),t}static setProperty(e,t,i){switch(t){case"album":return e.album=i,!0;case"artist":return e.artist=i,!0;case"copyright":return e.copyright=i,!0;case"instructions":return e.instructions=i,!0;case"music":return e.music=i,!0;case"notices":return e.notices=i,!0;case"subtitle":return e.subTitle=i,!0;case"title":return e.title=i,!0;case"words":return e.words=i,!0;case"tab":return e.tab=i,!0;case"tempo":return e.tempo=i,!0;case"tempolabel":return e.tempoLabel=i,!0;case"masterbars":e.masterBars=[];for(const n of i){const s=new ou;Kk.fromJson(s,n),e.addMasterBar(s)}return!0;case"tracks":e.tracks=[];for(const n of i){const s=new gl;a_.fromJson(s,n),e.addTrack(s)}return!0;case"defaultsystemslayout":return e.defaultSystemsLayout=i,!0;case"systemslayout":return e.systemsLayout=i,!0}return["stylesheet"].indexOf(t)>=0?(o_.fromJson(e.stylesheet,i),!0):!1}}class Cr{static jsonReplacer(e,t){if(t instanceof Map){if("fromEntries"in Object)return Object.fromEntries(t);{const i={};for(const[n,s]of t)i[n]=s;return i}}else if(ArrayBuffer.isView(t))return Array.apply([],[t]);return t}static scoreToJson(e){let t=Cr.scoreToJsObject(e);return JSON.stringify(t,Cr.jsonReplacer)}static jsonToScore(e,t){return Cr.jsObjectToScore(JSON.parse(e),t)}static scoreToJsObject(e){return l_.toJson(e)}static jsObjectToScore(e,t){let i=new Dh;return l_.fromJson(i,e),i.finish(t??new Ih),i}static settingsToJson(e){let t=Cr.settingsToJsObject(e);return JSON.stringify(t,Cr.jsonReplacer)}static jsonToSettings(e){return Cr.jsObjectToSettings(JSON.parse(e))}static settingsToJsObject(e){return Vf.toJson(e)}static jsObjectToSettings(e){let t=new Ih;return Vf.fromJson(t,e),t}static jsObjectToMidiFile(e){let t=new uc;return Le.forEach(e,(i,n)=>{switch(n){case"division":t.division=i;break;case"tracks":for(let s of i){let o=Cr.jsObjectToMidiTrack(s);t.tracks.push(o)}break}}),t}static jsObjectToMidiTrack(e){let t=new xC;return Le.forEach(e,(i,n)=>{switch(n){case"events":for(let s of i){let o=Cr.jsObjectToMidiEvent(s);t.events.push(o)}break}}),t}static jsObjectToMidiEvent(e){let t=Le.getValue(e,"track"),i=Le.getValue(e,"tick"),n=Le.getValue(e,"type");switch(n){case qt.TimeSignature:return new SC(t,i,Le.getValue(e,"numerator"),Le.getValue(e,"denominatorIndex"),Le.getValue(e,"midiClocksPerMetronomeClick"),Le.getValue(e,"thirdySecondNodesInQuarter"));case qt.AlphaTabRest:return new _C(t,i,Le.getValue(e,"channel"));case qt.AlphaTabMetronome:return new kC(t,i,Le.getValue(e,"metronomeNumerator"),Le.getValue(e,"metronomeDurationInTicks"),Le.getValue(e,"metronomeDurationInMilliseconds"));case qt.NoteOn:return new TC(t,i,Le.getValue(e,"channel"),Le.getValue(e,"noteKey"),Le.getValue(e,"noteVelocity"));case qt.NoteOff:return new CC(t,i,Le.getValue(e,"channel"),Le.getValue(e,"noteKey"),Le.getValue(e,"noteVelocity"));case qt.ControlChange:return new NC(t,i,Le.getValue(e,"channel"),Le.getValue(e,"controller"),Le.getValue(e,"value"));case qt.ProgramChange:return new PC(t,i,Le.getValue(e,"channel"),Le.getValue(e,"program"));case qt.TempoChange:return new EC(i,Le.getValue(e,"microSecondsPerQuarterNote"));case qt.PitchBend:return new RC(t,i,Le.getValue(e,"channel"),Le.getValue(e,"value"));case qt.PerNotePitchBend:return new LC(t,i,Le.getValue(e,"channel"),Le.getValue(e,"noteKey"),Le.getValue(e,"value"));case qt.EndOfTrack:return new IC(t,i)}throw new sn(nn.Format,"Unknown Midi Event type: "+n)}static midiFileToJsObject(e){const t=new Map;t.set("division",e.division);const i=[];for(let n of e.tracks)i.push(Cr.midiTrackToJsObject(n));return t.set("tracks",i),t}static midiTrackToJsObject(e){const t=new Map,i=[];for(let n of e.events)i.push(Cr.midiEventToJsObject(n));return t.set("events",i),t}static midiEventToJsObject(e){const t=new Map;switch(t.set("track",e.track),t.set("tick",e.tick),t.set("type",e.type),e.type){case qt.TimeSignature:t.set("numerator",e.numerator),t.set("denominatorIndex",e.denominatorIndex),t.set("midiClocksPerMetronomeClick",e.midiClocksPerMetronomeClick),t.set("thirdySecondNodesInQuarter",e.thirtySecondNodesInQuarter);break;case qt.AlphaTabRest:t.set("channel",e.channel);break;case qt.AlphaTabMetronome:t.set("metronomeNumerator",e.metronomeNumerator),t.set("metronomeDurationInMilliseconds",e.metronomeDurationInMilliseconds),t.set("metronomeDurationInTicks",e.metronomeDurationInTicks);break;case qt.NoteOn:case qt.NoteOff:t.set("channel",e.channel),t.set("noteKey",e.noteKey),t.set("noteVelocity",e.noteVelocity);break;case qt.ControlChange:t.set("channel",e.channel),t.set("controller",e.controller),t.set("value",e.value);break;case qt.ProgramChange:t.set("channel",e.channel),t.set("program",e.program);break;case qt.TempoChange:t.set("microSecondsPerQuarterNote",e.microSecondsPerQuarterNote);break;case qt.PitchBend:t.set("channel",e.channel),t.set("value",e.value);break;case qt.PerNotePitchBend:t.set("channel",e.channel),t.set("noteKey",e.noteKey),t.set("value",e.value);break;case qt.EndOfTrack:break}return t}}class ir{constructor(){this.ready=new $r,this.samplesPlayed=new Qt,this.sampleRequest=new $r}get sampleRate(){return ir.preferredSampleRate}open(){ye.debug("AlphaSynth","Initializing synth worker"),this._worker=Ce.globalThis,this._worker.addEventListener("message",this.handleMessage.bind(this)),this.ready.trigger()}destroy(){this._worker.postMessage({cmd:"alphaSynth.output.destroy"})}handleMessage(e){let t=e.data;switch(t.cmd){case ir.CmdOutputSampleRequest:this.sampleRequest.trigger();break;case ir.CmdOutputSamplesPlayed:this.samplesPlayed.trigger(t.samples);break}}addSamples(e){this._worker.postMessage({cmd:"alphaSynth.output.addSamples",samples:e})}play(){this._worker.postMessage({cmd:"alphaSynth.output.play"})}pause(){this._worker.postMessage({cmd:"alphaSynth.output.pause"})}resetSamples(){this._worker.postMessage({cmd:"alphaSynth.output.resetSamples"})}activate(){}}ir.CmdOutputPrefix="alphaSynth.output.";ir.CmdOutputAddSamples=ir.CmdOutputPrefix+"addSamples";ir.CmdOutputPlay=ir.CmdOutputPrefix+"play";ir.CmdOutputPause=ir.CmdOutputPrefix+"pause";ir.CmdOutputResetSamples=ir.CmdOutputPrefix+"resetSamples";ir.CmdOutputSampleRequest=ir.CmdOutputPrefix+"sampleRequest";ir.CmdOutputSamplesPlayed=ir.CmdOutputPrefix+"samplesPlayed";ir.preferredSampleRate=0;class aS{constructor(e,t){this._main=e,this._main.addEventListener("message",this.handleMessage.bind(this)),this._player=new Wz(new ir,t),this._player.positionChanged.on(this.onPositionChanged.bind(this)),this._player.stateChanged.on(this.onPlayerStateChanged.bind(this)),this._player.finished.on(this.onFinished.bind(this)),this._player.soundFontLoaded.on(this.onSoundFontLoaded.bind(this)),this._player.soundFontLoadFailed.on(this.onSoundFontLoadFailed.bind(this)),this._player.soundFontLoadFailed.on(this.onSoundFontLoadFailed.bind(this)),this._player.midiLoaded.on(this.onMidiLoaded.bind(this)),this._player.midiLoadFailed.on(this.onMidiLoadFailed.bind(this)),this._player.readyForPlayback.on(this.onReadyForPlayback.bind(this)),this._player.midiEventsPlayed.on(this.onMidiEventsPlayed.bind(this)),this._player.playbackRangeChanged.on(this.onPlaybackRangeChanged.bind(this)),this._main.postMessage({cmd:"alphaSynth.ready"})}static init(){let e=Ce.globalThis;e.addEventListener("message",t=>{let i=t.data;switch(i.cmd){case"alphaSynth.initialize":ir.preferredSampleRate=i.sampleRate,ye.logLevel=i.logLevel,Ce.globalThis.alphaSynthWebWorker=new aS(e,i.bufferTimeInMilliseconds);break}})}handleMessage(e){let t=e.data;switch(t.cmd){case"alphaSynth.setLogLevel":ye.logLevel=t.value;break;case"alphaSynth.setMasterVolume":this._player.masterVolume=t.value;break;case"alphaSynth.setMetronomeVolume":this._player.metronomeVolume=t.value;break;case"alphaSynth.setPlaybackSpeed":this._player.playbackSpeed=t.value;break;case"alphaSynth.setTickPosition":this._player.tickPosition=t.value;break;case"alphaSynth.setTimePosition":this._player.timePosition=t.value;break;case"alphaSynth.setPlaybackRange":this._player.playbackRange=t.value;break;case"alphaSynth.setIsLooping":this._player.isLooping=t.value;break;case"alphaSynth.setCountInVolume":this._player.countInVolume=t.value;break;case"alphaSynth.setMidiEventsPlayedFilter":this._player.midiEventsPlayedFilter=t.value;break;case"alphaSynth.play":this._player.play();break;case"alphaSynth.pause":this._player.pause();break;case"alphaSynth.playPause":this._player.playPause();break;case"alphaSynth.stop":this._player.stop();break;case"alphaSynth.playOneTimeMidiFile":this._player.playOneTimeMidiFile(Cr.jsObjectToMidiFile(t.midi));break;case"alphaSynth.loadSoundFontBytes":this._player.loadSoundFont(t.data,t.append);break;case"alphaSynth.resetSoundFonts":this._player.resetSoundFonts();break;case"alphaSynth.loadMidi":this._player.loadMidiFile(Cr.jsObjectToMidiFile(t.midi));break;case"alphaSynth.setChannelMute":this._player.setChannelMute(t.channel,t.mute);break;case"alphaSynth.setChannelSolo":this._player.setChannelSolo(t.channel,t.solo);break;case"alphaSynth.setChannelVolume":this._player.setChannelVolume(t.channel,t.volume);break;case"alphaSynth.resetChannelStates":this._player.resetChannelStates();break;case"alphaSynth.destroy":this._player.destroy(),this._main.postMessage({cmd:"alphaSynth.destroyed"});break;case"alphaSynth.applyTranspositionPitches":this._player.applyTranspositionPitches(new Map(JSON.parse(t.transpositionPitches)));break}}onPositionChanged(e){this._main.postMessage({cmd:"alphaSynth.positionChanged",currentTime:e.currentTime,endTime:e.endTime,currentTick:e.currentTick,endTick:e.endTick,isSeek:e.isSeek})}onPlayerStateChanged(e){this._main.postMessage({cmd:"alphaSynth.playerStateChanged",state:e.state,stopped:e.stopped})}onFinished(){this._main.postMessage({cmd:"alphaSynth.finished"})}onSoundFontLoaded(){this._main.postMessage({cmd:"alphaSynth.soundFontLoaded"})}onSoundFontLoadFailed(e){this._main.postMessage({cmd:"alphaSynth.soundFontLoadFailed",error:this.serializeException(e)})}serializeException(e){let t=JSON.parse(JSON.stringify(e));return e.message&&(t.message=e.message),e.stack&&(t.stack=e.stack),e.constructor&&e.constructor.name&&(t.type=e.constructor.name),t}onMidiLoaded(e){this._main.postMessage({cmd:"alphaSynth.midiLoaded",currentTime:e.currentTime,endTime:e.endTime,currentTick:e.currentTick,endTick:e.endTick,isSeek:e.isSeek})}onMidiLoadFailed(e){this._main.postMessage({cmd:"alphaSynth.midiLoaded",error:this.serializeException(e)})}onReadyForPlayback(){this._main.postMessage({cmd:"alphaSynth.readyForPlayback"})}onMidiEventsPlayed(e){this._main.postMessage({cmd:"alphaSynth.midiEventsPlayed",events:e.events.map(Cr.midiEventToJsObject)})}onPlaybackRangeChanged(e){this._main.postMessage({cmd:"alphaSynth.playbackRangeChanged",playbackRange:e.playbackRange})}}class Nr{static generateFontLookup(e){if(!Nr.FontSizeLookupTables.has(e))if(Ce.isRunningInWorker)Nr.FontSizeLookupTables.set(e,new Uint8Array([8]));else{let i=document.createElement("canvas").getContext("2d");i.font=`11px ${e}`;let n=[];for(let o=32;o<255;o++){let c=String.fromCharCode(o);n.push(i.measureText(c).width)}let s=new Uint8Array(n);Nr.FontSizeLookupTables.set(e,s)}}static measureString(e,t,i,n,s){let o,c=11,h=t[0];for(let b=0;b<t.length;b++)if(Nr.FontSizeLookupTables.has(t[b])){h=t[b];break}Nr.FontSizeLookupTables.has(h)||Nr.generateFontLookup(h),o=Nr.FontSizeLookupTables.get(h);let p=1;n===lr.Italic&&(p*=1.2),s===Ms.Bold&&(p*=1.2);let g=0;for(let b=0;b<e.length;b++){let v=Math.min(o.length-1,e.charCodeAt(b)-32);v>=0&&(g+=o[v]*i/c)}return g*p}}Nr.Georgia=new Uint8Array([3,4,5,7,7,9,8,2,4,4,5,7,3,4,3,5,7,5,6,6,6,6,6,6,7,6,3,3,7,7,7,5,10,7,7,7,8,7,7,8,9,4,6,8,7,10,8,8,7,8,8,6,7,8,7,11,8,7,7,4,5,4,7,7,6,6,6,5,6,5,4,6,6,3,3,6,3,10,6,6,6,6,5,5,4,6,5,8,6,5,5,5,4,5,7,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,3,4,6,7,6,7,4,6,6,10,6,6,7,0,10,7,5,7,6,6,6,6,6,3,6,6,6,6,12,12,12,5,7,7,7,7,7,7,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,7,8,8,8,8,8,7,7,6,6,6,6,6,6,6,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,7,6,6,6,6,6,5,6]);Nr.Arial=new Uint8Array([3,3,4,6,6,10,7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,7,7,8,8,7,7,9,8,3,6,7,6,9,8,9,7,9,8,7,7,8,7,10,7,7,7,3,3,3,5,6,4,6,6,6,6,6,3,6,6,2,2,6,2,9,6,6,6,6,4,6,3,6,6,8,6,6,6,4,3,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,3,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,4,6,9,9,9,7,7,7,7,7,7,7,11,8,7,7,7,7,3,3,3,3,8,8,9,9,9,9,9,6,9,8,8,8,8,7,7,7,6,6,6,6,6,6,10,6,6,6,6,6,3,3,3,3,6,6,6,6,6,6,6,6,7,6,6,6,6,6,6]);Nr.FontSizeLookupTables=new Map([["Arial",Nr.Arial],["'Arial'",Nr.Arial],['"Arial"',Nr.Arial],["Georgia",Nr.Georgia],["'Georgia'",Nr.Georgia],['"Georgia"',Nr.Georgia]]);Nr.ControlChars=32;class Bh{constructor(){this.id=Fi.newGuid(),this.x=0,this.y=0,this.width=0,this.height=0,this.totalWidth=0,this.totalHeight=0,this.firstMasterBarIndex=-1,this.lastMasterBarIndex=-1,this.renderResult=null}}class DC{constructor(){this.beats=[]}addBeat(e){e.barBounds=this,this.beats.push(e),this.masterBarBounds.addBeat(e)}findBeatAtPos(e){let t=null;for(let i of this.beats)if(!t||i.realBounds.x<e)t=i;else if(i.realBounds.x>e)break;return t}finish(){this.beats.sort((e,t)=>e.realBounds.x-t.realBounds.x)}}class AC{constructor(){this.notes=null}addNote(e){this.notes||(this.notes=[]),e.beatBounds=this,this.notes.push(e)}findNoteAtPos(e,t){const i=this.notes;if(!i)return null;for(let n of i){let s=n.noteHeadBounds.y+n.noteHeadBounds.h,o=n.noteHeadBounds.x+n.noteHeadBounds.w;if(n.noteHeadBounds.x<=e&&n.noteHeadBounds.y<=t&&e<=o&&t<=s)return n.note}return null}}class VC{constructor(){this.index=0,this.isFirstOfLine=!1,this.bars=[],this.staveGroupBounds=null}addBar(e){e.masterBarBounds=this,this.bars.push(e)}findBeatAtPos(e,t){let i=null,n=1e7;for(let s of this.bars){let o=s.findBeatAtPos(e);if(o&&(!i||i.realBounds.x<o.realBounds.x)){const c=Math.abs(o.realBounds.x-e);(!i||c<n)&&(i=o)}}return i?i.beat:null}finish(){this.bars.sort((e,t)=>e.realBounds.y<t.realBounds.y?-1:e.realBounds.y>t.realBounds.y?1:e.realBounds.x<t.realBounds.x?-1:e.realBounds.x>t.realBounds.x?1:0);for(const e of this.bars)e.finish()}addBeat(e){this.staveGroupBounds.boundsLookup.addBeat(e)}}class oS{}class zC{constructor(){this.index=0,this.bars=[]}finish(){for(let e of this.bars)e.finish()}addBar(e){this.boundsLookup.addMasterBar(e),e.staveGroupBounds=this,this.bars.push(e)}findBarAtPos(e){let t=null;for(let i of this.bars)if(!t||i.realBounds.x<e)t=i;else if(e>i.realBounds.x+i.realBounds.w)break;return t}}class cm{constructor(){this._beatLookup=new Map,this._masterBarLookup=new Map,this._currentStaveGroup=null,this.staveGroups=[],this.isFinished=!1}toJson(){let e={},t=[];e.staveGroups=t;for(let i of this.staveGroups){let n={};n.visualBounds=this.boundsToJson(i.visualBounds),n.realBounds=this.boundsToJson(i.realBounds),n.bars=[];for(let s of i.bars){let o={};o.lineAlignedBounds=this.boundsToJson(s.lineAlignedBounds),o.visualBounds=this.boundsToJson(s.visualBounds),o.realBounds=this.boundsToJson(s.realBounds),o.index=s.index,o.bars=[];for(let c of s.bars){let h={};h.visualBounds=this.boundsToJson(c.visualBounds),h.realBounds=this.boundsToJson(c.realBounds),h.beats=[];for(let p of c.beats){let g={};g.visualBounds=this.boundsToJson(p.visualBounds),g.realBounds=this.boundsToJson(p.realBounds);let b=g;if(b.beatIndex=p.beat.index,b.voiceIndex=p.beat.voice.index,b.barIndex=p.beat.voice.bar.index,b.staffIndex=p.beat.voice.bar.staff.index,b.trackIndex=p.beat.voice.bar.staff.track.index,p.notes){let v=g.notes=[];for(let S of p.notes){let B={},T=B;T.index=S.note.index,B.noteHeadBounds=this.boundsToJson(S.noteHeadBounds),v.push(B)}}h.beats.push(g)}o.bars.push(h)}n.bars.push(o)}t.push(n)}return e}static fromJson(e,t){let i=new cm,n=e.staveGroups;for(let s of n){let o=new zC;o.visualBounds=s.visualBounds,o.realBounds=s.realBounds,i.addStaveGroup(o);for(let c of s.bars){let h=new VC;h.index=c.index,h.isFirstOfLine=c.isFirstOfLine,h.lineAlignedBounds=c.lineAlignedBounds,h.visualBounds=c.visualBounds,h.realBounds=c.realBounds,o.addBar(h);for(let p of c.bars){let g=new DC;g.visualBounds=p.visualBounds,g.realBounds=p.realBounds,h.addBar(g);for(let b of p.beats){let v=new AC;v.visualBounds=b.visualBounds,v.realBounds=b.realBounds;let S=b;if(v.beat=t.tracks[S.trackIndex].staves[S.staffIndex].bars[S.barIndex].voices[S.voiceIndex].beats[S.beatIndex],b.notes){v.notes=[];for(let B of b.notes){let T=new oS,C=B;T.note=v.beat.notes[C.index],T.noteHeadBounds=B.noteHeadBounds,v.addNote(T)}}g.addBeat(v)}}}}return i}boundsToJson(e){let t={};return t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h,t}finish(){for(let e of this.staveGroups)e.finish();this.isFinished=!0}addStaveGroup(e){e.index=this.staveGroups.length,e.boundsLookup=this,this.staveGroups.push(e),this._currentStaveGroup=e}addMasterBar(e){e.staveGroupBounds?this._masterBarLookup.set(e.index,e):(e.staveGroupBounds=this._currentStaveGroup,this._masterBarLookup.set(e.index,e),this._currentStaveGroup.addBar(e))}addBeat(e){var t;this._beatLookup.has(e.beat.id)||this._beatLookup.set(e.beat.id,[]),(t=this._beatLookup.get(e.beat.id))==null||t.push(e)}findMasterBarByIndex(e){return this._masterBarLookup.has(e)?this._masterBarLookup.get(e):null}findMasterBar(e){let t=e.index;return this._masterBarLookup.has(t)?this._masterBarLookup.get(t):null}findBeat(e){const t=this.findBeats(e);return t?t[0]:null}findBeats(e){let t=e.id;return this._beatLookup.has(t)?this._beatLookup.get(t):null}getBeatAtPos(e,t){let i=0,n=this.staveGroups.length-1,s=-1;for(;i<=n;){let h=(n+i)/2|0,p=this.staveGroups[h];if(t>=p.realBounds.y&&t<=p.realBounds.y+p.realBounds.h){s=h;break}t<p.realBounds.y?n=h-1:i=h+1}if(s===-1)return null;let c=this.staveGroups[s].findBarAtPos(e);return c?c.findBeatAtPos(e,t):null}getNoteAtPos(e,t,i){const n=this.findBeats(e);if(n)for(const s of n){const o=s.findNoteAtPos(t,i);if(o)return o}return null}}class WC{constructor(e){this._currentLayoutMode=ru.Page,this._currentRenderEngine=null,this._renderedTracks=null,this.canvas=null,this.score=null,this.tracks=null,this.layout=null,this.boundsLookup=null,this.width=0,this.preRender=new Qt,this.renderFinished=new Qt,this.partialRenderFinished=new Qt,this.partialLayoutFinished=new Qt,this.postRenderFinished=new $r,this.error=new Qt,this.settings=e,this.recreateCanvas(),this.recreateLayout()}destroy(){var e;this.score=null,(e=this.canvas)==null||e.destroy(),this.canvas=null,this.layout=null,this.boundsLookup=null,this.tracks=null}recreateCanvas(){var e;return this._currentRenderEngine!==this.settings.core.engine?((e=this.canvas)==null||e.destroy(),this.canvas=Ce.getRenderEngineFactory(this.settings.core.engine).createCanvas(),this._currentRenderEngine=this.settings.core.engine,!0):!1}recreateLayout(){return!this.layout||this._currentLayoutMode!==this.settings.display.layoutMode?(this.layout=Ce.getLayoutEngineFactory(this.settings.display.layoutMode).createLayout(this),this._currentLayoutMode=this.settings.display.layoutMode,!0):!1}renderScore(e,t){try{this.score=e;let i=null;if(e!=null&&t!=null){if(!t)i=e.tracks.slice(0);else{i=[];for(let n of t)n>=0&&n<e.tracks.length&&i.push(e.tracks[n])}i.length===0&&e.tracks.length>0&&i.push(e.tracks[0])}this.tracks=i,this.render()}catch(i){this.error.trigger(i)}}renderTracks(e){e.length===0?this.score=null:this.score=e[0].score,this.tracks=e,this.render()}updateSettings(e){this.settings=e}renderResult(e){try{const t=this.layout;t?(ye.debug("Rendering","Request render of lazy partial "+e),t.renderLazyPartial(e)):ye.warning("Rendering","Request render of lazy partial "+e+" ignored, no layout exists")}catch(t){this.error.trigger(t)}}render(){if(this.width===0){ye.warning("Rendering","AlphaTab skipped rendering because of width=0 (element invisible)",null);return}if(this.boundsLookup=new cm,this.recreateCanvas(),this.canvas.lineWidth=this.settings.display.scale,this.canvas.settings=this.settings,!this.tracks||this.tracks.length===0||!this.score)ye.debug("Rendering","Clearing rendered tracks because no score or tracks are set"),this.preRender.trigger(!1),this._renderedTracks=null,this.onRenderFinished(),this.postRenderFinished.trigger(),ye.debug("Rendering","Clearing finished");else{ye.debug("Rendering","Rendering "+this.tracks.length+" tracks");for(let e=0;e<this.tracks.length;e++){let t=this.tracks[e];ye.debug("Rendering","Track "+e+": "+t.name)}this.preRender.trigger(!1),this.recreateLayout(),this.layoutAndRender(),ye.debug("Rendering","Rendering finished")}}resizeRender(){this.recreateLayout()||this.recreateCanvas()||this._renderedTracks!==this.tracks||!this.tracks?(ye.debug("Rendering","Starting full rerendering due to layout or canvas change",null),this.render()):this.layout.supportsResize?(ye.debug("Rendering","Starting optimized rerendering for resize"),this.boundsLookup=new cm,this.preRender.trigger(!0),this.canvas.settings=this.settings,this.layout.resize(),this.onRenderFinished(),this.postRenderFinished.trigger()):ye.debug("Rendering","Current layout does not support dynamic resizing, nothing was done",null),ye.debug("Rendering","Resize finished")}layoutAndRender(){ye.debug("Rendering","Rendering at scale "+this.settings.display.scale+" with layout "+this.layout.name,null),this.layout.layoutAndRender(),this._renderedTracks=this.tracks,this.onRenderFinished(),this.postRenderFinished.trigger()}onRenderFinished(){var t;(t=this.boundsLookup)==null||t.finish();const e=new Bh;e.totalHeight=this.layout.height,e.totalWidth=this.layout.width,e.renderResult=this.canvas.onRenderFinished(),this.renderFinished.trigger(e)}}class lS{constructor(e){this._main=e,this._main.addEventListener("message",this.handleMessage.bind(this),!1)}static init(){Ce.globalThis.alphaTabWebWorker=new lS(Ce.globalThis)}handleMessage(e){let t=e.data;switch(t?t.cmd:""){case"alphaTab.initialize":let n=Cr.jsObjectToSettings(t.settings);ye.logLevel=n.core.logLevel,this._renderer=new WC(n),this._renderer.partialRenderFinished.on(o=>{this._main.postMessage({cmd:"alphaTab.partialRenderFinished",result:o})}),this._renderer.partialLayoutFinished.on(o=>{this._main.postMessage({cmd:"alphaTab.partialLayoutFinished",result:o})}),this._renderer.renderFinished.on(o=>{this._main.postMessage({cmd:"alphaTab.renderFinished",result:o})}),this._renderer.postRenderFinished.on(()=>{var o;this._main.postMessage({cmd:"alphaTab.postRenderFinished",boundsLookup:((o=this._renderer.boundsLookup)==null?void 0:o.toJson())??null})}),this._renderer.preRender.on(o=>{this._main.postMessage({cmd:"alphaTab.preRender",resize:o})}),this._renderer.error.on(this.error.bind(this));break;case"alphaTab.invalidate":this._renderer.render();break;case"alphaTab.resizeRender":this._renderer.resizeRender();break;case"alphaTab.renderResult":this._renderer.renderResult(t.resultId);break;case"alphaTab.setWidth":this._renderer.width=t.width;break;case"alphaTab.renderScore":this.updateFontSizes(t.fontSizes);let s=t.score==null?null:Cr.jsObjectToScore(t.score,this._renderer.settings);this.renderMultiple(s,t.trackIndexes);break;case"alphaTab.updateSettings":this.updateSettings(t.settings);break}}updateFontSizes(e){if(e){Nr.FontSizeLookupTables||(Nr.FontSizeLookupTables=new Map);for(let t in e)Nr.FontSizeLookupTables.set(t,e[t])}}updateSettings(e){Vf.fromJson(this._renderer.settings,e)}renderMultiple(e,t){try{this._renderer.renderScore(e,t)}catch(i){this.error(i)}}error(e){ye.error("Worker","An unexpected error occurred in worker",e),this._main.postMessage({cmd:"alphaTab.error",error:e})}}class qz{constructor(){this._canvas=null,this._color=new _i(0,0,0,255),this._font=new ri("Arial",10,lr.Plain),this._lineWidth=0;let e=document.createElement("span");e.classList.add("at"),document.body.appendChild(e);let t=window.getComputedStyle(e),i=t.fontFamily;(i.startsWith('"')||i.startsWith("'"))&&(i=i.substr(1,i.length-2)),this._musicFont=new ri(i,parseFloat(t.fontSize),lr.Plain),this._measureCanvas=document.createElement("canvas"),this._measureCanvas.width=10,this._measureCanvas.height=10,this._measureCanvas.style.width="10px",this._measureCanvas.style.height="10px",this._measureContext=this._measureCanvas.getContext("2d"),this._measureContext.textBaseline="hanging"}destroy(){}onRenderFinished(){return null}beginRender(e,t){this._canvas=document.createElement("canvas"),this._canvas.width=e*Ce.HighDpiFactor|0,this._canvas.height=t*Ce.HighDpiFactor|0,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px",this._context=this._canvas.getContext("2d"),this._context.textBaseline="hanging",this._context.scale(Ce.HighDpiFactor,Ce.HighDpiFactor),this._context.lineWidth=this._lineWidth}endRender(){let e=this._canvas;return this._canvas=null,e}get color(){return this._color}set color(e){this._color.rgba!==e.rgba&&(this._color=e,this._context.strokeStyle=e.rgba,this._context.fillStyle=e.rgba)}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this._context&&(this._context.lineWidth=e)}fillRect(e,t,i,n){i>0&&this._context.fillRect(e|0,t|0,i,n)}strokeRect(e,t,i,n){this._context.strokeRect(e|0,t|0,i,n)}beginPath(){this._context.beginPath()}closePath(){this._context.closePath()}moveTo(e,t){this._context.moveTo(e,t)}lineTo(e,t){this._context.lineTo(e,t)}quadraticCurveTo(e,t,i,n){this._context.quadraticCurveTo(e,t,i,n)}bezierCurveTo(e,t,i,n,s,o){this._context.bezierCurveTo(e,t,i,n,s,o)}fillCircle(e,t,i){this._context.beginPath(),this._context.arc(e,t,i,0,Math.PI*2,!0),this.fill()}strokeCircle(e,t,i){this._context.beginPath(),this._context.arc(e,t,i,0,Math.PI*2,!0),this.stroke()}fill(){this._context.fill(),this._context.beginPath()}stroke(){this._context.stroke(),this._context.beginPath()}get font(){return this._font}set font(e){this._font=e,this._context&&(this._context.font=e.toCssString(this.settings.display.scale)),this._measureContext.font=e.toCssString(this.settings.display.scale)}get textAlign(){switch(this._context.textAlign){case"left":return at.Left;case"center":return at.Center;case"right":return at.Right;default:return at.Left}}set textAlign(e){switch(e){case at.Left:this._context.textAlign="left";break;case at.Center:this._context.textAlign="center";break;case at.Right:this._context.textAlign="right";break}}get textBaseline(){switch(this._context.textBaseline){case"hanging":return It.Top;case"middle":return It.Middle;case"bottom":return It.Bottom;default:return It.Top}}set textBaseline(e){switch(e){case It.Top:this._context.textBaseline="hanging";break;case It.Middle:this._context.textBaseline="middle";break;case It.Bottom:this._context.textBaseline="bottom";break}}beginGroup(e){}endGroup(){}fillText(e,t,i){this._context.fillText(e,t,i)}measureText(e){return this._measureContext.measureText(e).width}fillMusicFontSymbol(e,t,i,n,s=!1){n!==N.None&&this.fillMusicFontSymbolText(e,t,i,String.fromCharCode(n),s)}fillMusicFontSymbols(e,t,i,n,s=!1){let o="";for(let c of n)c!==N.None&&(o+=String.fromCharCode(c));this.fillMusicFontSymbolText(e,t,i,o,s)}fillMusicFontSymbolText(e,t,i,n,s=!1){let o=this._context.textAlign,c=this._context.textBaseline,h=this._context.font;this._context.font=this._musicFont.toCssString(i),this._context.textBaseline="middle",s?this._context.textAlign="center":this._context.textAlign="left",this._context.fillText(n,e,t),this._context.textBaseline=c,this._context.font=h,this._context.textAlign=o}beginRotate(e,t,i){this._context.save(),this._context.translate(e,t),this._context.rotate(i*Math.PI/180)}endRotate(){this._context.restore()}}class nl{constructor(e,t=!1){this._midiFile=e,this._smf1Mode=t}addTimeSignature(e,t,i){let n=0,s=i;for(;s=s>>1,s>0;)n++;this._midiFile.addEvent(new SC(0,e,t,n,48,8))}addRest(e,t,i){this._smf1Mode||this._midiFile.addEvent(new _C(e,t,i))}addNote(e,t,i,n,s,o){this._midiFile.addEvent(new TC(e,t,o,nl.fixValue(n),nl.fixValue(s))),this._midiFile.addEvent(new CC(e,t+i,o,nl.fixValue(n),nl.fixValue(s)))}static fixValue(e){return e>127?127:e<0?0:e}addControlChange(e,t,i,n,s){this._midiFile.addEvent(new NC(e,t,i,n,nl.fixValue(s)))}addProgramChange(e,t,i,n){this._midiFile.addEvent(new PC(e,t,i,n))}addTempo(e,t){const i=6e7/t|0;this._midiFile.addEvent(new EC(e,i))}addBend(e,t,i,n){n>=Lt.MaxPitchWheel?n=Lt.MaxPitchWheel:n=Math.floor(n),this._midiFile.addEvent(new RC(e,t,i,n))}addNoteBend(e,t,i,n,s){this._smf1Mode?this.addBend(e,t,i,s):(s=s*Lt.MaxPitchWheel20/Lt.MaxPitchWheel,this._midiFile.addEvent(new LC(e,t,i,n,s)))}finishTrack(e,t){(this._midiFile.format==Af.MultiTrack||e==0)&&this._midiFile.addEvent(new IC(e,t))}}class Xz{constructor(e,t){this.closingIndex=0,this.group=e,this.opening=t,e.closings=e.closings.sort((i,n)=>i.index-n.index),this.iterations=e.closings.map(i=>0)}}class Kz{get finished(){return this.index>=this._score.masterBars.length}constructor(e){this._repeatStack=[],this._groupsOnStack=new Set,this._previousAlternateEndings=0,this.shouldPlay=!0,this.index=0,this.currentTick=0,this._score=e}processCurrent(){const e=this._score.masterBars[this.index];let t=e.alternateEndings;if(t===0&&(t=this._previousAlternateEndings),e===e.repeatGroup.opening&&e.repeatGroup.isClosed&&!this._groupsOnStack.has(e.repeatGroup)){const i=new Xz(e.repeatGroup,e);this._repeatStack.push(i),this._groupsOnStack.add(e.repeatGroup),this._previousAlternateEndings=0,t=e.alternateEndings}if(this._repeatStack.length===0||t===0)this.shouldPlay=!0;else{const i=this._repeatStack[this._repeatStack.length-1],n=i.iterations[i.closingIndex];this._previousAlternateEndings=t,t&1<<n?this.shouldPlay=!0:this.shouldPlay=!1}this.shouldPlay&&(this.currentTick+=e.calculateDuration())}moveNext(){const t=this._score.masterBars[this.index].repeatCount-1;if(this._repeatStack.length>0&&t>0){const i=this._repeatStack[this._repeatStack.length-1];if(i.iterations[i.closingIndex]<t){this.index=i.opening.index,i.iterations[i.closingIndex]++;for(let s=0;s<i.closingIndex;s++)i.iterations[s]=0;i.closingIndex=0,this._previousAlternateEndings=0}else i.closingIndex<i.group.closings.length-1?(i.closingIndex++,this.index++):(this._repeatStack.pop(),this._groupsOnStack.delete(i.group),this.index++)}else this.index++}}class Qz{constructor(e,t){this.beat=e,this.playbackStart=t}}class Na{get duration(){return this.end-this.start}constructor(e,t){this._highlightedBeats=new Map,this.highlightedBeats=[],this.nextBeat=null,this.previousBeat=null,this.start=e,this.end=t}highlightBeat(e,t){e.isEmpty&&!e.voice.isEmpty||this._highlightedBeats.has(e.id)||(this._highlightedBeats.set(e.id,!0),this.highlightedBeats.push(new Qz(e,t)))}getVisibleBeatAtStart(e){for(const t of this.highlightedBeats)if(t.playbackStart==this.start&&e.has(t.beat.voice.bar.staff.track.index))return t.beat;return null}}class HC{constructor(){this.start=0,this.end=0,this.tempo=0,this.firstBeat=null,this.lastBeat=null,this.nextMasterBar=null,this.previousMasterBar=null}insertAfter(e,t){this.firstBeat==null||e==null||this.lastBeat==null?(this.firstBeat=t,this.lastBeat=t):(t.nextBeat=e.nextBeat,t.previousBeat=e,e.nextBeat&&(e.nextBeat.previousBeat=t),e.nextBeat=t,e==this.lastBeat&&(this.lastBeat=t))}insertBefore(e,t){this.firstBeat==null||e==null||this.lastBeat==null?(this.firstBeat=t,this.lastBeat=t):(t.previousBeat=e.previousBeat,t.nextBeat=e,e.previousBeat&&(e.previousBeat.nextBeat=t),e.previousBeat=t,e==this.firstBeat&&(this.firstBeat=t))}addBeat(e,t,i,n){const s=i+n;if(this.firstBeat==null){const o=new Na(i,s);o.highlightBeat(e,t),this.insertAfter(this.firstBeat,o)}else if(i>=this.lastBeat.end){const o=new Na(this.lastBeat.end,s);o.highlightBeat(e,t),this.insertAfter(this.lastBeat,o)}else{let o=null;if(i<this.firstBeat.start)o=this.firstBeat;else{let c=this.firstBeat;for(;c!=null;){if(i>=c.start&&i<c.end){o=c;break}c=c.nextBeat}if(o===null)throw new sn(nn.General,"Error on building lookup, unknown variant")}if(i<o.start)if(s==o.start){const c=new Na(i,o.start);c.highlightBeat(e,t),this.insertBefore(this.firstBeat,c)}else if(s<o.end){const c=new Na(i,o.start);c.highlightBeat(e,t),this.insertBefore(o,c);const h=new Na(o.start,s);for(const p of o.highlightedBeats)h.highlightBeat(p.beat,p.playbackStart);h.highlightBeat(e,t),this.insertBefore(o,h),o.start=s}else if(s==o.end){const c=new Na(i,o.start);c.highlightBeat(e,t),o.highlightBeat(e,t),this.insertBefore(o,c)}else{const c=new Na(i,o.start);c.highlightBeat(e,t),o.highlightBeat(e,t),this.insertBefore(o,c),this.addBeat(e,t,o.end,s-o.end)}else if(i>o.start)if(s==o.end){const c=new Na(o.start,i);for(const h of o.highlightedBeats)c.highlightBeat(h.beat,h.playbackStart);o.start=i,o.highlightBeat(e,t),this.insertBefore(o,c)}else if(s<o.end){const c=new Na(o.start,i);this.insertBefore(o,c);const h=new Na(i,s);this.insertBefore(o,h);for(const p of o.highlightedBeats)c.highlightBeat(p.beat,p.playbackStart),h.highlightBeat(p.beat,p.playbackStart);h.highlightBeat(e,t),o.start=s}else{const c=new Na(o.start,i);for(const h of o.highlightedBeats)c.highlightBeat(h.beat,h.playbackStart);o.start=i,o.highlightBeat(e,t),this.insertBefore(o,c),this.addBeat(e,t,o.end,s-o.end)}else if(s===o.end)o.highlightBeat(e,t);else if(s<o.end){const c=new Na(o.start,s);for(const h of o.highlightedBeats)c.highlightBeat(h.beat,h.playbackStart);c.highlightBeat(e,t),o.start=s,this.insertBefore(o,c)}else o.highlightBeat(e,t),this.addBeat(e,t,o.end,s-o.end)}}}class Jz{get start(){return this.masterBar.start+this.beatLookup.start}get end(){return this.start+this.tickDuration}constructor(e){this.nextBeat=null,this.tickDuration=0,this.duration=0,this.masterBar=e}}class Zz{constructor(){this._currentMasterBar=null,this.masterBarLookup=new Map,this.masterBars=[]}findBeat(e,t,i=null){let n=null;return i&&(n=this.findBeatFast(e,i,t)),n||(n=this.findBeatSlow(e,i,t,!1)),n}findBeatFast(e,t,i){if(i>=t.start&&i<t.end)return t;if(t.nextBeat&&i>=t.nextBeat.start&&i<t.nextBeat.end){const n=t.nextBeat;return this.fillNextBeat(n,e),n}return null}fillNextBeat(e,t){e.nextBeat=this.findBeatInMasterBar(e.masterBar,e.beatLookup.nextBeat,e.end,t,!1,!0),e.nextBeat==null&&(e.nextBeat=this.findBeatSlow(t,e,e.end,!0)),e.nextBeat&&(e.tickDuration=e.nextBeat.start-e.start,e.duration=Ct.ticksToMillis(e.tickDuration,e.masterBar.tempo)),e.nextBeat||(e.tickDuration=e.masterBar.end-e.start,e.duration=Ct.ticksToMillis(e.tickDuration,e.masterBar.tempo))}findBeatSlow(e,t,i,n){let s=null;if(t!=null&&(t.masterBar.start<=i&&t.masterBar.end>i?s=t.masterBar:t.masterBar.nextMasterBar&&t.masterBar.nextMasterBar.start<=i&&t.masterBar.nextMasterBar.end>i&&(s=t.masterBar.nextMasterBar)),s||(s=this.findMasterBar(i)),!s)return null;for(;s;){if(s.firstBeat){let o=this.findBeatInMasterBar(s,s.firstBeat,i,e,!0,n);if(o)return o}s=s.nextMasterBar}return null}findBeatInMasterBar(e,t,i,n,s,o){if(!t)return null;let c=null,h=null;const p=i-e.start;for(;t!=null&&h==null;){if(t.start<=p&&p<t.end){if(c=t,h=t.getVisibleBeatAtStart(n),!h)if(o){let b=e;for(;b!=null&&h==null;){for(;t!=null;){if(h=t.getVisibleBeatAtStart(n),h){c=t,e=b;break}t=t.nextBeat}(!h||!c)&&(b=b.nextMasterBar,t=(b==null?void 0:b.firstBeat)??null)}}else{let b=e;for(;b!=null&&h==null;){for(;t!=null;){if(h=t.getVisibleBeatAtStart(n),h){c=t,e=b;break}t=t.previousBeat}(!h||!c)&&(b=b.previousMasterBar,t=(b==null?void 0:b.firstBeat)??null)}}}else if(t.end>p)break;t=(t==null?void 0:t.nextBeat)??null}return h==null?null:this.createResult(e,c,h,s,n)}createResult(e,t,i,n,s){const o=new Jz(e);return o.beat=i,o.beatLookup=t,o.tickDuration=t.end-t.start,n&&this.fillNextBeat(o,s),o.duration=Ct.ticksToMillis(o.tickDuration,e.tempo),o}findMasterBar(e){const t=this.masterBars;let i=0,n=t.length-1;for(;i<=n;){const s=(n+i)/2|0,o=t[s];if(e>=o.start&&e<o.end)return o;e<o.start?n=s-1:i=s+1}return null}getMasterBar(e){if(!this.masterBarLookup.has(e.index)){const t=new HC;return t.masterBar=e,t}return this.masterBarLookup.get(e.index)}getMasterBarStart(e){return this.masterBarLookup.has(e.index)?this.masterBarLookup.get(e.index).start:0}getBeatStart(e){return this.masterBarLookup.has(e.voice.bar.index)?this.masterBarLookup.get(e.voice.bar.index).start+e.playbackStart:0}addMasterBar(e){this.masterBars.push(e),this._currentMasterBar&&(e.previousMasterBar=this._currentMasterBar,this._currentMasterBar.nextMasterBar=e),this._currentMasterBar=e,this.masterBarLookup.has(e.masterBar.index)||this.masterBarLookup.set(e.masterBar.index,e)}addBeat(e,t,i){const n=this._currentMasterBar;if(n)if(t<0&&n.previousMasterBar){const s=n.previousMasterBar.end-n.previousMasterBar.start,o=s+t,c=o+i;if(n.previousMasterBar.addBeat(e,o,o,i),c>s){const h=i+t;n.addBeat(e,t,0,h)}}else n.addBeat(e,t,t,i)}}class eW{constructor(){this.noteOnly=0,this.untilTieOrSlideEnd=0,this.letRingEnd=0}}class tW{constructor(){this.firstBeatDuration=0,this.secondBeatStartOffset=0,this.secondBeatDuration=0}}class yi{constructor(e,t,i){this._currentTempo=0,this._programsPerChannel=new Map,this.tickLookup=new Zz,this.applyTranspositionPitches=!0,this.transpositionPitches=new Map,this._currentTripletFeel=null,this.vibratoResolution=16,this._score=e,this._settings=t||new Ih,this._currentTempo=this._score.tempo,this._handler=i}generate(){this.transpositionPitches.clear();for(const i of this._score.tracks)this.generateTrack(i);ye.debug("Midi","Begin midi generation");const e=new Kz(this._score);let t=null;for(;!e.finished;){const i=e.index,n=this._score.masterBars[i],s=e.currentTick;if(e.processCurrent(),e.shouldPlay){this.generateMasterBar(n,t,s);for(const o of this._score.tracks)for(const c of o.staves)i<c.bars.length&&this.generateBar(c.bars[i],s)}e.moveNext(),t=n}for(const i of this._score.tracks)this._handler.finishTrack(i.index,e.currentTick);ye.debug("Midi","Midi generation done")}generateTrack(e){this.generateChannel(e,e.playbackInfo.primaryChannel,e.playbackInfo),e.playbackInfo.primaryChannel!==e.playbackInfo.secondaryChannel&&this.generateChannel(e,e.playbackInfo.secondaryChannel,e.playbackInfo)}addProgramChange(e,t,i,n){(!this._programsPerChannel.has(i)||this._programsPerChannel.get(i)!==n)&&(this._handler.addProgramChange(e.index,t,i,n),this._programsPerChannel.set(i,n))}static buildTranspositionPitches(e,t){const i=new Map;for(const n of e.tracks){const s=n.index<t.notation.transpositionPitches.length?t.notation.transpositionPitches[n.index]:0;i.set(n.playbackInfo.primaryChannel,s),i.set(n.playbackInfo.secondaryChannel,s)}return i}generateChannel(e,t,i){const n=e.index<this._settings.notation.transpositionPitches.length?this._settings.notation.transpositionPitches[e.index]:0;this.transpositionPitches.set(t,n);let s=yi.toChannelShort(i.volume),o=yi.toChannelShort(i.balance);this._handler.addControlChange(e.index,0,t,ki.VolumeCoarse,s),this._handler.addControlChange(e.index,0,t,ki.PanCoarse,o),this._handler.addControlChange(e.index,0,t,ki.ExpressionControllerCoarse,127),this._handler.addControlChange(e.index,0,t,ki.RegisteredParameterFine,0),this._handler.addControlChange(e.index,0,t,ki.RegisteredParameterCourse,0),this._handler.addControlChange(e.index,0,t,ki.DataEntryFine,0),this._handler.addControlChange(e.index,0,t,ki.DataEntryCoarse,yi.PitchBendRangeInSemitones),this.addProgramChange(e,0,t,i.program)}static toChannelShort(e){const t=Math.max(-32768,Math.min(32767,e*8-1));return Math.max(t,-1)+1}generateMasterBar(e,t,i){(!t||t.timeSignatureDenominator!==e.timeSignatureDenominator||t.timeSignatureNumerator!==e.timeSignatureNumerator)&&this._handler.addTimeSignature(i,e.timeSignatureNumerator,e.timeSignatureDenominator),e.tempoAutomation?(this._handler.addTempo(i,e.tempoAutomation.value),this._currentTempo=e.tempoAutomation.value):t||(this._handler.addTempo(i,e.score.tempo),this._currentTempo=e.score.tempo);const n=new HC;n.masterBar=e,n.start=i,n.tempo=this._currentTempo,n.end=n.start+e.calculateDuration(),this.tickLookup.addMasterBar(n)}generateBar(e,t){let i=this.getPlaybackBar(e);for(const n of i.voices)this.generateVoice(n,t,e)}getPlaybackBar(e){switch(e.simileMark){case da.Simple:e.previousBar&&(e=this.getPlaybackBar(e.previousBar));break;case da.FirstOfDouble:e.previousBar&&e.previousBar.previousBar&&(e=this.getPlaybackBar(e.previousBar.previousBar));break;case da.SecondOfDouble:e.previousBar&&e.previousBar.previousBar&&(e=this.getPlaybackBar(e.previousBar.previousBar));break}return e}generateVoice(e,t,i){if(!(e.isEmpty&&(!e.bar.isEmpty||e.index!==0)))for(const n of e.beats)this.generateBeat(n,t,i)}generateBeat(e,t,i){let n=e.playbackStart,s=e.playbackDuration;e.voice.bar.isEmpty?s=e.voice.bar.masterBar.calculateDuration():e.voice.bar.masterBar.tripletFeel!==Mt.NoTripletFeel&&this._settings.player.playTripletFeel&&(this._currentTripletFeel?(n-=this._currentTripletFeel.secondBeatStartOffset,s=this._currentTripletFeel.secondBeatDuration,this._currentTripletFeel=null):(this._currentTripletFeel=yi.calculateTripletFeelInfo(n,s,e),this._currentTripletFeel&&(s=this._currentTripletFeel.firstBeatDuration))),i===e.voice.bar?this.tickLookup.addBeat(e,n,s):this.tickLookup.addBeat(e,0,s);const o=e.voice.bar.staff.track;for(const c of e.automations)this.generateAutomation(e,c,t);if(e.isRest)this._handler.addRest(o.index,t+n,o.playbackInfo.primaryChannel);else{let c=this.getBrushInfo(e);for(const h of e.notes)this.generateNote(h,t+n,s,c)}if(e.vibrato!==ni.None){let c=240,h=3;switch(e.vibrato){case ni.Slight:c=this._settings.player.vibrato.beatSlightLength,h=this._settings.player.vibrato.beatSlightAmplitude;break;case ni.Wide:c=this._settings.player.vibrato.beatWideLength,h=this._settings.player.vibrato.beatWideAmplitude;break}this.generateVibratorWithParams(t+n,e.playbackDuration,c,h,(p,g)=>{this._handler.addBend(e.voice.bar.staff.track.index,p,o.playbackInfo.secondaryChannel,g)})}}static calculateTripletFeelInfo(e,t,i){let n;switch(i.voice.bar.masterBar.tripletFeel){case Mt.Triplet8th:case Mt.Dotted8th:case Mt.Scottish8th:n=Y.Eighth;break;case Mt.Triplet16th:case Mt.Dotted16th:case Mt.Scottish16th:n=Y.Sixteenth;break;default:return null}const s=Ct.toTicks(n);if(t!==s||e%s!==0||!i.nextBeat||i.nextBeat.voice!==i.voice||i.playbackDuration!==s)return null;const o=new tW;switch(i.voice.bar.masterBar.tripletFeel){case Mt.Triplet8th:o.firstBeatDuration=Ct.applyTuplet(Ct.toTicks(Y.Quarter),3,2),o.secondBeatDuration=Ct.applyTuplet(Ct.toTicks(Y.Eighth),3,2);break;case Mt.Dotted8th:o.firstBeatDuration=Ct.applyDot(Ct.toTicks(Y.Eighth),!1),o.secondBeatDuration=Ct.toTicks(Y.Sixteenth);break;case Mt.Scottish8th:o.firstBeatDuration=Ct.toTicks(Y.Sixteenth),o.secondBeatDuration=Ct.applyDot(Ct.toTicks(Y.Eighth),!1);break;case Mt.Triplet16th:o.firstBeatDuration=Ct.applyTuplet(Ct.toTicks(Y.Eighth),3,2),o.secondBeatDuration=Ct.applyTuplet(Ct.toTicks(Y.Sixteenth),3,2);break;case Mt.Dotted16th:o.firstBeatDuration=Ct.applyDot(Ct.toTicks(Y.Sixteenth),!1),o.secondBeatDuration=Ct.toTicks(Y.ThirtySecond);break;case Mt.Scottish16th:o.firstBeatDuration=Ct.toTicks(Y.ThirtySecond),o.secondBeatDuration=Ct.applyDot(Ct.toTicks(Y.Sixteenth),!1);break}return o.secondBeatStartOffset=t-o.firstBeatDuration,o}generateNote(e,t,i,n){const s=e.beat.voice.bar.staff.track,o=e.beat.voice.bar.staff;let c=e.calculateRealValue(this.applyTranspositionPitches,!0);if(e.isPercussion){const B=hn.getArticulation(e);B&&(c=B.outputMidiNumber)}const h=e.isStringed&&e.string<=n.length?n[e.string-1]:0,p=t+h,g=this.getNoteDuration(e,i);g.untilTieOrSlideEnd-=h,g.noteOnly-=h,g.letRingEnd-=h;const b=yi.getNoteVelocity(e),v=e.hasBend||e.beat.hasWhammyBar||e.beat.vibrato!==ni.None?s.playbackInfo.secondaryChannel:s.playbackInfo.primaryChannel;let S=0;if(e.hasBend?S=yi.getPitchWheel(e.bendPoints[0].value):e.beat.hasWhammyBar?S=yi.getPitchWheel(e.beat.whammyBarPoints[0].value):e.isTieDestination||e.slideOrigin&&e.slideOrigin.slideOutType===Et.Legato?S=-1:S=yi.getPitchWheel(0),S>=0&&this._handler.addNoteBend(s.index,p,v,c,S),e.beat.fadeIn&&this.generateFadeIn(e,p,g),e.isTrill&&!o.isPercussion){this.generateTrill(e,p,g,c,b,v);return}if(e.beat.isTremolo){this.generateTremoloPicking(e,p,g,c,b,v);return}if(e.hasBend?this.generateBend(e,p,g,c,v):e.beat.hasWhammyBar&&e.index===0?this.generateWhammy(e.beat,p,g,v):e.slideInType!==rn.None||e.slideOutType!==Et.None?this.generateSlide(e,p,g,c,v):(e.vibrato!==ni.None||e.isTieDestination&&e.tieOrigin.vibrato!==ni.None)&&this.generateVibrato(e,p,g,c,v),!e.isTieDestination&&(!e.slideOrigin||e.slideOrigin.slideOutType!==Et.Legato)){let B=Math.max(g.untilTieOrSlideEnd,g.letRingEnd);this._handler.addNote(s.index,p,B,c,b,v)}}getNoteDuration(e,t){const i=new eW;if(i.noteOnly=t,i.untilTieOrSlideEnd=t,i.letRingEnd=t,e.isDead)return i.noteOnly=this.applyStaticDuration(yi.DefaultDurationDead,t),i.untilTieOrSlideEnd=i.noteOnly,i.letRingEnd=i.noteOnly,i;if(e.isPalmMute)return i.noteOnly=this.applyStaticDuration(yi.DefaultDurationPalmMute,t),i.untilTieOrSlideEnd=i.noteOnly,i.letRingEnd=i.noteOnly,i;if(e.isStaccato)return i.noteOnly=t/2|0,i.untilTieOrSlideEnd=i.noteOnly,i.letRingEnd=i.noteOnly,i;if(e.isTieOrigin){const n=e.tieDestination;if(n)if(e.isTieDestination){const s=this.getNoteDuration(n,n.beat.playbackDuration);i.untilTieOrSlideEnd=t+s.untilTieOrSlideEnd}else{const s=e.beat.absolutePlaybackStart,o=this.getNoteDuration(n,n.beat.playbackDuration),c=n.beat.absolutePlaybackStart+o.untilTieOrSlideEnd;i.untilTieOrSlideEnd=c-s}}else if(e.slideOutType===Et.Legato){const n=e.slideTarget;if(n){const s=e.beat.absolutePlaybackStart,o=this.getNoteDuration(n,n.beat.playbackDuration),c=n.beat.absolutePlaybackStart+o.untilTieOrSlideEnd;i.untilTieOrSlideEnd=c-s}}if(e.isLetRing&&this._settings.notation.notationMode===Gr.GuitarPro){let n=e.beat,s=0;const o=e.beat.voice.bar.masterBar.calculateDuration();for(;n.nextBeat;){let c=n.nextBeat;if(c.isRest||e.isStringed&&c.hasNoteOnString(e.string))break;if(n=n.nextBeat,s=n.absolutePlaybackStart-e.beat.absolutePlaybackStart+n.playbackDuration,s>o){s=o;break}}n===e.beat?i.letRingEnd=t:i.letRingEnd=s}else i.letRingEnd=i.untilTieOrSlideEnd;return i}applyStaticDuration(e,t){const i=this._currentTempo*e/De.MaxPosition|0;return Math.min(i,t)}static getNoteVelocity(e){let t=e.dynamics;switch(!e.beat.voice.bar.staff.isPercussion&&e.hammerPullOrigin&&t--,e.isGhost&&t--,e.accentuated){case Mr.Normal:t++;break;case Mr.Heavy:t+=2;break}return Ct.dynamicToVelocity(t)}generateFadeIn(e,t,i){const n=e.beat.voice.bar.staff.track,o=yi.toChannelShort(n.playbackInfo.volume)/i.noteOnly,c=120,h=i.noteOnly/c|0,p=t+i.noteOnly;for(let g=h-1;g>=0;g--){const b=p-g*c,v=(b-t)*o;g===h-1&&(this._handler.addControlChange(n.index,t,n.playbackInfo.primaryChannel,ki.VolumeCoarse,v),this._handler.addControlChange(n.index,t,n.playbackInfo.secondaryChannel,ki.VolumeCoarse,v)),this._handler.addControlChange(n.index,b,n.playbackInfo.primaryChannel,ki.VolumeCoarse,v),this._handler.addControlChange(n.index,b,n.playbackInfo.secondaryChannel,ki.VolumeCoarse,v)}}generateVibrato(e,t,i,n,s){let o=0,c=0;switch(e.vibrato!==ni.None?e.vibrato:e.isTieDestination?e.tieOrigin.vibrato:ni.Slight){case ni.Slight:o=this._settings.player.vibrato.noteSlightLength,c=this._settings.player.vibrato.noteSlightAmplitude;break;case ni.Wide:o=this._settings.player.vibrato.noteWideLength,c=this._settings.player.vibrato.noteWideAmplitude;break;default:return}const p=e.beat.voice.bar.staff.track;this.generateVibratorWithParams(t,i.noteOnly,o,c,(g,b)=>{this._handler.addNoteBend(p.index,g,s,n,b)})}generateVibratorWithParams(e,t,i,n,s){const o=this.vibratoResolution,c=i/2|0;e+=i;const h=e+t;for(;e<h;){let p=0;const g=e+i<h?i:h-e;for(;p<g;){let b=n*Math.sin(p*Math.PI/c);s(e+p|0,yi.getPitchWheel(b)),p+=o}e+=i}}static getPitchWheel(e){return Lt.DefaultPitchWheel+e/2*yi.PitchValuePerSemitone}generateSlide(e,t,i,n,s){let o=e.slideOutType===Et.Legato?i.noteOnly:i.untilTieOrSlideEnd,c=[],h=e.beat.voice.bar.staff.track;const p=this._settings.player.slide.simpleSlidePitchOffset,g=Math.floor(De.MaxPosition*this._settings.player.slide.simpleSlideDurationRatio),b=Math.floor(De.MaxPosition*this._settings.player.slide.shiftSlideDurationRatio);switch(e.slideInType){case rn.IntoFromAbove:c.push(new De(0,p)),c.push(new De(g,0));break;case rn.IntoFromBelow:c.push(new De(0,-p)),c.push(new De(g,0));break}switch(e.slideOutType){case Et.Legato:case Et.Shift:c.push(new De(b,0));const v=(e.slideTarget.calculateRealValue(this.applyTranspositionPitches,!0)-e.calculateRealValue(this.applyTranspositionPitches,!0))*2;c.push(new De(De.MaxPosition,v));break;case Et.OutDown:c.push(new De(De.MaxPosition-g,0)),c.push(new De(De.MaxPosition,-p));break;case Et.OutUp:c.push(new De(De.MaxPosition-g,0)),c.push(new De(De.MaxPosition,p));break}this.generateWhammyOrBend(t,o,c,(v,S)=>{this._handler.addNoteBend(h.index,v,s,n,S)})}generateBend(e,t,i,n,s){let o=e.bendPoints,c=e.beat.voice.bar.staff.track;const h=(S,B)=>{this._handler.addNoteBend(c.index,S,s,n,B)};let p=null,g;if(e.isTieOrigin&&this._settings.notation.extendBendArrowsOnTiedNotes){let S=e;for(;S.isTieOrigin&&!S.tieDestination.hasBend;)S=S.tieDestination;g=S.beat.absolutePlaybackStart-e.beat.absolutePlaybackStart+this.getNoteDuration(S,S.beat.playbackDuration).noteOnly}else if(e.isTieOrigin&&e.beat.graceType!==ot.None){switch(e.tieDestination.bendType){case Ye.Bend:case Ye.BendRelease:case Ye.PrebendBend:p=e.tieDestination.bendPoints[1].value;break;case Ye.Prebend:case Ye.PrebendRelease:p=e.tieDestination.bendPoints[0].value;break}g=Math.max(i.noteOnly,Ct.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo))}else g=i.noteOnly;o[0].value>0&&!e.isContinuedBend&&t>0&&t--;const b=Math.min(g,Ct.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));let v=[];switch(e.bendType){case Ye.Custom:v=o;break;case Ye.Bend:case Ye.Release:switch(e.bendStyle){case Si.Default:v=o;break;case Si.Gradual:v.push(new De(0,e.bendPoints[0].value)),(!p||p<e.bendPoints[1].value)&&(p=e.bendPoints[1].value),v.push(new De(De.MaxPosition,p));break;case Si.Fast:(!p||p<e.bendPoints[1].value)&&(p=e.bendPoints[1].value),e.beat.graceType===ot.BendGrace?this.generateSongBookWhammyOrBend(t,g,!0,[e.bendPoints[0].value,p],b,h):this.generateSongBookWhammyOrBend(t,g,!1,[e.bendPoints[0].value,p],b,h);return}break;case Ye.BendRelease:switch(e.bendStyle){case Si.Default:v=o;break;case Si.Gradual:v.push(new De(0,e.bendPoints[0].value)),v.push(new De(De.MaxPosition/2|0,e.bendPoints[1].value)),v.push(new De(De.MaxPosition,e.bendPoints[2].value));break;case Si.Fast:this.generateSongBookWhammyOrBend(t,g,!1,[e.bendPoints[0].value,e.bendPoints[1].value,e.bendPoints[2].value],b,h);return}break;case Ye.Hold:v=o;break;case Ye.Prebend:v=o;break;case Ye.PrebendBend:switch(e.bendStyle){case Si.Default:v=o;break;case Si.Gradual:v.push(new De(0,e.bendPoints[0].value)),v.push(new De(De.MaxPosition,e.bendPoints[1].value));break;case Si.Fast:const S=yi.getPitchWheel(e.bendPoints[0].value);h(t,S|0),(!p||p<e.bendPoints[1].value)&&(p=e.bendPoints[1].value),this.generateSongBookWhammyOrBend(t,g,!1,[e.bendPoints[0].value,p],b,h);return}break;case Ye.PrebendRelease:switch(e.bendStyle){case Si.Default:v=o;break;case Si.Gradual:v.push(new De(0,e.bendPoints[0].value)),v.push(new De(De.MaxPosition,e.bendPoints[1].value));break;case Si.Fast:const S=yi.getPitchWheel(e.bendPoints[0].value);h(t,S|0),this.generateSongBookWhammyOrBend(t,g,!1,[e.bendPoints[0].value,e.bendPoints[1].value],b,h);return}break}this.generateWhammyOrBend(t,g,v,h)}generateSongBookWhammyOrBend(e,t,i,n,s,o){const c=i?e:e+t-s,h=s/(n.length-1);for(let p=0;p<n.length-1;p++){const g=yi.getPitchWheel(n[p]),b=yi.getPitchWheel(n[p+1]),v=c+h*p;this.generateBendValues(v,h,g,b,o)}}generateWhammy(e,t,i,n){const s=e.whammyBarPoints,o=e.voice.bar.staff.track,c=i.noteOnly;s[0].value>0&&!e.isContinuedWhammy&&t--;const h=(g,b)=>{this._handler.addBend(o.index,g,n,b)};let p=[];switch(e.whammyBarType){case ci.Custom:p=s;break;case ci.Dive:switch(e.whammyStyle){case Si.Default:p=s;break;case Si.Gradual:p.push(new De(0,s[0].value)),p.push(new De(De.MaxPosition,s[1].value));break;case Si.Fast:const g=Math.min(c,Ct.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));this.generateSongBookWhammyOrBend(t,c,!1,[s[0].value,s[1].value],g,h);return}break;case ci.Dip:switch(e.whammyStyle){case Si.Default:p=s;break;case Si.Gradual:p.push(new De(0,s[0].value)),p.push(new De(De.MaxPosition/2|0,s[1].value)),p.push(new De(De.MaxPosition,s[2].value));break;case Si.Fast:const g=Math.min(c,Ct.millisToTicks(this._settings.player.songBookDipDuration,this._currentTempo));this.generateSongBookWhammyOrBend(t,c,!0,[s[0].value,s[1].value,s[2].value],g,h);return}break;case ci.Hold:p=s;break;case ci.Predive:p=s;break;case ci.PrediveDive:switch(e.whammyStyle){case Si.Default:p=s;break;case Si.Gradual:p.push(new De(0,s[0].value)),p.push(new De(De.MaxPosition/2|0,s[0].value)),p.push(new De(De.MaxPosition,s[1].value));break;case Si.Fast:const g=yi.getPitchWheel(s[0].value);this._handler.addBend(o.index,t,n,g|0);const b=Math.min(c,Ct.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));this.generateSongBookWhammyOrBend(t,c,!1,[s[0].value,s[1].value],b,h);return}break}this.generateWhammyOrBend(t,c,p,h)}generateWhammyOrBend(e,t,i,n){const s=t/De.MaxPosition;for(let o=0;o<i.length-1;o++){const c=i[o],h=i[o+1],p=yi.getPitchWheel(c.value),g=yi.getPitchWheel(h.value),b=s*(h.offset-c.offset),v=e+s*c.offset;this.generateBendValues(v,b,p,g,n)}}generateBendValues(e,t,i,n,s){const o=Ct.ticksToMillis(t,this._currentTempo),c=Math.abs(n-i)/yi.PitchValuePerSemitone,h=Math.max(yi.MinBreakpointsPerSemitone*c,o/yi.MillisecondsPerBreakpoint),p=t/h,g=(n-i)/h;for(let b=0;b<h;b++)s(e|0,Math.round(i)),i+=g,e+=p;i<n&&s(e|0,n)}generateTrill(e,t,i,n,s,o){const c=e.beat.voice.bar.staff.track,h=e.stringTuning+e.trillFret;let p=Ct.toTicks(e.trillSpeed),g=!0,b=t,v=t+i.untilTieOrSlideEnd;for(;b+10<v;)b+p>=v&&(p=v-b),this._handler.addNote(c.index,b,p,g?h:n,s,o),g=!g,b+=p}generateTremoloPicking(e,t,i,n,s,o){const c=e.beat.voice.bar.staff.track;let h=Ct.toTicks(e.beat.tremoloSpeed),p=t;const g=t+i.untilTieOrSlideEnd;for(;p+10<g;)p+h>=g&&(h=g-p),this._handler.addNote(c.index,p,h,n,s,o),p+=h}getBrushInfo(e){const t=new Int32Array(e.voice.bar.staff.tuning.length);if(e.brushType!==Di.None){let i=0,n=0;for(const s of e.notes)s.isTieDestination||(i|=1<<s.string-1,n++);if(e.notes.length>0){let s=0;const o=e.brushDuration/(n-1)|0;for(let c=0;c<e.voice.bar.staff.tuning.length;c++){let h=e.brushType===Di.ArpeggioDown||e.brushType===Di.BrushDown?c:t.length-1-c;i&1<<h&&(t[h]=s,s+=o)}}}return t}generateAutomation(e,t,i){switch(t.type){case Ur.Instrument:this.addProgramChange(e.voice.bar.staff.track,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,(t.value|0)&255),this.addProgramChange(e.voice.bar.staff.track,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,(t.value|0)&255);break;case Ur.Balance:let n=yi.toChannelShort(t.value);this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,ki.PanCoarse,n),this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,ki.PanCoarse,n);break;case Ur.Volume:let s=yi.toChannelShort(t.value);this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,ki.VolumeCoarse,s),this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,ki.VolumeCoarse,s);break}}prepareSingleBeat(e){let t=-1,i=-1,n=e;for(;n&&(t===-1||i===-1);){for(const p of e.automations)switch(p.type){case Ur.Instrument:i=p.value;break;case Ur.Tempo:t=p.value;break}n=n.previousBeat}const s=e.voice.bar.staff.track,o=e.voice.bar.masterBar;t===-1&&(t=o.score.tempo),i===-1&&(i=s.playbackInfo.program);const c=s.playbackInfo.volume;this.generateTrack(s),this._handler.addTimeSignature(0,o.timeSignatureNumerator,o.timeSignatureDenominator),this._handler.addTempo(0,t);let h=yi.toChannelShort(c);this._handler.addControlChange(0,0,s.playbackInfo.primaryChannel,ki.VolumeCoarse,h),this._handler.addControlChange(0,0,s.playbackInfo.secondaryChannel,ki.VolumeCoarse,h)}generateSingleBeat(e){this.prepareSingleBeat(e),this.generateBeat(e,-e.playbackStart,e.voice.bar)}generateSingleNote(e){this.prepareSingleBeat(e.beat),this.generateNote(e,0,e.beat.playbackDuration,new Int32Array(e.beat.voice.bar.staff.tuning.length))}}yi.DefaultDurationDead=30;yi.DefaultDurationPalmMute=80;yi.PitchBendRangeInSemitones=8*2;yi.PitchValuePerSemitone=Lt.DefaultPitchWheel/yi.PitchBendRangeInSemitones;yi.MinBreakpointsPerSemitone=6;yi.MillisecondsPerBreakpoint=150;class iW{constructor(){this.startTick=0,this.endTick=0}}class vr{constructor(e,t){this.width=0,this.height=0,this.x=e,this.y=t}get scale(){return this.renderer.scale}doLayout(){}paint(e,t,i){}}class bo extends vr{constructor(e=0,t=0){super(e,t),this.beat=null,this.nextGlyph=null,this.previousGlyph=null}}class br extends bo{constructor(e,t,i,n){super(e,t),this.glyphScale=0,this.glyphScale=i,this.symbol=n}paint(e,t,i){i.fillMusicFontSymbol(e+this.x,t+this.y,this.glyphScale*this.scale,this.symbol,!1)}}class Ot extends br{constructor(e,t,i,n){super(e,t,n?Ot.GraceScale:1,Ot.getSymbol(i)),this._isGrace=n,this._duration=i}paint(e,t,i){let n=this._isGrace?this.scale:0;i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this.symbol,!1)}doLayout(){let e=(this._isGrace?Ot.GraceScale:1)*this.scale;switch(this._duration){case Y.QuadrupleWhole:this.width=14*e;break;case Y.DoubleWhole:this.width=14*(this._isGrace?Ot.GraceScale:1)*this.scale;break;case Y.Whole:this.width=14*(this._isGrace?Ot.GraceScale:1)*this.scale;break;default:this.width=Ot.QuarterNoteHeadWidth*(this._isGrace?Ot.GraceScale:1)*this.scale;break}this.height=Ot.NoteHeadHeight*e}static getSymbol(e){switch(e){case Y.QuadrupleWhole:return N.NoteheadDoubleWholeSquare;case Y.DoubleWhole:return N.NoteheadDoubleWhole;case Y.Whole:return N.NoteheadWhole;case Y.Half:return N.NoteheadHalf;default:return N.NoteheadBlack}}}Ot.GraceScale=.75;Ot.NoteHeadHeight=8;Ot.QuarterNoteHeadWidth=9;class Zf extends br{constructor(e,t,i,n,s){super(e,t,s?Ot.GraceScale:1,Zf.getSymbol(i,n,s))}doLayout(){this.width=0}static getSymbol(e,t,i){if(i&&(e=Y.Eighth),t===Te.Up)switch(e){case Y.Eighth:return N.FlagEighthUp;case Y.Sixteenth:return N.FlagSixteenthUp;case Y.ThirtySecond:return N.FlagThirtySecondUp;case Y.SixtyFourth:return N.FlagSixtyFourthUp;case Y.OneHundredTwentyEighth:return N.FlagOneHundredTwentyEighthUp;case Y.TwoHundredFiftySixth:return N.FlagTwoHundredFiftySixthUp;default:return N.FlagEighthUp}switch(e){case Y.Eighth:return N.FlagEighthDown;case Y.Sixteenth:return N.FlagSixteenthDown;case Y.ThirtySecond:return N.FlagThirtySecondDown;case Y.SixtyFourth:return N.FlagSixtyFourthDown;case Y.OneHundredTwentyEighth:return N.FlagOneHundredTwentyEighthDown;case Y.TwoHundredFiftySixth:return N.FlagOneHundredTwentyEighthDown;default:return N.FlagEighthDown}}}Zf.FlagWidth=11;class ho extends vr{get onTimeX(){return this.onNotes.x+this.onNotes.centerX}constructor(e,t){super(0,0),this.ties=[],this.minWidth=0,this.beat=e,this.ties=[],this.voiceContainer=t}addTie(e){e.renderer=this.renderer,this.ties.push(e)}registerLayoutingInfo(e){let t=this.preNotes.computedWidth+this.onNotes.centerX;this.beat.graceGroup&&!this.beat.graceGroup.isComplete&&(t+=ho.GraceBeatPadding*this.renderer.scale);let i=this.onNotes.computedWidth-this.onNotes.centerX;const n=this.renderer.helpers.getBeamingHelperForBeat(this.beat);(n&&n.hasFlag||this.beat.graceType!==ot.None)&&(i+=Zf.FlagWidth*this.scale*(this.beat.graceType!==ot.None?Ot.GraceScale:1));for(const s of this.ties)i+=s.width;this.beat.graceType!==ot.None&&(i+=ho.GraceBeatPadding*this.renderer.scale),e.addBeatSpring(this.beat,t,i),e.setPreBeatSize(this.beat,this.preNotes.computedWidth),e.setOnBeatSize(this.beat,this.onNotes.computedWidth),e.setBeatCenterX(this.beat,this.onNotes.centerX)}applyLayoutingInfo(e){let t=e.getBeatCenterX(this.beat)-this.onNotes.centerX;this.beat.graceGroup&&!this.beat.graceGroup.isComplete&&(t+=ho.GraceBeatPadding*this.renderer.scale),this.preNotes.x=t,this.preNotes.width=e.getPreBeatSize(this.beat),this.onNotes.width=e.getOnBeatSize(this.beat),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.updateBeamingHelper(),this.updateWidth()}doLayout(){this.preNotes.x=0,this.preNotes.renderer=this.renderer,this.preNotes.container=this,this.preNotes.doLayout(),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.renderer=this.renderer,this.onNotes.container=this,this.onNotes.doLayout();let e=this.beat.notes.length-1;for(;e>=0;)this.createTies(this.beat.notes[e--]);this.renderer.registerTies(this.ties),this.updateWidth()}updateWidth(){if(this.minWidth=this.preNotes.width+this.onNotes.width,!this.beat.isRest)if(this.onNotes.beamingHelper.beats.length===1)this.beat.duration>=Y.Eighth&&(this.minWidth+=20*this.scale);else switch(this.beat.duration){case Y.OneHundredTwentyEighth:case Y.TwoHundredFiftySixth:this.minWidth+=10*this.scale;break}let e=0;for(let t of this.ties)t.width>e&&(e=t.width);this.minWidth+=e,this.width=this.minWidth}scaleToWidth(e){this.onNotes.updateBeamingHelper(),this.width=e}createTies(e){}static getGroupId(e){return"b"+e.id}paint(e,t,i){if(this.beat.voice.isEmpty||this.preNotes.isEmpty&&this.onNotes.isEmpty&&this.ties.length===0)return;i.beginGroup(ho.getGroupId(this.beat)),this.preNotes.paint(e+this.x,t+this.y,i),this.onNotes.paint(e+this.x,t+this.y,i);let s=e-this.voiceContainer.x-this.renderer.x,o=t-this.voiceContainer.y-this.renderer.y;for(let c=0,h=this.ties.length;c<h;c++){let p=this.ties[c];p.renderer=this.renderer,p.paint(s,o,i)}i.endGroup()}buildBoundingsLookup(e,t,i,n){let s=new AC;s.beat=this.beat,s.visualBounds=new gs,s.visualBounds.x=t+this.x+this.onNotes.x,s.visualBounds.y=e.visualBounds.y,s.visualBounds.w=this.onNotes.width,s.visualBounds.h=e.visualBounds.h,s.realBounds=new gs,s.realBounds.x=t+this.x,s.realBounds.y=e.realBounds.y,s.realBounds.w=this.width,s.realBounds.h=e.realBounds.h,n&&(s.visualBounds.x=t+this.x,s.realBounds.x=s.visualBounds.x),e.addBeat(s),this.renderer.settings.core.includeNoteBounds&&this.onNotes.buildBoundingsLookup(s,t+this.x,i+this.y)}}ho.GraceBeatPadding=3;class u_{constructor(){this.oldWidth=0,this.newWidth=0,this.settings=null}core(){return this.settings&&this.causeIssue()?this.settings.core:new i2}causeIssue(){return this.settings=null,!0}}class rW{constructor(e){this.activeBeats=e}}class B0{constructor(e){this.bounds=null,this.beat=e}}class nW{constructor(e,t){this._startTime=0,this._trackIndexes=null,this._trackIndexLookup=null,this._isDestroyed=!1,this.score=null,this.tracks=[],this._tickCache=null,this.player=null,this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null,this._previousTick=0,this._playerState=Hr.Paused,this._currentBeat=null,this._currentBarBounds=null,this._previousStateForCursor=Hr.Paused,this._previousCursorCache=null,this._lastScroll=0,this.playedBeatChanged=new Qt,this.activeBeatsChanged=new Qt,this._beatMouseDown=!1,this._noteMouseDown=!1,this._selectionStart=null,this._selectionEnd=null,this.beatMouseDown=new Qt,this.beatMouseMove=new Qt,this.beatMouseUp=new Qt,this.noteMouseDown=new Qt,this.noteMouseMove=new Qt,this.noteMouseUp=new Qt,this.scoreLoaded=new Qt,this.resize=new Qt,this.renderStarted=new Qt,this.renderFinished=new Qt,this.postRenderFinished=new $r,this.error=new Qt,this.playerReady=new $r,this.playerFinished=new $r,this.soundFontLoaded=new $r,this.midiLoad=new Qt,this.midiLoaded=new Qt,this.playerStateChanged=new Qt,this.playerPositionChanged=new Qt,this.midiEventsPlayed=new Qt,this.playbackRangeChanged=new Qt,this.settingsUpdated=new $r,this.uiFacade=e,this.container=e.rootContainer,e.initialize(this,t),ye.logLevel=this.settings.core.logLevel,this.canvasElement=e.createCanvasElement(),this.container.appendChild(this.canvasElement),this.settings.core.useWorkers&&this.uiFacade.areWorkersSupported&&Ce.getRenderEngineFactory(this.settings.core.engine).supportsWorkers?this.renderer=this.uiFacade.createWorkerRenderer():this.renderer=new WC(this.settings),this.container.resize.on(Ce.throttle(()=>{this._isDestroyed||this.container.width!==this.renderer.width&&this.triggerResize()},e.resizeThrottle));let i=new u_;i.oldWidth=this.renderer.width,i.newWidth=this.container.width|0,i.settings=this.settings,this.onResize(i),this.renderer.preRender.on(this.onRenderStarted.bind(this)),this.renderer.renderFinished.on(n=>{this.onRenderFinished(n)}),this.renderer.postRenderFinished.on(()=>{let n=Date.now()-this._startTime;ye.debug("rendering","Rendering completed in "+n+"ms"),this.onPostRenderFinished()}),this.renderer.preRender.on(n=>{this._startTime=Date.now()}),this.renderer.partialLayoutFinished.on(this.appendRenderResult.bind(this)),this.renderer.partialRenderFinished.on(this.updateRenderResult.bind(this)),this.renderer.renderFinished.on(n=>{this.appendRenderResult(n),this.appendRenderResult(null)}),this.renderer.error.on(this.onError.bind(this)),this.settings.player.enablePlayer&&this.setupPlayer(),this.setupClickHandling(),this.uiFacade.beginInvoke(()=>{this.uiFacade.initialRender()})}destroy(){this._isDestroyed=!0,this.player&&this.player.destroy(),this.uiFacade.destroy(),this.renderer.destroy()}updateSettings(){var t;const e=this.score;e&&Fi.applyPitchOffsets(this.settings,e),this.renderer.updateSettings(this.settings),this.settings.player.enablePlayer?(this.setupPlayer(),e&&((t=this.player)==null||t.applyTranspositionPitches(yi.buildTranspositionPitches(e,this.settings)))):this.destroyPlayer(),this.onSettingsUpdated()}load(e,t){try{return this.uiFacade.load(e,i=>{this.renderScore(i,t)},i=>{this.onError(i)})}catch(i){return this.onError(i),!1}}renderScore(e,t){let i=[];if(!t)e.tracks.length>0&&i.push(e.tracks[0]);else if(t.length===0)e.tracks.length>0&&i.push(e.tracks[0]);else if(t.length===1&&t[0]===-1)for(let n of e.tracks)i.push(n);else for(let n of t)n>=0&&n<=e.tracks.length&&i.push(e.tracks[n]);this.internalRenderTracks(e,i)}renderTracks(e){if(e.length>0){let t=e[0].score;for(let i of e)if(i.score!==t){this.onError(new sn(nn.General,"All rendered tracks must belong to the same score."));return}this.internalRenderTracks(t,e)}}internalRenderTracks(e,t){if(Fi.applyPitchOffsets(this.settings,e),e!==this.score){this.score=e,this.tracks=t,this._trackIndexes=[];for(let i of t)this._trackIndexes.push(i.index);this._trackIndexLookup=new Set(this._trackIndexes),this.onScoreLoaded(e),this.loadMidiForScore(),this.render()}else{this.tracks=t,this._trackIndexes=[];for(let i of t)this._trackIndexes.push(i.index);this._trackIndexLookup=new Set(this._trackIndexes),this.render()}}triggerResize(){if(!this.container.isVisible)ye.warning("Rendering","AlphaTab container was invisible while autosizing, waiting for element to become visible",null),this.uiFacade.rootContainerBecameVisible.on(()=>{ye.debug("Rendering","AlphaTab container became visible, doing autosizing",null),this.triggerResize()});else{let e=new u_;e.oldWidth=this.renderer.width,e.newWidth=this.container.width,e.settings=this.settings,this.onResize(e),this.renderer.updateSettings(this.settings),this.renderer.width=this.container.width,this.renderer.resizeRender()}}appendRenderResult(e){e?(this.canvasElement.width=e.totalWidth,this.canvasElement.height=e.totalHeight,this._cursorWrapper&&(this._cursorWrapper.width=e.totalWidth,this._cursorWrapper.height=e.totalHeight),(e.width>0||e.height>0)&&this.uiFacade.beginAppendRenderResults(e)):this.uiFacade.beginAppendRenderResults(e)}updateRenderResult(e){e&&e.renderResult&&this.uiFacade.beginUpdateRenderResults(e)}tex(e,t){try{let i=new Un;i.logErrors=!0,i.initFromString(e,this.settings);let n=i.readScore();this.renderScore(n,t)}catch(i){this.onError(i)}}loadSoundFont(e,t=!1){return this.player?this.uiFacade.loadSoundFont(e,t):!1}resetSoundFonts(){this.player&&this.player.resetSoundFonts()}render(){this.renderer&&(this.uiFacade.canRender?(this.renderer.width=this.container.width,this.renderer.renderScore(this.score,this._trackIndexes)):this.uiFacade.canRenderChanged.on(()=>this.render()))}get tickCache(){return this._tickCache}get isReadyForPlayback(){return this.player?this.player.isReadyForPlayback:!1}get playerState(){return this.player?this.player.state:Hr.Paused}get masterVolume(){return this.player?this.player.masterVolume:0}set masterVolume(e){this.player&&(this.player.masterVolume=e)}get metronomeVolume(){return this.player?this.player.metronomeVolume:0}set metronomeVolume(e){this.player&&(this.player.metronomeVolume=e)}get countInVolume(){return this.player?this.player.countInVolume:0}set countInVolume(e){this.player&&(this.player.countInVolume=e)}get midiEventsPlayedFilter(){return this.player?this.player.midiEventsPlayedFilter:[]}set midiEventsPlayedFilter(e){this.player&&(this.player.midiEventsPlayedFilter=e)}get tickPosition(){return this.player?this.player.tickPosition:0}set tickPosition(e){this.player&&(this.player.tickPosition=e)}get timePosition(){return this.player?this.player.timePosition:0}set timePosition(e){this.player&&(this.player.timePosition=e)}get playbackRange(){return this.player?this.player.playbackRange:null}set playbackRange(e){this.player&&(this.player.playbackRange=e,this.settings.player.enableCursor&&this.updateSelectionCursor(e))}get playbackSpeed(){return this.player?this.player.playbackSpeed:0}set playbackSpeed(e){this.player&&(this.player.playbackSpeed=e)}get isLooping(){return this.player?this.player.isLooping:!1}set isLooping(e){this.player&&(this.player.isLooping=e)}destroyPlayer(){this.player&&(this.player.destroy(),this.player=null,this._previousTick=0,this._playerState=Hr.Paused,this.destroyCursors())}setupPlayer(){this.updateCursors(),!this.player&&(this.player=this.uiFacade.createWorkerPlayer(),this.player&&(this.player.ready.on(()=>{this.loadMidiForScore()}),this.player.readyForPlayback.on(()=>{if(this.onPlayerReady(),this.tracks)for(let e of this.tracks){let t=e.playbackInfo.volume/16;this.player.setChannelVolume(e.playbackInfo.primaryChannel,t),this.player.setChannelVolume(e.playbackInfo.secondaryChannel,t)}}),this.player.soundFontLoaded.on(this.onSoundFontLoaded.bind(this)),this.player.soundFontLoadFailed.on(e=>{this.onError(e)}),this.player.midiLoaded.on(this.onMidiLoaded.bind(this)),this.player.midiLoadFailed.on(e=>{this.onError(e)}),this.player.stateChanged.on(this.onPlayerStateChanged.bind(this)),this.player.positionChanged.on(this.onPlayerPositionChanged.bind(this)),this.player.midiEventsPlayed.on(this.onMidiEventsPlayed.bind(this)),this.player.playbackRangeChanged.on(this.onPlaybackRangeChanged.bind(this)),this.player.finished.on(this.onPlayerFinished.bind(this)),this.setupPlayerEvents()))}loadMidiForScore(){if(!this.player||!this.score||!this.player.isReady)return;ye.debug("AlphaTab","Generating Midi");let e=new uc,t=new nl(e),i=new yi(this.score,this.settings,t);i.applyTranspositionPitches=!1,i.generate(),this._tickCache=i.tickLookup,this.onMidiLoad(e),this.player.loadMidiFile(e),this.player.applyTranspositionPitches(i.transpositionPitches)}changeTrackVolume(e,t){if(this.player)for(let i of e)this.player.setChannelVolume(i.playbackInfo.primaryChannel,t),this.player.setChannelVolume(i.playbackInfo.secondaryChannel,t)}changeTrackSolo(e,t){if(this.player)for(let i of e)this.player.setChannelSolo(i.playbackInfo.primaryChannel,t),this.player.setChannelSolo(i.playbackInfo.secondaryChannel,t)}changeTrackMute(e,t){if(this.player)for(let i of e)this.player.setChannelMute(i.playbackInfo.primaryChannel,t),this.player.setChannelMute(i.playbackInfo.secondaryChannel,t)}play(){return this.player?this.player.play():!1}pause(){this.player&&this.player.pause()}playPause(){this.player&&this.player.playPause()}stop(){this.player&&this.player.stop()}playBeat(e){if(!this.player)return;let t=new uc,i=new nl(t);new yi(e.voice.bar.staff.track.score,this.settings,i).generateSingleBeat(e),this.player.playOneTimeMidiFile(t)}playNote(e){if(!this.player)return;let t=new uc,i=new nl(t);new yi(e.beat.voice.bar.staff.track.score,this.settings,i).generateSingleNote(e),this.player.playOneTimeMidiFile(t)}destroyCursors(){this._cursorWrapper&&(this.uiFacade.destroyCursors(),this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null)}updateCursors(){if(this.settings.player.enableCursor&&!this._cursorWrapper){let e=this.uiFacade.createCursors();e&&(this._cursorWrapper=e.cursorWrapper,this._barCursor=e.barCursor,this._beatCursor=e.beatCursor,this._selectionWrapper=e.selectionWrapper),this._currentBeat!==null&&this.cursorUpdateBeat(this._currentBeat,!1,this._previousTick>10,!0)}else!this.settings.player.enableCursor&&this._cursorWrapper&&this.destroyCursors()}setupPlayerEvents(){this._previousTick=0,this._playerState=Hr.Paused,this.renderer.postRenderFinished.on(()=>{this._currentBeat=null,this.cursorUpdateTick(this._previousTick,!1,this._previousTick>10)}),this.player&&(this.player.positionChanged.on(e=>{this._previousTick=e.currentTick,this.uiFacade.beginInvoke(()=>{this.cursorUpdateTick(e.currentTick,!1)})}),this.player.stateChanged.on(e=>{if(this._playerState=e.state,!e.stopped&&e.state===Hr.Paused){let t=this._currentBeat,i=this._tickCache;t&&i&&(this.player.tickPosition=i.getBeatStart(t.beat))}}))}cursorUpdateTick(e,t,i=!1){let n=this._tickCache;if(n){let s=this._trackIndexLookup;if(s!=null&&s.size>0){let o=n.findBeat(s,e,this._currentBeat);o&&this.cursorUpdateBeat(o,t,i)}}}cursorUpdateBeat(e,t,i,n=!1){var B;const s=e.beat,o=((B=e.nextBeat)==null?void 0:B.beat)??null,c=e.duration,h=e.beatLookup.highlightedBeats;if(!s)return;let p=this.renderer.boundsLookup;if(!p)return;let g=this._currentBeat,b=this._previousCursorCache,v=this._previousStateForCursor;if(!n&&s===(g==null?void 0:g.beat)&&p===b&&v===this._playerState)return;let S=p.findBeat(s);S&&(this._currentBeat=e,this._previousCursorCache=p,this._previousStateForCursor=this._playerState,this.uiFacade.beginInvoke(()=>{this.internalCursorUpdateBeat(s,o,c,t,h,p,S,i)}))}scrollToCursor(){const e=this._currentBarBounds;e&&this.internalScrollToCursor(e)}internalScrollToCursor(e){let t=this.uiFacade.getScrollContainer(),i=Ce.getLayoutEngineFactory(this.settings.display.layoutMode).vertical,n=this.settings.player.scrollMode;if(i){let s=e.realBounds.y+this.settings.player.scrollOffsetY;if(s!==this._lastScroll)switch(this._lastScroll=s,n){case Ql.Continuous:let o=this.uiFacade.getOffset(t,this.container);this.uiFacade.scrollToY(t,o.y+s,this.settings.player.scrollSpeed);break;case Ql.OffScreen:let c=t.scrollTop+this.uiFacade.getOffset(null,t).h;if(e.visualBounds.y+e.visualBounds.h>=c||e.visualBounds.y<t.scrollTop){let h=e.realBounds.y+this.settings.player.scrollOffsetY;this.uiFacade.scrollToY(t,h,this.settings.player.scrollSpeed)}break}}else{let s=e.visualBounds.x;if(s!==this._lastScroll)switch(this._lastScroll=s,n){case Ql.Continuous:let o=e.realBounds.x+this.settings.player.scrollOffsetX;this._lastScroll=e.visualBounds.x,this.uiFacade.scrollToX(t,o,this.settings.player.scrollSpeed);break;case Ql.OffScreen:let c=t.scrollLeft+this.uiFacade.getOffset(null,t).w;if(e.visualBounds.x+e.visualBounds.w>=c||e.visualBounds.x<t.scrollLeft){let h=e.realBounds.x+this.settings.player.scrollOffsetX;this._lastScroll=e.visualBounds.x,this.uiFacade.scrollToX(t,h,this.settings.player.scrollSpeed)}break}}}internalCursorUpdateBeat(e,t,i,n,s,o,c,h){const p=this._barCursor,g=this._beatCursor;let b=c.barBounds.masterBarBounds,v=b.visualBounds;this._currentBarBounds=b,p&&p.setBounds(v.x,v.y,v.w,v.h),g&&(this.settings.player.enableAnimatedBeatCursor&&g.stopAnimation(),g.setBounds(c.visualBounds.x,v.y,1,v.h)),this.settings.player.enableElementHighlighting&&this.uiFacade.removeHighlights();let S=!1;if(this._playerState===Hr.Playing&&!n){if(this.settings.player.enableElementHighlighting)for(let B of s){let T=ho.getGroupId(B.beat);this.uiFacade.highlightElements(T,e.voice.bar.index)}if(this.settings.player.enableAnimatedBeatCursor){let B=b.visualBounds.x+b.visualBounds.w;if(t){let T=o.findBeat(t);T&&T.barBounds.masterBarBounds.staveGroupBounds===b.staveGroupBounds&&(B=T.visualBounds.x)}this.uiFacade.beginInvoke(()=>{g&&g.transitionToX(i/this.playbackSpeed,B)})}h=!n,S=!0}h&&!this._beatMouseDown&&this.settings.player.scrollMode!==Ql.Off&&this.internalScrollToCursor(b),S&&(this.onPlayedBeatChanged(e),this.onActiveBeatsChanged(new rW(s.map(B=>B.beat))))}onPlayedBeatChanged(e){this._isDestroyed||(this.playedBeatChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playedBeatChanged",e))}onActiveBeatsChanged(e){this._isDestroyed||(this.activeBeatsChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"activeBeatsChanged",e))}onBeatMouseDown(e,t){this._isDestroyed||(this.settings.player.enablePlayer&&this.settings.player.enableCursor&&this.settings.player.enableUserInteraction&&(this._selectionStart=new B0(t),this._selectionEnd=null),this._beatMouseDown=!0,this.beatMouseDown.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseDown",t,e))}onNoteMouseDown(e,t){this._isDestroyed||(this._noteMouseDown=!0,this.noteMouseDown.trigger(t),this.uiFacade.triggerEvent(this.container,"noteMouseDown",t,e))}onBeatMouseMove(e,t){this._isDestroyed||(this.settings.player.enableUserInteraction&&(!this._selectionEnd||this._selectionEnd.beat!==t)&&(this._selectionEnd=new B0(t),this.cursorSelectRange(this._selectionStart,this._selectionEnd)),this.beatMouseMove.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseMove",t,e))}onNoteMouseMove(e,t){this._isDestroyed||(this.noteMouseMove.trigger(t),this.uiFacade.triggerEvent(this.container,"noteMouseMove",t,e))}onBeatMouseUp(e,t){var i,n;if(!this._isDestroyed){if(this.settings.player.enablePlayer&&this.settings.player.enableCursor&&this.settings.player.enableUserInteraction){if(this._selectionEnd){let s=((i=this._tickCache)==null?void 0:i.getBeatStart(this._selectionStart.beat))??this._selectionStart.beat.absolutePlaybackStart;if((((n=this._tickCache)==null?void 0:n.getBeatStart(this._selectionEnd.beat))??this._selectionEnd.beat.absolutePlaybackStart)<s){let c=this._selectionStart;this._selectionStart=this._selectionEnd,this._selectionEnd=c}}if(this._selectionStart&&this._tickCache){let s=this._tickCache,o=s.getMasterBarStart(this._selectionStart.beat.voice.bar.masterBar);if(this._currentBeat=null,this._playerState===Hr.Paused&&this.cursorUpdateTick(this._tickCache.getBeatStart(this._selectionStart.beat),!1),this.tickPosition=o+this._selectionStart.beat.playbackStart,this._selectionEnd&&this._selectionStart.beat!==this._selectionEnd.beat){let c=s.getMasterBarStart(this._selectionEnd.beat.voice.bar.masterBar),h=new iW;h.startTick=o+this._selectionStart.beat.playbackStart,h.endTick=c+this._selectionEnd.beat.playbackStart+this._selectionEnd.beat.playbackDuration-50,this.playbackRange=h}else this._selectionStart=null,this.playbackRange=null,this.cursorSelectRange(this._selectionStart,this._selectionEnd)}}this.beatMouseUp.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseUp",t,e),this._beatMouseDown=!1}}onNoteMouseUp(e,t){this._isDestroyed||(this.noteMouseUp.trigger(t),this.uiFacade.triggerEvent(this.container,"noteMouseUp",t,e),this._noteMouseDown=!1)}updateSelectionCursor(e){if(this._tickCache)if(e){const t=this._tickCache.findBeat(this._trackIndexLookup,e.startTick),i=this._tickCache.findBeat(this._trackIndexLookup,e.endTick);if(t&&i){const n=new B0(t.beat),s=new B0(i.beat);this.cursorSelectRange(n,s)}}else this.cursorSelectRange(null,null)}setupClickHandling(){this.canvasElement.mouseDown.on(e=>{var s,o;if(!e.isLeftMouseButton)return;this.settings.player.enableUserInteraction&&e.preventDefault();let t=e.getX(this.canvasElement),i=e.getY(this.canvasElement),n=((s=this.renderer.boundsLookup)==null?void 0:s.getBeatAtPos(t,i))??null;if(n&&(this.onBeatMouseDown(e,n),this.settings.core.includeNoteBounds)){const c=(o=this.renderer.boundsLookup)==null?void 0:o.getNoteAtPos(n,t,i);c&&this.onNoteMouseDown(e,c)}}),this.canvasElement.mouseMove.on(e=>{var s,o;if(!this._beatMouseDown)return;let t=e.getX(this.canvasElement),i=e.getY(this.canvasElement),n=((s=this.renderer.boundsLookup)==null?void 0:s.getBeatAtPos(t,i))??null;if(n&&(this.onBeatMouseMove(e,n),this._noteMouseDown)){const c=(o=this.renderer.boundsLookup)==null?void 0:o.getNoteAtPos(n,t,i);c&&this.onNoteMouseMove(e,c)}}),this.canvasElement.mouseUp.on(e=>{var s,o;if(!this._beatMouseDown)return;this.settings.player.enableUserInteraction&&e.preventDefault();let t=e.getX(this.canvasElement),i=e.getY(this.canvasElement),n=((s=this.renderer.boundsLookup)==null?void 0:s.getBeatAtPos(t,i))??null;if(this.onBeatMouseUp(e,n),this._noteMouseDown)if(n){const c=((o=this.renderer.boundsLookup)==null?void 0:o.getNoteAtPos(n,t,i))??null;this.onNoteMouseUp(e,c)}else this.onNoteMouseUp(e,null)}),this.renderer.postRenderFinished.on(()=>{!this._selectionStart||!this.settings.player.enablePlayer||!this.settings.player.enableCursor||!this.settings.player.enableUserInteraction||this.cursorSelectRange(this._selectionStart,this._selectionEnd)})}cursorSelectRange(e,t){var p,g;let i=this.renderer.boundsLookup;if(!i)return;let n=this._selectionWrapper;if(!n||(n.clear(),!e||!t||e.beat===t.beat))return;e.bounds||(e.bounds=i.findBeat(e.beat)),t.bounds||(t.bounds=i.findBeat(t.beat));let s=((p=this._tickCache)==null?void 0:p.getBeatStart(e.beat))??e.beat.absolutePlaybackStart;if((((g=this._tickCache)==null?void 0:g.getBeatStart(t.beat))??t.beat.absolutePlaybackStart)<s){let b=e;e=t,t=b}let c=e.bounds.realBounds.x,h=t.bounds.realBounds.x+t.bounds.realBounds.w;if(t.beat.index===t.beat.voice.beats.length-1&&(h=t.bounds.barBounds.masterBarBounds.realBounds.x+t.bounds.barBounds.masterBarBounds.realBounds.w),e.bounds.barBounds.masterBarBounds.staveGroupBounds!==t.bounds.barBounds.masterBarBounds.staveGroupBounds){let b=e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x,v=e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x+e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.w,S=this.uiFacade.createSelectionElement();S.setBounds(c,e.bounds.barBounds.masterBarBounds.visualBounds.y,v-c,e.bounds.barBounds.masterBarBounds.visualBounds.h),n.appendChild(S);let B=e.bounds.barBounds.masterBarBounds.staveGroupBounds.index+1,T=t.bounds.barBounds.masterBarBounds.staveGroupBounds.index;for(let L=B;L<T;L++){let O=i.staveGroups[L],I=this.uiFacade.createSelectionElement();I.setBounds(b,O.visualBounds.y,v-b,O.visualBounds.h),n.appendChild(I)}let C=this.uiFacade.createSelectionElement();C.setBounds(b,t.bounds.barBounds.masterBarBounds.visualBounds.y,h-b,t.bounds.barBounds.masterBarBounds.visualBounds.h),n.appendChild(C)}else{let b=this.uiFacade.createSelectionElement();b.setBounds(c,e.bounds.barBounds.masterBarBounds.visualBounds.y,h-c,e.bounds.barBounds.masterBarBounds.visualBounds.h),n.appendChild(b)}}onScoreLoaded(e){this._isDestroyed||(this.scoreLoaded.trigger(e),this.uiFacade.triggerEvent(this.container,"scoreLoaded",e))}onResize(e){this._isDestroyed||(this.resize.trigger(e),this.uiFacade.triggerEvent(this.container,"resize",e))}onRenderStarted(e){this._isDestroyed||(this.renderStarted.trigger(e),this.uiFacade.triggerEvent(this.container,"renderStarted",e))}onRenderFinished(e){this._isDestroyed||(this.renderFinished.trigger(e),this.uiFacade.triggerEvent(this.container,"renderFinished",e))}onPostRenderFinished(){this._isDestroyed||(this.postRenderFinished.trigger(),this.uiFacade.triggerEvent(this.container,"postRenderFinished",null))}onError(e){this._isDestroyed||(ye.error("API","An unexpected error occurred",e),this.error.trigger(e),this.uiFacade.triggerEvent(this.container,"error",e))}onPlayerReady(){this._isDestroyed||(this.playerReady.trigger(),this.uiFacade.triggerEvent(this.container,"playerReady",null))}onPlayerFinished(){this._isDestroyed||(this.playerFinished.trigger(),this.uiFacade.triggerEvent(this.container,"playerFinished",null))}onSoundFontLoaded(){this._isDestroyed||(this.soundFontLoaded.trigger(),this.uiFacade.triggerEvent(this.container,"soundFontLoaded",null))}onMidiLoad(e){this._isDestroyed||(this.midiLoad.trigger(e),this.uiFacade.triggerEvent(this.container,"midiLoad",e))}onMidiLoaded(e){this._isDestroyed||(this.midiLoaded.trigger(e),this.uiFacade.triggerEvent(this.container,"midiFileLoaded",e))}onPlayerStateChanged(e){this._isDestroyed||(this.playerStateChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playerStateChanged",e))}onPlayerPositionChanged(e){this._isDestroyed||this.score!==null&&this.tracks.length>0&&(this.playerPositionChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playerPositionChanged",e))}onMidiEventsPlayed(e){this._isDestroyed||(this.midiEventsPlayed.trigger(e),this.uiFacade.triggerEvent(this.container,"midiEventsPlayed",e))}onPlaybackRangeChanged(e){this._isDestroyed||(this.playbackRangeChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playbackRangeChanged",e))}onSettingsUpdated(){this._isDestroyed||(this.settingsUpdated.trigger(),this.uiFacade.triggerEvent(this.container,"settingsUpdated",null))}}class ql extends sn{constructor(e,t){super(nn.General,e),this.xhr=t,Object.setPrototypeOf(this,ql.prototype)}}class Pf{static loadScoreAsync(e,t,i,n){let s=new XMLHttpRequest;s.open("GET",e,!0,null,null),s.responseType="arraybuffer",s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){let o=s.response;if(s.status===200||s.status===0&&o)try{let c=s.response,h=new Uint8Array(c),p=Pf.loadScoreFromBytes(h,n);t(p)}catch(c){i(c)}else s.status===0?i(new ql(`You are offline!!
 Please Check Your Network.`,s)):s.status===404?i(new ql("Requested URL not found.",s)):s.status===500?i(new ql("Internel Server Error.",s)):s.statusText==="parsererror"?i(new ql(`Error.
Parsing JSON Request failed.`,s)):s.statusText==="timeout"?i(new ql("Request Time out.",s)):i(new ql("Unknow Error: "+s.responseText,s))}},s.send()}static loadScoreFromBytes(e,t){t||(t=new Ih);let i=Ce.buildImporters();ye.debug("ScoreLoader",`Loading score from ${e.length} bytes using ${i.length} importers`);let n=null,s=vn.fromBuffer(e);for(let o of i){s.reset();try{ye.debug("ScoreLoader","Importing using importer "+o.name),o.init(s,t),n=o.readScore(),ye.debug("ScoreLoader","Score imported using "+o.name);break}catch(c){if(c instanceof Or)ye.debug("ScoreLoader",o.name+" does not support the file");else throw ye.error("ScoreLoader","Score import failed due to unexpected error: ",c),c}}if(n)return n;throw new Or("No compatible importer found for file")}}class mw{get isLeftMouseButton(){return this.mouseEvent.button===0}getX(e){let t=e.element,n=t.getBoundingClientRect().left+t.ownerDocument.defaultView.pageXOffset;return this.mouseEvent.pageX-n}getY(e){let t=e.element,n=t.getBoundingClientRect().top+t.ownerDocument.defaultView.pageYOffset;return this.mouseEvent.pageY-n}preventDefault(){this.mouseEvent.preventDefault()}constructor(e){this.mouseEvent=e}}class sl{get width(){return this.element.offsetWidth}set width(e){this.element.style.width=e+"px"}get scrollLeft(){return this.element.scrollLeft}set scrollLeft(e){this.element.scrollTop=e}get scrollTop(){return this.element.scrollLeft}set scrollTop(e){this.element.scrollTop=e}get height(){return this.element.offsetHeight}set height(e){e>=0?this.element.style.height=e+"px":this.element.style.height="100%"}get isVisible(){return!!this.element.offsetWidth||!!this.element.offsetHeight||!!this.element.getClientRects().length}constructor(e){this._resizeListeners=0,this.lastBounds=new gs,this.element=e,this.mouseDown={on:t=>{this.element.addEventListener("mousedown",i=>{t(new mw(i))},!0)},off:t=>{}},this.mouseUp={on:t=>{this.element.addEventListener("mouseup",i=>{t(new mw(i))},!0)},off:t=>{}},this.mouseMove={on:t=>{this.element.addEventListener("mousemove",i=>{t(new mw(i))},!0)},off:t=>{}},this.resize={on:t=>{this._resizeListeners===0&&sl.resizeObserver.value.observe(this.element),this.element.addEventListener("resize",t,!0),this._resizeListeners++},off:t=>{this.element.removeEventListener("resize",t,!0),this._resizeListeners--,this._resizeListeners<=0&&(this._resizeListeners=0,sl.resizeObserver.value.unobserve(this.element))}}}stopAnimation(){this.element.style.transition="none"}transitionToX(e,t){this.element.style.transition=`transform ${e}ms linear`,this.setBounds(t,NaN,NaN,NaN)}setBounds(e,t,i,n){isNaN(e)&&(e=this.lastBounds.x),isNaN(t)&&(t=this.lastBounds.y),isNaN(i)&&(i=this.lastBounds.w),isNaN(n)&&(n=this.lastBounds.h),this.element.style.transform=`translate(${e}px, ${t}px) scale(${i}, ${n})`,this.element.style.transformOrigin="top left",this.lastBounds.x=e,this.lastBounds.y=t,this.lastBounds.w=i,this.lastBounds.h=n}appendChild(e){this.element.appendChild(e.element)}clear(){this.element.innerHTML=""}}sl.resizeObserver=new fC(()=>new ResizeObserver(r=>{for(const e of r){let t=new CustomEvent("resize",{detail:e});e.target.dispatchEvent(t)}}));class GC{constructor(e){this._isStarted=!1,this.isFontLoaded=!1,this.fontLoaded=new Qt,this._originalFamilies=e,this._families=e}checkForFontAvailability(){if(Ce.isRunningInWorker){this.isFontLoaded=!1;return}if(this._isStarted)return;this._isStarted=!0;let e=0,t=window.setInterval(()=>{ye.warning("Rendering",`Could not load font '${this._families[0]}' within ${(e+1)*5} seconds`,null),this._families.length>1?(this._families.shift(),e=0):e++},5e3);ye.debug("Font",`Start checking for font availablility: ${this._families.join(", ")}`);let i=o=>{this._families.length>1?(ye.debug("Font",`[${this._families[0]}] Loading Failed, switching to ${this._families[1]}`,o),this._families.shift(),window.setTimeout(()=>{s()},0)):(ye.error("Font",`[${this._originalFamilies.join(",")}] Loading Failed, rendering cannot start`,o),window.clearInterval(t))},n=o=>{ye.debug("Font",`[${o}] Font API signaled available`),this.isFontLoaded=!0,window.clearInterval(t),this.fontLoaded.trigger(this._families[0])},s=async()=>{for(const o of this._families)if(await this.isFontAvailable(o,!1)){n(o);return}try{await document.fonts.load(`1em ${this._families[0]}`)}catch(o){i(o)}return ye.debug("Font",`[${this._families[0]}] Font API signaled loaded`),await this.isFontAvailable(this._families[0],!0)?n(this._families[0]):i("Font not available"),!0};document.fonts.ready.then(()=>{s()})}isFontAvailable(e,t){return new Promise(i=>{const n="1em "+e;if(document.fonts.check(n))i(!0);else if(t){ye.debug("Font",`Font ${e} not available, creating test element to trigger load`);const s=document.createElement("div");s.style.font=n,s.style.opacity="0",s.style.position="absolute",s.style.top="0",s.style.left="0",s.innerText=`Trigger ${e} load`,document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s),document.fonts.check(n)?i(!0):i(!1)},200)}else i(!1)})}}class UC{constructor(e){this._writePosition=0,this._readPosition=0,this.count=0,this._buffer=new Float32Array(e)}clear(){this._readPosition=0,this._writePosition=0,this.count=0,this._buffer=new Float32Array(this._buffer.length)}write(e,t,i){let n=0;i>this._buffer.length-this.count&&(i=this._buffer.length-this.count);const s=Math.min(this._buffer.length-this._writePosition,i);return this._buffer.set(e.subarray(t,t+s),this._writePosition),this._writePosition+=s,this._writePosition%=this._buffer.length,n+=s,n<i&&(this._buffer.set(e.subarray(t+n,t+n+i-n),this._writePosition),this._writePosition+=i-n,n=i),this.count+=n,n}read(e,t,i){i>this.count&&(i=this.count);let n=0;const s=Math.min(this._buffer.length-this._readPosition,i);return e.set(this._buffer.subarray(this._readPosition,this._readPosition+s),t),n+=s,this._readPosition+=s,this._readPosition%=this._buffer.length,n<i&&(e.set(this._buffer.subarray(this._readPosition,this._readPosition+i-n),t+n),this._readPosition+=i-n,n=i),this.count-=n,n}}class Oa{constructor(){this._context=null,this._buffer=null,this._source=null,this.ready=new $r,this.samplesPlayed=new Qt,this.sampleRequest=new $r}get sampleRate(){return this._context?this._context.sampleRate:Oa.PreferredSampleRate}activate(e){this._context||(this._context=this.createAudioContext()),(this._context.state==="suspended"||this._context.state==="interrupted")&&(ye.debug("WebAudio","Audio Context is suspended, trying resume"),this._context.resume().then(()=>{var t,i;ye.debug("WebAudio",`Audio Context resume success: state=${(t=this._context)==null?void 0:t.state}, sampleRate:${(i=this._context)==null?void 0:i.sampleRate}`),e&&e()},t=>{var i,n;ye.warning("WebAudio",`Audio Context resume failed: state=${(i=this._context)==null?void 0:i.state}, sampleRate:${(n=this._context)==null?void 0:n.sampleRate}, reason=${t}`)}))}patchIosSampleRate(){let e=navigator.userAgent;if(e.indexOf("iPhone")!==-1||e.indexOf("iPad")!==-1){let t=this.createAudioContext(),i=t.createBuffer(1,1,Oa.PreferredSampleRate),n=t.createBufferSource();n.buffer=i,n.connect(t.destination),n.start(0),n.disconnect(0),t.close()}}createAudioContext(){if("AudioContext"in Ce.globalThis)return new AudioContext;if("webkitAudioContext"in Ce.globalThis)return new webkitAudioContext;throw new sn(nn.General,"AudioContext not found")}open(e){this.patchIosSampleRate(),this._context=this.createAudioContext(),this._context.state==="suspended"&&this.registerResumeHandler()}registerResumeHandler(){this._resumeHandler=(()=>{this.activate(()=>{this.unregisterResumeHandler()})}).bind(this),document.body.addEventListener("touchend",this._resumeHandler,!1),document.body.addEventListener("click",this._resumeHandler,!1)}unregisterResumeHandler(){const e=this._resumeHandler;e&&(document.body.removeEventListener("touchend",e,!1),document.body.removeEventListener("click",e,!1))}play(){let e=this._context;this.activate(),this._buffer=e.createBuffer(2,Oa.BufferSize,e.sampleRate),this._source=e.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0}pause(){this._source&&(this._source.stop(0),this._source.disconnect()),this._source=null}destroy(){var e;this.pause(),(e=this._context)==null||e.close(),this._context=null,this.unregisterResumeHandler()}onSamplesPlayed(e){this.samplesPlayed.trigger(e)}onSampleRequest(){this.sampleRequest.trigger()}onReady(){this.ready.trigger()}}Oa.BufferSize=4096;Oa.PreferredSampleRate=44100;class sW extends Oa{constructor(){super(...arguments),this._audioNode=null,this._bufferCount=0,this._requestedBufferCount=0,this._outputBuffer=new Float32Array(0)}open(e){super.open(e),this._bufferCount=Math.floor(e*this.sampleRate/1e3/Oa.BufferSize),this._circularBuffer=new UC(Oa.BufferSize*this._bufferCount),this.onReady()}play(){super.play();let e=this._context;this._audioNode=e.createScriptProcessor(4096,0,2),this._audioNode.onaudioprocess=this.generateSound.bind(this),this._circularBuffer.clear(),this.requestBuffers(),this._source=e.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.connect(this._audioNode,0,0),this._source.start(0),this._audioNode.connect(e.destination,0,0)}pause(){super.pause(),this._audioNode&&this._audioNode.disconnect(0),this._audioNode=null}addSamples(e){this._circularBuffer.write(e,0,e.length),this._requestedBufferCount--}resetSamples(){this._circularBuffer.clear()}requestBuffers(){const e=this._bufferCount/2|0;let t=e*Oa.BufferSize;if(this._circularBuffer.count+this._requestedBufferCount*Oa.BufferSize<t){for(let n=0;n<e;n++)this.onSampleRequest();this._requestedBufferCount+=e}}generateSound(e){let t=e.outputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(1),n=t.length+i.length,s=this._outputBuffer;s.length!==n&&(s=new Float32Array(n),this._outputBuffer=s);const o=this._circularBuffer.read(s,0,Math.min(s.length,this._circularBuffer.count));let c=0;for(let h=0;h<t.length;h++)t[h]=s[c++],i[h]=s[c++];this.onSamplesPlayed(o/Lt.AudioChannels),this.requestBuffers()}}class aW{constructor(e,t){this.loaded=e,this.total=t}}class c_{get isReady(){return this._workerIsReady&&this._outputIsReady}get isReadyForPlayback(){return this._workerIsReadyForPlayback}get state(){return this._state}get logLevel(){return ye.logLevel}set logLevel(e){ye.logLevel=e,this._synth.postMessage({cmd:"alphaSynth.setLogLevel",value:e})}get masterVolume(){return this._masterVolume}set masterVolume(e){e=Math.max(e,Lt.MinVolume),this._masterVolume=e,this._synth.postMessage({cmd:"alphaSynth.setMasterVolume",value:e})}get metronomeVolume(){return this._metronomeVolume}set metronomeVolume(e){e=Math.max(e,Lt.MinVolume),this._metronomeVolume=e,this._synth.postMessage({cmd:"alphaSynth.setMetronomeVolume",value:e})}get countInVolume(){return this._countInVolume}set countInVolume(e){e=Math.max(e,Lt.MinVolume),this._countInVolume=e,this._synth.postMessage({cmd:"alphaSynth.setCountInVolume",value:e})}get midiEventsPlayedFilter(){return this._midiEventsPlayedFilter}set midiEventsPlayedFilter(e){this._midiEventsPlayedFilter=e,this._synth.postMessage({cmd:"alphaSynth.setMidiEventsPlayedFilter",value:e})}get playbackSpeed(){return this._playbackSpeed}set playbackSpeed(e){e=mr.clamp(e,Lt.MinPlaybackSpeed,Lt.MaxPlaybackSpeed),this._playbackSpeed=e,this._synth.postMessage({cmd:"alphaSynth.setPlaybackSpeed",value:e})}get tickPosition(){return this._tickPosition}set tickPosition(e){e<0&&(e=0),this._tickPosition=e,this._synth.postMessage({cmd:"alphaSynth.setTickPosition",value:e})}get timePosition(){return this._timePosition}set timePosition(e){e<0&&(e=0),this._timePosition=e,this._synth.postMessage({cmd:"alphaSynth.setTimePosition",value:e})}get isLooping(){return this._isLooping}set isLooping(e){this._isLooping=e,this._synth.postMessage({cmd:"alphaSynth.setIsLooping",value:e})}get playbackRange(){return this._playbackRange}set playbackRange(e){e&&(e.startTick<0&&(e.startTick=0),e.endTick<0&&(e.endTick=0)),this._playbackRange=e,this._synth.postMessage({cmd:"alphaSynth.setPlaybackRange",value:e})}constructor(e,t){this._workerIsReadyForPlayback=!1,this._workerIsReady=!1,this._outputIsReady=!1,this._state=Hr.Paused,this._masterVolume=0,this._metronomeVolume=0,this._countInVolume=0,this._playbackSpeed=0,this._tickPosition=0,this._timePosition=0,this._isLooping=!1,this._playbackRange=null,this._midiEventsPlayedFilter=[],this.ready=new $r,this.readyForPlayback=new $r,this.finished=new $r,this.soundFontLoaded=new $r,this.soundFontLoadFailed=new Qt,this.midiLoaded=new Qt,this.midiLoadFailed=new Qt,this.stateChanged=new Qt,this.positionChanged=new Qt,this.midiEventsPlayed=new Qt,this.playbackRangeChanged=new Qt,this._workerIsReadyForPlayback=!1,this._workerIsReady=!1,this._outputIsReady=!1,this._state=Hr.Paused,this._masterVolume=0,this._metronomeVolume=0,this._playbackSpeed=0,this._tickPosition=0,this._timePosition=0,this._isLooping=!1,this._playbackRange=null,this._output=e,this._output.ready.on(this.onOutputReady.bind(this)),this._output.samplesPlayed.on(this.onOutputSamplesPlayed.bind(this)),this._output.sampleRequest.on(this.onOutputSampleRequest.bind(this)),this._output.open(t.player.bufferTimeInMilliseconds);try{this._synth=Ce.createWebWorker(t)}catch(i){ye.error("AlphaSynth","Failed to create WebWorker: "+i)}this._synth.addEventListener("message",this.handleWorkerMessage.bind(this),!1),this._synth.postMessage({cmd:"alphaSynth.initialize",sampleRate:this._output.sampleRate,logLevel:t.core.logLevel,bufferTimeInMilliseconds:t.player.bufferTimeInMilliseconds}),this.masterVolume=1,this.playbackSpeed=1,this.metronomeVolume=0}destroy(){this._synth.postMessage({cmd:"alphaSynth.destroy"})}play(){return this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.play"}),!0}pause(){this._synth.postMessage({cmd:"alphaSynth.pause"})}playPause(){this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.playPause"})}stop(){this._synth.postMessage({cmd:"alphaSynth.stop"})}playOneTimeMidiFile(e){this._synth.postMessage({cmd:"alphaSynth.playOneTimeMidiFile",midi:Cr.midiFileToJsObject(e)})}loadSoundFont(e,t){this._synth.postMessage({cmd:"alphaSynth.loadSoundFontBytes",data:e,append:t})}loadSoundFontFromUrl(e,t,i){ye.debug("AlphaSynth",`Start loading Soundfont from url ${e}`);let n=new XMLHttpRequest;n.open("GET",e,!0,null,null),n.responseType="arraybuffer",n.onload=s=>{let o=new Uint8Array(n.response);this.loadSoundFont(o,t)},n.onerror=s=>{ye.error("AlphaSynth","Loading failed: "+s.message),this.soundFontLoadFailed.trigger(new ql(s.message,n))},n.onprogress=s=>{ye.debug("AlphaSynth",`Soundfont downloading: ${s.loaded}/${s.total} bytes`),i(new aW(s.loaded,s.total))},n.send()}resetSoundFonts(){this._synth.postMessage({cmd:"alphaSynth.resetSoundFonts"})}loadMidiFile(e){this._synth.postMessage({cmd:"alphaSynth.loadMidi",midi:Cr.midiFileToJsObject(e)})}applyTranspositionPitches(e){this._synth.postMessage({cmd:"alphaSynth.applyTranspositionPitches",transpositionPitches:JSON.stringify(Array.from(e.entries()))})}setChannelMute(e,t){this._synth.postMessage({cmd:"alphaSynth.setChannelMute",channel:e,mute:t})}resetChannelStates(){this._synth.postMessage({cmd:"alphaSynth.resetChannelStates"})}setChannelSolo(e,t){this._synth.postMessage({cmd:"alphaSynth.setChannelSolo",channel:e,solo:t})}setChannelVolume(e,t){t=Math.max(t,Lt.MinVolume),this._synth.postMessage({cmd:"alphaSynth.setChannelVolume",channel:e,volume:t})}handleWorkerMessage(e){let t=e.data;switch(t.cmd){case"alphaSynth.ready":this._workerIsReady=!0,this.checkReady();break;case"alphaSynth.destroyed":this._synth.terminate();break;case"alphaSynth.readyForPlayback":this._workerIsReadyForPlayback=!0,this.checkReadyForPlayback();break;case"alphaSynth.positionChanged":this._timePosition=t.currentTime,this._tickPosition=t.currentTick,this.positionChanged.trigger(new ib(t.currentTime,t.endTime,t.currentTick,t.endTick,t.isSeek));break;case"alphaSynth.midiEventsPlayed":this.midiEventsPlayed.trigger(new OC(t.events.map(Cr.jsObjectToMidiEvent)));break;case"alphaSynth.playerStateChanged":this._state=t.state,this.stateChanged.trigger(new H0(t.state,t.stopped));break;case"alphaSynth.playbackRangeChanged":this._playbackRange=t.playbackRange,this.playbackRangeChanged.trigger(new MC(this._playbackRange));break;case"alphaSynth.finished":this.finished.trigger();break;case"alphaSynth.soundFontLoaded":this.soundFontLoaded.trigger();break;case"alphaSynth.soundFontLoadFailed":this.soundFontLoadFailed.trigger(t.error);break;case"alphaSynth.midiLoaded":this.checkReadyForPlayback(),this.midiLoaded.trigger(new ib(t.currentTime,t.endTime,t.currentTick,t.endTick,t.isSeek));break;case"alphaSynth.midiLoadFailed":this.checkReadyForPlayback(),this.midiLoadFailed.trigger(t.error);break;case"alphaSynth.output.addSamples":this._output.addSamples(t.samples);break;case"alphaSynth.output.play":this._output.play();break;case"alphaSynth.output.pause":this._output.pause();break;case"alphaSynth.output.destroy":this._output.destroy();break;case"alphaSynth.output.resetSamples":this._output.resetSamples();break}}checkReady(){this.isReady&&this.ready.trigger()}checkReadyForPlayback(){this.isReadyForPlayback&&this.readyForPlayback.trigger()}onOutputSampleRequest(){this._synth.postMessage({cmd:"alphaSynth.output.sampleRequest"})}onOutputSamplesPlayed(e){this._synth.postMessage({cmd:"alphaSynth.output.samplesPlayed",samples:e})}onOutputReady(){this._outputIsReady=!0,this.checkReady()}}class oW{constructor(e,t){this._width=0,this.boundsLookup=null,this.preRender=new Qt,this.partialRenderFinished=new Qt,this.partialLayoutFinished=new Qt,this.renderFinished=new Qt,this.postRenderFinished=new $r,this.error=new Qt,this._api=e;try{this._worker=Ce.createWebWorker(t)}catch(i){ye.error("Rendering",`Failed to create WebWorker: ${i}`);return}this._worker.postMessage({cmd:"alphaTab.initialize",settings:this.serializeSettingsForWorker(t)}),this._worker.addEventListener("message",this.handleWorkerMessage.bind(this))}destroy(){this._worker.terminate()}updateSettings(e){this._worker.postMessage({cmd:"alphaTab.updateSettings",settings:this.serializeSettingsForWorker(e)})}serializeSettingsForWorker(e){const t=Cr.settingsToJsObject(e);return t.delete("player"),t}render(){this._worker.postMessage({cmd:"alphaTab.render"})}resizeRender(){this._worker.postMessage({cmd:"alphaTab.resizeRender"})}renderResult(e){this._worker.postMessage({cmd:"alphaTab.renderResult",resultId:e})}get width(){return this._width}set width(e){this._width=e,this._worker.postMessage({cmd:"alphaTab.setWidth",width:e})}handleWorkerMessage(e){let t=e.data;switch(t.cmd){case"alphaTab.preRender":this.preRender.trigger(t.resize);break;case"alphaTab.partialRenderFinished":this.partialRenderFinished.trigger(t.result);break;case"alphaTab.partialLayoutFinished":this.partialLayoutFinished.trigger(t.result);break;case"alphaTab.renderFinished":this.renderFinished.trigger(t.result);break;case"alphaTab.postRenderFinished":this.boundsLookup=cm.fromJson(t.boundsLookup,this._api.score),this.boundsLookup.finish(),this.postRenderFinished.trigger();break;case"alphaTab.error":this.error.trigger(t.error);break}}renderScore(e,t){let i=e==null?null:Cr.scoreToJsObject(e);this._worker.postMessage({cmd:"alphaTab.renderScore",score:i,trackIndexes:t,fontSizes:Nr.FontSizeLookupTables})}}class lW{constructor(e,t,i,n){this.cursorWrapper=e,this.barCursor=t,this.beatCursor=i,this.selectionWrapper=n}}var la;(function(r){r[r.Browser=0]="Browser",r[r.NodeJs=1]="NodeJs",r[r.BrowserModule=2]="BrowserModule"})(la||(la={}));class hm{static init(){var e;hm._isRegistered||(hm._isRegistered=!0,registerProcessor("alphatab",(e=class extends AudioWorkletProcessor{constructor(i){super(i),this._outputBuffer=new Float32Array(0),this._bufferCount=0,this._requestedBufferCount=0,ye.debug("WebAudio","creating processor"),this._bufferCount=Math.floor(i.processorOptions.bufferTimeInMilliseconds*sampleRate/1e3/e.BufferSize),this._circularBuffer=new UC(e.BufferSize*this._bufferCount),this.port.onmessage=this.handleMessage.bind(this)}handleMessage(i){let n=i.data;switch(n.cmd){case ir.CmdOutputAddSamples:const o=n.samples;this._circularBuffer.write(o,0,o.length),this._requestedBufferCount--;break;case ir.CmdOutputResetSamples:this._circularBuffer.clear();break}}process(i,n,s){if(n.length!==1&&n[0].length!==2)return!1;let o=n[0][0],c=n[0][1];if(!o||!c)return!0;let h=o.length+c.length,p=this._outputBuffer;p.length!==h&&(p=new Float32Array(h),this._outputBuffer=p);const g=this._circularBuffer.read(p,0,Math.min(p.length,this._circularBuffer.count));let b=0;for(let v=0;v<o.length;v++)o[v]=p[b++],c[v]=p[b++];return this.port.postMessage({cmd:ir.CmdOutputSamplesPlayed,samples:g/Lt.AudioChannels}),this.requestBuffers(),!0}requestBuffers(){const i=this._bufferCount/2|0;let n=i*e.BufferSize;if(this._circularBuffer.count+this._requestedBufferCount*e.BufferSize<n){for(let o=0;o<i;o++)this.port.postMessage({cmd:ir.CmdOutputSampleRequest});this._requestedBufferCount+=i}}},e.BufferSize=4096,e)))}}hm._isRegistered=!1;class uW extends Oa{constructor(e){super(),this._worklet=null,this._bufferTimeInMilliseconds=0,this._settings=e}open(e){super.open(e),this._bufferTimeInMilliseconds=e,this.onReady()}play(){super.play();let e=this._context;Ce.createAudioWorklet(e,this._settings).then(()=>{this._worklet=new AudioWorkletNode(e,"alphatab",{numberOfOutputs:1,outputChannelCount:[2],processorOptions:{bufferTimeInMilliseconds:this._bufferTimeInMilliseconds}}),this._worklet.port.onmessage=this.handleMessage.bind(this),this._source.connect(this._worklet),this._source.start(0),this._worklet.connect(e.destination)},t=>{ye.error("WebAudio",`Audio Worklet creation failed: reason=${t}`)})}handleMessage(e){let t=e.data;switch(t.cmd){case ir.CmdOutputSamplesPlayed:this.onSamplesPlayed(t.samples);break;case ir.CmdOutputSampleRequest:this.onSampleRequest();break}}pause(){super.pause(),this._worklet&&(this._worklet.port.onmessage=null,this._worklet.disconnect()),this._worklet=null}addSamples(e){var t;(t=this._worklet)==null||t.port.postMessage({cmd:ir.CmdOutputAddSamples,samples:e})}resetSamples(){var e;(e=this._worklet)==null||e.port.postMessage({cmd:ir.CmdOutputResetSamples})}}class cW extends sl{constructor(e,t,i){super(e),this._xscale=t,this._yscale=i}get width(){return this.element.offsetWidth/this._xscale}set width(e){this.element.style.width=e*this._xscale+"px"}get height(){return this.element.offsetHeight/this._yscale}set height(e){e>=0?this.element.style.height=e*this._yscale+"px":this.element.style.height="100%"}setBounds(e,t,i,n){isNaN(e)&&(e=this.lastBounds.x),isNaN(t)&&(t=this.lastBounds.y),isNaN(i)?i=this.lastBounds.w:i=i/this._xscale,isNaN(n)?n=this.lastBounds.h:n=n/this._yscale,this.element.style.transform=`translate(${e}px, ${t}px) scale(${i}, ${n})`,this.element.style.transformOrigin="top left",this.lastBounds.x=e,this.lastBounds.y=t,this.lastBounds.w=i,this.lastBounds.h=n}}var el;(function(r){r[r.LayoutDone=0]="LayoutDone",r[r.RenderRequested=1]="RenderRequested",r[r.RenderDone=2]="RenderDone",r[r.Detached=3]="Detached"})(el||(el={}));class hW{get resizeThrottle(){return 10}get canRender(){return this.areAllFontsLoaded()}areAllFontsLoaded(){if(Ce.bravuraFontChecker.checkForFontAvailability(),!Ce.bravuraFontChecker.isFontLoaded)return!1;let e=!1;for(const t of this._fontCheckers.values())t.isFontLoaded||(e=!0);return e?!1:(ye.debug("Font","All fonts loaded: "+this._fontCheckers.size),!0)}onFontLoaded(e){Nr.generateFontLookup(e),this.areAllFontsLoaded()&&this.canRenderChanged.trigger()}constructor(e){if(this._fontCheckers=new Map,this._contents=null,this._file=null,this._totalResultCount=0,this._initialTrackIndexes=null,this._barToElementLookup=new Map,this._resultIdToElementLookup=new Map,this.rootContainerBecameVisible=new $r,this.canRenderChanged=new $r,this._highlightedElements=[],this._scrollContainer=null,Ce.webPlatform!==la.Browser&&Ce.webPlatform!==la.BrowserModule)throw new sn(nn.General,"Usage of AlphaTabApi is only possible in browser environments. For usage in node use the Low Level APIs");e.classList.add("alphaTab"),this.rootContainer=new sl(e),this.areWorkersSupported="Worker"in window,Ce.bravuraFontChecker.fontLoaded.on(this.onFontLoaded.bind(this)),this._intersectionObserver=new IntersectionObserver(this.onElementVisibilityChanged.bind(this),{threshold:[0,.01,1]}),this._intersectionObserver.observe(e)}onElementVisibilityChanged(e){for(const t of e){const i=t.target;if(i===this.rootContainer.element)t.isIntersecting&&(this.rootContainerBecameVisible.trigger(),this._intersectionObserver.unobserve(this.rootContainer.element));else if("layoutResultId"in i&&this._api.settings.core.enableLazyLoading){const n=i;t.isIntersecting?n.renderedResultId!==n.layoutResultId?this._resultIdToElementLookup.has(n.layoutResultId)?n.resultState!==el.RenderRequested&&(n.resultState=el.RenderRequested,this._api.renderer.renderResult(n.layoutResultId)):i.replaceChildren():n.resultState===el.Detached&&(i.replaceChildren(...n.renderedResult),n.resultState=el.RenderDone):n.resultState===el.RenderDone&&(n.resultState=el.Detached,n.replaceChildren())}}}createWorkerRenderer(){return new oW(this._api,this._api.settings)}initialize(e,t){this._api=e;let i;t instanceof Ih?i=t:i=Cr.jsObjectToSettings(t);let n=this.getDataAttributes();Vf.fromJson(i,n),i.notation.notationMode===Gr.SongBook&&i.setSongBookModeSettings(),e.settings=i,this.setupFontCheckers(i),this._initialTrackIndexes=this.parseTracks(i.core.tracks),this._contents="";let s=e.container;i.core.tex&&(this._contents=s.element.innerHTML,s.element.innerHTML=""),this.createStyleElement(i),this._file=i.core.file}setupFontCheckers(e){this.registerFontChecker(e.display.resources.copyrightFont),this.registerFontChecker(e.display.resources.effectFont),this.registerFontChecker(e.display.resources.fingeringFont),this.registerFontChecker(e.display.resources.graceFont),this.registerFontChecker(e.display.resources.markerFont),this.registerFontChecker(e.display.resources.tablatureFont),this.registerFontChecker(e.display.resources.titleFont),this.registerFontChecker(e.display.resources.wordsFont),this.registerFontChecker(e.display.resources.barNumberFont),this.registerFontChecker(e.display.resources.fretboardNumberFont),this.registerFontChecker(e.display.resources.subTitleFont)}registerFontChecker(e){if(!this._fontCheckers.has(e.families.join(", "))){let t=new GC(e.families);this._fontCheckers.set(e.families.join(", "),t),t.fontLoaded.on(this.onFontLoaded.bind(this)),t.checkForFontAvailability()}}destroy(){this.rootContainer.element.innerHTML=""}createCanvasElement(){let e=document.createElement("div");return e.className="at-surface",e.style.fontSize="0",e.style.overflow="hidden",e.style.lineHeight="0",e.style.position="relative",new sl(e)}triggerEvent(e,t,i=null,n){let s=e.element;t="alphaTab."+t;let o=document.createEvent("CustomEvent"),c=n?n.mouseEvent:null;if(o.initCustomEvent(t,!1,!1,i),c&&(o.originalEvent=c),s.dispatchEvent(o),window&&"jQuery"in window){let h=window.jQuery,p=[];p.push(i),c&&p.push(c),h(s).trigger(t,p)}}load(e,t,i){if(e instanceof Dh)return t(e),!0;if(e instanceof ArrayBuffer){let n=new Uint8Array(e);return t(Pf.loadScoreFromBytes(n,this._api.settings)),!0}return e instanceof Uint8Array?(t(Pf.loadScoreFromBytes(e,this._api.settings)),!0):typeof e=="string"?(Pf.loadScoreAsync(e,t,i,this._api.settings),!0):!1}loadSoundFont(e,t){return this._api.player?e instanceof ArrayBuffer?(this._api.player.loadSoundFont(new Uint8Array(e),t),!0):e instanceof Uint8Array?(this._api.player.loadSoundFont(e,t),!0):typeof e=="string"?(this._api.loadSoundFontFromUrl(e,t),!0):!1:!1}initialRender(){this._api.renderer.preRender.on(t=>{this._totalResultCount=0,this._resultIdToElementLookup.clear(),this._barToElementLookup.clear()});const e=()=>{this._api.renderer.width=this.rootContainer.width|0,this._api.renderer.updateSettings(this._api.settings),this._contents?(this._api.tex(this._contents,this._initialTrackIndexes??void 0),this._initialTrackIndexes=null):this._file&&Pf.loadScoreAsync(this._file,t=>{this._api.renderScore(t,this._initialTrackIndexes??void 0),this._initialTrackIndexes=null},t=>{this._api.onError(t)},this._api.settings)};this.rootContainer.isVisible?e():this.rootContainerBecameVisible.on(e)}createStyleElement(e){let t=this._api.container.element.ownerDocument;Ce.createStyleElement(t,e.core.fontDirectory)}parseTracks(e){if(!e)return[];let t=[];if(typeof e=="string")try{if(e==="all")return[-1];e=JSON.parse(e)}catch{e=[0]}if(typeof e=="number")t.push(e);else if("length"in e){let i=e.length,n=e;for(let s=0;s<i;s++){let o=n[s],c=0;typeof o=="number"?c=o:"index"in o?c=o.index:c=parseInt(o.toString()),(c>=0||c===-1)&&t.push(c)}}else"index"in e&&t.push(e.index);return t}getDataAttributes(){let e=new Map,t=this._api.container.element;if(t.dataset)for(let i of Object.keys(t.dataset)){let n=t.dataset[i];try{n=JSON.parse(n)}catch{n===""&&(n=null)}e.set(i,n)}else for(let i=0;i<t.attributes.length;i++){let n=t.attributes.item(i),s=n.nodeName;if(s.startsWith("data-")){let o=s.substr(5).split("-"),c=o[0];for(let p=1;p<o.length;p++)c+=o[p].substr(0,1).toUpperCase()+o[p].substr(1);let h=n.nodeValue;try{h=JSON.parse(h)}catch{h===""&&(h=null)}e.set(c,h)}}return e}beginUpdateRenderResults(e){if(!this._resultIdToElementLookup.has(e.id))return;const t=this._resultIdToElementLookup.get(e.id),i=e.renderResult;typeof i=="string"?t.innerHTML=i:"nodeType"in i&&t.replaceChildren(i),t.resultState=el.RenderDone,t.renderedResultId=e.id,t.renderedResult=Array.from(t.children)}beginAppendRenderResults(e){const t=this._api.canvasElement.element;if(e){let i;this._totalResultCount<t.childElementCount?i=t.childNodes.item(this._totalResultCount):(i=document.createElement("div"),t.appendChild(i)),i.style.zIndex="1",i.style.position="absolute",i.style.left=e.x+"px",i.style.top=e.y+"px",i.style.width=e.width+"px",i.style.height=e.height+"px",i.style.display="inline-block",i.layoutResultId=e.id,i.resultState=el.LayoutDone,delete i.renderedResultId,delete i.renderedResult,this._resultIdToElementLookup.set(e.id,i);for(let n=e.firstMasterBarIndex;n<=e.lastMasterBarIndex;n++)n>=0&&this._barToElementLookup.set(n,i);this._api.settings.core.enableLazyLoading&&(this._intersectionObserver.unobserve(i),this._intersectionObserver.observe(i)),this._totalResultCount++}else for(;t.childElementCount>this._totalResultCount;)this._api.settings.core.enableLazyLoading&&this._intersectionObserver.unobserve(t.lastChild),t.removeChild(t.lastElementChild)}createWorkerPlayer(){let e=null,t="ScriptProcessorNode"in window;return window.isSecureContext&&"AudioWorkletNode"in window&&this._api.settings.player.outputMode===um.WebAudioAudioWorklets?(ye.debug("Player","Will use webworkers for synthesizing and web audio api with worklets for playback"),e=new c_(new uW(this._api.settings),this._api.settings)):t&&(ye.debug("Player","Will use webworkers for synthesizing and web audio api with ScriptProcessor for playback"),e=new c_(new sW,this._api.settings)),e?e.ready.on(()=>{this._api.settings.player.soundFont&&this._api.loadSoundFontFromUrl(this._api.settings.player.soundFont,!1)}):ye.error("Player","Player requires webworkers and web audio api, browser unsupported",null),e}beginInvoke(e){window.requestAnimationFrame(()=>{e()})}highlightElements(e,t){const i=this._barToElementLookup.get(t);if(i){let n=i.getElementsByClassName(e);for(let s=0;s<n.length;s++)n.item(s).classList.add("at-highlight"),this._highlightedElements.push(n.item(s))}}removeHighlights(){const e=this._highlightedElements;if(e){for(const t of e)t.classList.remove("at-highlight");this._highlightedElements=[]}}destroyCursors(){let e=this._api.container.element,t=e.querySelector(".at-cursors");e.removeChild(t)}createCursors(){let e=this._api.container.element,t=document.createElement("div");t.classList.add("at-cursors");let i=document.createElement("div");i.classList.add("at-selection");const n=this.createScalingElement(),s=this.createScalingElement();let o=n.element;o.classList.add("at-cursor-bar");let c=s.element;return c.classList.add("at-cursor-beat"),e.style.position="relative",e.style.textAlign="left",t.style.position="absolute",t.style.zIndex="1000",t.style.display="inline",t.style.pointerEvents="none",i.style.position="absolute",o.style.position="absolute",o.style.left="0",o.style.top="0",o.style.willChange="transform",n.width=1,n.height=1,n.setBounds(0,0,1,1),c.style.position="absolute",c.style.transition="all 0s linear",c.style.left="0",c.style.top="0",c.style.willChange="transform",s.width=3,s.height=1,s.setBounds(0,0,1,1),e.insertBefore(t,e.firstChild),t.appendChild(i),t.appendChild(o),t.appendChild(c),new lW(new sl(t),n,s,new sl(i))}getOffset(e,t){let i=t.element,n=i.getBoundingClientRect(),s=n.top+i.ownerDocument.defaultView.pageYOffset,o=n.left+i.ownerDocument.defaultView.pageXOffset;if(e){let h=e.element,p=h.nodeName.toLowerCase();if(p!=="html"&&p!=="body"){let g=this.getOffset(null,e);s=s+h.scrollTop-g.y,o=o+h.scrollLeft-g.x}}let c=new gs;return c.x=o,c.y=s,c.w=n.width,c.h=n.height,c}getScrollContainer(){if(this._scrollContainer)return this._scrollContainer;let e=typeof this._api.settings.player.scrollElement=="string"?document.querySelector(this._api.settings.player.scrollElement):this._api.settings.player.scrollElement,t=e.nodeName.toLowerCase();return(t==="html"||t==="body")&&("scrollingElement"in document?e=document.scrollingElement:navigator.userAgent.indexOf("WebKit")!==-1?e=document.body:e=document.documentElement),this._scrollContainer=new sl(e),this._scrollContainer}createSelectionElement(){return this.createScalingElement()}createScalingElement(){const e=document.createElement("div");e.style.position="absolute";const t=new cW(e,100,100);return t.width=1,t.height=1,t.setBounds(0,0,1,1),t}scrollToY(e,t,i){this.internalScrollToY(e.element,t,i)}scrollToX(e,t,i){this.internalScrollToX(e.element,t,i)}internalScrollToY(e,t,i){if(this._api.settings.player.nativeBrowserSmoothScroll)e.scrollTo({top:t,behavior:"smooth"});else{let n=e.scrollTop,s=t-n,o=0,c=h=>{o===0&&(o=h);let p=h-o,g=Math.min(p/i,1);e.scrollTop=n+s*g|0,p<i&&window.requestAnimationFrame(c)};window.requestAnimationFrame(c)}}internalScrollToX(e,t,i){if(this._api.settings.player.nativeBrowserSmoothScroll)e.scrollTo({left:t,behavior:"smooth"});else{let n=e.scrollLeft,s=t-n,o=0,c=h=>{o===0&&(o=h);let p=h-o,g=Math.min(p/i,1);e.scrollLeft=n+s*g|0,p<i&&window.requestAnimationFrame(c)};window.requestAnimationFrame(c)}}}class uS extends nW{constructor(e,t){super(new hW(e),t),this.soundFontLoad=new Qt}tex(e,t){let i=this.uiFacade;super.tex(e,i.parseTracks(t))}print(e,t=null){let i=window.open("","","width=0,height=0"),n=i.document.createElement("div");e?n.style.width=e:this.settings.display.layoutMode===ru.Horizontal?n.style.width="297mm":n.style.width="210mm",i.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <style>
            .at-surface {
                width: auto !important;
                height: auto !important;
            }
            .at-surface > div {
                position: relative!important;
                left: auto !important;
                top: auto !important;
                break-inside: avoid;
            }
            </style>
          </head>
          <body></body>
        </html>
        `);const s=this.score;s&&(s.artist&&s.title?i.document.title=`${s.title} - ${s.artist}`:s.title&&(i.document.title=`${s.title}`)),i.document.body.appendChild(n);let o=typeof window.screenLeft<"u"?window.screenLeft:window.left,c=typeof window.screenTop<"u"?window.screenTop:window.top,h="innerWidth"in window?window.innerWidth:"clientWidth"in document.documentElement?document.documentElement.clientWidth:window.screen.width,p="innerHeight"in window?window.innerHeight:"clientHeight"in document.documentElement?document.documentElement.clientHeight:window.screen.height,g=n.offsetWidth+50,b=window.innerHeight,v=(h/2|0)-(g/2|0)+o,S=(p/2|0)-(b/2|0)+c;i.resizeTo(g,b),i.moveTo(v,S),i.focus();let B=Cr.jsObjectToSettings(Cr.settingsToJsObject(this.settings));B.core.enableLazyLoading=!1,B.core.useWorkers=!0,B.core.file=null,B.core.tracks=null,B.player.enableCursor=!1,B.player.enablePlayer=!1,B.player.enableElementHighlighting=!1,B.player.enableUserInteraction=!1,B.player.soundFont=null,B.display.scale=.8,B.display.stretchForce=.8,Vf.fromJson(B,t);let T=new uS(n,B);i.onunload=()=>{T.destroy()},T.renderer.postRenderFinished.on(()=>{i.print()}),T.renderTracks(this.tracks)}downloadMidi(e=Af.SingleTrackMultiChannel){if(!this.score)return;let t=new uc;t.format=e;let i=new nl(t,!0);new yi(this.score,this.settings,i).generate();let s=t.toBinary(),o=this.score.title?`${this.score.title}.mid`:"File.mid",c=document.createElement("a");c.download=o;let h=new Blob([s],{type:"audio/midi"}),p=URL.createObjectURL(h);c.href=p,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}changeTrackMute(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackMute(i,t)}changeTrackSolo(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackSolo(i,t)}changeTrackVolume(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackVolume(i,t)}trackIndexesToTracks(e){if(!this.score)return[];let t=[];if(e.length===1&&e[0]===-1)for(let i of this.score.tracks)t.push(i);else for(let i of e)i>=0&&i<this.score.tracks.length&&t.push(this.score.tracks[i]);return t}loadSoundFontFromUrl(e,t){this.player&&this.player.loadSoundFontFromUrl(e,t,i=>{this.soundFontLoad.trigger(i),this.uiFacade.triggerEvent(this.container,"soundFontLoad",i)})}}class h_{constructor(){this._initListeners=[]}exec(e,t,i){if(typeof t!="string"&&(i=[t],t="init"),t.charCodeAt(0)===95||t==="exec")return null;let n=new jQuery(e),s=n.data("alphaTab");if(t==="destroy"&&!s)return null;if(t!=="init"&&!s)throw new Error("alphaTab not initialized");let o=this[t];if(o){let c=[n,s].concat(i);return o.apply(this,c)}else return ye.error("Api","Method '"+t+"' does not exist on jQuery.alphaTab"),null}init(e,t,i){if(!t){t=new uS(e[0],i),e.data("alphaTab",t);for(let n of this._initListeners)n(e,t,i)}}destroy(e,t){e.removeData("alphaTab"),t.destroy()}print(e,t,i,n){t.print(i,n)}load(e,t,i,n){return t.load(i,n)}render(e,t){t.render()}renderScore(e,t,i,n){t.renderScore(i,n)}renderTracks(e,t,i){t.renderTracks(i)}invalidate(e,t){t.render()}tex(e,t,i,n){t.tex(i,n)}muteTrack(e,t,i,n){t.changeTrackMute(i,n)}soloTrack(e,t,i,n){t.changeTrackSolo(i,n)}trackVolume(e,t,i,n){t.changeTrackVolume(i,n)}loadSoundFont(e,t,i,n){t.loadSoundFont(i,n)}resetSoundFonts(e,t){t.resetSoundFonts()}pause(e,t){t.pause()}play(e,t){return t.play()}playPause(e,t){t.playPause()}stop(e,t){t.stop()}api(e,t){return t}player(e,t){return t.player}isReadyForPlayback(e,t){return t.isReadyForPlayback}playerState(e,t){return t.playerState}masterVolume(e,t,i){return typeof i=="number"&&(t.masterVolume=i),t.masterVolume}metronomeVolume(e,t,i){return typeof i=="number"&&(t.metronomeVolume=i),t.metronomeVolume}countInVolume(e,t,i){return typeof i=="number"&&(t.countInVolume=i),t.countInVolume}midiEventsPlayedFilter(e,t,i){return Array.isArray(i)&&(t.midiEventsPlayedFilter=i),t.midiEventsPlayedFilter}playbackSpeed(e,t,i){return typeof i=="number"&&(t.playbackSpeed=i),t.playbackSpeed}tickPosition(e,t,i){return typeof i=="number"&&(t.tickPosition=i),t.tickPosition}timePosition(e,t,i){return typeof i=="number"&&(t.timePosition=i),t.timePosition}loop(e,t,i){return typeof i=="boolean"&&(t.isLooping=i),t.isLooping}renderer(e,t){return t.renderer}score(e,t){return t.score}settings(e,t){return t.settings}tracks(e,t){return t.tracks}_oninit(e){this._initListeners.push(e)}static restore(e){new jQuery(e).empty().removeData("alphaTab")}}class cS{constructor(){this.buffer="",this._currentPath="",this._currentPathIsEmpty=!0,this.color=new _i(255,255,255,255),this.lineWidth=1,this.font=new ri("Arial",10,lr.Plain),this.textAlign=at.Left,this.textBaseline=It.Top}destroy(){}beginRender(e,t){this.buffer=`<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="${e|0}px" height="${t|0}px" class="at-surface-svg">
`,this._currentPath="",this._currentPathIsEmpty=!0,this.textBaseline=It.Top}beginGroup(e){this.buffer+=`<g class="${e}">`}endGroup(){this.buffer+="</g>"}endRender(){return this.buffer+="</svg>",this.buffer}fillRect(e,t,i,n){i>0&&(this.buffer+=`<rect x="${e|0}" y="${t|0}" width="${i}" height="${n}" fill="${this.color.rgba}" />
`)}strokeRect(e,t,i,n){this.buffer+=`<rect x="${e|0}" y="${t|0}" width="${i}" height="${n}" stroke="${this.color.rgba}"`,this.lineWidth!==1&&(this.buffer+=` stroke-width="${this.lineWidth}"`),this.buffer+=` fill="transparent" />
`}beginPath(){}closePath(){this._currentPath+=" z"}moveTo(e,t){this._currentPath+=` M${e},${t}`}lineTo(e,t){this._currentPathIsEmpty=!1,this._currentPath+=` L${e},${t}`}quadraticCurveTo(e,t,i,n){this._currentPathIsEmpty=!1,this._currentPath+=` Q${e},${t},${i},${n}`}bezierCurveTo(e,t,i,n,s,o){this._currentPathIsEmpty=!1,this._currentPath+=` C${e},${t},${i},${n},${s},${o}`}fillCircle(e,t,i){this._currentPathIsEmpty=!1,this._currentPath+=` M${e-i},${t} A1,1 0 0,0 ${e+i},${t} A1,1 0 0,0 ${e-i},${t} z`,this.fill()}strokeCircle(e,t,i){this._currentPathIsEmpty=!1,this._currentPath+=` M${e-i},${t} A1,1 0 0,0 ${e+i},${t} A1,1 0 0,0 ${e-i},${t} z`,this.stroke()}fill(){this._currentPathIsEmpty||(this.buffer+=`<path d="${this._currentPath}"`,this.color.rgba!=="#000000"&&(this.buffer+=` fill="${this.color.rgba}"`),this.buffer+=' style="stroke: none"/>'),this._currentPath="",this._currentPathIsEmpty=!0}stroke(){if(!this._currentPathIsEmpty){let e=`<path d="${this._currentPath}" stroke="${this.color.rgba}"`;this.lineWidth!==1&&(e+=` stroke-width="${this.lineWidth}"`),e+=' style="fill: none" />',this.buffer+=e}this._currentPath="",this._currentPathIsEmpty=!0}fillText(e,t,i){if(e==="")return;let n=`<text x="${t|0}" y="${i|0}" style="stroke: none; font:${this.font.toCssString(this.settings.display.scale)}" ${this.getSvgBaseLine()}`;this.color.rgba!=="#000000"&&(n+=` fill="${this.color.rgba}"`),this.textAlign!==at.Left&&(n+=` text-anchor="${this.getSvgTextAlignment(this.textAlign)}"`),n+=`>${cS.escapeText(e)}</text>`,this.buffer+=n}static escapeText(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}getSvgTextAlignment(e){switch(e){case at.Left:return"start";case at.Center:return"middle";case at.Right:return"end"}return""}getSvgBaseLine(){switch(this.textBaseline){case It.Top:return'dominant-baseline="hanging"';case It.Bottom:return'dominant-baseline="bottom"';default:return""}}measureText(e){return e?Nr.measureString(e,this.font.families,this.font.size,this.font.style,this.font.weight):0}onRenderFinished(){return null}beginRotate(e,t,i){this.buffer+='<g transform="translate('+e+" ,"+t+") rotate( "+i+')">'}endRotate(){this.buffer+="</g>"}}class dW extends cS{constructor(){super()}fillMusicFontSymbol(e,t,i,n,s){n!==N.None&&this.fillMusicFontSymbolText(e,t,i,`&#${n};`,s)}fillMusicFontSymbols(e,t,i,n,s){let o="";for(let c of n)c!==N.None&&(o+=`&#${c};`);this.fillMusicFontSymbolText(e,t,i,o,s)}fillMusicFontSymbolText(e,t,i,n,s){this.buffer+=`<g transform="translate(${e} ${t})" class="at" ><text`,i!==1?this.buffer+=` style="font-size: ${i*100}%; stroke:none"`:this.buffer+=' style="stroke:none"',this.color.rgba!=="#000000"&&(this.buffer+=` fill="${this.color.rgba}"`),s&&(this.buffer+=' text-anchor="'+this.getSvgTextAlignment(at.Center)+'"'),this.buffer+=`>${n}</text></g>`}}class hS{constructor(){this.isInAccolade=!0,this.isRelevantForBoundsLookup=!0,this.hideOnMultiTrack=!1,this.hideOnPercussionTrack=!1}canCreate(e,t){return!this.hideOnPercussionTrack||!t.isPercussion}}var Vt;(function(r){r[r.PreNotes=0]="PreNotes",r[r.OnNotes=1]="OnNotes",r[r.MiddleNotes=2]="MiddleNotes",r[r.Stem=3]="Stem",r[r.PostNotes=4]="PostNotes",r[r.EndBeat=5]="EndBeat"})(Vt||(Vt={}));class go extends vr{get isEmpty(){return!this.glyphs||this.glyphs.length===0}constructor(e,t){super(e,t),this.glyphs=null}doLayout(){if(!this.glyphs||this.glyphs.length===0){this.width=0;return}let e=0;for(let t=0,i=this.glyphs.length;t<i;t++){let n=this.glyphs[t];n.renderer=this.renderer,n.doLayout(),e=Math.max(e,n.width)}this.width=e}addGlyph(e){this.glyphs||(this.glyphs=[]),this.renderer&&(e.renderer=this.renderer),this.glyphs.push(e)}paint(e,t,i){let n=this.glyphs;if(!(!n||n.length===0))for(let s of n)s.paint(e+this.x,t+this.y,i)}}class Og extends go{constructor(){super(0,0),this.glyphs=[]}addGlyph(e){e.x=this.glyphs.length===0?0:this.glyphs[this.glyphs.length-1].x+this.glyphs[this.glyphs.length-1].width,e.renderer=this.renderer,e.doLayout(),this.width=e.x+e.width,super.addGlyph(e)}}class $C extends go{constructor(e,t,i){super(e,t),this.voice=i,this.beatGlyphs=[],this.tupletGroups=[]}scaleToWidth(e){const t=this.renderer.scale;let i=this.renderer.layoutingInfo.spaceToForce(e/t);this.scaleToForce(i)}scaleToForce(e){const t=this.renderer.scale;this.width=this.renderer.layoutingInfo.calculateVoiceWidth(e)*t;let i=this.renderer.layoutingInfo.buildOnTimePositions(e),n=this.beatGlyphs;for(let s=0,o=n.length;s<o;s++){let c=n[s];switch(c.beat.graceType){case ot.None:c.x=i.get(c.beat.absoluteDisplayStart)*t-c.onTimeX;break;default:const h=c.beat.graceGroup.beats[0].absoluteDisplayStart,p=c.beat.graceGroup.id;if(c.beat.graceGroup.isComplete&&i.has(h)){c.x=i.get(h)*t-c.onTimeX;let g=this.renderer.layoutingInfo.allGraceRods.get(p);const b=c.beat.graceGroup.beats[c.beat.graceGroup.beats.length-1].nextBeat,v=b?this.renderer.layoutingInfo.getPreBeatSize(b)+ho.GraceBeatPadding*this.renderer.scale:0;c.x-=v,c.x-=g[c.beat.graceIndex].postSpringWidth,c.x+=g[c.beat.graceIndex].graceBeatWidth;const S=g[c.beat.graceGroup.beats.length-1];c.x-=S.graceBeatWidth}else{let g=this.renderer.layoutingInfo.incompleteGraceRods.get(p);const b=g[c.beat.graceIndex].postSpringWidth-g[c.beat.graceIndex].preSpringWidth;s>0?c.beat.graceIndex===0?c.x=n[s-1].x+n[s-1].width:c.x=n[s-1].x+g[c.beat.graceIndex-1].postSpringWidth-g[c.beat.graceIndex-1].preSpringWidth-b:c.x=-b}break}if(s>0){let h=c.x-n[s-1].x;n[s-1].scaleToWidth(h)}if(s===o-1){let h=this.width-n[n.length-1].x;c.scaleToWidth(h)}}}registerLayoutingInfo(e){e.updateVoiceSize(this.width);let t=this.beatGlyphs;for(let i of t)i.registerLayoutingInfo(e)}applyLayoutingInfo(e){let t=this.beatGlyphs;for(let i of t)i.applyLayoutingInfo(e);this.scaleToForce(Math.max(this.renderer.settings.display.stretchForce,e.minStretchForce))}addGlyph(e){let t=e;e.x=this.beatGlyphs.length===0?0:this.beatGlyphs[this.beatGlyphs.length-1].x+this.beatGlyphs[this.beatGlyphs.length-1].width,e.renderer=this.renderer,e.doLayout(),this.beatGlyphs.push(t),this.width=e.x+e.width,t.beat.hasTuplet&&t.beat.tupletGroup.beats[0].id===t.beat.id&&this.tupletGroups.push(t.beat.tupletGroup)}doLayout(){}paint(e,t,i){i.color=this.voice.index===0?this.renderer.resources.mainGlyphColor:this.renderer.resources.secondaryGlyphColor;for(let n=0,s=this.beatGlyphs.length;n<s;n++)this.beatGlyphs[n].paint(e+this.x,t+this.y,i)}}$C.KeySizeBeat="Beat";var bi;(function(r){r[r.None=0]="None",r[r.Natural=1]="Natural",r[r.Sharp=2]="Sharp",r[r.Flat=3]="Flat",r[r.NaturalQuarterNoteUp=4]="NaturalQuarterNoteUp",r[r.SharpQuarterNoteUp=5]="SharpQuarterNoteUp",r[r.FlatQuarterNoteUp=6]="FlatQuarterNoteUp",r[r.DoubleSharp=7]="DoubleSharp",r[r.DoubleFlat=8]="DoubleFlat"})(bi||(bi={}));class fW{constructor(){this.maxLine=-1e3,this.minLine=-1e3}}class Br{constructor(e){this._registeredAccidentals=new Map,this._appliedScoreLines=new Map,this._appliedScoreLinesByValue=new Map,this._notesByValue=new Map,this._beatLines=new Map,this.maxLineBeat=null,this.minLineBeat=null,this.maxLine=-1e3,this.minLine=-1e3,this._barRenderer=e,this._bar=e.bar}static getPercussionLine(e,t){var i;return t<e.staff.track.percussionArticulations.length?e.staff.track.percussionArticulations[t].staffLine:((i=hn.getArticulationByValue(t))==null?void 0:i.staffLine)??0}static getNoteValue(e){if(e.isPercussion)return e.percussionArticulation;let t=e.displayValue;switch(e.accidentalMode){case Tr.ForceDoubleFlat:t+=2;break;case Tr.ForceDoubleSharp:t-=2;break;case Tr.ForceFlat:t+=1;break;case Tr.ForceSharp:t-=1;break}return t}applyAccidental(e){const t=Br.getNoteValue(e);let i=e.hasQuarterToneOffset;return this.getAccidental(t,i,e.beat,!1,e)}applyAccidentalForValue(e,t,i,n){return this.getAccidental(t,i,e,n,null)}static computeLineWithoutAccidentals(e,t){let i=0;const n=Br.getNoteValue(t);if(e.staff.isPercussion)i=Br.getPercussionLine(e,n);else{const s=t?t.accidentalMode:Tr.Default;i=Br.calculateNoteLine(e,n,s)}return i}getAccidental(e,t,i,n,s=null){let o=bi.None,c=0;if(this._bar.staff.isPercussion)c=Br.getPercussionLine(this._bar,e);else{const h=s?s.accidentalMode:Tr.Default;c=Br.calculateNoteLine(this._bar,e,h);let g=this._bar.masterBar.keySignature+7,b=e%12,v=g<7?bi.Flat:bi.Sharp,S=Br.KeySignatureLookup[g][b],B=Br.AccidentalNotes[b];if(t)switch(o=B?v:bi.Natural,o){case bi.Natural:o=bi.NaturalQuarterNoteUp;break;case bi.Sharp:o=bi.SharpQuarterNoteUp;break;case bi.Flat:o=bi.FlatQuarterNoteUp;break}else{switch(h){case Tr.ForceSharp:o=bi.Sharp;break;case Tr.ForceDoubleSharp:o=bi.DoubleSharp;break;case Tr.ForceFlat:o=bi.Flat;break;case Tr.ForceDoubleFlat:o=bi.DoubleFlat;break;default:B?o=v:S&&(o=bi.Natural);break}let T=!1;if(s&&s.isTieDestination&&s.beat.index===0){const C=this._barRenderer.previousRenderer;C&&C.accidentalHelper.getNoteLine(s.tieOrigin)===c&&(T=!0)}T?o=bi.None:o!==bi.None?(this._registeredAccidentals.has(c)?this._registeredAccidentals.get(c)===o&&(o=bi.None):S&&o===v&&(o=bi.None),o!==bi.None&&this._registeredAccidentals.set(c,o)):this._registeredAccidentals.has(c)?this._registeredAccidentals.get(c)===bi.Natural?o=bi.None:(o=bi.Natural,this._registeredAccidentals.set(c,o)):this._registeredAccidentals.delete(c)}}return s?(this._appliedScoreLines.set(s.id,c),this._notesByValue.set(e,s)):this._appliedScoreLinesByValue.set(e,c),(this.minLine===-1e3||this.minLine<c)&&(this.minLine=c,this.minLineBeat=i),(this.maxLine===-1e3||this.maxLine>c)&&(this.maxLine=c,this.maxLineBeat=i),n||this.registerLine(i,c),o}registerLine(e,t){let i;this._beatLines.has(e.id)?i=this._beatLines.get(e.id):(i=new fW,this._beatLines.set(e.id,i)),(i.minLine===-1e3||t<i.minLine)&&(i.minLine=t),(i.minLine===-1e3||t>i.maxLine)&&(i.maxLine=t)}getMaxLine(e){return this._beatLines.has(e.id)?this._beatLines.get(e.id).maxLine:0}getMinLine(e){return this._beatLines.has(e.id)?this._beatLines.get(e.id).minLine:0}static calculateNoteLine(e,t,i){let n=t,s=e.masterBar.keySignature,o=e.clef,c=n%12,h=(n/12|0)-1,p=Br.OctaveSteps[o];p-=h*Br.StepsPerOctave;let g=Fi.keySignatureIsSharp(s)||Fi.keySignatureIsNatural(s)?Br.SharpNoteSteps:Br.FlatNoteSteps;return p-=g[c],p}getNoteLine(e){return this._appliedScoreLines.get(e.id)}getNoteLineForValue(e,t=!1){return this._appliedScoreLinesByValue.has(e)?this._appliedScoreLinesByValue.get(e):t&&this._notesByValue.has(e)?this.getNoteLine(this._notesByValue.get(e)):0}}Br.KeySignatureLookup=[[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]];Br.AccidentalNotes=[!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!0,!1];Br.StepsPerOctave=7;Br.OctaveSteps=[38,32,30,26,38];Br.SharpNoteSteps=[0,0,1,1,2,3,3,4,4,5,5,6];Br.FlatNoteSteps=[0,1,1,2,2,3,4,4,5,5,6,6];class pW{constructor(){this.staffId="",this.up=0,this.down=0}}class gW{constructor(){this.startBeat=null,this.startX=0,this.startY=0,this.endBeat=null,this.endX=0,this.endY=0}calcY(e){return this.startX===this.endX?this.startY:(this.endY-this.startY)/(this.endX-this.startX)*(e-this.startX)+this.startY}}class Ds{get isRestBeamHelper(){return this.beats.length===1&&this.beats[0].isRest}get hasLine(){return this.beats.length===1&&this.beats[0].duration>Y.Whole}get hasFlag(){return this.beats.length===1&&!this.beats[0].isRest&&(this.beats[0].duration>Y.Quarter||this.beats[0].graceType!==ot.None)}constructor(e,t){this._beatLineXPositions=new Map,this._firstNonRestBeat=null,this._lastNonRestBeat=null,this.voice=null,this.beats=[],this.shortestDuration=Y.QuadrupleWhole,this.fingeringCount=0,this.hasTuplet=!1,this._firstBeatLowestNoteCompareValue=-1,this._firstBeatHighestNoteCompareValue=-1,this._lastBeatLowestNoteCompareValue=-1,this._lastBeatHighestNoteCompareValue=-1,this.lowestNoteInHelper=null,this._lowestNoteCompareValueInHelper=-1,this.highestNoteInHelper=null,this._highestNoteCompareValueInHelper=-1,this.invertBeamDirection=!1,this.preferredBeamDirection=null,this.isGrace=!1,this.minRestLine=null,this.beatOfMinRestLine=null,this.maxRestLine=null,this.beatOfMaxRestLine=null,this.direction=Te.Up,this.drawingInfos=new Map,this._staff=e,this._renderer=t,this.beats=[]}getBeatLineX(e){return this.hasBeatLineX(e)?this.direction===Te.Up?this._beatLineXPositions.get(e.index).up:this._beatLineXPositions.get(e.index).down:0}hasBeatLineX(e){return this._beatLineXPositions.has(e.index)}registerBeatLineX(e,t,i,n){let s=this.getOrCreateBeatPositions(t);s.staffId=e,s.up=i,s.down=n;for(const o of this.drawingInfos.values())o.startBeat==t?o.startX=this.getBeatLineX(t):o.endBeat==t&&(o.endX=this.getBeatLineX(t))}getOrCreateBeatPositions(e){return this._beatLineXPositions.has(e.index)||this._beatLineXPositions.set(e.index,new pW),this._beatLineXPositions.get(e.index)}finish(){this.direction=this.calculateDirection()}calculateDirection(){let e=null;if(this.voice?this.preferredBeamDirection!==null?e=this.preferredBeamDirection:this.voice.index>0?e=this.invert(Te.Down):this.voice.bar.isMultiVoice?e=this.invert(Te.Up):this.beats[0].graceType!==ot.None&&(e=this.invert(Te.Up)):e=Te.Up,this.highestNoteInHelper&&this.lowestNoteInHelper){let t=this._renderer.getNoteY(this.highestNoteInHelper,Ke.Center),i=this._renderer.getNoteY(this.lowestNoteInHelper,Ke.Center);if(e===null){const n=(t+i)/2;e=this.invert(this._renderer.middleYPosition<n?Te.Up:Te.Down)}this._renderer.completeBeamingHelper(this)}else e=this.invert(Te.Up),this._renderer.completeBeamingHelper(this);return e}static computeLineHeightsForRest(e){switch(e){case Y.QuadrupleWhole:return[2,2];case Y.DoubleWhole:return[2,2];case Y.Whole:return[0,1];case Y.Half:return[1,0];case Y.Quarter:return[3,3];case Y.Eighth:return[2,2];case Y.Sixteenth:return[2,4];case Y.ThirtySecond:return[4,4];case Y.SixtyFourth:return[4,6];case Y.OneHundredTwentyEighth:return[6,6];case Y.TwoHundredFiftySixth:return[6,8]}return[0,0]}applyRest(e,t){if(this._lastNonRestBeat&&e.index>=this._lastNonRestBeat.index||this._firstNonRestBeat&&e.index<=this._firstNonRestBeat.index)return;let i=t,n=t;const s=Ds.computeLineHeightsForRest(e.duration);i-=s[0],n+=s[1];const o=this.minRestLine,c=this.maxRestLine;(o===null||o>i)&&(this.minRestLine=i,this.beatOfMinRestLine=e),(c===null||c<n)&&(this.maxRestLine=n,this.beatOfMaxRestLine=e)}invert(e){if(!this.invertBeamDirection)return e;switch(e){case Te.Down:return Te.Up;default:return Te.Down}}checkBeat(e){e.invertBeamDirection&&(this.invertBeamDirection=!0),this.voice||(this.voice=e.voice);let t=!1;if(this.beats.length===0)t=!0;else switch(this.beats[this.beats.length-1].beamingMode){case co.Auto:t=Ds.canJoin(this.beats[this.beats.length-1],e);break;case co.ForceSplitToNext:t=!1;break;case co.ForceMergeWithNext:t=!0;break}if(t){if(e.preferredBeamDirection!==null&&(this.preferredBeamDirection=e.preferredBeamDirection),e.isRest)this.beats.length===0&&this.beats.push(e);else{this.isRestBeamHelper&&(this.beats=[]),this.beats.push(e),e.graceType!==ot.None&&(this.isGrace=!0),e.hasTuplet&&(this.hasTuplet=!0);let i=0;for(let n=0;n<e.notes.length;n++){let s=e.notes[n];(s.leftHandFinger!==kt.Unknown||s.rightHandFinger!==kt.Unknown)&&i++}i>this.fingeringCount&&(this.fingeringCount=i),this.checkNote(e.minNote),this.checkNote(e.maxNote),this.shortestDuration<e.duration&&(this.shortestDuration=e.duration),this._firstNonRestBeat||(this._firstNonRestBeat=e),this._lastNonRestBeat=e}e.hasTuplet&&(this.hasTuplet=!0)}return t}checkNote(e){if(!e)return;let t,i;this.voice&&e.isPercussion?(t=-Br.getPercussionLine(this.voice.bar,Br.getNoteValue(e)),i=t):(t=Br.getNoteValue(e),i=t,e.harmonicType!==Ze.None&&e.harmonicType!==Ze.Natural&&(i=e.realValue-this._staff.displayTranspositionPitch)),this.beats.length===1&&this.beats[0]===e.beat&&((this._firstBeatLowestNoteCompareValue===-1||t<this._firstBeatLowestNoteCompareValue)&&(this._firstBeatLowestNoteCompareValue=t),(this._firstBeatHighestNoteCompareValue===-1||i>this._firstBeatHighestNoteCompareValue)&&(this._firstBeatHighestNoteCompareValue=i)),(this._lastBeatLowestNoteCompareValue===-1||t<this._lastBeatLowestNoteCompareValue)&&(this._lastBeatLowestNoteCompareValue=t),(this._lastBeatHighestNoteCompareValue===-1||i>this._lastBeatHighestNoteCompareValue)&&(this._lastBeatHighestNoteCompareValue=i),(!this.lowestNoteInHelper||t<this._lowestNoteCompareValueInHelper)&&(this.lowestNoteInHelper=e,this._lowestNoteCompareValueInHelper=t),(!this.highestNoteInHelper||i>this._highestNoteCompareValueInHelper)&&(this.highestNoteInHelper=e,this._highestNoteCompareValueInHelper=i)}static canJoin(e,t){if(!e||!t||e.graceType!==t.graceType||e.graceType===ot.BendGrace||t.graceType===ot.BendGrace)return!1;if(e.graceType!==ot.None&&t.graceType!==ot.None)return!0;let i=e.voice.bar,n=t.voice.bar;if(i!==n)return!1;let s=e.playbackStart,o=t.playbackStart;if(!Ds.canJoinDuration(e.duration)||!Ds.canJoinDuration(t.duration))return s===o;if(e.tupletGroup!==t.tupletGroup)return!1;if(e.hasTuplet&&t.hasTuplet&&e.tupletGroup===t.tupletGroup&&e.tupletGroup.isFull)return!0;let c=Ct.QuarterTime;switch(i.masterBar.timeSignatureDenominator){case 8:i.masterBar.timeSignatureNumerator%3===0&&(c+=Ct.QuarterTime/2|0);break}let h=(c+s)/c|0|0,p=(c+o)/c|0|0;return h===p}static canJoinDuration(e){switch(e){case Y.Whole:case Y.Half:case Y.Quarter:return!1;default:return!0}}static isFullBarJoin(e,t,i){return Fi.getIndex(e.duration)-2-i>0&&Fi.getIndex(t.duration)-2-i>0}get beatOfLowestNote(){return this.lowestNoteInHelper.beat}get beatOfHighestNote(){return this.highestNoteInHelper.beat}isPositionFrom(e,t){return this._beatLineXPositions.has(t.index)?this._beatLineXPositions.get(t.index).staffId===e||!this._beatLineXPositions.get(t.index).staffId:!0}}class mW{constructor(e,t){this.topY=0,this.bottomY=0,this.topY=e,this.bottomY=t}}class yW{constructor(e){this.topY=-1e3,this.bottomY=-1e3,this.slots=[],this.beat=e}addSlot(e,t){if(this.slots.push(new mW(e,t)),this.topY===-1e3)this.topY=e,this.bottomY=t;else{const i=Math.min(e,t),n=Math.max(e,t);i<this.topY&&(this.topY=i),n>this.bottomY&&(this.bottomY=n)}}}class bW{constructor(){this.reservedLayoutAreasByDisplayTime=new Map,this.restDurationsByDisplayTime=new Map}getBeatMinMaxY(){let e=-1e3,t=-1e3;for(const i of this.reservedLayoutAreasByDisplayTime.values())e===-1e3?(e=i.topY,t=i.bottomY):(e>i.topY&&(e=i.topY),t<i.bottomY&&(t=i.bottomY));return e===-1e3?[0,0]:[e,t]}reserveBeatSlot(e,t,i){t!=i&&(this.reservedLayoutAreasByDisplayTime.has(e.displayStart)||this.reservedLayoutAreasByDisplayTime.set(e.displayStart,new yW(e)),this.reservedLayoutAreasByDisplayTime.get(e.displayStart).addSlot(t,i),e.isRest&&this.registerRest(e))}registerRest(e){this.restDurationsByDisplayTime.has(e.displayStart)||this.restDurationsByDisplayTime.set(e.displayStart,new Map),this.restDurationsByDisplayTime.get(e.displayStart).has(e.playbackDuration)||this.restDurationsByDisplayTime.get(e.displayStart).set(e.playbackDuration,e.id)}applyRestCollisionOffset(e,t,i){if(e.voice.index>0&&this.reservedLayoutAreasByDisplayTime.has(e.playbackStart)){const n=Ds.computeLineHeightsForRest(e.duration).map(g=>g*i);let s=t-n[0],o=t+n[1],c=s;const h=this.reservedLayoutAreasByDisplayTime.get(e.playbackStart);let p=!1;for(const g of h.slots)if(s>=g.topY&&s<=g.bottomY||o>=g.topY&&o<=g.bottomY){p=!0;break}if(p){e.voice.index==1?c=h.topY-n[1]-n[0]:c=h.bottomY;let g=c+n[0]+n[1];const b=i*2;let v=Math.ceil(Math.abs(c-s)/b);return h.addSlot(c,g),c<s?v*-b:v*b}}return 0}}class vW{constructor(e){this.beamHelpers=[],this.beamHelperLookup=[],this._renderer=e,this.collisionHelper=new bW}initialize(){var e=this._renderer,t=this._renderer.bar;let i=null,n=null;for(let s=0,o=t.voices.length;s<o;s++){let c=t.voices[s];this.beamHelpers.push([]),this.beamHelperLookup.push(new Map);for(let h=0,p=c.beats.length;h<p;h++){let g=c.beats[h],b;g.graceType!==ot.None?b=n:(b=i,n=null),(!b||!b.checkBeat(g))&&(b&&b.finish(),b=new Ds(t.staff,e),b.checkBeat(g),g.graceType!==ot.None?n=b:i=b,this.beamHelpers[c.index].push(b)),this.beamHelperLookup[c.index].set(g.index,b)}i&&i.finish(),n&&n.finish(),i=null,n=null}}getBeamingHelperForBeat(e){return this.beamHelperLookup[e.voice.index].get(e.index)}}class cn extends bo{constructor(e,t,i){super(e,t),this._textRow=0,this._fretRow=0,this._firstFretSpacing=0,this._chord=i}doLayout(){super.doLayout();const e=this.scale;let t=this.renderer.resources;this._textRow=t.effectFont.size*1.5*e,this._fretRow=t.effectFont.size*1.5*e,this._chord.firstFret>1?this._firstFretSpacing=cn.FretSpacing*e:this._firstFretSpacing=0,this.height=this._textRow+this._fretRow+(cn.Frets-1)*cn.FretSpacing*e+2*cn.Padding*e,this.width=this._firstFretSpacing+(this._chord.staff.tuning.length-1)*cn.StringSpacing*e+2*cn.Padding*e}paint(e,t,i){e+=this.x+cn.Padding*this.scale+this._firstFretSpacing,t+=this.y;let n=this.width-2*cn.Padding*this.scale+this.scale-this._firstFretSpacing,s=cn.StringSpacing*this.scale,o=cn.FretSpacing*this.scale,c=this.renderer.resources,h=cn.CircleRadius*this.scale,p=i.textAlign,g=i.textBaseline;i.font=c.effectFont,i.textAlign=at.Center,i.textBaseline=It.Top,this._chord.showName&&i.fillText(this._chord.name,e+this.width/2,t+c.effectFont.size/2),t+=this._textRow,e+=s/2,i.font=c.fretboardNumberFont,i.textBaseline=It.Middle;for(let v=0;v<this._chord.staff.tuning.length;v++){let S=e+v*s,B=t+this._fretRow/2,T=this._chord.strings[this._chord.staff.tuning.length-v-1];T<0?i.fillMusicFontSymbol(S,B,this.scale,N.FretboardX,!0):T===0?i.fillMusicFontSymbol(S,B,this.scale,N.FretboardO,!0):(T-=this._chord.firstFret-1,i.fillText(T.toString(),S,B))}t+=this._fretRow;for(let v=0;v<this._chord.staff.tuning.length;v++){let S=e+v*s;i.fillRect(S,t,1,o*cn.Frets+this.scale)}this._chord.firstFret>1&&(i.textAlign=at.Left,i.fillText(this._chord.firstFret.toString(),e-this._firstFretSpacing,t+o/2)),i.fillRect(e,t-this.scale,n,2*this.scale);for(let v=0;v<=cn.Frets;v++){let S=t+v*o;i.fillRect(e,S,n,this.scale)}let b=new Map;for(let v of this._chord.barreFrets){let S=[-1,-1];b.set(v-this._chord.firstFret,S)}for(let v=0;v<this._chord.strings.length;v++){let S=this._chord.strings[v];if(S>0){if(S-=this._chord.firstFret,b.has(S)){let C=b.get(S);(C[0]===-1||v<C[0])&&(C[0]=v),(C[1]===-1||v>C[1])&&(C[1]=v)}let B=t+S*o+o/2+.5*this.scale,T=e+(this._chord.strings.length-v-1)*s;i.fillCircle(T,B,h)}}for(const[v,S]of b){let B=t+v*o+o/2+.5*this.scale,T=e+(this._chord.strings.length-S[1]-1)*s,C=e+(this._chord.strings.length-S[0]-1)*s;i.fillRect(T,B-h,C-T,h*2)}i.textAlign=p,i.textBaseline=g}}cn.Padding=5;cn.Frets=5;cn.CircleRadius=2.5;cn.StringSpacing=10;cn.FretSpacing=12;class d_ extends go{constructor(e,t,i=at.Center){super(e,t),this._glyphWidth=0,this.glyphs=[],this._align=i}doLayout(){let e=0;switch(this._align){case at.Left:e=0;break;case at.Center:e=(this.width-this._glyphWidth)/2;break;case at.Right:e=this.width-this._glyphWidth;break}for(let t of this.glyphs)t.x=e,e+=t.width}addGlyphToRow(e){this.glyphs.push(e),this._glyphWidth+=e.width,e.height>this.height&&(this.height=e.height)}}class zf extends go{constructor(e,t,i=at.Center){super(e,t),this._rows=[],this.height=0,this.glyphs=[],this._align=i}doLayout(){let e=0,t=0,i=2*zf.Padding*this.scale;this._rows=[];let n=new d_(e,t,this._align);n.width=this.width;for(let s of this.glyphs)e+s.width<this.width?(n.addGlyphToRow(s),e+=s.width):(n.isEmpty||(n.doLayout(),this._rows.push(n),t+=n.height+i),e=0,n=new d_(e,t,this._align),n.width=this.width,n.addGlyphToRow(s),e+=s.width);n.isEmpty||(n.doLayout(),this._rows.push(n),t+=n.height+i),this.height=t+i}paint(e,t,i){for(let n of this._rows)n.paint(e+this.x,t+this.y+zf.Padding*this.scale,i)}}zf.Padding=3;class wW extends zf{constructor(e,t){super(e,t)}addChord(e){if(e.strings.length>0){let t=new cn(0,0,e);t.renderer=this.renderer,t.doLayout(),this.glyphs.push(t)}}}class On extends bo{constructor(e,t,i,n,s=at.Left){super(e,t),this._lines=i.split(`
`),this.font=n,this.textAlign=s}doLayout(){super.doLayout(),this.height=this.font.size*this._lines.length}paint(e,t,i){let n=i.color;i.color=n,i.font=this.font;let s=i.textAlign;i.textAlign=this.textAlign;let o=t+this.y;for(let c of this._lines)i.fillText(c,e+this.x,o),o+=this.font.size;i.textAlign=s}}class xW{get staveId(){return this._factory.staffId}constructor(e,t,i){this._sharedLayoutData=new Map,this.barRenderers=[],this.x=0,this.y=0,this.height=0,this.index=0,this.staffIndex=0,this.trackIndex=0,this.staveTop=0,this.topSpacing=20,this.bottomSpacing=5,this.staveBottom=0,this.isFirstInAccolade=!1,this.isLastInAccolade=!1,this._factory=i,this.trackIndex=e,this.modelStaff=t}getSharedLayoutData(e,t){return this._sharedLayoutData.has(e)?this._sharedLayoutData.get(e):t}setSharedLayoutData(e,t){this._sharedLayoutData.set(e,t)}get isInAccolade(){return this._factory.isInAccolade}get isRelevantForBoundsLookup(){return this._factory.isRelevantForBoundsLookup}registerStaffTop(e){this.staveTop=e}registerStaffBottom(e){this.staveBottom=e}addBarRenderer(e){e.staff=this,e.index=this.barRenderers.length,e.reLayout(),this.barRenderers.push(e),this.staveGroup.layout.registerBarRenderer(this.staveId,e)}addBar(e,t){let i;e?i=this._factory.create(this.staveGroup.layout.renderer,e):i=new or(this.staveGroup.layout.renderer,e),i.staff=this,i.index=this.barRenderers.length,i.layoutingInfo=t,i.doLayout(),i.registerLayoutingInfo();const n=i.barDisplayWidth;n>0&&this.staveGroup.layout.systemsLayoutMode==As.FromModelWithWidths&&(i.width=n),this.barRenderers.push(i),e&&this.staveGroup.layout.registerBarRenderer(this.staveId,i)}revertLastBar(){let e=this.barRenderers[this.barRenderers.length-1];return this.barRenderers.splice(this.barRenderers.length-1,1),this.staveGroup.layout.unregisterBarRenderer(this.staveId,e),e}scaleToWidth(e){this._sharedLayoutData=new Map;let t=this.topOverflow,i=0;switch(this.staveGroup.layout.systemsLayoutMode){case As.Automatic:let s=(e-this.staveGroup.computedWidth)/this.barRenderers.length;for(const c of this.barRenderers){c.x=i,c.y=this.topSpacing+t;let h=c.computedWidth+s;c.scaleToWidth(h),i+=c.width}break;case As.FromModelWithScale:e-=this.staveGroup.accoladeSpacing;const o=this.staveGroup.totalBarDisplayScale;for(const c of this.barRenderers){c.x=i,c.y=this.topSpacing+t;const h=c.barDisplayScale*e/o;c.scaleToWidth(h),i+=c.width}break;case As.FromModelWithWidths:for(const c of this.barRenderers){c.x=i,c.y=this.topSpacing+t;const h=c.barDisplayWidth;h>0?c.scaleToWidth(h):c.scaleToWidth(c.computedWidth),i+=c.width}break}}get topOverflow(){let e=0;for(let t=0,i=this.barRenderers.length;t<i;t++){let n=this.barRenderers[t];n.topOverflow>e&&(e=n.topOverflow)}return e}get bottomOverflow(){let e=0;for(let t=0,i=this.barRenderers.length;t<i;t++){let n=this.barRenderers[t];n.bottomOverflow>e&&(e=n.bottomOverflow)}return e}finalizeStaff(){this.height=0;let e=!1,t=this.topOverflow;for(let i=0;i<this.barRenderers.length;i++)this.barRenderers[i].y=this.topSpacing+t,this.height=Math.max(this.height,this.barRenderers[i].height),this.barRenderers[i].finalizeRenderer()&&(e=!0);if(e){t=this.topOverflow;for(let i=0;i<this.barRenderers.length;i++)this.barRenderers[i].y=this.topSpacing+t,this.height=Math.max(this.height,this.barRenderers[i].height),this.barRenderers[i].finalizeRenderer()}this.height>0&&(this.height+=this.topSpacing+t+this.bottomOverflow+this.bottomSpacing)}paint(e,t,i,n,s){if(!(this.height===0||s===0))for(let o=n,c=Math.min(n+s,this.barRenderers.length);o<c;o++)this.barRenderers[o].paint(e+this.x,t+this.y,i)}}class f_{constructor(){this.timePosition=0,this.longestDuration=0,this.smallestDuration=0,this.force=0,this.springConstant=0,this.preBeatWidth=0,this.graceBeatWidth=0,this.postSpringWidth=0,this.allDurations=new Set}get springWidth(){return this.preSpringWidth+this.postSpringWidth}get preSpringWidth(){return this.preBeatWidth+this.graceBeatWidth}}class Wf{constructor(){this._timeSortedSprings=[],this._xMin=0,this._minTime=-1,this._onTimePositionsForce=0,this._onTimePositions=new Map,this._incompleteGraceRodsWidth=0,this.version=0,this.preBeatSizes=new Map,this.onBeatSizes=new Map,this.onBeatCenterX=new Map,this.preBeatSize=0,this.postBeatSize=0,this.voiceSize=0,this.minStretchForce=0,this.totalSpringConstant=0,this.incompleteGraceRods=new Map,this.allGraceRods=new Map,this.springs=new Map,this.height=0}updateVoiceSize(e){e>this.voiceSize&&(this.voiceSize=e,this.version++)}setPreBeatSize(e,t){(!this.preBeatSizes.has(e.id)||this.preBeatSizes.get(e.id)<t)&&(this.preBeatSizes.set(e.id,t),this.version++)}getPreBeatSize(e){return this.preBeatSizes.has(e.id)?this.preBeatSizes.get(e.id):0}setOnBeatSize(e,t){(!this.onBeatSizes.has(e.id)||this.onBeatSizes.get(e.id)<t)&&(this.onBeatSizes.set(e.id,t),this.version++)}getOnBeatSize(e){return this.onBeatSizes.has(e.id)?this.onBeatSizes.get(e.id):0}getBeatCenterX(e){return this.onBeatCenterX.has(e.id)?this.onBeatCenterX.get(e.id):0}setBeatCenterX(e,t){(!this.onBeatCenterX.has(e.id)||this.onBeatCenterX.get(e.id)<t)&&(this.onBeatCenterX.set(e.id,t),this.version++)}updateMinStretchForce(e){this.minStretchForce<e&&(this.minStretchForce=e)}addSpring(e,t,i,n,s){this.version++;let o;if(this.springs.has(e))o=this.springs.get(e),o.postSpringWidth<s&&(o.postSpringWidth=s),o.graceBeatWidth<i&&(o.graceBeatWidth=i),o.preBeatWidth<n&&(o.preBeatWidth=n),t<o.smallestDuration&&(o.smallestDuration=t),t>o.longestDuration&&(o.longestDuration=t),o.allDurations.add(t);else{if(o=new f_,o.timePosition=e,o.allDurations.add(t),this._timeSortedSprings.length>0){let p=this._timeSortedSprings[this._timeSortedSprings.length-1];for(const g of p.allDurations)p.timePosition+g}o.longestDuration=t,o.postSpringWidth=s,o.graceBeatWidth=i,o.preBeatWidth=n,this.springs.set(e,o);let c=this._timeSortedSprings,h=c.length-1;for(;h>0&&c[h].timePosition>e;)h--;this._timeSortedSprings.splice(h+1,0,o)}return(this._minTime===-1||this._minTime>e)&&(this._minTime=e),o}addBeatSpring(e,t,i){let n=e.absoluteDisplayStart;if(e.graceType!==ot.None){const s=e.graceGroup.id;this.allGraceRods.has(s)||this.allGraceRods.set(s,new Array(e.graceGroup.beats.length)),!e.graceGroup.isComplete&&!this.incompleteGraceRods.has(s)&&this.incompleteGraceRods.set(s,new Array(e.graceGroup.beats.length));let o=this.allGraceRods.get(s)[e.graceIndex];if(o)o.postSpringWidth<i&&(o.postSpringWidth=i),o.preBeatWidth<t&&(o.preBeatWidth=t);else{const c=new f_;c.timePosition=n,c.postSpringWidth=i,c.preBeatWidth=t,e.graceGroup.isComplete||(this.incompleteGraceRods.get(s)[e.graceIndex]=c),this.allGraceRods.get(s)[e.graceIndex]=c}}else{let s=0;if(e.graceGroup&&this.allGraceRods.has(e.graceGroup.id))for(const o of this.allGraceRods.get(e.graceGroup.id))s+=o.springWidth;this.addSpring(n,e.displayDuration,s,t,i)}}finish(){for(const[e,t]of this.allGraceRods){let i=0;if(this.incompleteGraceRods.has(e))for(const n of t)i+=n.preBeatWidth,n.graceBeatWidth=i,i+=n.postSpringWidth;else for(let n=t.length-1;n>=0;n--)t[n].graceBeatWidth=i,i-=t[n].preBeatWidth+t[n].postSpringWidth}this._incompleteGraceRodsWidth=0;for(const e of this.incompleteGraceRods.values())for(const t of e)this._incompleteGraceRodsWidth+=t.preBeatWidth+t.postSpringWidth;this.calculateSpringConstants(),this.version++}calculateSpringConstants(){this._xMin=0;let e=this.springs;for(const n of e.values())n.springWidth<this._xMin&&(this._xMin=n.springWidth);let t=0,i=this._timeSortedSprings;if(i.length===0){this.totalSpringConstant=-1,this.minStretchForce=-1;return}for(let n=0;n<i.length;n++){let s=i[n],o=0;if(n===i.length-1)o=s.longestDuration;else{let c=i[n+1];o=Math.abs(c.timePosition-s.timePosition)}s.springConstant=this.calculateSpringConstant(s,o),t+=1/s.springConstant}this.totalSpringConstant=1/t,this.minStretchForce=0;for(let n=0;n<i.length;n++){let s=i[n],o=0;if(n===i.length-1)o=s.postSpringWidth;else{let h=i[n+1];o=s.postSpringWidth+h.preSpringWidth}n===0&&(o+=s.preSpringWidth);let c=o*s.springConstant;this.updateMinStretchForce(c)}}paint(e,t,i){}calculateSpringConstant(e,t){t<=0&&(t=Ct.toTicks(Y.SixtyFourth)),e.smallestDuration===0&&(e.smallestDuration=t);let i=e.smallestDuration,n=1+.85*Math.log2(t/Wf.MinDuration);return i/t*(1/(n*Wf.MinDurationWidth))}spaceToForce(e){return this.totalSpringConstant!==-1?(this._timeSortedSprings.length>0&&(e-=this._timeSortedSprings[0].preSpringWidth),e-=this._incompleteGraceRodsWidth,Math.max(e,0)*this.totalSpringConstant):-1}calculateVoiceWidth(e){let t=0;return this.totalSpringConstant!==-1&&(t=this.calculateWidth(e,this.totalSpringConstant)),this._timeSortedSprings.length>0&&(t+=this._timeSortedSprings[0].preSpringWidth),t+=this._incompleteGraceRodsWidth,t}calculateWidth(e,t){return e/t}buildOnTimePositions(e){if(this.totalSpringConstant===-1)return new Map;if(Fi.isAlmostEqualTo(this._onTimePositionsForce,e)&&this._onTimePositions)return this._onTimePositions;this._onTimePositionsForce=e;let t=new Map;this._onTimePositions=t;let i=this._timeSortedSprings;if(i.length===0)return t;let n=i[0].preSpringWidth;for(let s=0;s<i.length;s++)t.set(i[s].timePosition,n),n+=this.calculateWidth(e,i[s].springConstant);return t}}Wf.MinDuration=30;Wf.MinDurationWidth=7;class SW{constructor(){this.width=0,this.isLinkedToPrevious=!1,this.canWrap=!0,this.renderers=[]}}class kW{constructor(e,t){this.staves=[],this.stavesRelevantForBoundsLookup=[],this.firstStaffInAccolade=null,this.lastStaffInAccolade=null,this.staveGroup=e,this.track=t}addStaff(e){this.staves.push(e),e.isRelevantForBoundsLookup&&this.stavesRelevantForBoundsLookup.push(e)}}class dm{constructor(){this._allStaves=[],this._firstStaffInAccolade=null,this._lastStaffInAccolade=null,this._accoladeSpacingCalculated=!1,this.x=0,this.y=0,this.index=0,this.accoladeSpacing=0,this.isFull=!1,this.width=0,this.computedWidth=0,this.totalBarDisplayScale=0,this.isLast=!1,this.masterBarsRenderers=[],this.staves=[]}get firstBarIndex(){return this.masterBarsRenderers[0].masterBar.index}get lastBarIndex(){return this.masterBarsRenderers[this.masterBarsRenderers.length-1].masterBar.index}addMasterBarRenderers(e,t){if(e.length===0)return null;this.masterBarsRenderers.push(t),this.calculateAccoladeSpacing(e),t.layoutingInfo.preBeatSize=0;let i=0;for(let n=0,s=this.staves.length;n<s;n++){let o=this.staves[n];for(let c=0,h=o.staves.length;c<h;c++){let p=o.staves[c],g=t.renderers[i++];p.addBarRenderer(g)}}return this.updateWidthFromLastBar(),t}addBars(e,t){if(e.length===0)return null;let i=new SW;i.layoutingInfo=new Wf,i.masterBar=e[0].score.masterBars[t],this.masterBarsRenderers.push(i),this.calculateAccoladeSpacing(e);let n=i.layoutingInfo;for(let s of this.staves)for(let o of s.staves){let c=s.track.staves[o.modelStaff.index].bars[t];o.addBar(c,n);let h=o.barRenderers[o.barRenderers.length-1];i.renderers.push(h),h.isLinkedToPrevious&&(i.isLinkedToPrevious=!0),h.canWrap||(i.canWrap=!1)}return n.finish(),i.width=this.updateWidthFromLastBar(),i}revertLastBar(){if(this.masterBarsRenderers.length>1){let e=this.masterBarsRenderers[this.masterBarsRenderers.length-1];this.masterBarsRenderers.splice(this.masterBarsRenderers.length-1,1);let t=0,i=0;for(let n=0,s=this._allStaves.length;n<s;n++){let c=this._allStaves[n].revertLastBar();const h=c.computedWidth;h>t&&(t=h);const p=c.barDisplayScale;p>i&&(i=p)}return this.width-=t,this.computedWidth-=t,this.totalBarDisplayScale-=i,e}return null}updateWidthFromLastBar(){let e=0,t=0;for(let i=0,n=this._allStaves.length;i<n;i++){let s=this._allStaves[i];const o=s.barRenderers[s.barRenderers.length-1];o.applyLayoutingInfo(),o.computedWidth>e&&(e=o.computedWidth);const c=o.barDisplayScale;c>t&&(t=c)}return this.width+=e,this.computedWidth+=e,this.totalBarDisplayScale+=t,e}calculateAccoladeSpacing(e){if(!this._accoladeSpacingCalculated&&this.index===0)if(this._accoladeSpacingCalculated=!0,!this.layout.renderer.settings.notation.isNotationElementVisible(ft.TrackNames))this.accoladeSpacing=0;else{let t=this.layout.renderer.canvas,i=this.layout.renderer.settings.display.resources.effectFont;t.font=i;for(let n of e)this.accoladeSpacing=Math.ceil(Math.max(this.accoladeSpacing,t.measureText(n.shortName)));this.accoladeSpacing*=this.layout.scale,this.accoladeSpacing+=2*dm.AccoladeLabelSpacing*this.layout.scale,this.width+=this.accoladeSpacing,this.computedWidth+=this.accoladeSpacing}}getStaveTrackGroup(e){for(let t=0,i=this.staves.length;t<i;t++){let n=this.staves[t];if(n.track===e)return n}return null}addStaff(e,t){let i=this.getStaveTrackGroup(e);i||(i=new kW(this,e),this.staves.push(i)),t.staveTrackGroup=i,t.staveGroup=this,t.index=this._allStaves.length,this._allStaves.push(t),i.addStaff(t),t.isInAccolade&&(this._firstStaffInAccolade||(this._firstStaffInAccolade=t,t.isFirstInAccolade=!0),i.firstStaffInAccolade||(i.firstStaffInAccolade=t),this._lastStaffInAccolade||(this._lastStaffInAccolade=t,t.isLastInAccolade=!0),this._lastStaffInAccolade&&(this._lastStaffInAccolade.isLastInAccolade=!1),this._lastStaffInAccolade=t,this._lastStaffInAccolade.isLastInAccolade=!0,i.lastStaffInAccolade=t)}get height(){return this._allStaves[this._allStaves.length-1].y+this._allStaves[this._allStaves.length-1].height}scaleToWidth(e){for(let t=0,i=this._allStaves.length;t<i;t++)this._allStaves[t].scaleToWidth(e);this.width=e}paint(e,t,i){this.paintPartial(e+this.x,t+this.y,i,0,this.masterBarsRenderers.length)}paintPartial(e,t,i,n,s){for(let c=0,h=this._allStaves.length;c<h;c++)this._allStaves[c].paint(e,t,i,n,s);let o=this.layout.renderer.settings.display.resources;if(this.staves.length>0&&n===0){if(i.color=o.barSeparatorColor,this._firstStaffInAccolade&&this._lastStaffInAccolade){let c=t+this._firstStaffInAccolade.y+this._firstStaffInAccolade.staveTop+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.topOverflow,h=t+this._lastStaffInAccolade.y+this._lastStaffInAccolade.topSpacing+this._lastStaffInAccolade.topOverflow+this._lastStaffInAccolade.staveBottom,p=e+this._firstStaffInAccolade.x;i.beginPath(),i.moveTo(p,c),i.lineTo(p,h),i.stroke()}i.font=o.effectFont;for(let c=0,h=this.staves.length;c<h;c++){let p=this.staves[c];if(p.firstStaffInAccolade&&p.lastStaffInAccolade){let g=t+p.firstStaffInAccolade.y+p.firstStaffInAccolade.staveTop+p.firstStaffInAccolade.topSpacing+p.firstStaffInAccolade.topOverflow,b=t+p.lastStaffInAccolade.y+p.lastStaffInAccolade.topSpacing+p.lastStaffInAccolade.topOverflow+p.lastStaffInAccolade.staveBottom,v=e+p.firstStaffInAccolade.x,S=3*this.layout.renderer.settings.display.scale,B=S,T=g-S*4,C=b+S*4;this.index===0&&this.layout.renderer.settings.notation.isNotationElementVisible(ft.TrackNames)&&i.fillText(p.track.shortName,e+dm.AccoladeLabelSpacing*this.layout.scale,g),i.fillRect(v-B-S,T,S,C-T);let L=v-B-S,O=v+S*2;i.beginPath(),i.moveTo(L,T),i.bezierCurveTo(L,T,L,T,O,T-S),i.bezierCurveTo(v,T+S,L,T+S,L,T+S),i.closePath(),i.fill(),i.beginPath(),i.moveTo(L,C),i.bezierCurveTo(L,C,v,C,O,C+S),i.bezierCurveTo(v,C-S,L,C-S,L,C-S),i.closePath(),i.fill()}}}}finalizeGroup(){let e=0;for(let t of this._allStaves)t.x=this.accoladeSpacing,t.y=e,t.finalizeStaff(),e+=t.height}buildBoundingsLookup(e,t){if(this.layout.renderer.boundsLookup.isFinished||!this._firstStaffInAccolade||!this._lastStaffInAccolade)return;let i=this._allStaves[this._allStaves.length-1],n=t+this.y+this._firstStaffInAccolade.y,s=t+this.y+this._lastStaffInAccolade.y+this._lastStaffInAccolade.height,o=t+this.y+this._allStaves[0].y,c=t+this.y+i.y+i.height,h=t+this.y+this._firstStaffInAccolade.y+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.topOverflow+(this._firstStaffInAccolade.barRenderers.length>0?this._firstStaffInAccolade.barRenderers[0].topPadding:0),p=t+this.y+i.y+i.height-i.bottomSpacing-i.bottomOverflow-(i.barRenderers.length>0?i.barRenderers[0].bottomPadding:0),g=s-n,b=p-h,v=c-o,S=this.x+this._firstStaffInAccolade.x,B=new zC;B.visualBounds=new gs,B.visualBounds.x=e,B.visualBounds.y=t+this.y,B.visualBounds.w=this.width,B.visualBounds.h=this.height,B.realBounds=new gs,B.realBounds.x=e,B.realBounds.y=t+this.y,B.realBounds.w=this.width,B.realBounds.h=this.height,this.layout.renderer.boundsLookup.addStaveGroup(B);let T=new Map;for(let C=0;C<this.staves.length;C++)for(let L of this.staves[C].stavesRelevantForBoundsLookup)for(let O of L.barRenderers){let I;T.has(O.bar.masterBar.index)?I=T.get(O.bar.masterBar.index):(I=new VC,I.index=O.bar.masterBar.index,I.isFirstOfLine=O.isFirstOfLine,I.realBounds=new gs,I.realBounds.x=S+O.x,I.realBounds.y=o,I.realBounds.w=O.width,I.realBounds.h=v,I.visualBounds=new gs,I.visualBounds.x=S+O.x,I.visualBounds.y=n,I.visualBounds.w=O.width,I.visualBounds.h=g,I.lineAlignedBounds=new gs,I.lineAlignedBounds.x=S+O.x,I.lineAlignedBounds.y=h,I.lineAlignedBounds.w=O.width,I.lineAlignedBounds.h=b,this.layout.renderer.boundsLookup.addMasterBar(I),T.set(I.index,I)),O.buildBoundingsLookup(I,S,t+this.y+L.y)}}getBarX(e){if(!this._firstStaffInAccolade||this.layout.renderer.tracks.length===0)return 0;let t=this.layout.renderer.tracks[0].staves[0].bars[e];return this.layout.getRendererForBar(this._firstStaffInAccolade.staveId,t).x}}dm.AccoladeLabelSpacing=10;class Eb extends go{constructor(e,t,i,n){super(e,t),this._tuning=i,this._trackLabel=n,this.glyphs=[]}doLayout(){if(!(this.glyphs.length>0)){this.createGlyphs(this._tuning);for(const e of this.glyphs)e.renderer=this.renderer,e.doLayout()}}createGlyphs(e){const t=this.renderer.scale,i=this.renderer.resources;this.height=0;const n=15*t;this._trackLabel.length>0&&(this.addGlyph(new On(0,this.height,this._trackLabel,i.effectFont,at.Left)),this.height+=n),this.addGlyph(new On(0,this.height,e.name,i.effectFont,at.Left));const s=64*t;if(this.renderer.scoreRenderer.canvas.font=i.effectFont,this.width=Math.max(this.renderer.scoreRenderer.canvas.measureText(this._trackLabel)*t,Math.max(this.renderer.scoreRenderer.canvas.measureText(e.name)*t,2*s)),this.height+=n,!e.isStandard){const c=Eb.CircleNumberHeight*.7*t;let h=Math.ceil(e.tunings.length/2)|0,p=0,g=this.height;for(let b=0,v=e.tunings.length;b<v;b++){const S=N.GuitarString0+(b+1);this.addGlyph(new br(p,g+c/1.2,.7,S));const B="= "+xe.getTextForTuning(e.tunings[b],!1);this.addGlyph(new On(p+c+1*t,g,B,i.effectFont,at.Left)),g+=n,b===h-1&&(g=this.height,p+=s)}this.height+=h*n}this.width+=15*t}}Eb.CircleNumberHeight=20;class _W extends zf{constructor(e,t){super(e,t,at.Left)}addTuning(e,t){if(e.tunings.length>0){let i=new Eb(0,0,e,t);i.renderer=this.renderer,i.doLayout(),this.glyphs.push(i)}}}class BW{constructor(e,t){this.args=e,this.renderCallback=t}}var As;(function(r){r[r.Automatic=0]="Automatic",r[r.FromModelWithScale=1]="FromModelWithScale",r[r.FromModelWithWidths=2]="FromModelWithWidths"})(As||(As={}));class jC{constructor(e){this._barRendererLookup=new Map,this.width=0,this.height=0,this.scoreInfoGlyphs=new Map,this.chordDiagrams=null,this.tuningGlyph=null,this.systemsLayoutMode=As.Automatic,this._lazyPartials=new Map,this.firstBarIndex=0,this.lastBarIndex=0,this.renderer=e}resize(){this._lazyPartials.clear(),this.doResize()}layoutAndRender(){this._lazyPartials.clear();let e=this.renderer.score,t=this.renderer.settings.display.startBar;t--,t=Math.min(e.masterBars.length-1,Math.max(0,t)),this.firstBarIndex=t;let i=this.renderer.settings.display.barCount;i<0&&(i=e.masterBars.length),i=t+i-1,i=Math.min(e.masterBars.length-1,Math.max(0,i)),this.lastBarIndex=i,this.createScoreInfoGlyphs(),this.doLayoutAndRender()}registerPartial(e,t){this.renderer.settings.core.enableLazyLoading?(this._lazyPartials.set(e.id,new BW(e,t)),this.renderer.partialLayoutFinished.trigger(e)):(this.renderer.partialLayoutFinished.trigger(e),this.internalRenderLazyPartial(e,t))}internalRenderLazyPartial(e,t){const i=this.renderer.canvas;i.beginRender(e.width,e.height),t(i),e.renderResult=i.endRender(),this.renderer.partialRenderFinished.trigger(e)}renderLazyPartial(e){if(this._lazyPartials.has(e)){const t=this._lazyPartials.get(e);this.internalRenderLazyPartial(t.args,t.renderCallback)}}createScoreInfoGlyphs(){ye.debug("ScoreLayout","Creating score info glyphs");let e=this.renderer.settings.notation,t=this.renderer.score,i=this.renderer.settings.display.resources;this.scoreInfoGlyphs=new Map,t.title&&e.isNotationElementVisible(ft.ScoreTitle)&&this.scoreInfoGlyphs.set(ft.ScoreTitle,new On(0,0,t.title,i.titleFont,at.Center)),t.subTitle&&e.isNotationElementVisible(ft.ScoreSubTitle)&&this.scoreInfoGlyphs.set(ft.ScoreSubTitle,new On(0,0,t.subTitle,i.subTitleFont,at.Center)),t.artist&&e.isNotationElementVisible(ft.ScoreArtist)&&this.scoreInfoGlyphs.set(ft.ScoreArtist,new On(0,0,t.artist,i.subTitleFont,at.Center)),t.album&&e.isNotationElementVisible(ft.ScoreAlbum)&&this.scoreInfoGlyphs.set(ft.ScoreAlbum,new On(0,0,t.album,i.subTitleFont,at.Center)),t.music&&t.music===t.words&&e.isNotationElementVisible(ft.ScoreWordsAndMusic)?this.scoreInfoGlyphs.set(ft.ScoreWordsAndMusic,new On(0,0,"Music and Words by "+t.words,i.wordsFont,at.Center)):(t.music&&e.isNotationElementVisible(ft.ScoreMusic)&&this.scoreInfoGlyphs.set(ft.ScoreMusic,new On(0,0,"Music by "+t.music,i.wordsFont,at.Right)),t.words&&e.isNotationElementVisible(ft.ScoreWords)&&this.scoreInfoGlyphs.set(ft.ScoreWords,new On(0,0,"Words by "+t.words,i.wordsFont,at.Left)));const n=new or(this.renderer,this.renderer.tracks[0].staves[0].bars[0]);if(e.isNotationElementVisible(ft.GuitarTuning)){let s=[];for(let o of this.renderer.tracks)for(let c of o.staves)if(!c.isPercussion&&c.isStringed&&c.tuning.length>0&&c.showTablature){s.push(c);break}if(s.length>0){this.tuningGlyph=new _W(0,0),this.tuningGlyph.renderer=n;for(const o of s)this.tuningGlyph.addTuning(o.stringTuning,s.length>1?o.track.name:"")}}if(e.isNotationElementVisible(ft.ChordDiagrams)){this.chordDiagrams=new wW(0,0),this.chordDiagrams.renderer=n;let s=new Set;for(let o of this.renderer.tracks)for(let c of o.staves){const h=c.chords;if(h)for(const[,p]of h)s.has(p.uniqueId)||p.showDiagram&&(s.add(p.uniqueId),this.chordDiagrams.addChord(p))}}}get scale(){return this.renderer.settings.display.scale}createEmptyStaveGroup(){let e=new dm;e.layout=this;for(let t=0;t<this.renderer.tracks.length;t++){let i=this.renderer.tracks[t],n=!1;for(let s of i.staves)if(s.showStandardNotation){n=!0;break}for(let s=0;s<i.staves.length;s++){let o=i.staves[s],c;if(o.isPercussion)c=Os.Score;else if(this.renderer.settings.display.staveProfile!==Os.Default)c=this.renderer.settings.display.staveProfile;else if(o.showTablature&&o.showStandardNotation)c=Os.ScoreTab;else if(o.showTablature)c=n?Os.TabMixed:Os.Tab;else if(o.showStandardNotation)c=Os.Score;else continue;let h=Ce.staveProfiles.get(c);for(let p of h)p.canCreate(i,o)&&e.addStaff(i,new xW(t,o,p))}}return e}registerBarRenderer(e,t){this._barRendererLookup.has(e)||this._barRendererLookup.set(e,new Map),this._barRendererLookup.get(e).set(t.bar.id,t)}unregisterBarRenderer(e,t){this._barRendererLookup.has(e)&&this._barRendererLookup.get(e).delete(t.bar.id)}getRendererForBar(e,t){let i=t.id;return this._barRendererLookup.has(e)&&this._barRendererLookup.get(e).has(i)?this._barRendererLookup.get(e).get(i):null}layoutAndRenderAnnotation(e){let t="rendered by alphaTab",i=this.renderer.settings.display.resources,n=12*this.renderer.settings.display.scale,s=Math.floor(n*2);const o=new Bh,c=ri.withFamilyList(i.copyrightFont.families,n,lr.Plain,Ms.Bold);this.renderer.canvas.font=c;const h=Ce.getLayoutEngineFactory(this.renderer.settings.display.layoutMode).vertical;return o.width=this.renderer.canvas.measureText(t),o.height=s,o.x=h?(this.width-o.width)/2:this.firstBarX,o.y=e,o.totalWidth=this.width,o.totalHeight=e+s,o.firstMasterBarIndex=-1,o.lastMasterBarIndex=-1,this.registerPartial(o,p=>{p.color=i.mainGlyphColor,p.font=c,p.textAlign=at.Left,p.fillText(t,0,n)}),e+s}}var Ke;(function(r){r[r.TopWithStem=0]="TopWithStem",r[r.Top=1]="Top",r[r.Center=2]="Center",r[r.Bottom=3]="Bottom",r[r.BottomWithStem=4]="BottomWithStem"})(Ke||(Ke={}));var yr;(function(r){r[r.Left=0]="Left",r[r.Center=1]="Center",r[r.Right=2]="Right"})(yr||(yr={}));class or{get nextRenderer(){return!this.bar||!this.bar.nextBar?null:this.scoreRenderer.layout.getRendererForBar(this.staff.staveId,this.bar.nextBar)}get previousRenderer(){return!this.bar||!this.bar.previousBar?null:this.scoreRenderer.layout.getRendererForBar(this.staff.staveId,this.bar.previousBar)}constructor(e,t){this._preBeatGlyphs=new Og,this._voiceContainers=new Map,this._postBeatGlyphs=new Og,this._ties=[],this.x=0,this.y=0,this.width=0,this.computedWidth=0,this.height=0,this.index=0,this.topOverflow=0,this.bottomOverflow=0,this.isLinkedToPrevious=!1,this.canWrap=!0,this._wasFirstOfLine=!1,this._appliedLayoutingInfo=0,this.isFinalized=!1,this.topPadding=0,this.bottomPadding=0,this.scoreRenderer=e,this.bar=t,t&&(this.helpers=new vW(this))}registerTies(e){this._ties.push(...e)}get middleYPosition(){return 0}registerOverflowTop(e){return e>this.topOverflow?(this.topOverflow=e,!0):!1}registerOverflowBottom(e){return e>this.bottomOverflow?(this.bottomOverflow=e,!0):!1}scaleToWidth(e){let t=e-this._preBeatGlyphs.width-this._postBeatGlyphs.width;for(const i of this._voiceContainers.values())i.scaleToWidth(t);this._postBeatGlyphs.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width+t,this.width=e}get resources(){return this.settings.display.resources}get settings(){return this.scoreRenderer.settings}get scale(){return this.settings.display.scale}get barDisplayScale(){return this.staff.staveGroup.staves.length>1?this.bar.masterBar.displayScale:this.bar.displayScale}get barDisplayWidth(){return this.staff.staveGroup.staves.length>1?this.bar.masterBar.displayWidth:this.bar.displayWidth}get isFirstOfLine(){return this.index===0}get isLast(){return!this.bar||this.bar.index===this.scoreRenderer.layout.lastBarIndex}registerLayoutingInfo(){let e=this.layoutingInfo,t=this._preBeatGlyphs.width;e.preBeatSize<t&&(e.preBeatSize=t);for(const n of this._voiceContainers.values())n.registerLayoutingInfo(e),n.x+n.width;let i=this._postBeatGlyphs.width;e.postBeatSize<i&&(e.postBeatSize=i)}applyLayoutingInfo(){if(this._appliedLayoutingInfo>=this.layoutingInfo.version)return!1;this._appliedLayoutingInfo=this.layoutingInfo.version,this._preBeatGlyphs.width=this.layoutingInfo.preBeatSize;let e=this._preBeatGlyphs.x+this._preBeatGlyphs.width;for(const i of this._voiceContainers.values()){i.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width,i.applyLayoutingInfo(this.layoutingInfo);let n=i.x+i.width;e<n&&(e=n)}this._postBeatGlyphs.x=Math.floor(e),this._postBeatGlyphs.width=this.layoutingInfo.postBeatSize,this.width=Math.ceil(this._postBeatGlyphs.x+this._postBeatGlyphs.width),this.computedWidth=this.width;const t=this.barDisplayWidth;return t>0&&this.scoreRenderer.layout.systemsLayoutMode==As.FromModelWithWidths&&(this.width=t,this.computedWidth=t),!0}finalizeRenderer(){this.isFinalized=!0;let e=!1;const t=this.y-this.staff.topSpacing,i=this.y+this.height+this.staff.bottomSpacing;for(const n of this._ties)if(n.doLayout(),n.height>0){const s=n.y+n.height-i;s>0&&this.registerOverflowBottom(s)&&(e=!0);const o=n.y-t;o<0&&this.registerOverflowTop(o*-1)&&(e=!0)}return e}doLayout(){if(this.bar){this.helpers.initialize(),this._ties=[],this._preBeatGlyphs=new Og,this._preBeatGlyphs.renderer=this,this._voiceContainers.clear(),this._postBeatGlyphs=new Og,this._postBeatGlyphs.renderer=this;for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];if(this.hasVoiceContainer(t)){let i=new $C(0,0,t);i.renderer=this,this._voiceContainers.set(this.bar.voices[e].index,i)}}this.bar.simileMark===da.SecondOfDouble&&(this.canWrap=!1),this.createPreBeatGlyphs(),this.createBeatGlyphs(),this.createPostBeatGlyphs(),this.updateSizes();for(const e of this.helpers.beamHelpers)for(const t of e)t.finish();this.computedWidth=this.width}}hasVoiceContainer(e){return!e.isEmpty||e.index===0}updateSizes(){this.staff.registerStaffTop(this.topPadding),this.staff.registerStaffBottom(this.height-this.bottomPadding);let e=this._voiceContainers,t=this.beatGlyphsStart,i=t;for(const n of e.values()){n.x=t,n.doLayout();let s=n.x+n.width;i<s&&(i=s)}this._postBeatGlyphs.x=Math.floor(i),this.width=Math.ceil(this._postBeatGlyphs.x+this._postBeatGlyphs.width),this.height+=this.layoutingInfo.height*this.scale}addPreBeatGlyph(e){e.renderer=this,this._preBeatGlyphs.addGlyph(e)}addBeatGlyph(e){e.renderer=this,e.preNotes.renderer=this,e.onNotes.renderer=this,e.onNotes.beamingHelper=this.helpers.beamHelperLookup[e.beat.voice.index].get(e.beat.index),this.getVoiceContainer(e.beat.voice).addGlyph(e)}getVoiceContainer(e){return this._voiceContainers.has(e.index)?this._voiceContainers.get(e.index):void 0}getBeatContainer(e){var t,i;return(i=(t=this.getVoiceContainer(e.voice))==null?void 0:t.beatGlyphs)==null?void 0:i[e.index]}getPreNotesGlyphForBeat(e){var t;return(t=this.getBeatContainer(e))==null?void 0:t.preNotes}getOnNotesGlyphForBeat(e){var t;return(t=this.getBeatContainer(e))==null?void 0:t.onNotes}paint(e,t,i){this.paintBackground(e,t,i),i.color=this.resources.mainGlyphColor,this._preBeatGlyphs.paint(e+this.x,t+this.y,i);for(const n of this._voiceContainers.values())i.color=n.voice.index===0?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.paint(e+this.x,t+this.y,i);i.color=this.resources.mainGlyphColor,this._postBeatGlyphs.paint(e+this.x,t+this.y,i)}paintBackground(e,t,i){this.layoutingInfo.paint(e+this.x+this._preBeatGlyphs.x+this._preBeatGlyphs.width,t+this.y+this.height,i)}buildBoundingsLookup(e,t,i){let n=new DC;n.bar=this.bar,n.visualBounds=new gs,n.visualBounds.x=t+this.x,n.visualBounds.y=i+this.y+this.topPadding,n.visualBounds.w=this.width,n.visualBounds.h=this.height-this.topPadding-this.bottomPadding,n.realBounds=new gs,n.realBounds.x=t+this.x,n.realBounds.y=i+this.y,n.realBounds.w=this.width,n.realBounds.h=this.height,e.addBar(n);for(const[s,o]of this._voiceContainers){let c=this.bar.isEmpty&&s===0;if(!o.voice.isEmpty||c)for(let h=0,p=o.beatGlyphs.length;h<p;h++)o.beatGlyphs[h].buildBoundingsLookup(n,t+this.x+o.x,i+this.y+o.y,c)}}addPostBeatGlyph(e){this._postBeatGlyphs.addGlyph(e)}createPreBeatGlyphs(){this._wasFirstOfLine=this.isFirstOfLine}createBeatGlyphs(){for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];this.hasVoiceContainer(t)&&this.createVoiceGlyphs(this.bar.voices[e])}}createVoiceGlyphs(e){}createPostBeatGlyphs(){}get beatGlyphsStart(){return this._preBeatGlyphs.x+this._preBeatGlyphs.width}get postBeatGlyphsStart(){return this._postBeatGlyphs.x}getBeatX(e,t=Vt.PreNotes){let i=this.getBeatContainer(e);if(i)switch(t){case Vt.PreNotes:return i.voiceContainer.x+i.x;case Vt.OnNotes:return i.voiceContainer.x+i.x+i.onNotes.x;case Vt.MiddleNotes:return i.voiceContainer.x+i.x+i.onTimeX;case Vt.Stem:const n=i.onNotes.beamingHelper?i.onNotes.beamingHelper.getBeatLineX(e):i.onNotes.x+i.onNotes.width/2;return i.voiceContainer.x+n;case Vt.PostNotes:return i.voiceContainer.x+i.x+i.onNotes.x+i.onNotes.width;case Vt.EndBeat:return i.voiceContainer.x+i.x+i.width}return 0}getNoteX(e,t){let i=this.getBeatContainer(e.beat);return i?i.voiceContainer.x+i.x+i.onNotes.x+i.onNotes.getNoteX(e,t):0}getNoteY(e,t){let i=this.getOnNotesGlyphForBeat(e.beat);return i?i.getNoteY(e,t):NaN}reLayout(){(this._wasFirstOfLine&&!this.isFirstOfLine||!this._wasFirstOfLine&&this.isFirstOfLine)&&(this._preBeatGlyphs=new Og,this._preBeatGlyphs.renderer=this,this.createPreBeatGlyphs()),this.updateSizes(),this.registerLayoutingInfo()}paintSimileMark(e,t,i){switch(this.bar.simileMark){case da.Simple:i.fillMusicFontSymbol(e+this.x+(this.width-20*this.scale)/2,t+this.y+this.height/2,1,N.Repeat1Bar,!1);break;case da.SecondOfDouble:i.fillMusicFontSymbol(e+this.x-28*this.scale/2,t+this.y+this.height/2,1,N.Repeat2Bars,!1);break}}completeBeamingHelper(e){}}or.LineSpacing=8;or.StemWidth=.12*or.LineSpacing;or.StaffLineThickness=.13*or.LineSpacing;or.BeamThickness=.5*or.LineSpacing;or.BeamSpacing=.25*or.LineSpacing;var Jt;(function(r){r[r.SinglePreBeat=0]="SinglePreBeat",r[r.SingleOnBeat=1]="SingleOnBeat",r[r.SingleOnBeatToEnd=2]="SingleOnBeatToEnd",r[r.GroupedOnBeat=3]="GroupedOnBeat",r[r.GroupedOnBeatToEnd=4]="GroupedOnBeatToEnd",r[r.FullBar=5]="FullBar"})(Jt||(Jt={}));class TW extends vr{constructor(e,t){super(0,0),this._uniqueEffectGlyphs=[],this._effectGlyphs=[],this.isEmpty=!0,this.previousBand=null,this.isLinkedToPrevious=!1,this.firstBeat=null,this.lastBeat=null,this.height=0,this.slot=null,this.voice=e,this.info=t}doLayout(){super.doLayout();for(let e=0;e<this.renderer.bar.voices.length;e++)this._effectGlyphs.push(new Map),this._uniqueEffectGlyphs.push([])}createGlyph(e){if(e.voice===this.voice&&this.info.shouldCreateGlyph(this.renderer.settings,e)&&(!this.info.hideOnMultiTrack||this.renderer.staff.trackIndex===0)){if(this.isEmpty=!1,(!this.firstBeat||e.isBefore(this.firstBeat))&&(this.firstBeat=e),!this.lastBeat||e.isAfter(this.lastBeat))switch(this.lastBeat=e,this.info.sizingMode){case Jt.SingleOnBeatToEnd:case Jt.GroupedOnBeatToEnd:this.lastBeat.nextBeat&&(this.lastBeat=this.lastBeat.nextBeat);break}let t=this.createOrResizeGlyph(this.info.sizingMode,e);t.height>this.height&&(this.height=t.height)}}createOrResizeGlyph(e,t){let i;switch(e){case Jt.FullBar:return i=this.info.createNewGlyph(this.renderer,t),i.renderer=this.renderer,i.beat=t,i.doLayout(),this._effectGlyphs[t.voice.index].set(t.index,i),this._uniqueEffectGlyphs[t.voice.index].push(i),i;case Jt.SinglePreBeat:case Jt.SingleOnBeat:case Jt.SingleOnBeatToEnd:return i=this.info.createNewGlyph(this.renderer,t),i.renderer=this.renderer,i.beat=t,i.doLayout(),this._effectGlyphs[t.voice.index].set(t.index,i),this._uniqueEffectGlyphs[t.voice.index].push(i),i;case Jt.GroupedOnBeat:case Jt.GroupedOnBeatToEnd:let n=e===Jt.GroupedOnBeat?Jt.SingleOnBeat:Jt.SingleOnBeatToEnd;if(t.index>0||this.renderer.index>0){let s=t.previousBeat;if(this.info.shouldCreateGlyph(this.renderer.settings,s)){let o=null;if(t.index>0&&this._effectGlyphs[t.voice.index].has(s.index))o=this._effectGlyphs[t.voice.index].get(s.index);else if(this.renderer.index>0){let p=this.renderer.previousRenderer.getBand(s.voice,this.info.effectId);if(p){let g=p._effectGlyphs[s.voice.index];g.has(s.index)&&(o=g.get(s.index))}}let c=this.createOrResizeGlyph(n,t);return o&&this.info.canExpand(s,t)&&(o.nextGlyph=c,c.previousGlyph=o,this.isLinkedToPrevious=!0),c}return this.createOrResizeGlyph(n,t)}return this.createOrResizeGlyph(n,t);default:return this.createOrResizeGlyph(Jt.SingleOnBeat,t)}}paint(e,t,i){super.paint(e,t,i);for(let n=0,s=this._uniqueEffectGlyphs.length;n<s;n++){let o=this._uniqueEffectGlyphs[n];for(let c=0,h=o.length;c<h;c++)o[c].paint(e+this.x,t+this.y,i)}}alignGlyphs(){for(let e=0;e<this._effectGlyphs.length;e++)for(const t of this._effectGlyphs[e].keys())this.alignGlyph(this.info.sizingMode,this.renderer.bar.voices[e].beats[t])}alignGlyph(e,t){let i=this._effectGlyphs[t.voice.index].get(t.index),n,s=this.renderer.getBeatContainer(t);switch(e){case Jt.SinglePreBeat:n=s.preNotes,i.x=this.renderer.beatGlyphsStart+n.x+s.x,i.width=n.width;break;case Jt.SingleOnBeat:case Jt.GroupedOnBeat:n=s.onNotes,i.x=this.renderer.beatGlyphsStart+n.x+s.x,i.width=n.width;break;case Jt.SingleOnBeatToEnd:case Jt.GroupedOnBeatToEnd:n=s.onNotes,i.x=this.renderer.beatGlyphsStart+n.x+s.x,s.beat.isLastOfVoice?i.width=this.renderer.width-i.x:i.width=s.width-s.preNotes.width-s.preNotes.x;break;case Jt.FullBar:i.width=this.renderer.width;break}}}class CW{constructor(){this.uniqueEffectId=null,this.y=0,this.height=0,this.firstBeat=null,this.lastBeat=null}}class NW{constructor(){this.bands=[],this.shared=new CW}update(e){e.info.canShareBand||(this.shared.uniqueEffectId=e.info.effectId),e.slot=this,this.bands.push(e),e.height>this.shared.height&&(this.shared.height=e.height),(!this.shared.firstBeat||e.firstBeat.isBefore(this.shared.firstBeat))&&(this.shared.firstBeat=e.firstBeat),(!this.shared.lastBeat||e.lastBeat.isAfter(this.shared.lastBeat))&&(this.shared.lastBeat=e.lastBeat)}canBeUsed(e){return(!this.shared.uniqueEffectId&&e.info.canShareBand||e.info.effectId===this.shared.uniqueEffectId)&&(!this.shared.firstBeat||this.shared.lastBeat.isBefore(e.firstBeat)||this.shared.lastBeat.isBefore(this.shared.firstBeat))}}class PW{constructor(){this.slots=[],this._effectSlot=new Map}getOrCreateSlot(e){if(this._effectSlot.has(e.info.effectId)){let i=this._effectSlot.get(e.info.effectId);if(i.canBeUsed(e))return i}for(let i of this.slots)if(i.canBeUsed(e))return i;let t=new NW;return this.slots.push(t),t}register(e){let t=this.getOrCreateSlot(e);t.update(e),this._effectSlot.set(e.info.effectId,t)}}class Rb extends go{constructor(){super(0,0),this.computedWidth=0}doLayout(){let e=0;if(this.glyphs)for(let t=0,i=this.glyphs.length;t<i;t++){let n=this.glyphs[t];n.x=e,n.renderer=this.renderer,n.doLayout(),e+=n.width}this.width=e,this.computedWidth=e}noteLoop(e){for(let t=this.container.beat.notes.length-1;t>=0;t--)e(this.container.beat.notes[t])}}class dS extends Rb{constructor(){super(...arguments),this.centerX=0}updateBeamingHelper(){}buildBoundingsLookup(e,t,i){}getNoteX(e,t){return 0}getNoteY(e,t){return 0}}class EW extends or{constructor(e,t,i){super(e,t),this._bands=[],this._bandLookup=new Map,this.sizingInfo=null,this._infos=i}updateSizes(){this.topOverflow=0,this.bottomOverflow=0,this.topPadding=0,this.bottomPadding=0,this.updateHeight(),super.updateSizes()}finalizeRenderer(){let e=super.finalizeRenderer();return this.updateHeight()&&(e=!0),e}updateHeight(){if(!this.sizingInfo)return!1;let e=0;for(let t of this.sizingInfo.slots){t.shared.y=e;for(let i of t.bands)i.y=e,i.height=t.shared.height;e+=t.shared.height}return e!==this.height?(this.height=e,!0):!1}applyLayoutingInfo(){if(!super.applyLayoutingInfo())return!1;if(this.index>0){let e=this.previousRenderer;this.sizingInfo=e.sizingInfo}else this.sizingInfo=new PW;for(let e of this._bands)e.alignGlyphs(),e.isEmpty||this.sizingInfo.register(e);return this.updateHeight(),!0}scaleToWidth(e){super.scaleToWidth(e);for(let t of this._bands)t.alignGlyphs()}createBeatGlyphs(){this._bands=[],this._bandLookup=new Map;for(let e of this.bar.voices)if(this.hasVoiceContainer(e))for(let t of this._infos){let i=new TW(e,t);i.renderer=this,i.doLayout(),this._bands.push(i),this._bandLookup.set(e.index+"."+t.effectId,i)}for(let e of this.bar.voices)this.hasVoiceContainer(e)&&this.createVoiceGlyphs(e);for(let e of this._bands)e.isLinkedToPrevious&&(this.isLinkedToPrevious=!0)}createVoiceGlyphs(e){for(let t of e.beats){let i=new ho(t,this.getVoiceContainer(e));i.preNotes=new Rb,i.onNotes=new dS,this.addBeatGlyph(i);for(let n of this._bands)n.createGlyph(t)}}paint(e,t,i){this.paintBackground(e,t,i);for(let n of this._bands)i.color=n.voice.index===0?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.isEmpty||n.paint(e+this.x,t+this.y,i)}getBand(e,t){let i=e.index+"."+t;return this._bandLookup.has(i)?this._bandLookup.get(i):null}}class nc extends hS{get staffId(){return this._staffId}constructor(e,t){super(),this._infos=t,this._staffId=e,this.isInAccolade=!1,this.isRelevantForBoundsLookup=!1}create(e,t){return new EW(e,t,this._infos.filter(i=>e.settings.notation.isNotationElementVisible(i.notationElement)))}}class fm extends bo{constructor(e,t,i){super(e,t),this._endingsString="",this._endings=[];for(let n=0;n<ou.MaxAlternateEndings;n++)i&1<<n&&this._endings.push(n)}doLayout(){super.doLayout(),this.height=this.renderer.resources.wordsFont.size+(fm.Padding*this.scale+2);let e="";for(let t=0,i=this._endings.length;t<i;t++)e+=this._endings[t]+1,e+=". ";this._endingsString=e}paint(e,t,i){super.paint(e,t,i);let n=i.textBaseline;if(i.textBaseline=It.Top,this._endings.length>0){let s=this.renderer.resources;i.font=s.wordsFont,i.moveTo(e+this.x,t+this.y+this.height),i.lineTo(e+this.x,t+this.y),i.lineTo(e+this.x+this.width,t+this.y),i.stroke(),i.fillText(this._endingsString,e+this.x+fm.Padding*this.scale,t+this.y*this.scale)}i.textBaseline=n}}fm.Padding=3;class an{get effectId(){return this.notationElement.toString()}}class yw extends an{get notationElement(){return ft.EffectAlternateEndings}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return Jt.FullBar}shouldCreateGlyph(e,t){return t.voice.index===0&&t.index===0&&t.voice.bar.masterBar.alternateEndings!==0}createNewGlyph(e,t){return new fm(0,0,t.voice.bar.masterBar.alternateEndings)}canExpand(e,t){return!0}}class p_ extends an{get notationElement(){return ft.EffectCapo}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return t.index===0&&t.voice.bar.index===0&&t.voice.bar.staff.capo!==0}createNewGlyph(e,t){return new On(0,0,"Capo. fret "+t.voice.bar.staff.capo,e.resources.effectFont,at.Left)}canExpand(e,t){return!1}}class bw extends an{get notationElement(){return ft.EffectChordNames}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return t.hasChord}createNewGlyph(e,t){return new On(0,0,t.chord.name,e.resources.effectFont,at.Center)}canExpand(e,t){return!1}}class Cm extends bo{constructor(e){super(),this.forceGroupedRendering=!1,this.endOnBarLine=!1,this.endPosition=e}get isLinkedWithPrevious(){return!!this.previousGlyph&&this.previousGlyph.renderer.staff.staveGroup===this.renderer.staff.staveGroup}get isLinkedWithNext(){return!!this.nextGlyph&&this.nextGlyph.renderer.isFinalized&&this.nextGlyph.renderer.staff.staveGroup===this.renderer.staff.staveGroup}paint(e,t,i){if(this.isLinkedWithPrevious)return;if(!this.isLinkedWithNext&&!this.forceGroupedRendering){this.paintNonGrouped(e,t,i);return}let n;if(!this.isLinkedWithNext&&this.forceGroupedRendering)n=this;else for(n=this.nextGlyph;n.isLinkedWithNext;)n=n.nextGlyph;let s=n.renderer,o=n.beat,c=this.endPosition,h=e-this.renderer.x,p=this.calculateEndX(s,o,h,c);this.paintGrouped(e,t,p,i)}calculateEndX(e,t,i,n){return t?i+e.x+e.getBeatX(t,n):i+e.x+this.x+this.width}paintNonGrouped(e,t,i){let n=e-this.renderer.x,s=this.calculateEndX(this.renderer,this.beat,n,this.endPosition);this.paintGrouped(e,t,s,i)}}class pm extends Cm{constructor(e,t,i){super(Vt.EndBeat),this._crescendo=bs.None,this._crescendo=i,this.x=e,this.y=t}doLayout(){super.doLayout(),this.height=17*this.scale}paintGrouped(e,t,i,n){let s=e+this.x,o=this.height*this.scale;n.beginPath(),this._crescendo===bs.Crescendo?(i-=pm.Padding*this.scale,n.moveTo(i,t+this.y),n.lineTo(s,t+this.y+o/2),n.lineTo(i,t+this.y+o)):(i-=pm.Padding*this.scale,n.moveTo(s,t+this.y),n.lineTo(i,t+this.y+o/2),n.lineTo(s,t+this.y+o)),n.stroke()}}pm.Padding=Ot.QuarterNoteHeadWidth/2|0;class g_ extends an{get notationElement(){return ft.EffectCrescendo}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.crescendo!==bs.None}createNewGlyph(e,t){return new pm(0,0,t.crescendo)}canExpand(e,t){return e.crescendo===t.crescendo}}class fS extends br{constructor(e,t,i){super(e,t,.6,fS.getSymbol(i))}doLayout(){super.doLayout(),this.height=17*this.scale,this.y+=this.height/2}static getSymbol(e){switch(e){case Dt.PPP:return N.DynamicPPP;case Dt.PP:return N.DynamicPP;case Dt.P:return N.DynamicPiano;case Dt.MP:return N.DynamicMP;case Dt.MF:return N.DynamicMF;case Dt.F:return N.DynamicForte;case Dt.FF:return N.DynamicFF;case Dt.FFF:return N.DynamicFFF;default:return N.None}}}class m_ extends an{get notationElement(){return ft.EffectDynamics}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return this.internalShouldCreateGlyph(t)}internalShouldCreateGlyph(e){if(e.voice.bar.staff.track.score.stylesheet.hideDynamics||e.isEmpty||e.voice.isEmpty||e.isRest||e.graceType!==ot.None)return!1;let t=this.getPreviousDynamicsBeat(e),i=e.voice.index===0&&!t||e.dynamics!==(t==null?void 0:t.dynamics);if(i&&e.voice.index>0){for(let n of e.voice.bar.voices)if(n.index<e.voice.index){let s=n.getBeatAtPlaybackStart(e.playbackStart);s&&e.dynamics===s.dynamics&&this.internalShouldCreateGlyph(s)&&(i=!1)}}return i}getPreviousDynamicsBeat(e){let t=e.previousBeat;for(;t!=null;){if(!t.isRest&&t.graceType===ot.None)return t;t=t.previousBeat}return null}createNewGlyph(e,t){return new fS(0,0,t.dynamics)}canExpand(e,t){return!0}}class RW extends bo{doLayout(){super.doLayout(),this.height=17*this.scale}paint(e,t,i){let n=6*this.scale,s=Math.max(this.width,14*this.scale),o=this.height/2;i.beginPath(),i.moveTo(e+this.x,t+this.y+o),i.quadraticCurveTo(e+this.x+s/2,t+this.y+o,e+this.x+s,t+this.y+o-n),i.moveTo(e+this.x,t+this.y+o),i.quadraticCurveTo(e+this.x+s/2,t+this.y+o,e+this.x+s,t+this.y+o+n),i.stroke()}}class vw extends an{get notationElement(){return ft.EffectFadeIn}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return t.fadeIn}createNewGlyph(e,t){return new RW}canExpand(e,t){return!0}}class pS extends br{constructor(e,t,i){super(e,t,1,pS.getSymbol(i))}static getSymbol(e){switch(e){case fo.Short:return N.FermataShortAbove;case fo.Medium:return N.FermataAbove;case fo.Long:return N.FermataLongAbove;default:return N.None}}doLayout(){this.width=23*this.scale,this.height=12*this.scale}paint(e,t,i){super.paint(e-this.width/2,t+this.height,i)}}class ww extends an{get notationElement(){return ft.EffectFermata}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return t.voice.index===0&&!!t.fermata}createNewGlyph(e,t){return new pS(0,0,t.fermata.type)}canExpand(e,t){return!0}}class y_ extends an{get notationElement(){return ft.EffectFingering}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return t.voice.index!==0||t.isRest||e.notation.fingeringMode!==po.SingleNoteEffectBand&&e.notation.fingeringMode!==po.SingleNoteEffectBandForcePiano||t.notes.length!==1?!1:t.notes[0].isFingering}createNewGlyph(e,t){let i=kt.Unknown,n=!1,s=t.notes[0];s.leftHandFinger!==kt.Unknown?(i=s.leftHandFinger,n=!0):s.rightHandFinger!==kt.Unknown&&(i=s.rightHandFinger);let o=Fi.fingerToString(e.settings,t,i,n)??"";return new On(0,0,o,e.resources.fingeringFont,at.Left)}canExpand(e,t){return!0}}class Ah extends an{constructor(){super(...arguments),this.lastCreateInfo=null}shouldCreateGlyph(e,t){this.lastCreateInfo=[];for(let i=0,n=t.notes.length;i<n;i++){let s=t.notes[i];this.shouldCreateGlyphForNote(s)&&this.lastCreateInfo.push(s)}return this.lastCreateInfo.length>0}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}canExpand(e,t){return!0}}class du extends Cm{constructor(e){super(Vt.OnNotes),this._label=e}doLayout(){this.renderer.settings.notation.extendLineEffectsToBeatEnd&&(this.endPosition=Vt.EndBeat,this.forceGroupedRendering=!0),super.doLayout(),this.height=this.renderer.resources.effectFont.size}paintNonGrouped(e,t,i){let n=this.renderer.resources;i.font=n.effectFont;let s=i.textAlign;i.textAlign=at.Center,i.fillText(this._label,e+this.x,t+this.y),i.textAlign=s}paintGrouped(e,t,i,n){this.paintNonGrouped(e,t,n);let s=3*this.scale,o=n.measureText(this._label),c=e+this.x+o/2+s,h=t+this.y+4*this.scale,p=8*this.scale;if(i>c){let g=c;for(;g<i;)n.beginPath(),n.moveTo(g,h|0),n.lineTo(Math.min(g+p,i),h|0),g+=p+s,n.stroke();n.beginPath(),n.moveTo(i,h-5*this.scale|0),n.lineTo(i,h+5*this.scale|0),n.stroke()}}}du.LineSpacing=3;du.LineTopPadding=4;du.LineTopOffset=5;du.LineSize=8;class na extends Ah{get effectId(){return this._effectId}get notationElement(){return ft.EffectHarmonics}constructor(e){switch(super(),this._beat=null,this._harmonicType=e,e){case Ze.None:this._effectId="harmonics-none";break;case Ze.Natural:this._effectId="harmonics-natural";break;case Ze.Artificial:this._effectId="harmonics-artificial";break;case Ze.Pinch:this._effectId="harmonics-pinch";break;case Ze.Tap:this._effectId="harmonics-tap";break;case Ze.Semi:this._effectId="harmonics-semi";break;case Ze.Feedback:this._effectId="harmonics-feedback";break;default:this._effectId="";break}}shouldCreateGlyphForNote(e){return!e.isHarmonic||e.harmonicType!==this._harmonicType?!1:(e.beat!==this._beat&&(this._beat=e.beat),!0)}get sizingMode(){return Jt.GroupedOnBeat}createNewGlyph(e,t){return new du(na.harmonicToString(this._harmonicType))}static harmonicToString(e){switch(e){case Ze.Natural:return"N.H.";case Ze.Artificial:return"A.H.";case Ze.Pinch:return"P.H.";case Ze.Tap:return"T.H.";case Ze.Semi:return"S.H.";case Ze.Feedback:return"Fdbk."}return""}}class xw extends an{get notationElement(){return ft.EffectLetRing}get canShareBand(){return!1}get hideOnMultiTrack(){return!1}shouldCreateGlyph(e,t){return t.isLetRing}get sizingMode(){return Jt.GroupedOnBeat}createNewGlyph(e,t){return new du("LetRing")}canExpand(e,t){return!0}}class LW extends bo{constructor(e,t,i,n,s=at.Center){super(e,t),this._lines=i,this.font=n,this.textAlign=s}doLayout(){super.doLayout(),this.height=this.font.size*this._lines.length}paint(e,t,i){i.font=this.font;let n=i.textAlign;i.textAlign=this.textAlign;for(let s=0;s<this._lines.length;s++)this._lines[s]&&i.fillText(this._lines[s],e+this.x,t+this.y+s*this.font.size);i.textAlign=n}}class T0 extends an{get notationElement(){return ft.EffectLyrics}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return!!t.lyrics}createNewGlyph(e,t){return new LW(0,0,t.lyrics,e.resources.effectFont,at.Center)}canExpand(e,t){return!0}}class Sw extends an{get notationElement(){return ft.EffectMarker}get hideOnMultiTrack(){return!0}get canShareBand(){return!0}get sizingMode(){return Jt.SinglePreBeat}shouldCreateGlyph(e,t){return t.voice.bar.staff.index===0&&t.voice.index===0&&t.index===0&&t.voice.bar.masterBar.isSectionStart}createNewGlyph(e,t){return new On(0,0,t.voice.bar.masterBar.section.marker?"["+t.voice.bar.masterBar.section.marker+"] "+t.voice.bar.masterBar.section.text:t.voice.bar.masterBar.section.text,e.resources.markerFont,at.Left)}canExpand(e,t){return!0}}class IW extends Cm{constructor(e,t){super(Vt.PostNotes),this._ottava=e,this._aboveStaff=t}doLayout(){super.doLayout(),this.height=13*this.scale}paintNonGrouped(e,t,i){this.paintOttava(e,t,i)}paintOttava(e,t,i){let n=0;switch(this._ottava){case hi._15ma:n=37*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,N.QuindicesimaAlta,!1);break;case hi._8va:n=26*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,N.OttavaAlta,!1);break;case hi._8vb:n=23*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,N.OttavaBassaVb,!1);break;case hi._15mb:n=36*this.scale,i.fillMusicFontSymbols(e+this.x-n/2,t+this.y+this.height,.8,[N.Quindicesima,N.OctaveBaselineM,N.OctaveBaselineB],!1);break}return n/2}paintGrouped(e,t,i,n){let s=this.paintOttava(e,t,n),o=3*this.scale,c=e+this.x+s+o,h=t+this.y;h+=this._aboveStaff?2*this.scale:this.height-2*this.scale;let p=8*this.scale;if(i>c){let g=c;for(;g<i;)n.beginPath(),n.moveTo(g,h|0),n.lineTo(Math.min(g+p,i),h|0),g+=p+o,n.stroke();n.beginPath(),this._aboveStaff?(n.moveTo(i,h),n.lineTo(i,t+this.y+this.height)):(n.moveTo(i,h),n.lineTo(i,t+this.y)),n.stroke()}}}class C0 extends an{get effectId(){return"ottavia-"+(this._aboveStaff?"above":"below")}get notationElement(){return ft.EffectOttavia}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.GroupedOnBeat}constructor(e){super(),this._aboveStaff=e}shouldCreateGlyph(e,t){switch(t.ottava){case hi._15ma:return this._aboveStaff;case hi._8va:return this._aboveStaff;case hi._8vb:return!this._aboveStaff;case hi._15mb:return!this._aboveStaff}return!1}createNewGlyph(e,t){return new IW(t.ottava,this._aboveStaff)}canExpand(e,t){return e.ottava===t.ottava}}class kw extends Ah{get notationElement(){return ft.EffectPalmMute}shouldCreateGlyphForNote(e){return e.isPalmMute}get sizingMode(){return Jt.GroupedOnBeat}createNewGlyph(e,t){return new du("P.M.")}constructor(){super()}}class _w extends Ah{get notationElement(){return ft.EffectPickSlide}shouldCreateGlyphForNote(e){return e.slideOutType===Et.PickSlideDown||e.slideOutType===Et.PickSlideUp}get sizingMode(){return Jt.GroupedOnBeat}createNewGlyph(e,t){return new du("P.S.")}constructor(){super()}}class gm extends br{constructor(e,t,i){super(e,t,Ot.GraceScale,gm.getSymbol(i))}doLayout(){this.width=9*this.scale,this.height=13*this.scale}paint(e,t,i){super.paint(e,t+this.height,i)}static getSymbol(e){switch(e){case pn.Up:return N.StringsUpBow;case pn.Down:return N.StringsDownBow;default:return N.None}}}class Bw extends an{get notationElement(){return ft.EffectPickStroke}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return t.pickStroke!==pn.None}createNewGlyph(e,t){return new gm(0,0,t.pickStroke)}canExpand(e,t){return!0}}class YC extends Cm{constructor(e){super(Vt.EndBeat),this._stepSize=0,this._type=e}doLayout(){switch(super.doLayout(),this._type){case ni.Slight:this._stepSize=12*this.scale;break;case ni.Wide:this._stepSize=23*this.scale;break}this.height=18*this.scale}paintGrouped(e,t,i,n){let s=e+this.x,o=i-s,c=Math.max(1,o/this._stepSize);n.beginPath(),n.moveTo(s,t+this.y);for(let h=0;h<c;h++)n.lineTo(s+this._stepSize/2,t+this.y+this.height),n.lineTo(s+this._stepSize,t+this.y),s+=this._stepSize;n.stroke()}}class N0 extends an{get notationElement(){return ft.EffectSlightBeatVibrato}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.vibrato===ni.Slight}createNewGlyph(e,t){return new YC(ni.Slight)}canExpand(e,t){return!0}}class Fh extends Cm{constructor(e,t,i,n=1.2,s=!1){super(Vt.EndBeat),this._scale=0,this._symbol=N.None,this._symbolSize=0,this._type=i,this._scale=n,this.x=e,this.y=t,this._partialWaves=s}doLayout(){super.doLayout();let e=0;switch(this._type){case ni.Slight:this._symbol=N.WiggleTrill,this._symbolSize=9*this._scale,e=6*this._scale;break;case ni.Wide:this._symbol=N.WiggleVibratoMediumFast,this._symbolSize=10*this._scale,e=10*this._scale;break}this.height=e*this.scale}paintGrouped(e,t,i,n){let s=e+this.x,o=i-s,c=this._symbolSize*this.scale,h=o/c;this._partialWaves||(h=Math.floor(h)),h<1&&(h=1);let p=0;for(let g=0;g<h;g++)n.fillMusicFontSymbol(e+this.x+p,t+this.y+this.height*2,this._scale*this.scale,this._symbol,!1),p+=c}}class P0 extends Ah{get notationElement(){return ft.EffectSlightNoteVibrato}shouldCreateGlyphForNote(e){return e.vibrato===ni.Slight||e.isTieDestination&&e.tieOrigin.vibrato===ni.Slight}get sizingMode(){return Jt.GroupedOnBeatToEnd}createNewGlyph(e,t){return new Fh(0,0,ni.Slight,1.2)}constructor(){super()}}class b_ extends an{get notationElement(){return ft.EffectTap}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return t.slap||t.pop||t.tap}createNewGlyph(e,t){let i=e.resources;return t.slap?new On(0,0,"S",i.effectFont,at.Left):t.pop?new On(0,0,"P",i.effectFont,at.Left):new On(0,0,"T",i.effectFont,at.Left)}canExpand(e,t){return!0}}class FW extends bo{constructor(e,t,i){super(e,t),this._tempo=0,this._tempo=i}doLayout(){super.doLayout(),this.height=25*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.markerFont,i.fillMusicFontSymbol(e+this.x,t+this.y+this.height*.8,this.scale*Ot.GraceScale,N.NoteQuarterUp,!1),i.fillText("= "+this._tempo.toString(),e+this.x+this.height/2,t+this.y+i.font.size/2)}}class Tw extends an{get notationElement(){return ft.EffectTempo}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return Jt.SinglePreBeat}shouldCreateGlyph(e,t){return t.voice.bar.staff.index===0&&t.voice.index===0&&t.index===0&&(!!t.voice.bar.masterBar.tempoAutomation||t.voice.bar.index===0)}createNewGlyph(e,t){let i=0;return t.voice.bar.masterBar.tempoAutomation?i=t.voice.bar.masterBar.tempoAutomation.value:i=t.voice.bar.staff.track.score.tempo,new FW(0,0,i)}canExpand(e,t){return!0}}class Cw extends an{get notationElement(){return ft.EffectText}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyph(e,t){return!!t.text}createNewGlyph(e,t){return new On(0,0,t.text,e.resources.effectFont,at.Left)}canExpand(e,t){return!0}}class OW extends bo{constructor(e,t){super(e,t)}doLayout(){super.doLayout(),this.height=this.renderer.resources.markerFont.size*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.markerFont;let s=i.measureText("tr");i.fillText("tr",e+this.x,t+this.y);let o=s+3*this.scale,c=this.width-o,h=1.2,p=11*this.scale*h,g=Math.max(1,(c-o)/p),b=o,v=t+this.y+this.height*1.2;for(let S=0;S<g;S++)i.fillMusicFontSymbol(e+this.x+b,v,h,N.WiggleTrill,!1),b+=p}}class E0 extends Ah{get notationElement(){return ft.EffectTrill}shouldCreateGlyphForNote(e){return e.isTrill}get sizingMode(){return Jt.SingleOnBeat}createNewGlyph(e,t){return new OW(0,0)}}var tr;(function(r){r[r.Full=0]="Full",r[r.PartialLeft=1]="PartialLeft",r[r.PartialRight=2]="PartialRight"})(tr||(tr={}));class vi extends bo{constructor(e){super(0,0),this._tripletFeel=e}doLayout(){super.doLayout(),this.height=25*this.scale}paint(e,t,i){e+=this.x,t+=this.y;let n=t+this.height*Ot.GraceScale;i.font=this.renderer.resources.effectFont,i.fillText("(",e,t+this.height*.3);let s=e+10*this.scale,o=e+40*this.scale;switch(this._tripletFeel){case Mt.NoTripletFeel:this.renderBarNote(s,n,vi.NoteScale,i,[tr.Full]),this.renderBarNote(o,n,vi.NoteScale,i,[tr.Full]);break;case Mt.Triplet8th:this.renderBarNote(s,n,vi.NoteScale,i,[tr.Full]),i.fillMusicFontSymbol(o,n,vi.NoteScale,N.NoteQuarterUp,!1),i.fillMusicFontSymbol(o+vi.NoteSeparation*this.scale,n,vi.NoteScale,N.NoteEighthUp,!1),this.renderTriplet(o,t,i);break;case Mt.Triplet16th:this.renderBarNote(s,n,vi.NoteScale,i,[tr.Full,tr.Full]),this.renderBarNote(o,n,vi.NoteScale,i,[tr.Full,tr.PartialRight]),this.renderTriplet(o,t,i);break;case Mt.Dotted8th:this.renderBarNote(s,n,vi.NoteScale,i,[tr.Full]),this.renderBarNote(o,n,vi.NoteScale,i,[tr.Full,tr.PartialRight]),i.fillCircle(o+9*this.scale,n,this.scale);break;case Mt.Dotted16th:this.renderBarNote(s,n,vi.NoteScale,i,[tr.Full,tr.Full]),this.renderBarNote(o,n,vi.NoteScale,i,[tr.Full,tr.Full,tr.PartialRight]),i.fillCircle(o+9*this.scale,n,this.scale);break;case Mt.Scottish8th:this.renderBarNote(s,n,vi.NoteScale,i,[tr.Full]),this.renderBarNote(o,n,vi.NoteScale,i,[tr.Full,tr.PartialLeft]),i.fillCircle(o+vi.NoteSeparation*this.scale+8*this.scale,n,this.scale);break;case Mt.Scottish16th:this.renderBarNote(s,n,vi.NoteScale,i,[tr.Full,tr.Full]),this.renderBarNote(o,n,vi.NoteScale,i,[tr.Full,tr.Full,tr.PartialLeft]),i.fillCircle(o+vi.NoteSeparation*this.scale+8*this.scale,n,this.scale);break}i.fillText("=",e+30*this.scale,t+5*this.scale),i.fillText(")",e+65*this.scale,t+this.height*.3)}renderBarNote(e,t,i,n,s){n.fillMusicFontSymbol(e,t,i,N.NoteQuarterUp,!1);let o=vi.NoteSeparation/2*this.scale;for(let c=0;c<s.length;c++)switch(s[c]){case tr.Full:n.fillRect(e+4*this.scale,t-vi.NoteHeight*this.scale+vi.BarSeparation*this.scale*c,vi.NoteSeparation*this.scale,vi.BarHeight*this.scale);break;case tr.PartialLeft:n.fillRect(e+4*this.scale,t-vi.NoteHeight*this.scale+vi.BarSeparation*this.scale*c,o,vi.BarHeight*this.scale);break;case tr.PartialRight:n.fillRect(e+4*this.scale+o,t-vi.NoteHeight*this.scale+vi.BarSeparation*this.scale*c,o,vi.BarHeight*this.scale);break}n.fillMusicFontSymbol(e+vi.NoteSeparation*this.scale,t,i,N.NoteQuarterUp,!1)}renderTriplet(e,t,i){t+=2*this.scale;let n=this.renderer.resources.effectFont;i.font=ri.withFamilyList(n.families,n.size*.8,n.style);let s=e+vi.NoteSeparation*this.scale+3*this.scale;i.beginPath(),i.moveTo(e,t+3*this.scale),i.lineTo(e,t),i.lineTo(e+5*this.scale,t),i.moveTo(s+5*this.scale,t+3*this.scale),i.lineTo(s+5*this.scale,t),i.lineTo(s,t),i.stroke(),i.fillText("3",e+7*this.scale,t-10*this.scale),i.font=n}}vi.NoteScale=.4;vi.NoteHeight=12;vi.NoteSeparation=12;vi.BarHeight=2;vi.BarSeparation=3;class Nw extends an{get notationElement(){return ft.EffectTripletFeel}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return Jt.SinglePreBeat}shouldCreateGlyph(e,t){return t.index===0&&(t.voice.bar.masterBar.index===0&&t.voice.bar.masterBar.tripletFeel!==Mt.NoTripletFeel||t.voice.bar.masterBar.index>0&&t.voice.bar.masterBar.tripletFeel!==t.voice.bar.masterBar.previousMasterBar.tripletFeel)}createNewGlyph(e,t){return new vi(t.voice.bar.masterBar.tripletFeel)}canExpand(e,t){return!0}}class v_ extends an{get notationElement(){return ft.EffectWhammyBar}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return Jt.GroupedOnBeat}shouldCreateGlyph(e,t){return t.hasWhammyBar}createNewGlyph(e,t){return new du("w/bar")}canExpand(e,t){return!0}}class R0 extends an{get notationElement(){return ft.EffectWideBeatVibrato}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return Jt.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.vibrato===ni.Wide}createNewGlyph(e,t){return new YC(ni.Wide)}canExpand(e,t){return!0}}class L0 extends Ah{get notationElement(){return ft.EffectWideNoteVibrato}shouldCreateGlyphForNote(e){return e.vibrato===ni.Wide||e.isTieDestination&&e.tieOrigin.vibrato===ni.Wide}get sizingMode(){return Jt.GroupedOnBeatToEnd}createNewGlyph(e,t){return new Fh(0,0,ni.Wide,1.2)}}class w_{constructor(){this.x=0,this.width=0,this.masterBars=[]}}class Nm extends jC{get name(){return"HorizontalScreen"}constructor(e){super(e),this._group=null,this._pagePadding=null}get supportsResize(){return!1}get firstBarX(){let e=this._pagePadding[0];return this._group&&(e+=this._group.accoladeSpacing),e}doResize(){}doLayoutAndRender(){switch(this._pagePadding=this.renderer.settings.display.padding,this.renderer.settings.display.systemsLayoutMode){case yc.Automatic:this.systemsLayoutMode=As.Automatic;break;case yc.UseModelLayout:this.systemsLayoutMode=As.FromModelWithWidths;break}this._pagePadding||(this._pagePadding=Nm.PagePadding),this._pagePadding.length===1?this._pagePadding=[this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]:this._pagePadding.length===2&&(this._pagePadding=[this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]);let e=this.renderer.score,t=this.renderer.settings.display.startBar;t--,t=Math.min(e.masterBars.length-1,Math.max(0,t));let i=t,n=this.renderer.settings.display.barCount;n<=0&&(n=e.masterBars.length),n=t+n-1,n=Math.min(e.masterBars.length-1,Math.max(0,n)),this._group=this.createEmptyStaveGroup(),this._group.isLast=!0,this._group.x=this._pagePadding[0],this._group.y=this._pagePadding[1];let s=this.renderer.settings.display.barCountPerPartial,o=[],c=new w_,h=0;for(;i<=n;){let g=this._group.addBars(this.renderer.tracks,i);if(g)if(c.masterBars.length===0&&g.isLinkedToPrevious&&o.length>0){let b=o[o.length-1];b.masterBars.push(e.masterBars[i]),b.width+=g.width,h+=g.width,c.x+=h}else c.masterBars.push(e.masterBars[i]),c.width+=g.width,c.masterBars.length>=s&&(o.length===0&&(c.width+=this._group.accoladeSpacing+this._pagePadding[0]),h+=c.width,o.push(c),ye.debug(this.name,"Finished partial from bar "+c.masterBars[0].index+" to "+c.masterBars[c.masterBars.length-1].index,null),c=new w_,c.x=h);i++}c.masterBars.length>0&&(o.length===0&&(c.width+=this._group.accoladeSpacing+this._pagePadding[0]),o.push(c),ye.debug(this.name,"Finished partial from bar "+c.masterBars[0].index+" to "+c.masterBars[c.masterBars.length-1].index,null)),this.finalizeGroup(),this.height=Math.floor(this._group.y+this._group.height),this.width=this._group.x+this._group.width+this._pagePadding[2],i=0;let p=0;for(let g=0;g<o.length;g++){const b=o[g],v=new Bh;v.x=p,v.y=0,v.totalWidth=this.width,v.totalHeight=this.height,v.width=b.width,v.height=this.height,v.firstMasterBarIndex=b.masterBars[0].index,v.lastMasterBarIndex=b.masterBars[b.masterBars.length-1].index,p+=b.width;const S=i,B=g;this._group.buildBoundingsLookup(this._group.x,this._group.y),this.registerPartial(v,T=>{let C=this._group.getBarX(b.masterBars[0].index)+this._group.accoladeSpacing;B===0&&(C-=this._group.x+this._group.accoladeSpacing),T.color=this.renderer.settings.display.resources.mainGlyphColor,T.textAlign=at.Left,ye.debug(this.name,"Rendering partial from bar "+b.masterBars[0].index+" to "+b.masterBars[b.masterBars.length-1].index,null),this._group.paintPartial(-C,this._group.y,T,S,b.masterBars.length)}),i+=b.masterBars.length}this.height=this.layoutAndRenderAnnotation(this.height)+this._pagePadding[3]}finalizeGroup(){this._group.scaleToWidth(this._group.width),this._group.finalizeGroup()}}Nm.PagePadding=[20,20,20,20];Nm.GroupSpacing=20;class Pm extends jC{get name(){return"PageView"}constructor(e){super(e),this._groups=[],this._allMasterBarRenderers=[],this._barsFromPreviousGroup=[],this._pagePadding=null}doLayoutAndRender(){switch(this.renderer.settings.display.systemsLayoutMode){case yc.Automatic:this.systemsLayoutMode=As.Automatic;break;case yc.UseModelLayout:this.systemsLayoutMode=As.FromModelWithScale;break}this._pagePadding=this.renderer.settings.display.padding,this._pagePadding||(this._pagePadding=Pm.PagePadding),this._pagePadding.length===1?this._pagePadding=[this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]:this._pagePadding.length===2&&(this._pagePadding=[this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]);let e=0;this.width=this.renderer.width,this._allMasterBarRenderers=[],e=this.layoutAndRenderScoreInfo(e,-1),e=this.layoutAndRenderTunings(e,-1),e=this.layoutAndRenderChordDiagrams(e,-1),e=this.layoutAndRenderScore(e),e=this.layoutAndRenderAnnotation(e),this.height=e+this._pagePadding[3]}get supportsResize(){return!0}get firstBarX(){let e=this._pagePadding[0];return this._groups.length>0&&(e+=this._groups[0].accoladeSpacing),e}doResize(){let e=0;this.width=this.renderer.width;let t=this.height;e=this.layoutAndRenderScoreInfo(e,t),e=this.layoutAndRenderTunings(e,t),e=this.layoutAndRenderChordDiagrams(e,t),e=this.resizeAndRenderScore(e,t),e=this.layoutAndRenderAnnotation(e),this.height=e+this._pagePadding[3]}layoutAndRenderTunings(e,t=-1){if(!this.tuningGlyph)return e;let i=this.renderer.settings.display.resources;this.tuningGlyph.x=this._pagePadding[0],this.tuningGlyph.width=this.width,this.tuningGlyph.doLayout();let n=this.tuningGlyph.height+11*this.scale;const s=new Bh;return s.x=0,s.y=e,s.width=this.width,s.height=n,s.totalWidth=this.width,s.totalHeight=t<0?e+s.height:t,this.registerPartial(s,o=>{o.color=i.scoreInfoColor,o.textAlign=at.Center,this.tuningGlyph.paint(0,0,o)}),e+n}layoutAndRenderChordDiagrams(e,t=-1){if(!this.chordDiagrams)return e;const i=this.renderer.settings.display.resources;this.chordDiagrams.width=this.width,this.chordDiagrams.doLayout();const n=Math.floor(this.chordDiagrams.height),s=new Bh;return s.x=0,s.y=e,s.width=this.width,s.height=n,s.totalWidth=this.width,s.totalHeight=t<0?e+n:t,this.registerPartial(s,o=>{o.color=i.scoreInfoColor,o.textAlign=at.Center,this.chordDiagrams.paint(0,0,o)}),e+n}layoutAndRenderScoreInfo(e,t=-1){ye.debug(this.name,"Layouting score info");const i=new Bh;i.x=0,i.y=e;let n=this._pagePadding[1],s=this.scale,o=this.renderer.settings.display.resources,c=[ft.ScoreTitle,ft.ScoreSubTitle,ft.ScoreArtist,ft.ScoreAlbum,ft.ScoreWordsAndMusic];for(let g=0;g<c.length;g++)if(this.scoreInfoGlyphs.has(c[g])){let b=this.scoreInfoGlyphs.get(c[g]);b.x=this.width/2,b.y=n,b.textAlign=at.Center,n+=b.font.size*s}let h=!1,p=0;if(this.scoreInfoGlyphs.has(ft.ScoreMusic)){let g=this.scoreInfoGlyphs.get(ft.ScoreMusic);g.x=this.width-this._pagePadding[2],g.y=n,g.textAlign=at.Right,h=!0,p=g.font.size*s}if(this.scoreInfoGlyphs.has(ft.ScoreWords)){let g=this.scoreInfoGlyphs.get(ft.ScoreWords);g.x=this._pagePadding[0],g.y=n,g.textAlign=at.Left,h=!0,p=g.font.size*s}return h&&(n+=p),n=Math.floor(n+17*this.scale),i.width=this.width,i.height=n,i.totalWidth=this.width,i.totalHeight=t<0?e+i.height:t,this.registerPartial(i,g=>{g.color=o.scoreInfoColor,g.textAlign=at.Center;for(const b of this.scoreInfoGlyphs.values())b.paint(0,0,g)}),e+n}resizeAndRenderScore(e,t){if(this.renderer.settings.display.barsPerRow>0||this.systemsLayoutMode==As.FromModelWithScale)for(let n=0;n<this._groups.length;n++){let s=this._groups[n];this.fitGroup(s),e+=this.paintGroup(s,t)}else{this._groups=[];let n=0,s=this.maxWidth,o=this.createEmptyStaveGroup();for(o.index=this._groups.length,o.x=this._pagePadding[0],o.y=e;n<this._allMasterBarRenderers.length;){let c=this._allMasterBarRenderers[n];if(o.width+c.width<=s||o.masterBarsRenderers.length===0)o.addMasterBarRenderers(this.renderer.tracks,c),n++;else{for(;c&&!c.canWrap&&o.masterBarsRenderers.length>1;)c=o.revertLastBar(),n--;o.isFull=!0,o.isLast=this.lastBarIndex===o.lastBarIndex,this._groups.push(o),this.fitGroup(o),e+=this.paintGroup(o,t),o=this.createEmptyStaveGroup(),o.index=this._groups.length,o.x=this._pagePadding[0],o.y=e}}o.isLast=this.lastBarIndex===o.lastBarIndex,this.fitGroup(o),e+=this.paintGroup(o,t)}return e}layoutAndRenderScore(e){let i=this.firstBarIndex,n=this.lastBarIndex;for(this._groups=[];i<=n;){let s=this.createStaveGroup(i,n);this._groups.push(s),s.x=this._pagePadding[0],s.y=e,i=s.lastBarIndex+1,this.fitGroup(s),ye.debug(this.name,"Rendering partial from bar "+s.firstBarIndex+" to "+s.lastBarIndex,null),e+=this.paintGroup(s,e)}return e}paintGroup(e,t){let i=Math.floor(e.height+20*this.scale);const n=new Bh;return n.x=0,n.y=e.y,n.totalWidth=this.width,n.totalHeight=t,n.width=this.width,n.height=i,n.firstMasterBarIndex=e.firstBarIndex,n.lastMasterBarIndex=e.lastBarIndex,e.buildBoundingsLookup(0,0),this.registerPartial(n,s=>{this.renderer.canvas.color=this.renderer.settings.display.resources.mainGlyphColor,this.renderer.canvas.textAlign=at.Left,e.paint(0,-n.y,s)}),t+=i,i}fitGroup(e){e.isFull||e.width>this.maxWidth||this.renderer.settings.display.justifyLastSystem?e.scaleToWidth(this.maxWidth):e.scaleToWidth(e.width),e.finalizeGroup()}getBarsPerRow(e){let t=this.renderer.settings.display.barsPerRow;if(this.systemsLayoutMode==As.FromModelWithScale){let i,n;this.renderer.tracks.length>1?(i=this.renderer.score.defaultSystemsLayout,n=this.renderer.score.systemsLayout):(i=this.renderer.tracks[0].defaultSystemsLayout,n=this.renderer.tracks[0].systemsLayout),t=e<n.length?n[e]:i}return t}createStaveGroup(e,t){let i=this.createEmptyStaveGroup();i.index=this._groups.length;let n=this.getBarsPerRow(i.index),s=this.maxWidth,o=t+1,c=e;for(;c<o;){if(this._barsFromPreviousGroup.length>0)for(let p of this._barsFromPreviousGroup)i.addMasterBarRenderers(this.renderer.tracks,p),c=p.masterBar.index;else{let p=i.addBars(this.renderer.tracks,c);p&&this._allMasterBarRenderers.push(p)}this._barsFromPreviousGroup=[];let h=!1;if((n===-1&&i.width>=s&&i.masterBarsRenderers.length!==0||i.masterBarsRenderers.length===n+1)&&(h=!0),h){let p=i.revertLastBar();if(p)for(this._barsFromPreviousGroup.push(p);p&&!p.canWrap&&i.masterBarsRenderers.length>1;)p=i.revertLastBar(),p&&this._barsFromPreviousGroup.push(p);return i.isFull=!0,i.isLast=!1,this._barsFromPreviousGroup.reverse(),i}i.x=0,c++}return i.isLast=t===i.lastBarIndex,i}get maxWidth(){return this.renderer.width-this._pagePadding[0]-this._pagePadding[2]}}Pm.PagePadding=[40,40,40,40];Pm.GroupSpacing=20;class cc extends br{constructor(e,t,i,n=!1){super(e,t,n?Ot.GraceScale:1,cc.getMusicSymbol(i)),this._isGrace=n,this._accidentalType=i}static getMusicSymbol(e){switch(e){case bi.Natural:return N.AccidentalNatural;case bi.Sharp:return N.AccidentalSharp;case bi.Flat:return N.AccidentalFlat;case bi.NaturalQuarterNoteUp:return N.AccidentalQuarterToneNaturalArrowUp;case bi.SharpQuarterNoteUp:return N.AccidentalQuarterToneSharpArrowUp;case bi.FlatQuarterNoteUp:return N.AccidentalQuarterToneFlatArrowUp;case bi.DoubleSharp:return N.AccidentalDoubleSharp;case bi.DoubleFlat:return N.AccidentalDoubleFlat}return N.None}doLayout(){switch(this._accidentalType){case bi.DoubleFlat:this.width=18;break;default:this.width=8;break}this.width=this.width*(this._isGrace?Ot.GraceScale:1)*this.scale}}class qC extends vr{constructor(e,t,i){super(e,t),this._number=0,this._number=i}doLayout(){this.renderer.scoreRenderer.canvas.font=this.renderer.resources.barNumberFont,this.width=this.renderer.scoreRenderer.canvas.measureText(this._number.toString())+5*this.scale}paint(e,t,i){if(!this.renderer.staff.isFirstInAccolade)return;let n=this.renderer.resources,s=i.color;i.color=n.barNumberColor,i.font=n.barNumberFont,i.fillText(this._number.toString(),e+this.x,t+this.y),i.color=s}}class XC extends vr{constructor(e,t){super(e,t)}doLayout(){this.renderer.isLast?this.width=15*this.scale:!this.renderer.nextRenderer||this.renderer.nextRenderer.staff!==this.renderer.staff||!this.renderer.nextRenderer.bar.masterBar.isRepeatStart?(this.width=2*this.scale,this.renderer.bar.masterBar.isDoubleBar&&(this.width+=2*this.scale)):this.width=2*this.scale}paint(e,t,i){let n=4*this.scale,s=t+this.y+this.renderer.topPadding,o=t+this.y+this.renderer.height-this.renderer.bottomPadding,c=e+this.x,h=o-s;this.renderer.isLast?(i.fillRect(c+this.width-n-n,s,this.scale,h),i.fillRect(c+this.width-n,s,n,h)):(!this.renderer.nextRenderer||this.renderer.nextRenderer.staff!==this.renderer.staff||!this.renderer.nextRenderer.bar.masterBar.isRepeatStart)&&(i.fillRect(c+this.width-this.scale,s,this.scale,h),this.renderer.bar.masterBar.isDoubleBar&&i.fillRect(c+this.width-5*this.scale,s,this.scale,h))}}class gS extends br{constructor(e,t,i,n){super(e,t,1,gS.getSymbol(i)),this._clef=i,this._clefOttava=n}doLayout(){switch(this._clef){case _t.Neutral:this.width=15*this.scale;break;case _t.C3:case _t.C4:case _t.F4:case _t.G2:this.width=28*this.scale;break}}static getSymbol(e){switch(e){case _t.Neutral:return N.UnpitchedPercussionClef1;case _t.C3:return N.CClef;case _t.C4:return N.CClef;case _t.F4:return N.FClef;case _t.G2:return N.GClef;default:return N.None}}paint(e,t,i){super.paint(e,t,i);let n,s=!1;switch(this._clefOttava){case hi._15ma:n=new br(-4*this.scale,0,.5,N.Quindicesima),s=!0;break;case hi._8va:n=new br(-2*this.scale,0,.5,N.Ottava),s=!0;break;case hi._8vb:n=new br(-6*this.scale,0,.5,N.Ottava);break;case hi._15mb:n=new br(-8*this.scale,0,.5,N.Quindicesima);break;default:return}let o=0,c=0;switch(this._clef){case _t.Neutral:o=s?-12:15,c=0;break;case _t.C3:o=s?-19:27,c=0;break;case _t.C4:o=s?-19:27,c=0;break;case _t.F4:o=s?-9:27,c=-4;break;case _t.G2:o=s?-37:30,c=0;break;default:return}n.renderer=this.renderer,n.doLayout();let h=this.width/2;n.paint(e+this.x+h+c*this.scale,t+this.y+o*this.scale,i)}}class KC extends vr{constructor(e,t){super(e,t)}doLayout(){this.width=11*this.scale}paint(e,t,i){let n=4*this.scale,s=t+this.y+this.renderer.topPadding,o=t+this.y+this.renderer.height-this.renderer.bottomPadding,c=e+this.x,h=o-s,p=1.5*this.scale,g=(s+o)/2,b=3;i.fillCircle(c,g-p*b,p),i.fillCircle(c,g+p*b,p),c+=4*this.scale,i.beginPath(),i.moveTo(c,s),i.lineTo(c,o),i.stroke(),c+=3*this.scale+.5,i.fillRect(c,s,n,h)}}class QC extends vr{constructor(e,t,i){super(e,t),this._count=0,this._count=0,this._count=i}doLayout(){this.width=0}paint(e,t,i){let n=this.renderer.resources,s=i.textAlign;i.font=n.barNumberFont,i.textAlign=at.Right;let o="x"+this._count,c=i.measureText(o)/1.5;i.fillText(o,e+this.x-c,t+this.y),i.textAlign=s}}class JC extends vr{constructor(e,t,i,n){super(e,t),this._dotOffset=0,this._circleSize=0,this._dotOffset=0,this._circleSize=0,this._dotOffset=n,this._circleSize=i}doLayout(){this.width=13*this.scale}paint(e,t,i){let n=4*this.scale,s=t+this.y+this.renderer.topPadding,o=t+this.y+this.renderer.height-this.renderer.bottomPadding,c=e+this.x+.5,h=o-s;i.fillRect(c,s,n,h),c+=n*2-.5,i.beginPath(),i.moveTo(c,s),i.lineTo(c,o),i.stroke(),c+=3*this.scale;let p=this._circleSize*this.scale,g=(s+o)/2;i.fillCircle(c,g-p*this._dotOffset,p),i.fillCircle(c,g+p*this._dotOffset,p)}}class sb extends br{constructor(e,t,i){super(e,t,1,sb.getSymbol(i))}static getSymbol(e){switch(e){case Mr.None:return N.None;case Mr.Normal:return N.ArticAccentAbove;case Mr.Heavy:return N.ArticMarcatoAbove;default:return N.None}}doLayout(){this.width=9*this.scale,this.height=9*this.scale}paint(e,t,i){super.paint(e-2*this.scale,t+this.height,i)}}class ax extends vr{constructor(e,t,i){super(e,t),this._size=0,this._size=i}doLayout(){this.width=this._size+3*this.scale}paint(e,t,i){i.fillCircle(e+this.x,t+this.y,this._size)}}class MW extends br{constructor(e,t,i){super(e,t,i?Ot.GraceScale:1,N.NoteheadXOrnate),this._isGrace=i}doLayout(){this.width=9*(this._isGrace?Ot.GraceScale:1)*this.scale,this.height=Ot.NoteHeadHeight*this.scale}}class ab extends br{constructor(e,t,i,n){super(e,t,n?Ot.GraceScale:1,ab.getSymbol(i)),this._isGrace=n}static getSymbol(e){switch(e){case Y.QuadrupleWhole:case Y.DoubleWhole:case Y.Whole:case Y.Half:return N.NoteheadDiamondWhiteWide;default:return N.NoteheadDiamondBlackWide}}doLayout(){this.width=9*(this._isGrace?Ot.GraceScale:1)*this.scale,this.height=Ot.NoteHeadHeight*this.scale}}class tn extends vr{constructor(e,t,i){super(0,0),this.yOffset=0,this.startNoteRenderer=null,this.endNoteRenderer=null,this.tieDirection=Te.Up,this._startX=0,this._startY=0,this._endX=0,this._endY=0,this._tieHeight=0,this._shouldDraw=!1,this.startBeat=e,this.endBeat=t,this.forEnd=i}doLayout(){if(this.width=0,!this.endBeat){this._shouldDraw=!1;return}let e=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.startBeat.voice.bar);this.startNoteRenderer=e;let t=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.endBeat.voice.bar);this.endNoteRenderer=t,this._startX=0,this._endX=0,this._startY=0,this._endY=0,this.height=0,this._shouldDraw=!1,this.tieDirection=e?this.getBeamDirection(this.startBeat,e):this.getBeamDirection(this.endBeat,t),!this.forEnd&&e?(e!==t?(this._startX=e.x+this.getStartX(),this._startY=e.y+this.getStartY()+this.yOffset,!t||e.staff!==t.staff?(this._endX=e.x+e.width,this._endY=this._startY):(this._endX=t.x+this.getEndX(),this._endY=t.y+this.getEndY()+this.yOffset)):(this._startX=e.x+this.getStartX(),this._endX=t.x+this.getEndX(),this._startY=e.y+this.getStartY()+this.yOffset,this._endY=t.y+this.getEndY()+this.yOffset),this._shouldDraw=!0):(!e||e.staff!==t.staff)&&(this._startX=t.x,this._endX=t.x+this.getEndX(),this._startY=t.y+this.getEndY()+this.yOffset,this._endY=this._startY,this._shouldDraw=!0),this._shouldDraw&&(this.y=Math.min(this._startY,this._endY),this.shouldDrawBendSlur()?this._tieHeight=0:(this._tieHeight=this.getTieHeight(this._startX,this._startY,this._endX,this._endY),this.height=tn.calculateActualTieHeight(this.renderer.scale,this._startX,this._startY,this._endX,this._endY,this.tieDirection===Te.Down,this._tieHeight,4).h),this.tieDirection===Te.Up&&(this.y-=this.height))}paint(e,t,i){this._shouldDraw&&(this.shouldDrawBendSlur()?tn.drawBendSlur(i,e+this._startX,t+this._startY,e+this._endX,t+this._endY,this.tieDirection===Te.Down,this.scale):tn.paintTie(i,this.scale,e+this._startX,t+this._startY,e+this._endX,t+this._endY,this.tieDirection===Te.Down,this._tieHeight,4))}shouldDrawBendSlur(){return!1}getTieHeight(e,t,i,n){return 22}getBeamDirection(e,t){return Te.Down}getStartY(){return 0}getEndY(){return 0}getStartX(){return 0}getEndX(){return 0}static calculateActualTieHeight(e,t,i,n,s,o,c,h){const p=tn.computeBezierControlPoints(e,t,i,n,s,o,c,h);t=p[0],i=p[1];const g=p[2],b=p[3];n=p[6],s=p[7];const v=(t-g)/(t-2*g+n),S=tn.calculateExtrema(t,i,g,b,n,s,v),B=S.length>0?Math.min(t,n,S[0]):Math.min(t,n),T=S.length>0?Math.max(t,n,S[0]):Math.max(t,n),C=(i-b)/(i-2*b+s),L=tn.calculateExtrema(t,i,g,b,n,s,C),O=L.length>0?Math.min(i,s,L[1]):Math.min(i,s),I=L.length>0?Math.max(i,s,L[1]):Math.max(i,s),V=new gs;return V.x=B,V.y=O,V.w=T-B,V.h=I-O,V}static calculateExtrema(e,t,i,n,s,o,c){if(c<=0||1<=c)return[];const h=e+(i-e)*c,p=t+(n-t)*c,g=i+(s-i)*c,b=n+(o-n)*c;return[h+(g-h)*c,p+(b-p)*c]}static computeBezierControlPoints(e,t,i,n,s,o,c,h){if(t===n&&i===s)return[];if(n<t){let O=t;t=n,n=O,O=i,i=s,s=O}c*=e,h*=e;let p=s-i,g=n-t,b=Math.sqrt(p*p+g*g);o?p*=-1:g*=-1,p/=b,g/=b;let v=(n+t)/2,S=(s+i)/2,B=v+c*p,T=S+c*g,C=v+(c-h)*p,L=S+(c-h)*g;return[t,i,B,T,C,L,n,s]}static paintTie(e,t,i,n,s,o,c=!1,h=22,p=4){const g=tn.computeBezierControlPoints(t,i,n,s,o,c,h,p);e.beginPath(),e.moveTo(g[0],g[1]),e.quadraticCurveTo(g[2],g[3],g[6],g[7]),e.quadraticCurveTo(g[4],g[5],g[0],g[1]),e.closePath(),e.fill()}static drawBendSlur(e,t,i,n,s,o,c,h){let p=s-i,g=n-t,b=Math.sqrt(p*p+g*g);o?p*=-1:g*=-1,p/=b,g/=b;let v=(n+t)/2,S=(s+i)/2,B=tn.BendSlurHeight*c;n-t<20&&(B/=2);let T=v+B*p,C=S+B*g;if(e.beginPath(),e.moveTo(t,i),e.lineTo(T,C),e.lineTo(n,s),e.stroke(),h){let L=e.measureText(h),O=o?0:-e.font.size;e.fillText(h,T-L/2,C+O)}}}tn.BendSlurHeight=11;class Lb extends vr{constructor(e){super(0,0),this._isOpen=e}doLayout(){super.doLayout(),this.width=Lb.Size*this.scale}paint(e,t,i){this._isOpen?tn.paintTie(i,this.scale,e+this.x+this.width,t+this.y+this.height,e+this.x+this.width,t+this.y,!1,6,3):tn.paintTie(i,this.scale,e+this.x,t+this.y,e+this.x,t+this.y+this.height,!1,6,3)}}Lb.Size=6;class DW{constructor(e,t){this.line=0,this.line=e,this.isGhost=t}}class ob extends vr{constructor(e){super(0,0),this._infos=[],this._glyphs=[],this.isEmpty=!0,this._isOpen=e}addParenthesis(e){let t=this.renderer,i=t.getNoteLine(e),n=e.isGhost||this.isTiedBend(e)&&t.settings.notation.isNotationElementVisible(ft.ParenthesisOnTiedBends);this.addParenthesisOnLine(i,n)}addParenthesisOnLine(e,t){let i=new DW(e,t);this._infos.push(i),t&&(this.isEmpty=!1)}isTiedBend(e){return e.isTieDestination?e.tieOrigin.hasBend?!0:this.isTiedBend(e.tieOrigin):!1}doLayout(){let e=this.renderer;this._infos.sort((n,s)=>n.line-s.line);let t=null,i=e.getScoreHeight(1);for(let n=0,s=this._infos.length;n<s;n++){let o;if(!this._infos[n].isGhost)t=null;else if(!t)o=new Lb(this._isOpen),o.renderer=this.renderer,o.y=e.getScoreY(this._infos[n].line)-i,o.height=i*2,o.doLayout(),this._glyphs.push(o),t=o;else{let c=e.getScoreY(this._infos[n].line)+i;t.height=c-t.y}}this.width=this._glyphs.length>0?this._glyphs[0].width:0}paint(e,t,i){super.paint(e,t,i);for(let n of this._glyphs)n.paint(e+this.x,t+this.y,i)}}class AW{constructor(e,t){this.line=0,this.glyph=e,this.line=t}}class ZC extends vr{constructor(){super(0,0),this._infos=[],this._noteHeadPadding=0,this.minNote=null,this.maxNote=null,this.spacingChanged=new $r,this.upLineX=0,this.downLineX=0,this.displacedX=0,this.noteStartX=0}add(e,t){let i=new AW(e,t);this._infos.push(i),(!this.minNote||this.minNote.line>i.line)&&(this.minNote=i),(!this.maxNote||this.maxNote.line<i.line)&&(this.maxNote=i)}get hasTopOverflow(){return!!this.minNote&&this.minNote.line<=0}get hasBottomOverflow(){return!!this.maxNote&&this.maxNote.line>8}doLayout(){this._infos.sort((c,h)=>h.line-c.line);let e=0,t=!1,i=0,n=!1,s=this.direction,o=0;for(let c=0,h=this._infos.length;c<h;c++){let p=this._infos[c].glyph;p.renderer=this.renderer,p.doLayout();let g=!1;c===0?e=p.width:Math.abs(i-this._infos[c].line)<=1?t?t=!1:(g=!0,p.x=e,n=!0,t=!0):t=!1,s===Te.Down?p.x=g?0:e:p.x=g?e:0,p.x+=this.noteStartX,i=this._infos[c].line,o=Math.max(o,p.x+p.width)}n?(this._noteHeadPadding=0,this.upLineX=e,this.downLineX=e):(this._noteHeadPadding=s===Te.Down?-e:0,o+=this._noteHeadPadding,this.upLineX=o,this.downLineX=0),this.displacedX=e,this.width=o}paint(e,t,i){e+=this.x,t+=this.y;let n=this.renderer,s=3*this.scale,o=this.width-this.noteStartX+s*2;if(this.hasTopOverflow){let p=i.color;i.color=n.resources.staffLineColor;let g=-2;for(;g>=this.minNote.line;){let b=t+n.getScoreY(g);i.fillRect(e-s+this.noteStartX,b,o,this.scale),g-=2}i.color=p}if(this.hasBottomOverflow){let p=i.color;i.color=n.resources.staffLineColor;let g=10;for(;g<=this.maxNote.line;){let b=t+n.getScoreY(g);i.fillRect(e-s+this.noteStartX,b,o,this.scale),g+=2}i.color=p}let c=this._infos,h=e+this._noteHeadPadding;for(let p of c)p.glyph.renderer=this.renderer,p.glyph.paint(h,t,i)}}class Ib extends br{constructor(e,t,i){super(e,t,1,Ib.getSymbol(i))}doLayout(){this.width=12*this.scale}static getSymbol(e){switch(e){case Y.ThirtySecond:return N.Tremolo3;case Y.Sixteenth:return N.Tremolo2;case Y.Eighth:return N.Tremolo1;default:return N.None}}}class VW extends ZC{constructor(){super(),this._noteGlyphLookup=new Map,this._notes=[],this._tremoloPicking=null,this.aboveBeatEffects=new Map,this.belowBeatEffects=new Map}get direction(){return this.beamingHelper.direction}getNoteX(e,t){if(this._noteGlyphLookup.has(e.id)){let i=this._noteGlyphLookup.get(e.id),n=this.x+i.x+this._noteHeadPadding;switch(t){case yr.Left:break;case yr.Center:n+=i.width/2;break;case yr.Right:n+=i.width;break}return n}return 0}getNoteY(e,t){if(this._noteGlyphLookup.has(e.id)){const i=this._noteGlyphLookup.get(e.id);let n=this.y+i.y;switch(t){case Ke.TopWithStem:n-=this.renderer.getStemSize(this.beamingHelper);break;case Ke.Top:n-=i.height/2;break;case Ke.Center:break;case Ke.Bottom:n+=i.height/2;break;case Ke.BottomWithStem:n+=this.renderer.getStemSize(this.beamingHelper);break}return n}return 0}addNoteGlyph(e,t,i){super.add(e,i),this._noteGlyphLookup.set(t.id,e),this._notes.push(t)}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,e+this.x+this.upLineX,e+this.x+this.downLineX)}doLayout(){super.doLayout();let e=this.direction;for(const t of this.aboveBeatEffects.values())t.renderer=this.renderer,t.doLayout();for(const t of this.belowBeatEffects.values())t.renderer=this.renderer,t.doLayout();if(this.beat.isTremolo){let t=0,i=e===Te.Up?this.minNote:this.maxNote,n=e===Te.Up?this.displacedX:0,s=this.beat.tremoloSpeed;switch(s){case Y.ThirtySecond:t=e===Te.Up?-15:15;break;case Y.Sixteenth:t=e===Te.Up?-12:15;break;case Y.Eighth:t=e===Te.Up?-10:10;break;default:t=e===Te.Up?-10:15;break}this._tremoloPicking=new Ib(n,i.glyph.y+t*this.scale,s),this._tremoloPicking.renderer=this.renderer,this._tremoloPicking.doLayout()}}buildBoundingsLookup(e,t,i){for(let n of this._notes)if(this._noteGlyphLookup.has(n.id)){let s=this._noteGlyphLookup.get(n.id),o=new oS;o.note=n,o.noteHeadBounds=new gs,o.noteHeadBounds.x=t+this.x+this._noteHeadPadding+s.x,o.noteHeadBounds.y=i+this.y+s.y-s.height/2,o.noteHeadBounds.w=s.width,o.noteHeadBounds.h=s.height,e.addNote(o)}}paint(e,t,i){let n=this.renderer,s=0,o=0,c=1,h=-c;this.beamingHelper.direction===Te.Up?(o=n.getScoreY(this.minNote.line),s=n.getScoreY(this.maxNote.line-2)):(o=n.getScoreY(this.maxNote.line-1),s=n.getScoreY(this.minNote.line+1),h*=-1,c*=-1);for(const p of this.aboveBeatEffects.values())s+=h*p.height,p.paint(e+this.x+2*this.scale,t+this.y+s,i);for(const p of this.belowBeatEffects.values())o+=c*p.height,p.paint(e+this.x+2*this.scale,t+this.y+o,i);super.paint(e,t,i),this._tremoloPicking&&this._tremoloPicking.paint(e,t,i)}}class Hf extends br{constructor(e,t,i){super(e,t,1,Hf.getSymbol(i)),this._duration=i}static getSymbol(e){switch(e){case Y.QuadrupleWhole:return N.RestLonga;case Y.DoubleWhole:return N.RestDoubleWhole;case Y.Whole:return N.RestWhole;case Y.Half:return N.RestHalf;case Y.Quarter:return N.RestQuarter;case Y.Eighth:return N.RestEighth;case Y.Sixteenth:return N.RestSixteenth;case Y.ThirtySecond:return N.RestThirtySecond;case Y.SixtyFourth:return N.RestSixtyFourth;case Y.OneHundredTwentyEighth:return N.RestOneHundredTwentyEighth;case Y.TwoHundredFiftySixth:return N.RestTwoHundredFiftySixth;default:return N.None}}static getSize(e){switch(e){case Y.QuadrupleWhole:case Y.DoubleWhole:case Y.Whole:case Y.Half:case Y.Quarter:case Y.Eighth:case Y.Sixteenth:return 9;case Y.ThirtySecond:return 12;case Y.SixtyFourth:return 14;case Y.OneHundredTwentyEighth:case Y.TwoHundredFiftySixth:return 20}return 10}doLayout(){this.width=Hf.getSize(this._duration)*this.scale}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}}class x_{constructor(){this.x=0,this.y=-3e3,this.width=0}}class e2 extends go{constructor(){super(0,0)}doLayout(){if(!this.glyphs||this.glyphs.length===0){this.width=0;return}this.glyphs.sort((i,n)=>i.y<n.y?-1:i.y>n.y?1:0);let e=[];e.push(new x_);let t=21*this.scale;for(let i=0,n=this.glyphs.length;i<n;i++){let s=this.glyphs[i];s.renderer=this.renderer,s.doLayout();let o=0;for(;e[o].y>s.y;)o++,o===e.length&&e.push(new x_);s.x=o,e[o].y=s.y+t,e[o].width<s.width&&(e[o].width=s.width)}this.width=0;for(const i of e)this.width+=i.width,i.x=this.width;for(let i=0,n=this.glyphs.length;i<n;i++){let s=this.glyphs[i];const o=e[s.x];s.x=this.width-o.x}}}class ms extends ZC{get direction(){return Te.Up}constructor(e,t=!1){super(),this._showParenthesis=!1,this._noteValueLookup=new Map,this._accidentals=new e2,this._preNoteParenthesis=null,this._postNoteParenthesis=null,this.isEmpty=!0,this.noteHeadOffset=0,this._beat=e,this._showParenthesis=t,t&&(this._preNoteParenthesis=new ob(!0),this._postNoteParenthesis=new ob(!1))}containsNoteValue(e){return this._noteValueLookup.has(e)}getNoteValueY(e){return this._noteValueLookup.has(e)?this.y+this._noteValueLookup.get(e).y:0}addGlyph(e,t=!1){let i=this.renderer,n=new Ot(0,0,Y.Quarter,!0),s=i.accidentalHelper.applyAccidentalForValue(this._beat,e,t,!0),o=i.accidentalHelper.getNoteLineForValue(e,!1);if(n.y=i.getScoreY(o),this._showParenthesis&&(this._preNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.addParenthesisOnLine(o,!0),this._postNoteParenthesis.addParenthesisOnLine(o,!0)),s!==bi.None){let c=new cc(0,n.y,s,!0);c.renderer=this.renderer,this._accidentals.renderer=this.renderer,this._accidentals.addGlyph(c)}this._noteValueLookup.set(e,n),this.add(n,o),this.isEmpty=!1}doLayout(){let e=0;this._showParenthesis&&(this._preNoteParenthesis.x=e,this._preNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.doLayout(),e+=this._preNoteParenthesis.width+ms.ElementPadding*this.scale),this._accidentals.isEmpty||(e+=this._accidentals.width+ms.ElementPadding*this.scale,this._accidentals.x=e,this._accidentals.renderer=this.renderer,this._accidentals.doLayout(),e+=this._accidentals.width+ms.ElementPadding*this.scale),this.noteStartX=e,super.doLayout(),this.noteHeadOffset=this.noteStartX+(this.width-this.noteStartX)/2,this._showParenthesis&&(this._postNoteParenthesis.x=this.width+ms.ElementPadding*this.scale,this._postNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.doLayout(),this.width+=this._postNoteParenthesis.width+ms.ElementPadding*this.scale)}paint(e,t,i){this._accidentals.isEmpty||this._accidentals.paint(e+this.x,t+this.y,i),this._showParenthesis&&(this._preNoteParenthesis.paint(e+this.x,t+this.y,i),this._postNoteParenthesis.paint(e+this.x,t+this.y,i)),super.paint(e,t,i)}}ms.ElementPadding=2;class mS extends vr{constructor(){super(...arguments),this.BendNoteHeads=[]}drawBendSlur(e,t,i,n,s,o,c,h){tn.drawBendSlur(e,t,i,n,s,o,c,h)}doLayout(){super.doLayout(),this.width=0;for(let e of this.BendNoteHeads)e.doLayout(),this.width+=e.width+10*this.scale}getTieDirection(e,t){switch(t.getBeatDirection(e)){case Te.Up:return Te.Down;default:return Te.Up}}}mS.EndPadding=(10/2|0)+3;class sc extends De{constructor(e=0,t=0){super(e,t),this.lineValue=0,this.lineValue=t}}class La extends vr{constructor(){super(0,0),this._notes=[],this._renderPoints=new Map,this._preBendMinValue=-1,this._bendMiddleMinValue=-1,this._bendEndMinValue=-1,this._bendEndContinuedMinValue=-1,this._releaseMinValue=-1,this._releaseContinuedMinValue=-1,this._maxBendValue=-1}addBends(e){this._notes.push(e);let t=this.createRenderingPoints(e);this._renderPoints.set(e.id,t),(this._maxBendValue===-1||this._maxBendValue<e.maxBendPoint.value)&&(this._maxBendValue=e.maxBendPoint.value);let i=0;switch(e.bendType){case Ye.Bend:i=t[1].value,e.isTieOrigin?(this._bendEndContinuedMinValue===-1||i<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=i):(this._bendEndMinValue===-1||i<this._bendEndMinValue)&&(this._bendEndMinValue=i);break;case Ye.Release:i=t[1].value,e.isTieOrigin?(this._releaseContinuedMinValue===-1||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(this._releaseMinValue===-1||i<this._releaseMinValue)&&(this._releaseMinValue=i);break;case Ye.BendRelease:i=t[1].value,(this._bendMiddleMinValue===-1||i<this._bendMiddleMinValue)&&(this._bendMiddleMinValue=i),i=t[2].value,e.isTieOrigin?(this._releaseContinuedMinValue===-1||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(this._releaseMinValue===-1||i<this._releaseMinValue)&&(this._releaseMinValue=i);break;case Ye.Prebend:i=t[0].value,(this._preBendMinValue===-1||i<this._preBendMinValue)&&(this._preBendMinValue=i);break;case Ye.PrebendBend:i=t[0].value,(this._preBendMinValue===-1||i<this._preBendMinValue)&&(this._preBendMinValue=i),i=t[1].value,e.isTieOrigin?(this._bendEndContinuedMinValue===-1||i<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=i):(this._bendEndMinValue===-1||i<this._bendEndMinValue)&&(this._bendEndMinValue=i);break;case Ye.PrebendRelease:i=t[0].value,(this._preBendMinValue===-1||i<this._preBendMinValue)&&(this._preBendMinValue=i),i=t[1].value,e.isTieOrigin?(this._releaseContinuedMinValue===-1||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(this._releaseMinValue===-1||i<this._releaseMinValue)&&(this._releaseMinValue=i);break}}doLayout(){super.doLayout();let e=this._maxBendValue*La.BendValueHeight*this.scale;this.renderer.registerOverflowTop(e);let t=0;for(let i of this._notes){let n=this._renderPoints.get(i.id);switch(i.bendType){case Ye.Bend:n[1].lineValue=i.isTieOrigin?this._bendEndContinuedMinValue:this._bendEndMinValue;break;case Ye.Release:t=i.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(n[1].lineValue=t);break;case Ye.BendRelease:n[1].lineValue=this._bendMiddleMinValue,t=i.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(n[2].lineValue=t);break;case Ye.Prebend:n[0].lineValue=this._preBendMinValue;break;case Ye.PrebendBend:n[0].lineValue=this._preBendMinValue,n[1].lineValue=i.isTieOrigin?this._bendEndContinuedMinValue:this._bendEndMinValue;break;case Ye.PrebendRelease:n[0].lineValue=this._preBendMinValue,t=i.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(n[1].lineValue=t);break}}this.width=0,this._notes.sort((i,n)=>i.isStringed?i.string-n.string:i.realValue-n.realValue)}createRenderingPoints(e){let t=[];switch(e.bendType){case Ye.Custom:for(let i of e.bendPoints)t.push(new sc(i.offset,i.value));break;case Ye.BendRelease:t.push(new sc(0,e.bendPoints[0].value)),t.push(new sc(De.MaxPosition/2|0,e.bendPoints[1].value)),t.push(new sc(De.MaxPosition,e.bendPoints[3].value));break;case Ye.Bend:case Ye.Hold:case Ye.Prebend:case Ye.PrebendBend:case Ye.PrebendRelease:case Ye.Release:t.push(new sc(0,e.bendPoints[0].value)),t.push(new sc(De.MaxPosition,e.bendPoints[1].value));break}return t}paint(e,t,i){let n=i.color;this._notes.length>1&&(i.color=this.renderer.resources.secondaryGlyphColor);for(let s of this._notes){let o=this._renderPoints.get(s.id),c=this.renderer,h=s,p=!1,g=null,b=!1,v=s.bendStyle===Si.Gradual?"grad.":"",S=null;for(;h.isTieOrigin;){let I=h.tieDestination;if(g=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,I.beat.voice.bar),!g||c.staff!==g.staff)break;if(h=I,p=!0,h.hasBend||!this.renderer.settings.notation.extendBendArrowsOnTiedNotes){b=!0;break}}S=h.beat,g=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,S.voice.bar),S.isLastOfVoice&&!h.hasBend&&this.renderer.settings.notation.extendBendArrowsOnTiedNotes&&(S=null);let B=0,T=0,C=t+c.y;B=e+c.x,o[0].value>0||s.isContinuedBend?B+=c.getBeatX(s.beat,Vt.MiddleNotes):B+=c.getNoteX(s,yr.Right),!S||S.isLastOfVoice&&!b?T=e+g.x+g.postBeatGlyphsStart:b||!S.nextBeat?T=e+g.x+g.getBeatX(S,Vt.MiddleNotes):s.bendType===Ye.Hold?T=e+g.x+g.getBeatX(S.nextBeat,Vt.OnNotes):T=e+g.x+g.getBeatX(S.nextBeat,Vt.PreNotes),p||(T-=La.ArrowSize*this.scale);let O=(T-B)/De.MaxPosition;i.beginPath();for(let I=0,V=o.length-1;I<V;I++){let P=o[I],G=o[I+1];I===0&&P.value!==0&&!s.isTieDestination&&this.paintBend(s,new sc(0,0),P,B,C,O,v,i),s.bendType!==Ye.Prebend?(I===0&&(B+=2*this.scale),this.paintBend(s,P,G,B,C,O,v,i)):s.isTieOrigin&&s.tieDestination.hasBend&&(G=new sc(De.MaxPosition,P.value),G.lineValue=P.lineValue,this.paintBend(s,P,G,B,C,O,v,i))}i.color=n}}paintBend(e,t,i,n,s,o,c,h){let p=this.renderer,g=this.renderer.resources,b=p.lineOffset/2,v=n+o*t.offset,S=La.BendValueHeight*this.scale,B=s-S*t.lineValue;t.value===0?i.offset===t.offset?B+=p.getNoteY(e.beat.maxStringNote,Ke.Top):B+=p.getNoteY(e,Ke.Center):B+=b;let T=n+o*i.offset,C=s-S*i.lineValue;i.lineValue===0?C+=p.getNoteY(e,Ke.Center):C+=b;let L=0,O=La.ArrowSize*this.scale;if(i.value>t.value?(C+O>B&&(C=B-O),h.beginPath(),h.moveTo(T,C),h.lineTo(T-O*.5,C+O),h.lineTo(T+O*.5,C+O),h.closePath(),h.fill(),L=O):i.value!==t.value&&(C<B&&(C=B+O),h.beginPath(),h.moveTo(T,C),h.lineTo(T-O*.5,C-O),h.lineTo(T+O*.5,C-O),h.closePath(),h.fill(),L=-O),h.stroke(),t.value===i.value){if(t.lineValue>0){let I=T,V=La.DashSize*this.scale,P=v+V;if((I-v)/(V*2)<1)h.moveTo(I,B),h.lineTo(v,B);else for(;I>P;)h.moveTo(I,B),h.lineTo(I-V,B),I-=V*2;h.stroke()}}else T>v?(h.moveTo(v,B),h.bezierCurveTo((v+T)/2,B,T,B,T,C+L),h.stroke()):(h.moveTo(v,B),h.lineTo(T,C),h.stroke());if(c&&t.offset<i.offset){h.font=g.graceFont;let I=h.measureText(c),V=0,P=0;if(B>C){let G=Math.abs(B-C);V=G>h.font.size*1.3?B-G/2:B,P=(v+T-I)/2}else V=B,P=T-I;h.fillText(c,P,V)}if(i.value!==0&&t.value!==i.value){let I=i.value,V=i.value>t.value;I=Math.abs(I);let P="";if(I===4)P="full",I-=4;else if(I>=4||I<=-4){let G=I/4|0;P+=G,I-=G*4}if(I>0&&(P+=La.getFractionSign(I)),P!==""){C=s-S*i.value;let G=C;V||(G=B+Math.abs(C-B)*1/3),h.font=g.tablatureFont;let W=h.measureText(P),J=G-g.tablatureFont.size*.5-2*this.scale,re=T-W/2;h.fillText(P,re,J)}}}static getFractionSign(e){switch(e){case 1:return"";case 2:return"";case 3:return"";default:return e+"/ 4"}}}La.ArrowSize=6;La.DashSize=3;La.BendValueHeight=6;class aa extends vr{constructor(e){super(0,0),this._isSimpleDip=!1,this._beat=e,this._renderPoints=this.createRenderingPoints(e)}createRenderingPoints(e){if(e.whammyBarType===ci.Custom)return e.whammyBarPoints;let t=[];switch(e.whammyBarType){case ci.Dive:case ci.Hold:case ci.PrediveDive:case ci.Predive:t.push(new De(0,e.whammyBarPoints[0].value)),t.push(new De(De.MaxPosition,e.whammyBarPoints[1].value));break;case ci.Dip:t.push(new De(0,e.whammyBarPoints[0].value)),t.push(new De(De.MaxPosition/2|0,e.whammyBarPoints[1].value)),t.push(new De(De.MaxPosition,e.whammyBarPoints[e.whammyBarPoints.length-1].value));break}return t}doLayout(){super.doLayout(),this._isSimpleDip=this.renderer.settings.notation.notationMode===Gr.SongBook&&this._beat.whammyBarType===ci.Dip;let e=null,t=null,i=this._beat;for(;i&&i.hasWhammyBar;)(!e||e.value>i.minWhammyPoint.value)&&(e=i.minWhammyPoint),(!t||t.value<i.maxWhammyPoint.value)&&(t=i.maxWhammyPoint),i=i.nextBeat;let n=t.value>0?Math.abs(this.getOffset(t.value)):0;(n>0||this._beat.whammyBarPoints[0].value!==0||this.renderer.settings.notation.isNotationElementVisible(ft.ZerosOnDiveWhammys))&&(n+=this.renderer.resources.tablatureFont.size*2);let s=e.value<0?Math.abs(this.getOffset(e.value)):0;this.renderer.registerOverflowTop(n+s);let o=this.renderer.staff.getSharedLayoutData(aa.TopOffsetSharedDataKey,-1);n>o&&this.renderer.staff.setSharedLayoutData(aa.TopOffsetSharedDataKey,n)}getOffset(e){if(e===0)return 0;let t=aa.PerHalfSize*this.scale+Math.log2(Math.abs(e)/2)*aa.PerHalfSize*this.scale;return e<0&&(t=-t),t}paint(e,t,i){let n=this.renderer,s=this._beat.nextBeat,o=null,c=Vt.PreNotes;s&&(o=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,s.voice.bar),!o||o.staff!==n.staff||o!==n&&!s.hasWhammyBar?(s=null,o=null):c=s.hasWhammyBar&&(n.settings.notation.notationMode!==Gr.SongBook||s.whammyBarType!==ci.Dip)?Vt.MiddleNotes:Vt.PreNotes);let h=0,p=0;this._isSimpleDip?(h=e+n.x+n.getBeatX(this._beat,Vt.OnNotes)-2*this.scale,p=e+n.x+n.getBeatX(this._beat,Vt.PostNotes)+2*this.scale):(h=e+n.x+n.getBeatX(this._beat,Vt.MiddleNotes),p=o?e+o.x+o.getBeatX(s,c):e+n.x+n.width-2*this.scale);let g=i.textAlign;if(i.textAlign=at.Center,this._renderPoints.length>=2){let b=(p-h)/De.MaxPosition;i.beginPath();let v=t+this.renderer.staff.getSharedLayoutData(aa.TopOffsetSharedDataKey,0),S=this._beat.whammyStyle===Si.Gradual?"grad.":"";for(let B=0,T=this._renderPoints.length-1;B<T;B++){let C=this._renderPoints[B],L=this._renderPoints[B+1],O=B<T-2?this._renderPoints[B+2]:null,I=B===0;B===0&&C.value!==0&&!this._beat.isContinuedWhammy&&(this.paintWhammy(!1,new De(0,0),C,L,h,v,b,i),I=!1),this.paintWhammy(I,C,L,O,h,v,b,i,S),S=""}i.stroke()}i.textAlign=g}paintWhammy(e,t,i,n,s,o,c,h,p){let g=s+c*t.offset,b=s+c*i.offset,v=o-this.getOffset(t.value),S=o-this.getOffset(i.value);if(t.offset===i.offset){let C=aa.DashSize*this.scale;if(Math.abs(S-v)/(C*2)<1)h.moveTo(g,v),h.lineTo(b,S);else{let O=Math.max(v,S),I=Math.min(v,S);for(;O>I;)h.moveTo(g,I),h.lineTo(g,I+C),I+=C*2}h.stroke()}else if(t.value===i.value){let C=aa.DashSize*this.scale;if(Math.abs(b-g)/(C*2)<1)h.moveTo(g,v),h.lineTo(b,S);else{let O=Math.max(g,b),I=Math.min(g,b);for(;O>I;)h.moveTo(O,v),h.lineTo(O-C,v),O-=C*2}h.stroke()}else h.moveTo(g,v),h.lineTo(b,S);let B=this.renderer.resources;if(e&&!this._beat.isContinuedWhammy&&!this._isSimpleDip){let C=v;C-=B.tablatureFont.size+2*this.scale,this.renderer.settings.notation.isNotationElementVisible(ft.ZerosOnDiveWhammys)&&h.fillText("0",g,C),p&&(C-=B.tablatureFont.size+2*this.scale,h.fillText(p,g,C))}let T=Math.abs(i.value);if((T!==0||this.renderer.settings.notation.isNotationElementVisible(ft.ZerosOnDiveWhammys)&&!this._isSimpleDip)&&t.value!==i.value){let C="";if(i.value<0&&(C+="-"),T>=4){let I=T/4|0;C+=I,T-=I*4}else T===0&&(C+="0");T>0&&(C+=La.getFractionSign(T));let L=0;this._isSimpleDip?L=Math.min(v,S)-B.tablatureFont.size-2*this.scale:(L=t.offset===i.offset?Math.min(v,S):S,L-=B.tablatureFont.size+2*this.scale,n&&n.value>i.value&&(L-=2*this.scale));let O=b;h.fillText(C,O,L)}}}aa.TopOffsetSharedDataKey="tab.whammy.topoffset";aa.PerHalfSize=6;aa.DashSize=3;class Ph extends mS{constructor(e){super(0,0),this._beat=e}doLayout(){let e=this.renderer.settings.notation.notationMode;switch(this._beat.whammyBarType){case ci.None:case ci.Custom:case ci.Hold:return;case ci.Dive:case ci.PrediveDive:{let t=new ms(this._beat,!1);t.renderer=this.renderer;let i=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1];for(let n of this._beat.notes)n.isTieOrigin||t.addGlyph(this.getBendNoteValue(n,i),i.value%2!==0);t.doLayout(),this.BendNoteHeads.push(t)}break;case ci.Dip:if(e===Gr.SongBook){let t=this.renderer.resources;this.renderer.simpleWhammyOverflow=t.tablatureFont.size*1.5+Ph.SimpleDipHeight*this.scale+Ph.SimpleDipPadding*this.scale}else{let t=new ms(this._beat,!1);if(t.renderer=this.renderer,this.renderer.settings.notation.notationMode===Gr.GuitarPro){let n=this._beat.whammyBarPoints[1];for(let s of this._beat.notes)t.addGlyph(this.getBendNoteValue(s,this._beat.whammyBarPoints[1]),n.value%2!==0)}t.doLayout(),this.BendNoteHeads.push(t);let i=new ms(this._beat,!1);if(i.renderer=this.renderer,this.renderer.settings.notation.notationMode===Gr.GuitarPro){let n=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1];for(let s of this._beat.notes)i.addGlyph(this.getBendNoteValue(s,n),n.value%2!==0)}i.doLayout(),this.BendNoteHeads.push(i)}break;case ci.Predive:break}super.doLayout()}paint(e,t,i){let n=this._beat;switch(n.whammyBarType){case ci.None:case ci.Custom:return}let s=this.renderer.settings.notation.notationMode,o=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,n.voice.bar),c=e+o.x+o.getBeatX(n,Vt.MiddleNotes),h=this.getTieDirection(n,o),p=this._beat.notes.length===1?h:Te.Up,g=i.textAlign;for(let b=0;b<n.notes.length;b++){let v=n.notes[b],S=t+o.y;b>0&&b>=(this._beat.notes.length/2|0)&&(p=Te.Down),p===Te.Down?S+=o.getNoteY(v,Ke.Bottom):S+=o.getNoteY(v,Ke.Top);let B=e+o.x;n.isLastOfVoice?B+=o.width:B+=o.getBeatX(n,Vt.EndBeat),B-=8*this.scale;let T=n.whammyStyle===Si.Gradual&&b===0?"grad.":"",C=null;v.isTieOrigin&&(C=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,v.tieDestination.beat.voice.bar),C&&C.staff===o.staff?B=e+C.x+C.getBeatX(v.tieDestination.beat,Vt.MiddleNotes):C=null);let L=Ot.NoteHeadHeight*this.scale*Ot.GraceScale*.5;p===Te.Up&&(L=-L);let O=n.whammyBarPoints.length>0?this.getBendNoteValue(v,n.whammyBarPoints[n.whammyBarPoints.length-1]):0,I=0,V=!1;switch(this.BendNoteHeads.length>0&&this.BendNoteHeads[0].containsNoteValue(O)?(I=this.BendNoteHeads[0].getNoteValueY(O)+L,V=!0):C&&(v.isTieOrigin&&v.tieDestination.beat.hasWhammyBar||v.beat.isContinuedWhammy)?(I=t+C.y+C.getNoteY(v.tieDestination,Ke.Top),V=!0,p===Te.Down&&(I+=Ot.NoteHeadHeight*this.scale)):v.isTieOrigin&&(C?I=t+C.y+C.getNoteY(v.tieDestination,Ke.Top):I=S,p===Te.Down&&(I+=Ot.NoteHeadHeight*this.scale)),n.whammyBarType){case ci.Hold:v.isTieOrigin&&tn.paintTie(i,this.scale,c,S,B,I,h===Te.Down,22,4);break;case ci.Dive:b===0&&(this.BendNoteHeads[0].x=B-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=t+o.y,this.BendNoteHeads[0].paint(0,0,i),this.BendNoteHeads[0].containsNoteValue(O)&&(I+=this.BendNoteHeads[0].y)),V?this.drawBendSlur(i,c,S,B,I,p===Te.Down,this.scale,T):v.isTieOrigin&&tn.paintTie(i,this.scale,c,S,B,I,h===Te.Down,22,4);break;case ci.Dip:if(s===Gr.SongBook){if(b===0){let W=e+o.x+o.getBeatX(this._beat,Vt.OnNotes)-2*this.scale,J=e+o.x+o.getBeatX(this._beat,Vt.PostNotes)+2*this.scale,re=(W+J)/2,j=((this._beat.whammyBarPoints[1].value-this._beat.whammyBarPoints[0].value)/4|0).toString();i.font=this.renderer.resources.tablatureFont,i.fillText(j,re,t+this.y);let oe=t+this.y+i.font.size+2*this.scale,ge=oe+Ph.SimpleDipHeight*this.scale;this._beat.whammyBarPoints[1].value>this._beat.whammyBarPoints[0].value?(i.moveTo(W,ge),i.lineTo(re,oe),i.lineTo(J,ge)):(i.moveTo(W,oe),i.lineTo(re,ge),i.lineTo(J,oe)),i.stroke()}v.isTieOrigin&&tn.paintTie(i,this.scale,c,S,B,I,h===Te.Down,22,4)}else{let W=(c+B)/2;this.BendNoteHeads[0].x=W-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=t+o.y,this.BendNoteHeads[0].paint(0,0,i);let J=this.getBendNoteValue(v,n.whammyBarPoints[1]),re=this.BendNoteHeads[0].getNoteValueY(J)+L;this.drawBendSlur(i,c,S,W,re,p===Te.Down,this.scale,T),this.BendNoteHeads[1].x=B-this.BendNoteHeads[1].noteHeadOffset,this.BendNoteHeads[1].y=t+o.y,this.BendNoteHeads[1].paint(0,0,i),I=this.BendNoteHeads[1].getNoteValueY(O)+L,this.drawBendSlur(i,W,re,B,I,p===Te.Down,this.scale,T)}break;case ci.PrediveDive:case ci.Predive:let P=e+o.x+o.getBeatX(v.beat,Vt.PreNotes);P+=o.getPreNotesGlyphForBeat(v.beat).prebendNoteHeadOffset;let G=t+o.y+o.getScoreY(o.accidentalHelper.getNoteLineForValue(v.displayValue-(v.beat.whammyBarPoints[0].value/2|0),!1))+L;this.drawBendSlur(i,P,G,c,S,p===Te.Down,this.scale,T),this.BendNoteHeads.length>0&&(this.BendNoteHeads[0].x=B-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=t+o.y,this.BendNoteHeads[0].paint(0,0,i),this.drawBendSlur(i,c,S,B,I,p===Te.Down,this.scale,T));break}}i.textAlign=g}getBendNoteValue(e,t){return e.displayValueWithoutBend+(t.value/2|0)}}Ph.SimpleDipHeight=aa.PerHalfSize*2;Ph.SimpleDipPadding=2;class ys extends vr{constructor(e,t,i){super(e,t),this.width=i}}class zW extends br{constructor(e,t,i,n,s){super(e,t,s?Ot.GraceScale:1,i.getSymbol(n)),this._isGrace=s,this._articulation=i}paint(e,t,i){let n=this._isGrace?this.scale:0;i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this.symbol,!1),this._articulation.techniqueSymbol!==N.None&&this._articulation.techniqueSymbolPlacement===It.Middle&&i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this._articulation.techniqueSymbol,!1)}doLayout(){let e=(this._isGrace?Ot.GraceScale:1)*this.scale;switch(this.symbol){case N.NoteheadWhole:this.width=14;break;case N.NoteheadCircleX:case N.NoteheadDiamondWhite:this.width=9;break;case N.NoteheadHeavyXHat:case N.NoteheadHeavyX:this.width=13;break;default:this.width=10;break}this.width=this.width*(this._isGrace?Ot.GraceScale:1)*this.scale,this.height=Ot.NoteHeadHeight*e}}class S_ extends br{constructor(e,t){super(e,t,Ot.GraceScale,N.ArticStaccatoAbove)}doLayout(){this.width=Ot.QuarterNoteHeadWidth*this.scale,this.height=7*this.scale}paint(e,t,i){super.paint(e+3*this.scale,t+5*this.scale,i)}}class WW extends br{constructor(e,t){super(e,t,.5,N.PictEdgeOfCymbal)}doLayout(){this.width=22*this.scale,this.height=15*this.scale}paint(e,t,i){super.paint(e-3*this.scale,t+this.height,i)}}class HW extends br{constructor(e,t){super(e,t,Ot.GraceScale,N.GuitarGolpe)}doLayout(){this.width=9*this.scale,this.height=10*this.scale}paint(e,t,i){super.paint(e,t+this.height,i)}}class GW extends dS{constructor(){super(...arguments),this._collisionOffset=-1e3,this._skipPaint=!1,this.noteHeads=null,this.restGlyph=null}getNoteX(e,t){return this.noteHeads?this.noteHeads.getNoteX(e,t):0}buildBoundingsLookup(e,t,i){this.noteHeads&&this.noteHeads.buildBoundingsLookup(e,t+this.x,i+this.y)}getNoteY(e,t){return this.noteHeads?this.noteHeads.getNoteY(e,t):0}updateBeamingHelper(){if(this.noteHeads)this.noteHeads.updateBeamingHelper(this.container.x+this.x);else if(this.restGlyph&&(this.restGlyph.updateBeamingHelper(this.container.x+this.x),this.renderer.bar.isMultiVoice&&this._collisionOffset===-1e3)){this._collisionOffset=this.renderer.helpers.collisionHelper.applyRestCollisionOffset(this.container.beat,this.restGlyph.y,this.renderer.getScoreHeight(1)),this.y+=this._collisionOffset;const e=this.renderer.helpers.collisionHelper.restDurationsByDisplayTime;e.has(this.container.beat.playbackStart)&&e.get(this.container.beat.playbackStart).has(this.container.beat.playbackDuration)&&e.get(this.container.beat.playbackStart).get(this.container.beat.playbackDuration)!==this.container.beat.id&&(this._skipPaint=!0)}}paint(e,t,i){this._skipPaint||super.paint(e,t,i)}doLayout(){let e=this.renderer;if(!this.container.beat.isEmpty)if(this.container.beat.isRest){let t=Math.ceil((this.renderer.bar.staff.standardNotationLineCount-1)/2)*2;this.container.beat.duration===Y.Whole&&this.renderer.bar.staff.standardNotationLineCount!==1&&this.renderer.bar.staff.standardNotationLineCount!==3&&(t-=2);const i=new Hf(0,e.getScoreY(t),this.container.beat.duration);if(this.restGlyph=i,i.beat=this.container.beat,i.beamingHelper=this.beamingHelper,this.addGlyph(i),this.renderer.bar.isMultiVoice)if(this.container.beat.voice.index===0){const n=Ds.computeLineHeightsForRest(this.container.beat.duration);let s=i.y-e.getScoreHeight(n[0]),o=i.y+e.getScoreHeight(n[1]);this.renderer.helpers.collisionHelper.reserveBeatSlot(this.container.beat,s,o)}else this.renderer.helpers.collisionHelper.registerRest(this.container.beat);if(this.beamingHelper&&this.beamingHelper.applyRest(this.container.beat,t),this.container.beat.dots>0){this.addGlyph(new ys(0,0,5*this.scale));for(let n=0;n<this.container.beat.dots;n++){let s=new go(0,0);s.renderer=this.renderer,this.createBeatDot(t,s),this.addGlyph(s)}}}else{const t=new VW;this.noteHeads=t,t.beat=this.container.beat,t.beamingHelper=this.beamingHelper;let i=new ob(!1);i.renderer=this.renderer;for(let n of this.container.beat.notes)n.isVisible&&(this.createNoteGlyph(n),i.addParenthesis(n));if(this.addGlyph(t),i.isEmpty||(this.addGlyph(new ys(0,0,4*(this.container.beat.graceType!==ot.None?Ot.GraceScale:1)*this.scale)),this.addGlyph(i)),this.container.beat.hasWhammyBar){let n=new Ph(this.container.beat);n.renderer=this.renderer,n.doLayout(),this.container.ties.push(n)}if(this.container.beat.dots>0){this.addGlyph(new ys(0,0,5*this.scale));for(let n=0;n<this.container.beat.dots;n++){let s=new go(0,0);s.renderer=this.renderer;for(let o of this.container.beat.notes)this.createBeatDot(e.getNoteLine(o),s);this.addGlyph(s)}}}super.doLayout(),this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.isRest?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteHeads.x+this.noteHeads.width/2}createBeatDot(e,t){let i=this.renderer;t.addGlyph(new ax(0,i.getScoreY(e),1.5*this.scale))}createNoteHeadGlyph(e){let t=this.container.beat.graceType!==ot.None;if(e.beat.voice.bar.staff.isPercussion){const i=hn.getArticulation(e);if(i)return new zW(0,0,i,e.beat.duration,t);ye.warning("Rendering",`No articulation found for percussion instrument ${e.percussionArticulation}`)}return e.isDead?new MW(0,0,t):e.beat.graceType===ot.BendGrace?new Ot(0,0,Y.Quarter,!0):e.harmonicType===Ze.Natural?new ab(0,0,e.beat.duration,t):new Ot(0,0,e.beat.duration,t)}createNoteGlyph(e){if(e.beat.graceType===ot.BendGrace&&!e.hasBend)return;let t=this.renderer,i=this.createNoteHeadGlyph(e),n=t.getNoteLine(e);if(i.y=t.getScoreY(n),this.noteHeads.addNoteGlyph(i,e,n),e.harmonicType!==Ze.None&&e.harmonicType!==Ze.Natural){let s=e.displayValue+e.harmonicPitch;i=new ab(0,0,e.beat.duration,this.container.beat.graceType!==ot.None),n=t.accidentalHelper.getNoteLineForValue(s,!1),i.y=t.getScoreY(n),this.noteHeads.addNoteGlyph(i,e,n)}if(e.isStaccato&&!this.noteHeads.aboveBeatEffects.has("Staccato")&&this.noteHeads.belowBeatEffects.set("Staccato",new S_(0,0)),e.accentuated===Mr.Normal&&!this.noteHeads.aboveBeatEffects.has("Accent")&&this.noteHeads.belowBeatEffects.set("Accent",new sb(0,0,Mr.Normal)),e.accentuated===Mr.Heavy&&!this.noteHeads.aboveBeatEffects.has("HAccent")&&this.noteHeads.belowBeatEffects.set("HAccent",new sb(0,0,Mr.Heavy)),e.isPercussion){const s=hn.getArticulation(e);if(s&&s.techniqueSymbolPlacement!==It.Middle){const o=s.techniqueSymbolPlacement===It.Top?this.noteHeads.aboveBeatEffects:this.noteHeads.belowBeatEffects;switch(s.techniqueSymbol){case N.PictEdgeOfCymbal:o.set("PictEdgeOfCymbal",new WW(0,0));break;case N.ArticStaccatoAbove:o.set("ArticStaccatoAbove",new S_(0,0));break;case N.StringsUpBow:o.set("StringsUpBow",new gm(0,0,pn.Up));break;case N.StringsDownBow:o.set("StringsDownBow",new gm(0,0,pn.Down));break;case N.GuitarGolpe:o.set("GuitarGolpe",new HW(0,0));break}}}}}class UW extends vr{constructor(e){super(0,0),this._beat=e}doLayout(){this.width=this._beat.brushType===Di.ArpeggioUp||this._beat.brushType===Di.ArpeggioDown?10*this.scale:0}paint(e,t,i){if(this._beat.brushType===Di.ArpeggioUp||this._beat.brushType===Di.ArpeggioDown){let n=this.renderer,s=n.lineOffset,o=t+this.y+(n.getNoteY(this._beat.maxNote,Ke.Bottom)-s),c=t+this.y+n.getNoteY(this._beat.minNote,Ke.Top)+s,h=e+this.x+this.width/2,p=8*this.scale,g=new Fh(0,0,ni.Slight,1.2,!0);g.renderer=this.renderer,g.doLayout();let b=-g.height/2;if(this._beat.brushType===Di.ArpeggioUp){let v=o+p,S=c-p;g.width=Math.abs(S-v),i.beginRotate(e+this.x+5*this.scale,S,-90),g.paint(0,b,i),i.endRotate(),i.beginPath(),i.moveTo(h,c),i.lineTo(h+p/2,c-p),i.lineTo(h-p/2,c-p),i.closePath(),i.fill()}else if(this._beat.brushType===Di.ArpeggioDown){let v=o+p,S=c;g.width=Math.abs(S-v),i.beginRotate(e+this.x+5*this.scale,v,90),g.paint(0,b,i),i.endRotate(),i.beginPath(),i.moveTo(h,o),i.lineTo(h+p/2,o+p),i.lineTo(h-p/2,o+p),i.closePath(),i.fill()}}}}class $W extends Rb{get prebendNoteHeadOffset(){return this._prebends?this._prebends.x+this._prebends.noteHeadOffset:0}doLayout(){if(!this.container.beat.isRest){let e=new e2;e.renderer=this.renderer;let t=new ob(!0);t.renderer=this.renderer;const i=new ms(this.container.beat,!0);this._prebends=i,i.renderer=this.renderer;for(let n of this.container.beat.notes)if(n.isVisible){if(n.hasBend)switch(n.bendType){case Ye.PrebendBend:case Ye.Prebend:case Ye.PrebendRelease:i.addGlyph(n.displayValue-(n.bendPoints[0].value/2|0),!1);break}else if(n.beat.hasWhammyBar)switch(n.beat.whammyBarType){case ci.PrediveDive:case ci.Predive:this._prebends.addGlyph(n.displayValue-(n.beat.whammyBarPoints[0].value/2|0),!1);break}this.createAccidentalGlyph(n,e),t.addParenthesis(n)}i.isEmpty||(this.addGlyph(i),this.addGlyph(new ys(0,0,4*(this.container.beat.graceType!==ot.None?Ot.GraceScale:1)*this.scale))),this.container.beat.brushType!==Di.None&&(this.addGlyph(new UW(this.container.beat)),this.addGlyph(new ys(0,0,4*this.scale))),t.isEmpty||(this.addGlyph(t),this.addGlyph(new ys(0,0,4*(this.container.beat.graceType!==ot.None?Ot.GraceScale:1)*this.scale))),e.isEmpty||(this.accidentals=e,this.addGlyph(new ys(0,0,2*(this.container.beat.graceType!==ot.None?Ot.GraceScale:1)*this.scale)),this.addGlyph(e),this.addGlyph(new ys(0,0,2*(this.container.beat.graceType!==ot.None?Ot.GraceScale:1)*this.scale)))}super.doLayout()}createAccidentalGlyph(e,t){let i=this.renderer,n=i.accidentalHelper.applyAccidental(e),s=i.getNoteLine(e),o=this.container.beat.graceType!==ot.None;if(n!==bi.None){let c=new cc(0,i.getScoreY(s),n,o);c.renderer=this.renderer,t.addGlyph(c)}if(e.harmonicType!==Ze.None&&e.harmonicType!==Ze.Natural){let c=e.displayValue+e.harmonicPitch;n=i.accidentalHelper.applyAccidentalForValue(e.beat,c,o,!1),s=i.accidentalHelper.getNoteLineForValue(c,!1);let h=new cc(0,i.getScoreY(s),n,o);h.renderer=this.renderer,t.addGlyph(h)}}constructor(){super(),this._prebends=null,this.accidentals=null}}class yS extends br{constructor(e,t,i,n){super(e,t,n,yS.getSymbol(i)),this._digit=0,this._scale=0,this._digit=i,this._scale=n}doLayout(){this.width=this.getDigitWidth(this._digit)*this.scale*this._scale}getDigitWidth(e){switch(e){case 0:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return 14;case 1:return 10;default:return 0}}static getSymbol(e){switch(e){case 0:return N.TimeSig0;case 1:return N.TimeSig1;case 2:return N.TimeSig2;case 3:return N.TimeSig3;case 4:return N.TimeSig4;case 5:return N.TimeSig5;case 6:return N.TimeSig6;case 7:return N.TimeSig7;case 8:return N.TimeSig8;case 9:return N.TimeSig9;default:return N.None}}}class G0 extends go{constructor(e,t,i,n=1){super(e,t),this._number=0,this._scale=0,this._number=i,this._scale=n}doLayout(){let e=this._number;for(;e>0;){let t=e%10,i=new yS(0,0,t,this._scale);this.addGlyph(i),e=e/10|0}if(this.glyphs){this.glyphs.reverse();let t=0;for(let i=0,n=this.glyphs.length;i<n;i++){let s=this.glyphs[i];s.x=t,s.y=0,s.renderer=this.renderer,s.doLayout(),t+=s.width}this.width=t}}}G0.numberHeight=18;class t2 extends go{constructor(e,t,i,n,s){super(e,t),this._numerator=0,this._denominator=0,this._numerator=i,this._denominator=n,this._isCommon=s}doLayout(){if(this._isCommon&&this._numerator===2&&this._denominator===2){let e=new br(0,0,this.commonScale,N.TimeSigCutCommon);e.width=14*this.scale,this.addGlyph(e),super.doLayout()}else if(this._isCommon&&this._numerator===4&&this._denominator===4){let e=new br(0,0,this.commonScale,N.TimeSigCommon);e.width=14*this.scale,this.addGlyph(e),super.doLayout()}else{const e=G0.numberHeight*this.scale;let t=new G0(0,-e/2,this._numerator,this.numberScale),i=new G0(0,e/2,this._denominator,this.numberScale);this.addGlyph(t),this.addGlyph(i),super.doLayout();for(let n=0,s=this.glyphs.length;n<s;n++){let o=this.glyphs[n];o.x=(this.width-o.width)/2}}}}class jW extends t2{get commonScale(){return 1}get numberScale(){return 1}}class YW extends mS{constructor(e){super(0,0),this._notes=[],this._endNoteGlyph=null,this._middleNoteGlyph=null,this._beat=e}addBends(e){if(this._notes.push(e),!e.isTieOrigin)switch(e.bendType){case Ye.Bend:case Ye.PrebendRelease:case Ye.PrebendBend:{let t=this._endNoteGlyph;t||(t=new ms(e.beat,!1),t.renderer=this.renderer,this._endNoteGlyph=t,this.BendNoteHeads.push(t));let i=e.bendPoints[e.bendPoints.length-1];t.addGlyph(this.getBendNoteValue(e,i),i.value%2!==0)}break;case Ye.Release:if(!e.isTieOrigin){let t=this._endNoteGlyph;t||(t=new ms(e.beat,!1),t.renderer=this.renderer,this._endNoteGlyph=t,this.BendNoteHeads.push(t));let i=e.bendPoints[e.bendPoints.length-1];t.addGlyph(this.getBendNoteValue(e,i),i.value%2!==0)}break;case Ye.BendRelease:{let t=this._middleNoteGlyph;t||(t=new ms(e.beat,!1),this._middleNoteGlyph=t,t.renderer=this.renderer,this.BendNoteHeads.push(t));let i=e.bendPoints[1];t.addGlyph(this.getBendNoteValue(e,e.bendPoints[1]),i.value%2!==0);let n=this._endNoteGlyph;n||(n=new ms(e.beat,!1),n.renderer=this.renderer,this._endNoteGlyph=n,this.BendNoteHeads.push(n));let s=e.bendPoints[e.bendPoints.length-1];n.addGlyph(this.getBendNoteValue(e,s),s.value%2!==0)}break}}paint(e,t,i){let n=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._beat.voice.bar),s=e+n.x+n.getBeatX(this._beat,Vt.MiddleNotes),o=e+n.x;this._beat.isLastOfVoice?o+=n.postBeatGlyphsStart:o+=n.getBeatX(this._beat.nextBeat,Vt.PreNotes),o-=8*this.scale;let c=(s+o)/2;this._middleNoteGlyph&&(this._middleNoteGlyph.x=c-this._middleNoteGlyph.noteHeadOffset,this._middleNoteGlyph.y=t+n.y,this._middleNoteGlyph.paint(0,0,i)),this._endNoteGlyph&&(this._endNoteGlyph.x=o-this._endNoteGlyph.noteHeadOffset,this._endNoteGlyph.y=t+n.y,this._endNoteGlyph.paint(0,0,i)),this._notes.sort((g,b)=>b.displayValue-g.displayValue);let h=this._beat.graceType===ot.BendGrace?this._beat.nextBeat:this._beat,p=this._notes.length===1?this.getTieDirection(h,n):Te.Up;for(let g=0;g<this._notes.length;g++){let b=this._notes[g];g>0&&g>=(this._notes.length/2|0)&&(p=Te.Down);let v=t+n.y+n.getNoteY(b,Ke.Top),S=Ot.NoteHeadHeight*this.scale*Ot.GraceScale*.5;p===Te.Down&&(v+=Ot.NoteHeadHeight*this.scale);let B=b.bendStyle===Si.Gradual?"grad.":"";if(b.isTieOrigin){let T=b.tieDestination,C=T?this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,T.beat.voice.bar):null;if(!C||C.staff!==n.staff){let L=e+n.x+n.width,O=b.tieDestination.realValue;n.accidentalHelper.applyAccidentalForValue(b.beat,O,!1,!0);let I=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(O,!1));b.bendType===Ye.Hold||b.bendType===Ye.Prebend?tn.paintTie(i,this.scale,s,v,L,I,p===Te.Down,22,4):this.drawBendSlur(i,s,v,L,I,p===Te.Down,this.scale,B)}else{let L=e+C.x+C.getBeatX(T.beat,Vt.MiddleNotes),O=t+C.y+C.getNoteY(T,Ke.Top);p===Te.Down&&(O+=Ot.NoteHeadHeight*this.scale),b.bendType===Ye.Hold||b.bendType===Ye.Prebend?tn.paintTie(i,this.scale,s,v,L,O,p===Te.Down,22,4):this.drawBendSlur(i,s,v,L,O,p===Te.Down,this.scale,B)}switch(b.bendType){case Ye.Prebend:case Ye.PrebendBend:case Ye.PrebendRelease:let L=e+n.x+n.getBeatX(b.beat,Vt.PreNotes);L+=n.getPreNotesGlyphForBeat(b.beat).prebendNoteHeadOffset;let O=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(b.displayValue-(b.bendPoints[0].value/2|0),!1))+S;this.drawBendSlur(i,L,O,s,v,p===Te.Down,this.scale);break}}else{p===Te.Up&&(S=-S);let T=0,C=0;switch(b.bendType){case Ye.Bend:T=this.getBendNoteValue(b,b.bendPoints[b.bendPoints.length-1]),C=this._endNoteGlyph.getNoteValueY(T)+S,this.drawBendSlur(i,s,v,o,C,p===Te.Down,this.scale,B);break;case Ye.BendRelease:let L=this.getBendNoteValue(b,b.bendPoints[1]),O=this._middleNoteGlyph.getNoteValueY(L)+S;this.drawBendSlur(i,s,v,c,O,p===Te.Down,this.scale,B),T=this.getBendNoteValue(b,b.bendPoints[b.bendPoints.length-1]),C=this._endNoteGlyph.getNoteValueY(T)+S,this.drawBendSlur(i,c,O,o,C,p===Te.Down,this.scale,B);break;case Ye.Release:this.BendNoteHeads.length>0&&(T=this.getBendNoteValue(b,b.bendPoints[b.bendPoints.length-1]),C=this.BendNoteHeads[0].getNoteValueY(T)+S,this.drawBendSlur(i,s,v,o,C,p===Te.Down,this.scale,B));break;case Ye.Prebend:case Ye.PrebendBend:case Ye.PrebendRelease:let I=e+n.x+n.getBeatX(b.beat,Vt.PreNotes);I+=n.getPreNotesGlyphForBeat(b.beat).prebendNoteHeadOffset;let V=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(b.displayValue-(b.bendPoints[0].value/2|0),!1))+S;this.drawBendSlur(i,I,V,s,v,p===Te.Down,this.scale),this.BendNoteHeads.length>0&&(T=this.getBendNoteValue(b,b.bendPoints[b.bendPoints.length-1]),C=this.BendNoteHeads[0].getNoteValueY(T)+S,this.drawBendSlur(i,s,v,o,C,p===Te.Down,this.scale,B));break}}}}getBendNoteValue(e,t){return e.displayValueWithoutBend+(t.value/2|0)}}class ox extends tn{constructor(e,t,i=!1){super(e,t,i)}doLayout(){super.doLayout()}getBeamDirection(e,t){if(e.isRest)return Te.Up;switch(t.getBeatDirection(e)){case Te.Up:return Te.Down;default:return Te.Up}}getStartY(){if(this.startBeat.isRest)return this.startNoteRenderer.getScoreY(9);switch(this.tieDirection){case Te.Up:return this.startNoteRenderer.getNoteY(this.startBeat.maxNote,Ke.Top);default:return this.startNoteRenderer.getNoteY(this.startBeat.minNote,Ke.Bottom)}}getEndY(){const e=this.endNoteRenderer;if(this.endBeat.isRest)switch(this.tieDirection){case Te.Up:return e.getScoreY(9);default:return e.getScoreY(0)}const t=this.startNoteRenderer.getBeatDirection(this.startBeat),i=e.getBeatDirection(this.endBeat);if(t!==i&&this.startBeat.graceType===ot.None)if(i===this.tieDirection)switch(this.tieDirection){case Te.Up:return e.getNoteY(this.endBeat.maxNote,Ke.TopWithStem);default:return e.getNoteY(this.endBeat.minNote,Ke.BottomWithStem)}else switch(this.tieDirection){case Te.Up:return e.getNoteY(this.endBeat.maxNote,Ke.BottomWithStem);default:return e.getNoteY(this.endBeat.minNote,Ke.TopWithStem)}switch(this.tieDirection){case Te.Up:return e.getNoteY(this.endBeat.maxNote,Ke.Top);default:return e.getNoteY(this.endBeat.minNote,Ke.Bottom)}}getStartX(){return this.startNoteRenderer.getBeatX(this.startBeat,Vt.MiddleNotes)}getEndX(){const e=this.endNoteRenderer.getBeatDirection(this.endBeat);return this.endNoteRenderer.getBeatX(this.endBeat,this.endBeat.duration>Y.Whole&&e===this.tieDirection?Vt.Stem:Vt.MiddleNotes)}}class qW extends vr{constructor(e,t,i,n){super(0,0),this._outType=t,this._inType=e,this._startNote=i,this._parent=n}doLayout(){this.width=0}paint(e,t,i){this.paintSlideIn(e,t,i),this.drawSlideOut(e,t,i)}paintSlideIn(e,t,i){let n=this.renderer,s=12*this.scale,o=e+n.x+n.getNoteX(this._startNote,yr.Left)-2*this.scale,c=t+n.y+n.getNoteY(this._startNote,Ke.Center),h=o-s,p=t+n.y;switch(this._inType){case rn.IntoFromBelow:p+=n.getNoteY(this._startNote,Ke.Bottom);break;case rn.IntoFromAbove:p+=n.getNoteY(this._startNote,Ke.Top);break;default:return}let g=this.getAccidentalsWidth(n,this._startNote.beat);h-=g,o-=g,this.paintSlideLine(i,!1,h,o,p,c)}getAccidentalsWidth(e,t){let i=e.getPreNotesGlyphForBeat(t);return i&&i.accidentals?i.accidentals.width:0}drawSlideOut(e,t,i){let n=this.renderer,s=12*this.scale,o=1*this.scale,c=2*this.scale,h=0,p=0,g=0,b=0,v=!1;switch(this._outType){case Et.Shift:case Et.Legato:if(h=e+n.x+n.getBeatX(this._startNote.beat,Vt.PostNotes),p=t+n.y+n.getNoteY(this._startNote,Ke.Center),this._startNote.slideTarget){let S=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._startNote.slideTarget.beat.voice.bar);!S||S.staff!==n.staff?(g=e+n.x+n.width,b=p):(g=e+S.x+S.getBeatX(this._startNote.slideTarget.beat,Vt.PreNotes)-o,b=t+S.y+S.getNoteY(this._startNote.slideTarget,Ke.Center)),this._startNote.slideTarget.realValue>this._startNote.realValue?(p+=c,b-=c):(p-=c,b+=c)}else g=e+n.x+this._parent.x,b=p;break;case Et.OutUp:h=e+n.x+n.getNoteX(this._startNote,yr.Right),p=t+n.y+n.getNoteY(this._startNote,Ke.Center),g=h+s,b=t+n.y+n.getNoteY(this._startNote,Ke.Top);break;case Et.OutDown:h=e+n.x+n.getNoteX(this._startNote,yr.Right),p=t+n.y+n.getNoteY(this._startNote,Ke.Center),g=h+s,b=t+n.y+n.getNoteY(this._startNote,Ke.Bottom);break;case Et.PickSlideUp:h=e+n.x+n.getNoteX(this._startNote,yr.Right),p=t+n.y+n.getNoteY(this._startNote,Ke.Center),b=t+n.y+n.getNoteY(this._startNote,Ke.Top),g=e+n.x+n.width,this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice===this._startNote.beat.voice&&(g=e+n.x+n.getBeatX(this._startNote.beat.nextBeat,Vt.PreNotes)),v=!0;break;case Et.PickSlideDown:h=e+n.x+n.getNoteX(this._startNote,yr.Right),p=t+n.y+n.getNoteY(this._startNote,Ke.Center),b=t+n.y+n.getNoteY(this._startNote,Ke.Bottom),g=e+n.x+n.width,this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice===this._startNote.beat.voice&&(g=e+n.x+n.getBeatX(this._startNote.beat.nextBeat,Vt.PreNotes)),v=!0;break;default:return}this.paintSlideLine(i,v,h,g,p,b)}paintSlideLine(e,t,i,n,s,o){if(t){let c=new Fh(0,0,ni.Slight,1.2);c.renderer=this.renderer,c.doLayout(),s-=c.height/2,o-=c.height/2;let h=n-i,p=o-s,g=Math.sqrt(Math.pow(p,2)+Math.pow(h,2));c.width=h;let b=Math.asin(p/g)*(180/Math.PI);e.beginRotate(i,s,b),c.paint(0,0,e),e.endRotate()}else e.beginPath(),e.moveTo(i,s),e.lineTo(n,o),e.stroke()}}class I0 extends ox{constructor(e,t,i=!1){super(e.beat,t.beat,i),this._startNote=e,this._endNote=t}getTieHeight(e,t,i,n){return Math.log2(i-e+1)*this.renderer.settings.notation.slurHeight}getStartY(){if(this.isStartCentered())switch(this.tieDirection){case Te.Up:return this.startNoteRenderer.getNoteY(this._startNote,Ke.Top);default:return this.startNoteRenderer.getNoteY(this._startNote,Ke.Bottom)}return this.startNoteRenderer.getNoteY(this._startNote,Ke.Center)}getEndY(){if(this.isEndCentered())if(this.isEndOnStem())switch(this.tieDirection){case Te.Up:return this.endNoteRenderer.getNoteY(this._endNote,Ke.TopWithStem);default:return this.endNoteRenderer.getNoteY(this._endNote,Ke.BottomWithStem)}else switch(this.tieDirection){case Te.Up:return this.endNoteRenderer.getNoteY(this._endNote,Ke.Top);default:return this.endNoteRenderer.getNoteY(this._endNote,Ke.Bottom)}else return this.endNoteRenderer.getNoteY(this._endNote,Ke.Center)}isStartCentered(){return this._startNote===this._startNote.beat.maxNote&&this.tieDirection===Te.Up||this._startNote===this._startNote.beat.minNote&&this.tieDirection===Te.Down}isEndCentered(){return this._startNote.beat.graceType===ot.None&&(this._endNote===this._endNote.beat.maxNote&&this.tieDirection===Te.Up||this._endNote===this._endNote.beat.minNote&&this.tieDirection===Te.Down)}isEndOnStem(){const e=this.endNoteRenderer,t=this.startNoteRenderer.getBeatDirection(this.startBeat),i=e.getBeatDirection(this.endBeat);return t!==i&&this.startBeat.graceType===ot.None}getStartX(){return this.isStartCentered()?this.startNoteRenderer.getBeatX(this._startNote.beat,Vt.MiddleNotes):this.startNoteRenderer.getNoteX(this._startNote,yr.Right)}getEndX(){return this.isEndCentered()?this.isEndOnStem()?this.endNoteRenderer.getBeatX(this._endNote.beat,Vt.Stem):this.endNoteRenderer.getNoteX(this._endNote,yr.Center):this.endNoteRenderer.getBeatX(this._endNote.beat,Vt.PreNotes)}}class k_ extends tn{constructor(e,t,i=!1){super(e?e.beat:null,t?t.beat:null,i),this.startNote=e,this.endNote=t}shouldDrawBendSlur(){return this.renderer.settings.notation.extendBendArrowsOnTiedNotes&&!!this.startNote.bendOrigin&&this.startNote.isTieOrigin}doLayout(){super.doLayout()}getBeamDirection(e,t){switch(t.getBeatDirection(e)){case Te.Up:return Te.Down;default:return Te.Up}}getStartY(){if(this.startBeat.isRest)return this.startNoteRenderer.getScoreY(9);switch(this.tieDirection){case Te.Up:return this.startNoteRenderer.getNoteY(this.startNote,Ke.Top);default:return this.startNoteRenderer.getNoteY(this.startNote,Ke.Bottom)}}getEndY(){const e=this.endNoteRenderer;if(this.endBeat.isRest)switch(this.tieDirection){case Te.Up:return e.getScoreY(9);default:return e.getScoreY(0)}switch(this.tieDirection){case Te.Up:return e.getNoteY(this.endNote,Ke.Top);default:return e.getNoteY(this.endNote,Ke.Bottom)}}getStartX(){return this.startNoteRenderer.getBeatX(this.startNote.beat,Vt.PostNotes)}getEndX(){return this.endNoteRenderer.getBeatX(this.endNote.beat,Vt.PreNotes)}}class XW extends ho{constructor(e,t){super(e,t),this._bend=null,this._effectSlur=null,this._effectEndSlur=null}doLayout(){if(this._effectSlur=null,this._effectEndSlur=null,super.doLayout(),this.beat.isLegatoOrigin){if(!this.beat.previousBeat||!this.beat.previousBeat.isLegatoOrigin){let e=this.beat.nextBeat;for(;e.nextBeat&&e.nextBeat.isLegatoDestination;)e=e.nextBeat;this.addTie(new ox(this.beat,e,!1))}}else if(this.beat.isLegatoDestination&&!this.beat.isLegatoOrigin){let e=this.beat.previousBeat;for(;e.previousBeat&&e.previousBeat.isLegatoOrigin;)e=e.previousBeat;this.addTie(new ox(e,this.beat,!0))}this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())}createTies(e){if(e.isVisible){if(e.isTieOrigin&&!e.hasBend&&!e.beat.hasWhammyBar&&e.beat.graceType!==ot.BendGrace&&e.tieDestination&&e.tieDestination.isVisible){let t=new k_(e,e.tieDestination,!1);this.addTie(t)}if(e.isTieDestination&&!e.tieOrigin.hasBend&&!e.beat.hasWhammyBar){let t=new k_(e.tieOrigin,e,!0);this.addTie(t)}if(e.slideInType!==rn.None||e.slideOutType!==Et.None){let t=new qW(e.slideInType,e.slideOutType,e,this);this.addTie(t)}if(e.isSlurOrigin&&e.slurDestination&&e.slurDestination.isVisible){let t=new I0(e,e.slurDestination,!1);this.addTie(t)}if(e.isSlurDestination){let t=new I0(e.slurOrigin,e,!0);this.addTie(t)}if(!this._effectSlur&&e.isEffectSlurOrigin&&e.effectSlurDestination){const t=new I0(e,e.effectSlurDestination,!1);this._effectSlur=t,this.addTie(t)}if(!this._effectEndSlur&&e.beat.isEffectSlurDestination&&e.beat.effectSlurOrigin){let t=this.onNotes.beamingHelper.direction,i=t===Te.Up?e.beat.effectSlurOrigin.minNote:e.beat.effectSlurOrigin.maxNote,n=t===Te.Up?e.beat.minNote:e.beat.maxNote;const s=new I0(i,n,!0);this._effectEndSlur=s,this.addTie(s)}if(e.hasBend){if(!this._bend){const t=new YW(e.beat);this._bend=t,t.renderer=this.renderer,this.addTie(t)}this._bend.addBends(e)}}}}class Ia extends or{constructor(e,t){super(e,t),this.simpleWhammyOverflow=0,this._firstLineY=0,this._startSpacing=!1,this.accidentalHelper=new Br(this)}getBeatDirection(e){return this.helpers.getBeamingHelperForBeat(e).direction}get lineOffset(){return(or.LineSpacing+1)*this.scale}updateSizes(){let e=this.resources,t=e.tablatureFont.size/2+e.tablatureFont.size*.2;this.topPadding=t*this.scale,this.bottomPadding=t*this.scale,this.height=this.lineOffset*4+this.topPadding+this.bottomPadding,this.updateFirstLineY(),super.updateSizes()}updateFirstLineY(){let e=this.lineOffset*4,t=(this.bar.staff.standardNotationLineCount-1)*this.lineOffset;this._firstLineY=(e-t)/2}doLayout(){if(this.updateFirstLineY(),super.doLayout(),!this.bar.isEmpty&&this.accidentalHelper.maxLineBeat){let e=this.getScoreY(-2),t=this.getScoreY(6),i=this.simpleWhammyOverflow;this.registerOverflowTop(i);let n=this.getScoreY(this.accidentalHelper.maxLine),s=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.maxLineBeat);s.direction===Te.Up&&(n-=this.getStemSize(s),n-=s.fingeringCount*this.resources.graceFont.size,s.hasTuplet&&(n-=this.resources.effectFont.size*2)),s.hasTuplet&&(n-=this.resources.effectFont.size*1.5),n<e&&this.registerOverflowTop(Math.abs(n)+i);let o=this.getScoreY(this.accidentalHelper.minLine),c=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.minLineBeat);c.direction===Te.Down&&(o+=this.getStemSize(c),o+=c.fingeringCount*this.resources.graceFont.size),o>t&&this.registerOverflowBottom(Math.abs(o)-t)}}paint(e,t,i){super.paint(e,t,i),this.paintBeams(e,t,i),this.paintTuplets(e,t,i)}paintTuplets(e,t,i){for(let n of this.bar.voices)if(this.hasVoiceContainer(n)){let s=this.getVoiceContainer(n);for(let o of s.tupletGroups)this.paintTupletHelper(e+this.beatGlyphsStart,t,i,o)}}paintBeams(e,t,i){for(let n=0,s=this.helpers.beamHelpers.length;n<s;n++){let o=this.helpers.beamHelpers[n];for(let c=0,h=o.length;c<h;c++){let p=o[c];this.paintBeamHelper(e+this.beatGlyphsStart,t,i,p)}}}paintBeamHelper(e,t,i,n){i.color=n.voice.index===0?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.isRestBeamHelper||(n.beats.length===1?this.paintFlag(e,t,i,n):this.paintBar(e,t,i,n))}paintTupletHelper(e,t,i,n){let s=this.resources,o=i.textAlign,c=i.textBaseline;i.color=n.voice.index===0?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,i.textAlign=at.Center,i.textBaseline=It.Middle;let h,p=n.beats[0].tupletNumerator,g=n.beats[0].tupletDenominator;p===2&&g===3?h="2":p===3&&g===2?h="3":p===4&&g===6?h="4":p===5&&g===4?h="5":p===6&&g===4?h="6":p===7&&g===4?h="7":p===9&&g===8?h="9":p===10&&g===8?h="10":p===11&&g===8?h="11":p===12&&g===8?h="12":p===13&&g===8?h="13":h=p+":"+g;let b=10*this.scale,v=5*this.scale;if(n.beats.length===1||!n.isFull)for(let S=0,B=n.beats.length;S<B;S++){let T=n.beats[S],C=this.helpers.beamHelperLookup[n.voice.index].get(T.index);if(!C)continue;let L=C.direction,O=C.getBeatLineX(T),I=this.calculateBeamYWithDirection(C,O,L);L===Te.Down&&(b*=-1,v*=-1),i.font=s.effectFont,i.fillText(h,e+this.x+O,t+this.y+I-b-v)}else{let S=n.beats[0],B=n.beats[n.beats.length-1],T=null,C=null;for(let Z=0;Z<n.beats.length;Z++)if(!n.beats[Z].isRest){T=n.beats[Z];break}for(let Z=n.beats.length-1;Z>=0;Z--)if(!n.beats[Z].isRest){C=n.beats[Z];break}let L=!1;T||(T=S,L=!0),C||(C=B);let O=this.helpers.beamHelperLookup[n.voice.index].get(S.index),I=this.helpers.beamHelperLookup[n.voice.index].get(B.index),V=O.getBeatLineX(S),P=I.getBeatLineX(B),G=this.helpers.beamHelperLookup[n.voice.index].get(T.index),W=this.helpers.beamHelperLookup[n.voice.index].get(C.index),J=O.direction,re=this.calculateBeamYWithDirection(G,V,J),j=this.calculateBeamYWithDirection(W,P,J);L&&(re=Math.max(re,j),j=re),i.font=s.effectFont;let oe=i.measureText(h),ge=3*this.scale,he=(V+P)/2,ve=he-oe/2-ge,Be=he+oe/2+ge,te=(j-re)/(P-V),ue=re-te*V,ne=te*ve+ue,Se=te*he+ue,z=te*Be+ue;J===Te.Down&&(b*=-1,v*=-1),i.beginPath(),i.moveTo(e+this.x+V,t+this.y+re-b|0),i.lineTo(e+this.x+V,t+this.y+re-b-v|0),i.lineTo(e+this.x+ve,t+this.y+ne-b-v|0),i.stroke(),i.beginPath(),i.moveTo(e+this.x+Be,t+this.y+z-b-v|0),i.lineTo(e+this.x+P,t+this.y+j-b-v|0),i.lineTo(e+this.x+P,t+this.y+j-b|0),i.stroke(),i.fillText(h,e+this.x+he,t+this.y+Se-b-v)}i.textAlign=o,i.textBaseline=c}getStemSize(e){let t=e.beats.length===1?this.getFlagStemSize(e.shortestDuration):this.getBarStemSize(e.shortestDuration);return e.isGrace&&(t=t*Ot.GraceScale),t}getBarStemSize(e){let t=0;switch(e){case Y.QuadrupleWhole:case Y.Half:case Y.Quarter:case Y.Eighth:case Y.Sixteenth:t=6;break;case Y.ThirtySecond:t=8;break;case Y.SixtyFourth:t=9;break;case Y.OneHundredTwentyEighth:t=9;break;case Y.TwoHundredFiftySixth:t=10;break;default:t=0;break}return this.getScoreHeight(t)}getFlagStemSize(e){let t=0;switch(e){case Y.QuadrupleWhole:case Y.Half:case Y.Quarter:case Y.Eighth:case Y.Sixteenth:case Y.ThirtySecond:case Y.SixtyFourth:case Y.OneHundredTwentyEighth:case Y.TwoHundredFiftySixth:t=6;break;default:t=0;break}return this.getScoreHeight(t)}get middleYPosition(){return this.getScoreY(this.bar.staff.standardNotationLineCount-1)}getNoteY(e,t){let i=super.getNoteY(e,t);if(isNaN(i)){const n=Br.computeLineWithoutAccidentals(this.bar,e);i=this.getScoreY(n)}return i}calculateBeamY(e,t){return this.calculateBeamYWithDirection(e,t,e.direction)}applyLayoutingInfo(){const e=super.applyLayoutingInfo();if(e&&this.bar.isMultiVoice){let t=this.getScoreY(-2),i=this.getScoreY(6),n=this.helpers.collisionHelper.getBeatMinMaxY();n[0]<t&&this.registerOverflowTop(Math.abs(n[0])),n[1]>i&&this.registerOverflowBottom(Math.abs(n[1])-i)}return e}calculateBeamYWithDirection(e,t,i){let n=this.getStemSize(e);if(!e.drawingInfos.has(i)){let s=new gW;e.drawingInfos.set(i,s);const o=e.beats[0],c=e.beats[e.beats.length-1];let h=e.isRestBeamHelper;s.startBeat=o,s.startX=e.getBeatLineX(o),h?s.startY=i===Te.Up?this.getScoreY(e.minRestLine):this.getScoreY(e.maxRestLine):s.startY=i===Te.Up?this.getScoreY(this.accidentalHelper.getMinLine(o))-n:this.getScoreY(this.accidentalHelper.getMaxLine(o))+n,s.endBeat=c,s.endX=e.getBeatLineX(c),h?s.endY=i===Te.Up?this.getScoreY(e.minRestLine):this.getScoreY(e.maxRestLine):s.endY=i===Te.Up?this.getScoreY(this.accidentalHelper.getMinLine(c))-n:this.getScoreY(this.accidentalHelper.getMaxLine(c))+n;let p=10*this.scale;if(i===Te.Down&&s.startY>s.endY&&s.startY-s.endY>p&&(s.endY=s.startY-p),i===Te.Down&&s.endY>s.startY&&s.endY-s.startY>p&&(s.startY=s.endY-p),i===Te.Up&&s.startY<s.endY&&s.endY-s.startY>p&&(s.endY=s.startY+p),i===Te.Up&&s.endY<s.startY&&s.startY-s.endY>p&&(s.startY=s.endY+p),e.beats.length>1){if(i===Te.Up){let g=this.getScoreY(this.accidentalHelper.getMinLine(e.beatOfHighestNote))-n;const v=s.calcY(e.getBeatLineX(e.beatOfHighestNote))-g;v>0&&(s.startY-=v,s.endY-=v)}else{let g=this.getScoreY(this.accidentalHelper.getMaxLine(e.beatOfLowestNote))+n;const b=s.calcY(e.getBeatLineX(e.beatOfLowestNote)),v=g-b;v>0&&(s.startY+=v,s.endY+=v)}if(e.minRestLine!==null||e.maxRestLine!==null){const g=Fi.getIndex(e.shortestDuration)-2;let b=e.isGrace?Ot.GraceScale:1,v=g*(or.BeamSpacing+or.BeamThickness)*this.scale*b;if(v+=or.BeamSpacing,i===Te.Up&&e.minRestLine!==null){let S=this.getScoreY(e.minRestLine)-v;const T=s.calcY(e.getBeatLineX(e.beatOfMinRestLine))-S;T>0&&(s.startY-=T,s.endY-=T)}else if(i===Te.Down&&e.maxRestLine!==null){let S=this.getScoreY(e.maxRestLine)+v;const B=s.calcY(e.getBeatLineX(e.beatOfMaxRestLine)),T=S-B;T>0&&(s.startY+=T,s.endY+=T)}}}}return e.drawingInfos.get(i).calcY(t)}paintBar(e,t,i,n){for(let s=0,o=n.beats.length;s<o;s++){let c=n.beats[s],p=c.graceType!==ot.None?Ot.GraceScale:1,g=n.getBeatLineX(c),b=n.direction,v=t+this.y;v+=b===Te.Up?this.getScoreY(this.accidentalHelper.getMaxLine(c)):this.getScoreY(this.accidentalHelper.getMinLine(c));let S=t+this.y;S+=this.calculateBeamY(n,g),i.lineWidth=or.StemWidth*this.scale,i.beginPath(),i.moveTo(e+this.x+g,v),i.lineTo(e+this.x+g,S),i.stroke(),i.lineWidth=this.scale;let B=S;b===Te.Down?B+=i.font.size*2:s!==0&&(B-=i.font.size*1.5),this.paintFingering(i,c,e+this.x+g,b,B);let T=6*this.scale*p,C=(or.BeamSpacing+or.BeamThickness)*this.scale*p,L=or.BeamThickness*this.scale*p,O=Fi.getIndex(c.duration)-2,I=t+this.y;b===Te.Down&&(C=-C,L=-L);for(let V=0;V<O;V++){let P=0,G=0,W=0,J=0,re=I+V*C;if(s<n.beats.length-1){if(Ds.isFullBarJoin(c,n.beats[s+1],V))P=g,G=n.getBeatLineX(n.beats[s+1]);else if(s===0||!Ds.isFullBarJoin(n.beats[s-1],c,V))P=g,G=P+T;else continue;W=re+this.calculateBeamY(n,P),J=re+this.calculateBeamY(n,G),Ia.paintSingleBar(i,e+this.x+P,W,e+this.x+G,J,L)}else s>0&&!Ds.isFullBarJoin(c,n.beats[s-1],V)&&(P=g-T,G=g,W=re+this.calculateBeamY(n,P),J=re+this.calculateBeamY(n,G),Ia.paintSingleBar(i,e+this.x+P,W,e+this.x+G,J,L))}}}static paintSingleBar(e,t,i,n,s,o){e.beginPath(),e.moveTo(t,i),e.lineTo(n,s),e.lineTo(n,s+o),e.lineTo(t,i+o),e.closePath(),e.fill()}paintFlag(e,t,i,n){let s=n.beats[0];if(s.graceType===ot.BendGrace||s.graceType!==ot.None&&this.settings.notation.notationMode===Gr.SongBook)return;let o=s.graceType!==ot.None,c=o?Ot.GraceScale:1,h=this.getFlagStemSize(n.shortestDuration),p=n.getBeatLineX(s),g=n.direction,b=this.getScoreY(this.accidentalHelper.getMinLine(s)),v=this.getScoreY(this.accidentalHelper.getMaxLine(s)),S=0,B=0;if(g===Te.Down?(v+=h*c,S=v,B=t+this.y+v):(b-=h*c,S=b,B=t+this.y+b),this.paintFingering(i,s,e+this.x+p,g,B),!!n.hasLine){if(i.lineWidth=or.StemWidth*this.scale,i.beginPath(),i.moveTo(e+this.x+p,t+this.y+b),i.lineTo(e+this.x+p,t+this.y+v),i.stroke(),i.lineWidth=this.scale,s.graceType===ot.BeforeBeat){let T=15*this.scale,C=12*this.scale;i.beginPath(),g===Te.Down?(i.moveTo(e+this.x+p-C/2,t+this.y+v-T),i.lineTo(e+this.x+p+C/2,t+this.y+v)):(i.moveTo(e+this.x+p-C/2,t+this.y+b+T),i.lineTo(e+this.x+p+C/2,t+this.y+b)),i.stroke()}if(n.hasFlag){let T=new Zf(p-this.scale/2,S,s.duration,g,o);T.renderer=this,T.doLayout(),T.paint(e+this.x,t+this.y,i)}}}paintFingering(e,t,i,n,s){let o=this.settings;if(o.notation.fingeringMode!==po.ScoreDefault&&o.notation.fingeringMode!==po.ScoreForcePiano)return;n===Te.Up?i-=10*this.scale:i+=3*this.scale;let c=t.notes.slice(0);c.sort((h,p)=>h.realValue-p.realValue);for(let h=0;h<c.length;h++){let p=c[h],g=null;p.leftHandFinger!==kt.Unknown?g=Fi.fingerToString(o,t,p.leftHandFinger,!0):p.rightHandFinger!==kt.Unknown&&(g=Fi.fingerToString(o,t,p.rightHandFinger,!1)),g&&(e.fillText(g,i,s),s-=e.font.size|0)}}createPreBeatGlyphs(){if(super.createPreBeatGlyphs(),this.bar.masterBar.isRepeatStart&&this.addPreBeatGlyph(new JC(0,0,1.5,3)),this.isFirstOfLine||this.bar.clef!==this.bar.previousBar.clef||this.bar.clefOttava!==this.bar.previousBar.clefOttava){let e=0;switch(this.bar.clef){case _t.Neutral:e=this.bar.staff.standardNotationLineCount-1;break;case _t.F4:e=2;break;case _t.C3:e=4;break;case _t.C4:e=2;break;case _t.G2:e=6;break}this.createStartSpacing(),this.addPreBeatGlyph(new gS(0,this.getScoreY(e)+.5*or.StaffLineThickness,this.bar.clef,this.bar.clefOttava))}(this.index===0&&this.bar.masterBar.keySignature!==Wr.C||this.bar.previousBar&&this.bar.masterBar.keySignature!==this.bar.previousBar.masterBar.keySignature)&&(this.createStartSpacing(),this.createKeySignatureGlyphs()),(!this.bar.previousBar||this.bar.previousBar&&this.bar.masterBar.timeSignatureNumerator!==this.bar.previousBar.masterBar.timeSignatureNumerator||this.bar.previousBar&&this.bar.masterBar.timeSignatureDenominator!==this.bar.previousBar.masterBar.timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new qC(0,this.getScoreHeight(-.5),this.bar.index+1))}createBeatGlyphs(){for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];this.hasVoiceContainer(t)&&this.createVoiceGlyphs(t)}}createPostBeatGlyphs(){super.createPostBeatGlyphs(),this.bar.masterBar.isRepeatEnd?(this.addPostBeatGlyph(new KC(this.x,0)),this.bar.masterBar.repeatCount>2&&this.addPostBeatGlyph(new QC(0,this.getScoreHeight(-.5),this.bar.masterBar.repeatCount))):this.addPostBeatGlyph(new XC(0,0))}createStartSpacing(){this._startSpacing||(this.addPreBeatGlyph(new ys(0,0,2*this.scale)),this._startSpacing=!0)}createKeySignatureGlyphs(){let e=0,t=this.bar.masterBar.keySignature,i=this.bar.previousBar?this.bar.previousBar.masterBar.keySignature:0;switch(this.bar.clef){case _t.Neutral:e=0;break;case _t.G2:e=1;break;case _t.F4:e=3;break;case _t.C3:e=2;break;case _t.C4:e=0;break}let n=new Map,s=[];if(Fi.keySignatureIsSharp(t))for(let h=0;h<Math.abs(t);h++){let p=Ia.SharpKsSteps[h]+e;s.push(new cc(0,this.getScoreY(p),bi.Sharp,!1)),n.set(p,!0)}else for(let h=0;h<Math.abs(t);h++){let p=Ia.FlatKsSteps[h]+e;s.push(new cc(0,this.getScoreY(p),bi.Flat,!1)),n.set(p,!0)}let o=Math.abs(i),c=Fi.keySignatureIsSharp(i)?Ia.SharpKsSteps:Ia.FlatKsSteps;for(let h=0;h<o;h++){let p=c[h]+e;n.has(p)||this.addPreBeatGlyph(new cc(0,this.getScoreY(c[h]+e),bi.Natural,!1))}for(let h of s)this.addPreBeatGlyph(h)}createTimeSignatureGlyphs(){this.addPreBeatGlyph(new ys(0,0,5*this.scale));const e=this.bar.staff.standardNotationLineCount-1;this.addPreBeatGlyph(new jW(0,this.getScoreY(e),this.bar.masterBar.timeSignatureNumerator,this.bar.masterBar.timeSignatureDenominator,this.bar.masterBar.timeSignatureCommon))}createVoiceGlyphs(e){for(let t=0,i=e.beats.length;t<i;t++){let n=e.beats[t],s=new XW(n,this.getVoiceContainer(e));s.preNotes=new $W,s.onNotes=new GW,this.addBeatGlyph(s)}}getNoteLine(e){return this.accidentalHelper.getNoteLine(e)}getScoreY(e){return this._firstLineY+this.lineOffset+this.getScoreHeight(e)}getScoreHeight(e){return this.lineOffset/2*e}paintBackground(e,t,i){super.paintBackground(e,t,i);let n=this.resources;i.color=n.staffLineColor;for(let s=0;s<this.bar.staff.standardNotationLineCount;s++){const o=t+this.y+this.getScoreY(s*2);i.fillRect(e+this.x,o|0,this.width,this.scale*or.StaffLineThickness)}i.color=n.mainGlyphColor,this.paintSimileMark(e,t,i)}completeBeamingHelper(e){if(this.bar.isMultiVoice&&e.highestNoteInHelper&&e.lowestNoteInHelper){let t=this.getNoteY(e.highestNoteInHelper,Ke.Center),i=this.getNoteY(e.lowestNoteInHelper,Ke.Center),n=this.getStemSize(e);e.hasTuplet&&(n+=this.resources.effectFont.size*2),e.direction==Te.Up?t-=n:i+=n;for(const s of e.beats)this.helpers.collisionHelper.reserveBeatSlot(s,t,i)}}}Ia.StaffId="score";Ia.SharpKsSteps=[-1,2,-2,1,4,0,3];Ia.FlatKsSteps=[3,0,4,1,5,2,6];class __ extends hS{get staffId(){return Ia.StaffId}create(e,t){return new Ia(e,t)}constructor(){super()}}class KW extends vr{constructor(e,t,i,n){super(0,0),this._inType=e,this._outType=t,this._startNote=i,this._parent=n}doLayout(){this.width=0}paint(e,t,i){this.paintSlideIn(e,t,i),this.paintSlideOut(e,t,i)}paintSlideIn(e,t,i){let n=this.renderer,s=12*this.scale,o=3*this.scale,c=0,h=0,p=0,g=0;switch(this._inType){case rn.IntoFromBelow:p=e+n.x+n.getNoteX(this._startNote,yr.Left),g=t+n.y+n.getNoteY(this._startNote,Ke.Center),c=p-s,h=t+n.y+n.getNoteY(this._startNote,Ke.Center)+o;break;case rn.IntoFromAbove:p=e+n.x+n.getNoteX(this._startNote,yr.Left),g=t+n.y+n.getNoteY(this._startNote,Ke.Center),c=p-s,h=t+n.y+n.getNoteY(this._startNote,Ke.Center)-o;break;default:return}this.paintSlideLine(i,!1,c,p,h,g)}paintSlideOut(e,t,i){let n=this.renderer,s=12*this.scale,o=3*this.scale,c=0,h=0,p=0,g=0,b=!1;const v=2*this.scale;switch(this._outType){case Et.Shift:case Et.Legato:if(c=e+n.x+n.getBeatX(this._startNote.beat,Vt.PostNotes),h=t+n.y+n.getNoteY(this._startNote,Ke.Center),this._startNote.slideTarget){let S=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._startNote.slideTarget.beat.voice.bar);!S||S.staff!==n.staff?(p=e+n.x+n.width,g=h):(p=e+S.x+S.getBeatX(this._startNote.slideTarget.beat,Vt.OnNotes)-v,g=t+S.y+S.getNoteY(this._startNote.slideTarget,Ke.Center)),this._startNote.slideTarget.fret>this._startNote.fret?(h+=o,g-=o):(h-=o,g+=o)}else p=e+n.x+this._parent.x,g=h;break;case Et.OutUp:c=e+n.x+n.getNoteX(this._startNote,yr.Right),h=t+n.y+n.getNoteY(this._startNote,Ke.Center),p=c+s-v,g=t+n.y+n.getNoteY(this._startNote,Ke.Center)-o;break;case Et.OutDown:c=e+n.x+n.getNoteX(this._startNote,yr.Right),h=t+n.y+n.getNoteY(this._startNote,Ke.Center),p=c+s-v,g=t+n.y+n.getNoteY(this._startNote,Ke.Center)+o;break;case Et.PickSlideDown:c=e+n.x+n.getNoteX(this._startNote,yr.Right),h=t+n.y+n.getNoteY(this._startNote,Ke.Center),p=e+n.x+n.getBeatX(this._startNote.beat,Vt.EndBeat),g=h+o*3,b=!0;break;case Et.PickSlideUp:c=e+n.x+n.getNoteX(this._startNote,yr.Right),h=t+n.y+n.getNoteY(this._startNote,Ke.Center),p=e+n.x+n.getBeatX(this._startNote.beat,Vt.EndBeat),g=h-o*3,b=!0;break;default:return}this.paintSlideLine(i,b,c,p,h,g)}paintSlideLine(e,t,i,n,s,o){if(t){let c=new Fh(0,0,ni.Slight,1.2);c.renderer=this.renderer,c.doLayout(),s-=c.height/2,o-=c.height/2;let h=n-i,p=o-s,g=Math.sqrt(Math.pow(p,2)+Math.pow(h,2));c.width=h;let b=Math.asin(p/g)*(180/Math.PI);e.beginRotate(i,s,b),c.paint(0,0,e),e.endRotate()}else e.beginPath(),e.moveTo(i,s),e.lineTo(n,o),e.stroke()}}class hc extends tn{constructor(e,t,i=!1){super(e.beat,t.beat,i),this.startNote=e,this.endNote=t}getTieHeight(e,t,i,n){return this.startNote===this.endNote?15:super.getTieHeight(e,t,i,n)}getBeamDirection(e,t){return this.startNote===this.endNote?Te.Up:hc.getBeamDirectionForNote(this.startNote)}static getBeamDirectionForNote(e){return e.string>3?Te.Up:Te.Down}getStartY(){return this.startNote===this.endNote?this.startNoteRenderer.getNoteY(this.startNote,Ke.Center):this.tieDirection===Te.Up?this.startNoteRenderer.getNoteY(this.startNote,Ke.Top):this.startNoteRenderer.getNoteY(this.startNote,Ke.Bottom)}getEndY(){return this.getStartY()}getStartX(){return this.startNote===this.endNote?this.getEndX()-20*this.scale:this.startNoteRenderer.getNoteX(this.startNote,yr.Center)}getEndX(){return this.startNote===this.endNote?this.endNoteRenderer.getNoteX(this.endNote,yr.Left):this.endNoteRenderer.getNoteX(this.endNote,yr.Center)}}class B_ extends hc{constructor(e,t,i,n=!1){super(e,t,n),this._direction=hc.getBeamDirectionForNote(e),this._forSlide=i}getTieHeight(e,t,i,n){return Math.log(i-e+1)*this.renderer.settings.notation.slurHeight}tryExpand(e,t,i,n){if(this._forSlide!==i||this.forEnd!==n||this.startNote.beat.id!==e.beat.id||this.endNote.beat.id!==t.beat.id||this._direction!==hc.getBeamDirectionForNote(e))return!1;switch(this._direction){case Te.Up:e.realValue>this.startNote.realValue&&(this.startNote=e,this.startBeat=e.beat),t.realValue>this.endNote.realValue&&(this.endNote=t,this.endBeat=t.beat);break;case Te.Down:e.realValue<this.startNote.realValue&&(this.startNote=e,this.startBeat=e.beat),t.realValue<this.endNote.realValue&&(this.endNote=t,this.endBeat=t.beat);break}return!0}paint(e,t,i){let n=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.startBeat.voice.bar),s=this.getBeamDirection(this.startBeat,n),o="tab.slur."+this.startNote.beat.id+"."+this.endNote.beat.id+"."+s,c=this.renderer;c.staff.getSharedLayoutData(o,!1)||(c.staff.setSharedLayoutData(o,!0),super.paint(e,t,i))}}class QW extends ho{constructor(e,t){super(e,t),this._bend=null,this._effectSlurs=[]}doLayout(){this._effectSlurs=[],super.doLayout(),this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())}createTies(e){if(!e.isVisible)return;let t=this.renderer;if(e.isTieOrigin&&t.showTiedNotes&&e.tieDestination.isVisible){let i=new hc(e,e.tieDestination,!1);this.addTie(i)}if(e.isTieDestination&&t.showTiedNotes){let i=new hc(e.tieOrigin,e,!0);this.addTie(i)}if(e.isLeftHandTapped&&!e.isHammerPullDestination){let i=new hc(e,e,!1);this.addTie(i)}if(e.isEffectSlurOrigin&&e.effectSlurDestination){let i=!1;for(let n of this._effectSlurs)if(n.tryExpand(e,e.effectSlurDestination,!1,!1)){i=!0;break}if(!i){let n=new B_(e,e.effectSlurDestination,!1,!1);this._effectSlurs.push(n),this.addTie(n)}}if(e.isEffectSlurDestination&&e.effectSlurOrigin){let i=!1;for(let n of this._effectSlurs)if(n.tryExpand(e.effectSlurOrigin,e,!1,!0)){i=!0;break}if(!i){let n=new B_(e.effectSlurOrigin,e,!1,!0);this._effectSlurs.push(n),this.addTie(n)}}if(e.slideInType!==rn.None||e.slideOutType!==Et.None){let i=new KW(e.slideInType,e.slideOutType,e,this);this.addTie(i)}if(e.hasBend){if(!this._bend){const i=new La;this._bend=i,i.renderer=this.renderer,this.addTie(i)}this._bend.addBends(e)}}}class JW extends vr{constructor(e,t,i){super(e,t),this._noteString=null,this._trillNoteString=null,this._trillNoteStringWidth=0,this.isEmpty=!1,this.noteStringWidth=0,this._note=i}doLayout(){let e=this._note,t=e.fret-e.beat.voice.bar.staff.transpositionPitch;if(e.harmonicType===Ze.Natural&&e.harmonicValue!==0&&(t=e.harmonicValue-e.beat.voice.bar.staff.transpositionPitch),e.isTieDestination)e.beat.index===0&&this.renderer.settings.notation.notationMode==Gr.GuitarPro||(e.bendType===Ye.Bend||e.bendType===Ye.BendRelease)&&this.renderer.settings.notation.isNotationElementVisible(ft.TabNotesOnTiedBends)?this._noteString="("+(e.tieOrigin.fret-e.beat.voice.bar.staff.transpositionPitch).toString()+")":this._noteString="";else if(this._noteString=e.isDead?"x":t.toString(),e.isGhost)this._noteString="("+this._noteString+")";else if(e.harmonicType===Ze.Natural){let i=this._noteString.indexOf(".");i>=0&&(this._noteString=this._noteString.substr(0,i+2)),this._noteString="<"+this._noteString+">"}if(e.isTrill)this._trillNoteString="("+(e.trillFret-e.beat.voice.bar.staff.transpositionPitch).toString()+")";else if(Fi.isAlmostEqualTo(e.harmonicValue,0))this._trillNoteString="";else switch(e.harmonicType){case Ze.Artificial:case Ze.Pinch:case Ze.Tap:case Ze.Semi:case Ze.Feedback:let i=(t+e.harmonicValue).toString(),n=i.indexOf(".");n>=0&&(i=i.substr(0,n+2)),this._trillNoteString="<"+i+">";break;default:this._trillNoteString="";break}this.isEmpty=!this._noteString,this.isEmpty||(this.renderer.scoreRenderer.canvas.font=this.renderer.resources.tablatureFont,this.noteStringWidth=this.renderer.scoreRenderer.canvas.measureText(this._noteString)*this.scale,this.width=this.noteStringWidth,this.height=this.renderer.scoreRenderer.canvas.font.size,this._trillNoteString&&(this.renderer.scoreRenderer.canvas.font=this.renderer.resources.graceFont,this._trillNoteStringWidth=3*this.scale+this.renderer.scoreRenderer.canvas.measureText(this._trillNoteString),this.width+=this._trillNoteStringWidth))}paint(e,t,i){if(this.isEmpty)return;let n=this.noteStringWidth+this._trillNoteStringWidth,s=e+this.x+(this.width-n)/2,o=this.renderer.scoreRenderer.canvas.font;this.renderer.scoreRenderer.canvas.font=this.renderer.resources.graceFont,i.fillText(this._trillNoteString,s+this.noteStringWidth+3*this.scale,t+this.y),this.renderer.scoreRenderer.canvas.font=o,i.fillText(this._noteString,s,t+this.y)}buildBoundingsLookup(e,t,i){let n=new oS;n.note=this._note,n.noteHeadBounds=new gs,n.noteHeadBounds.x=t+this.x,n.noteHeadBounds.y=i+this.y-this.height/2,n.noteHeadBounds.w=this.width,n.noteHeadBounds.h=this.height,e.addNote(n)}}class ZW extends vr{constructor(e,t,i){super(e,t),this._notes=[],this.minStringNote=null,this.beatEffects=new Map,this.notesPerString=new Map,this.noteStringWidth=0,this._isGrace=i}buildBoundingsLookup(e,t,i){for(const n of this._notes)n.buildBoundingsLookup(e,t+this.x,i+this.y)}getNoteX(e,t){if(this.notesPerString.has(e.string)){let i=this.notesPerString.get(e.string),n=this.x+i.x;switch(t){case yr.Left:break;case yr.Center:n+=i.noteStringWidth/2;break;case yr.Right:n+=i.width;break}return n}return 0}getNoteY(e,t){if(this.notesPerString.has(e.string)){const i=this.notesPerString.get(e.string);let n=this.y+i.y;switch(t){case Ke.Top:case Ke.TopWithStem:n-=i.height/2+2*this.scale;break;case Ke.Center:break;case Ke.Bottom:case Ke.BottomWithStem:n+=i.height/2;break}return n}return 0}doLayout(){let e=0,t=0;for(let o=0,c=this._notes.length;o<c;o++){let h=this._notes[o];h.renderer=this.renderer,h.doLayout(),h.width>e&&(e=h.width),h.noteStringWidth>t&&(t=h.noteStringWidth)}this.noteStringWidth=t;let i=this.renderer.resources.tablatureFont.size,n=this.getNoteY(this.minStringNote,Ke.Center)+i/2,s=7*this.scale;for(const o of this.beatEffects.values())o.y+=n,o.x+=this.width/2,o.renderer=this.renderer,n+=s,o.doLayout();this.width=e}addNoteGlyph(e,t){this._notes.push(e),this.notesPerString.set(t.string,e),(!this.minStringNote||t.string<this.minStringNote.string)&&(this.minStringNote=t)}paint(e,t,i){e+=this.x,t+=this.y;let n=this.renderer.resources,s=i.textBaseline;i.textBaseline=It.Middle,i.font=this._isGrace?n.graceFont:n.tablatureFont;let o=this._notes,c=this.width;for(let h of o)h.renderer=this.renderer,h.width=c,h.paint(e,t,i);i.textBaseline=s;for(const h of this.beatEffects.values())h.paint(e,t,i)}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}}class e8 extends br{constructor(e,t,i,n){super(e,t,1,Hf.getSymbol(n)),this._isVisibleRest=i,this._duration=n}doLayout(){this._isVisibleRest?this.width=Hf.getSize(this._duration)*this.scale:this.width=10*this.scale}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}paint(e,t,i){this._isVisibleRest&&super.paint(e,t,i)}}class t8 extends dS{constructor(){super(...arguments),this.noteNumbers=null,this.restGlyph=null}getNoteX(e,t){return this.noteNumbers?this.noteNumbers.getNoteX(e,t):0}getNoteY(e,t){return this.noteNumbers?this.noteNumbers.getNoteY(e,t):0}buildBoundingsLookup(e,t,i){this.noteNumbers&&this.noteNumbers.buildBoundingsLookup(e,t+this.x,i+this.y)}doLayout(){let e=this.renderer;if(this.container.beat.isRest){let i=Math.floor((this.renderer.bar.staff.tuning.length-1)/2),n=e.getTabY(i);const s=new e8(0,n,e.showRests,this.container.beat.duration);if(this.restGlyph=s,s.beat=this.container.beat,s.beamingHelper=this.beamingHelper,this.addGlyph(s),this.container.beat.dots>0&&e.showRests){this.addGlyph(new ys(0,0,5*this.scale));for(let o=0;o<this.container.beat.dots;o++)this.addGlyph(new ax(0,n,1.5*this.scale))}}else{let i=this.renderer.settings.notation.smallGraceTabNotes&&this.container.beat.graceType!==ot.None;const n=new ZW(0,0,i);this.noteNumbers=n,n.beat=this.container.beat,n.beamingHelper=this.beamingHelper;for(let s of this.container.beat.notes)s.isVisible&&this.createNoteGlyph(s);if(this.addGlyph(n),this.container.beat.hasWhammyBar){let s=new aa(this.container.beat);s.renderer=this.renderer,s.doLayout(),this.container.ties.push(s)}if(this.container.beat.isTremolo&&!this.noteNumbers.beatEffects.has("tremolo")){let s=0,o=this.container.beat.tremoloSpeed;switch(o){case Y.ThirtySecond:s=10;break;case Y.Sixteenth:s=5;break;case Y.Eighth:s=0;break}this.noteNumbers.beatEffects.set("tremolo",new Ib(5*this.scale,s*this.scale,o))}if(this.container.beat.dots>0&&e.settings.notation.rhythmMode!==Zl.Hidden){this.addGlyph(new ys(0,0,5*this.scale));for(let s=0;s<this.container.beat.dots;s++)this.addGlyph(new ax(0,e.lineOffset*e.bar.staff.tuning.length+e.settings.notation.rhythmHeight*e.scale,1.5*this.scale))}}if(!this.glyphs)return;let t=0;for(let i=0,n=this.glyphs.length;i<n;i++){let s=this.glyphs[i];s.x=t,s.renderer=this.renderer,s.doLayout(),t+=s.width}this.width=t,this.computedWidth=t,this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.isRest?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteNumbers.x+this.noteNumbers.noteStringWidth/2}updateBeamingHelper(){this.container.beat.isRest?this.restGlyph.updateBeamingHelper(this.container.x+this.x):this.noteNumbers.updateBeamingHelper(this.container.x+this.x)}createNoteGlyph(e){let t=this.renderer,i=new JW(0,0,e),n=e.beat.voice.bar.staff.tuning.length-e.string;i.y=t.getTabY(n),i.renderer=this.renderer,i.doLayout(),this.noteNumbers.addNoteGlyph(i,e);let s=i.y-i.height/2,o=s+i.height;this.renderer.helpers.collisionHelper.reserveBeatSlot(this.container.beat,s,o)}}class i8 extends vr{constructor(e){super(0,0),this._beat=e}doLayout(){this.width=10*this.scale}paint(e,t,i){let n=this.renderer,s=t+this.x+n.getNoteY(this._beat.maxStringNote,Ke.Top),o=t+this.y+n.getNoteY(this._beat.minStringNote,Ke.Bottom),c=e+this.x+this.width/2|0,h=8*this.scale;if(this._beat.brushType!==Di.None){if(this._beat.brushType===Di.BrushUp||this._beat.brushType===Di.BrushDown)i.beginPath(),i.moveTo(c,s),i.lineTo(c,o),i.stroke();else if(this._beat.brushType===Di.ArpeggioUp){let p=new Fh(0,0,ni.Slight,1.2,!0);p.renderer=this.renderer,p.doLayout();let g=s,b=o-h;p.width=Math.abs(b-g),i.beginRotate(e+this.x+4*this.scale,b,-90),p.paint(0,-p.height/2,i),i.endRotate()}else if(this._beat.brushType===Di.ArpeggioDown){let p=new Fh(0,0,ni.Slight,1.2,!0);p.renderer=this.renderer,p.doLayout();let g=s+h,b=o;p.width=Math.abs(b-g),i.beginRotate(e+this.x+4*this.scale,g,90),p.paint(0,-p.height/2,i),i.endRotate()}this._beat.brushType===Di.BrushUp||this._beat.brushType===Di.ArpeggioUp?(i.beginPath(),i.moveTo(c,o),i.lineTo(c+h/2,o-h),i.lineTo(c-h/2,o-h),i.closePath(),i.fill()):(i.beginPath(),i.moveTo(c,s),i.lineTo(c+h/2,s+h),i.lineTo(c-h/2,s+h),i.closePath(),i.fill())}}}class r8 extends Rb{doLayout(){this.container.beat.brushType!==Di.None&&!this.container.beat.isRest&&(this.addGlyph(new i8(this.container.beat)),this.addGlyph(new ys(0,0,4*this.scale))),super.doLayout()}constructor(){super()}}class n8 extends vr{constructor(e,t){super(e,t)}doLayout(){this.width=28*this.scale}paint(e,t,i){let n=this.renderer.bar.staff.tuning.length,s=n<=4?N.FourStringTabClef:N.SixStringTabClef,o=n<=4?n/4.5:n/6.5;i.fillMusicFontSymbol(e+this.x+5*this.scale,t+this.y,o*this.scale,s,!1)}}class s8 extends t2{get commonScale(){return 1}get numberScale(){return this.renderer.bar.staff.tuning.length<=4?Ot.GraceScale:1}}class tu extends or{constructor(e,t){super(e,t),this._firstLineY=0,this._tupletSize=0,this.showTimeSignature=!1,this.showRests=!1,this.showTiedNotes=!1,this._startSpacing=!1}get lineOffset(){return(tu.TabLineSpacing+1)*this.scale}updateSizes(){let e=this.resources,t=(e.tablatureFont.size/2+e.tablatureFont.size*.2)*this.scale;this.topPadding=t,this.bottomPadding=t,this.height=this.lineOffset*(this.bar.staff.tuning.length-1)+t*2,this.settings.notation.rhythmMode!==Zl.Hidden&&(this.height+=this.settings.notation.rhythmHeight*this.settings.display.scale,this.bottomPadding+=this.settings.notation.rhythmHeight*this.settings.display.scale),this.updateFirstLineY(),super.updateSizes()}updateFirstLineY(){let e=this.resources;this._firstLineY=(e.tablatureFont.size/2+e.tablatureFont.size*.2)*this.scale}doLayout(){if(this.updateFirstLineY(),super.doLayout(),this.settings.notation.rhythmMode!==Zl.Hidden){let e=!1;for(let t of this.bar.voices)if(this.hasVoiceContainer(t)&&this.getVoiceContainer(t).tupletGroups.length>0){e=!0;break}e&&(this._tupletSize=this.resources.effectFont.size*.8,this.registerOverflowBottom(this._tupletSize))}}createPreBeatGlyphs(){if(super.createPreBeatGlyphs(),this.bar.masterBar.isRepeatStart&&this.addPreBeatGlyph(new JC(0,0,1.5,3)),this.isFirstOfLine){let e=(this.bar.staff.tuning.length-1)/2;this.addPreBeatGlyph(new n8(5*this.scale,this.getTabY(e)))}this.showTimeSignature&&(!this.bar.previousBar||this.bar.previousBar&&this.bar.masterBar.timeSignatureNumerator!==this.bar.previousBar.masterBar.timeSignatureNumerator||this.bar.previousBar&&this.bar.masterBar.timeSignatureDenominator!==this.bar.previousBar.masterBar.timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new qC(0,this.getTabHeight(-.5),this.bar.index+1))}createStartSpacing(){this._startSpacing||(this.addPreBeatGlyph(new ys(0,0,2*this.scale)),this._startSpacing=!0)}createTimeSignatureGlyphs(){this.addPreBeatGlyph(new ys(0,0,5*this.scale));const e=(this.bar.staff.tuning.length+1)/2-1;this.addPreBeatGlyph(new s8(0,this.getTabY(e),this.bar.masterBar.timeSignatureNumerator,this.bar.masterBar.timeSignatureDenominator,this.bar.masterBar.timeSignatureCommon))}createVoiceGlyphs(e){for(let t=0,i=e.beats.length;t<i;t++){let n=e.beats[t],s=new QW(n,this.getVoiceContainer(e));s.preNotes=new r8,s.onNotes=new t8,this.addBeatGlyph(s)}}createPostBeatGlyphs(){super.createPostBeatGlyphs(),this.bar.masterBar.isRepeatEnd?(this.addPostBeatGlyph(new KC(this.x,0)),this.bar.masterBar.repeatCount>2&&this.addPostBeatGlyph(new QC(0,this.getTabY(-1),this.bar.masterBar.repeatCount))):this.addPostBeatGlyph(new XC(0,0))}getTabY(e){return this._firstLineY+this.getTabHeight(e)}getTabHeight(e){return this.lineOffset*e}get middleYPosition(){return this.getTabY(this.bar.staff.tuning.length-1)}paintBackground(e,t,i){super.paintBackground(e,t,i);let n=this.resources;i.color=n.staffLineColor;let s=this.scale,o=[];for(let c=0,h=this.bar.staff.tuning.length;c<h;c++)o.push([]);for(let c of this.bar.voices)if(this.hasVoiceContainer(c)){let h=this.getVoiceContainer(c);for(let p of h.beatGlyphs){let g=p.onNotes,b=g.noteNumbers;if(b)for(const[v,S]of b.notesPerString)S.isEmpty||o[this.bar.staff.tuning.length-v].push(new Float32Array([h.x+p.x+g.x+b.x,b.width+s]))}}for(let c of o)c.sort((h,p)=>h[0]>p[0]?1:h[0]<p[0]?-1:0);for(let c=0,h=this.bar.staff.tuning.length;c<h;c++){const p=this.getTabY(c);let g=0;for(let b of o[c])i.fillRect(e+this.x+g,t+this.y+p|0,b[0]-g,this.scale*or.StaffLineThickness),g=b[0]+b[1];i.fillRect(e+this.x+g,t+this.y+p|0,this.width-g,this.scale*or.StaffLineThickness)}i.color=n.mainGlyphColor,this.paintSimileMark(e,t,i)}paint(e,t,i){super.paint(e,t,i),this.settings.notation.rhythmMode!==Zl.Hidden&&(this.paintBeams(e,t,i),this.paintTuplets(e,t,i))}paintBeams(e,t,i){for(let n=0,s=this.helpers.beamHelpers.length;n<s;n++){let o=this.helpers.beamHelpers[n];for(let c=0,h=o.length;c<h;c++){let p=o[c];this.paintBeamHelper(e+this.beatGlyphsStart,t,i,p)}}}paintTuplets(e,t,i){for(let n of this.bar.voices)if(this.hasVoiceContainer(n)){let s=this.getVoiceContainer(n);for(let o of s.tupletGroups)this.paintTupletHelper(e+this.beatGlyphsStart,t,i,o)}}paintBeamHelper(e,t,i,n){i.color=n.voice.index===0?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.isRestBeamHelper||(n.beats.length===1||this.settings.notation.rhythmMode===Zl.ShowWithBeams?this.paintFooter(e,t,i,n):this.paintBar(e,t,i,n))}paintBar(e,t,i,n){for(let s=0,o=n.beats.length;s<o;s++){let c=n.beats[s];if(n.hasBeatLineX(c)){let h=n.getBeatLineX(c),p=t+this.y,g=t+this.y+this.height-this._tupletSize,b=this.getOnNotesGlyphForBeat(c);!b.noteNumbers||c.duration===Y.Half?p+=this.height-this.settings.notation.rhythmHeight*this.settings.display.scale-this._tupletSize:p+=b.noteNumbers.getNoteY(b.noteNumbers.minStringNote,Ke.Bottom)+this.lineOffset/2,this.paintBeamingStem(c,t+this.y,e+this.x+h,p,g,i);let v=6*this.scale,S=-6*this.scale,B=3*this.scale,T=Fi.getIndex(c.duration)-2,C=g;for(let L=0;L<T;L++){let O=0,I=0,V=0,P=0,G=C+L*S;if(n.beats.length===1)O=h,I=h+v,V=G,P=G,tu.paintSingleBar(i,e+this.x+O,V,e+this.x+I,P,B);else if(s<n.beats.length-1){if(Ds.isFullBarJoin(c,n.beats[s+1],L))O=h,I=n.getBeatLineX(n.beats[s+1]);else if(s===0||!Ds.isFullBarJoin(n.beats[s-1],c,L))O=h,I=O+v;else continue;V=G,P=G,tu.paintSingleBar(i,e+this.x+O,V,e+this.x+I,P,B)}else s>0&&!Ds.isFullBarJoin(c,n.beats[s-1],L)&&(O=h-v,I=h,V=G,P=G,tu.paintSingleBar(i,e+this.x+O,V,e+this.x+I,P,B))}}}}paintTupletHelper(e,t,i,n){let s=this.resources,o=i.textAlign,c=i.textBaseline;i.color=n.voice.index===0?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,i.textAlign=at.Center,i.textBaseline=It.Middle;let h,p=n.beats[0].tupletNumerator,g=n.beats[0].tupletDenominator;if(p===2&&g===3?h="2":p===3&&g===2?h="3":p===4&&g===6?h="4":p===5&&g===4?h="5":p===6&&g===4?h="6":p===7&&g===4?h="7":p===9&&g===8?h="9":p===10&&g===8?h="10":p===11&&g===8?h="11":p===12&&g===8?h="12":p===13&&g===8?h="13":h=p+":"+g,n.beats.length===1||!n.isFull)for(let b=0,v=n.beats.length;b<v;b++){let S=n.beats[b],B=this.helpers.beamHelperLookup[n.voice.index].get(S.index);if(!B)continue;let T=B.getBeatLineX(S),C=t+this.y+this.height-this._tupletSize+s.effectFont.size*.5;i.font=s.effectFont,i.fillText(h,e+this.x+T,C)}else{let b=n.beats[0],v=n.beats[n.beats.length-1],S=this.helpers.beamHelperLookup[n.voice.index].get(b.index),B=this.helpers.beamHelperLookup[n.voice.index].get(v.index);if(S&&B){let T=S.getBeatLineX(b),C=B.getBeatLineX(v);i.font=s.effectFont;let L=i.measureText(h),O=3*this.scale,I=(T+C)/2,V=I-L/2-O,P=I+L/2+O,G=t+this.y+this.height-this._tupletSize+s.effectFont.size*.5,W=-s.effectFont.size*.25,J=-5*this.scale;i.beginPath(),i.moveTo(e+this.x+T,G-W|0),i.lineTo(e+this.x+T,G-W-J|0),i.lineTo(e+this.x+V,G-W-J|0),i.stroke(),i.beginPath(),i.moveTo(e+this.x+P,G-W-J|0),i.lineTo(e+this.x+C,G-W-J|0),i.lineTo(e+this.x+C,G-W|0),i.stroke(),i.fillText(h,e+this.x+I,G-W-J)}}i.textAlign=o,i.textBaseline=c}static paintSingleBar(e,t,i,n,s,o){e.beginPath(),e.moveTo(t,i),e.lineTo(n,s),e.lineTo(n,s-o),e.lineTo(t,i-o),e.closePath(),e.fill()}paintBeamingStem(e,t,i,n,s,o){o.beginPath();let c=[];this.helpers.collisionHelper.reservedLayoutAreasByDisplayTime.has(e.displayStart)&&(c=this.helpers.collisionHelper.reservedLayoutAreasByDisplayTime.get(e.displayStart).slots.slice(),c.sort((p,g)=>p.topY-g.topY));let h=s;for(;h>n;){o.moveTo(i,h);let p=n;if(c.length>0&&c[c.length-1].bottomY>p){const g=c.pop();p=t+g.bottomY,o.lineTo(i,p),h=t+g.topY}else{o.lineTo(i,p);break}}o.stroke()}paintFooter(e,t,i,n){for(let s of n.beats){if(s.graceType!==ot.None||s.duration===Y.Whole||s.duration===Y.DoubleWhole||s.duration===Y.QuadrupleWhole)return;let o=n.getBeatLineX(s),c=t+this.y,h=t+this.y+this.height-this._tupletSize,p=this.getOnNotesGlyphForBeat(s);if(!p.noteNumbers||s.duration===Y.Half?c+=this.height-this.settings.notation.rhythmHeight*this.settings.display.scale-this._tupletSize:c+=p.noteNumbers.getNoteY(p.noteNumbers.minStringNote,Ke.Bottom),this.paintBeamingStem(s,t+this.y,e+this.x+o,c,h,i),s.duration>Y.Quarter){let g=new Zf(0,0,s.duration,Te.Down,!1);g.renderer=this,g.doLayout(),g.paint(e+this.x+o,h,i)}}}}tu.StaffId="tab";tu.TabLineSpacing=10;class Pw extends hS{get staffId(){return tu.StaffId}constructor(e,t,i){super(),this._showTimeSignature=e,this._showRests=t,this._showTiedNotes=i,this.hideOnPercussionTrack=!0}canCreate(e,t){return t.tuning.length>0&&super.canCreate(e,t)}create(e,t){let i=new tu(e,t);return i.showRests=this._showRests,i.showTimeSignature=this._showTimeSignature,i.showTiedNotes=this._showTiedNotes,i}}class mm extends bo{constructor(){super(0,0)}doLayout(){super.doLayout();const e=this.renderer.resources.effectFont;this.height=e.size+mm.Padding*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.effectFont;let s=i.textAlign;i.textAlign=at.Center,i.fillText("T",e+this.x,t+this.y+i.font.size/2),i.textAlign=s,i.strokeCircle(e+this.x,t+this.y+i.font.size/2+(mm.Padding-1)*this.scale,i.font.size/1.6)}}mm.Padding=4;class F0 extends Ah{get notationElement(){return ft.EffectTap}get sizingMode(){return Jt.SingleOnBeat}shouldCreateGlyphForNote(e){return e.isLeftHandTapped}createNewGlyph(e,t){return new mm}}class fu{constructor(){this.noteRange=1,this.x=0,this.y=0}}var Th;(function(r){r[r.None=0]="None",r[r.Rectangle=1]="Rectangle",r[r.Ellipse=2]="Ellipse",r[r.Circle=3]="Circle"})(Th||(Th={}));class Ew extends fu{constructor(){super(...arguments),this.align=at.Left,this.frame=Th.None,this.text="",this.fontFace="",this.weight=0,this.height=0}}class T_ extends fu{constructor(){super(...arguments),this.chord=new gc}}class C_ extends fu{}class N_ extends fu{}class a8 extends fu{constructor(){super(...arguments),this.number=0}}class P_ extends fu{constructor(){super(...arguments),this.decrescendo=!1}}class Rw extends fu{constructor(){super(...arguments),this.allNumbers=!1,this.firstNumber=0,this.lastNumber=0}}class o8 extends fu{constructor(){super(...arguments),this.octave=1}}class l8 extends fu{}class u8{constructor(){this.defaultClef=_t.G2,this.description="",this.percussion=!1,this.instrument=0,this.volume=0,this.transpose=0,this.index=0}}class c8{constructor(){this.from=0,this.to=0,this.curly=!1}}class h8{constructor(){this.currentBarIndex=-1,this.currentBarComplete=!0,this.currentBarDuration=0,this.currentPosition=0,this.voiceStemDir=null,this.repeatCount=0,this.repeatEnd=null}}class lb{constructor(){this._trackChannel=0,this._beamingMode=co.Auto,this._isFirstSystem=!0,this._staffLookup=new Map,this._brackets=[],this._staffLayoutLookup=new Map,this._staffLayouts=[],this._timeSignature=new ou,this._voiceStates=new Map}parseXml(e,t){this._galleryObjects=new Map,this._tieStarts=[],this._tieStartIds=new Map,this._voiceCounts=new Map,this._slurs=new Map,this._crescendo=new Map,this._isFirstSystem=!0;let i=new rS;try{i.parse(e)}catch(n){throw new Or("Could not parse XML",n)}this.parseDom(i),this.consolidate(),this.score.finish(t)}consolidate(){let e=this.score.tempo;for(const t of this.score.tracks){const i=this._voiceCounts.get(t.index);for(const n of t.staves){for(;n.bars.length<this.score.masterBars.length;)this.addNewBar(n);for(const s of n.bars){for(;s.voices.length<i;)s.addVoice(new ml);for(const c of s.voices)if(c.beats.length===0){const h=new bn;h.isEmpty=!0,c.addBeat(h)}const o=s.masterBar;o.tempoAutomation&&(o.tempoAutomation.value!==e?e=o.tempoAutomation.value:o.tempoAutomation=null)}}}lb.applyEffectRange(this._slurs,(t,i)=>{i.isLegatoOrigin=!0}),lb.applyEffectRange(this._crescendo,(t,i)=>{i.crescendo=t.decrescendo?bs.Decrescendo:bs.Crescendo})}static applyEffectRange(e,t){for(const[i,n]of e){const s=n.noteRange;let o=i;for(let c=0;c<s;c++)if(t(n,o),o.index+1<o.voice.beats.length)o=o.voice.beats[o.index+1];else if(o.voice.bar.index+1<o.voice.bar.staff.bars.length)o=o.voice.bar.staff.bars[o.voice.bar.index+1].voices[o.voice.index].beats[0];else break}}parseDom(e){let t=e.firstElement;if(!t)throw new Or("No valid XML");if(t.localName==="score"){this.score=new Dh,this.score.tempo=120;for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"info":this.parseInfo(i);break;case"layout":this.parseLayout(i);break;case"gallery":this.parseGallery(i);break;case"pageObjects":this.parsePageObjects(i);break;case"systems":this.parseSystems(i);break}}else throw new Or('Root node of XML was not "score"')}parseLayout(e){for(let s of e.childNodes)if(s.nodeType===me.Element)switch(s.localName){case"staves":this.parseLayoutStaves(s);break;case"brackets":this.parseBrackets(s);break}const t=this._brackets.filter(s=>!!s.curly);t.sort((s,o)=>s.from-o.from);let i=0,n=null;for(let s=0;s<this._staffLayouts.length;s++){const o=this._staffLayouts[s];for(;i<t.length&&s>t[i].to;)i++;n&&i<t.length&&s>t[i].from&&s<=t[i].to?n.ensureStaveCount(n.staves.length+1):(n=new gl,n.ensureStaveCount(1),n.name=o.description,n.playbackInfo.volume=Math.floor(o.volume/128*16),n.playbackInfo.program=o.instrument,o.percussion?(n.playbackInfo.primaryChannel=9,n.playbackInfo.secondaryChannel=9):(n.playbackInfo.primaryChannel=this._trackChannel++,n.playbackInfo.secondaryChannel=this._trackChannel++),this.score.addTrack(n));const c=n.staves[n.staves.length-1];c.isPercussion=o.percussion,c.transpositionPitch=o.transpose,c.displayTranspositionPitch=0,c.showTablature=!1,this._staffLookup.set(o.index,c)}}parseBrackets(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"bracket":this.parseBracket(t);break}}parseBracket(e){const t=new c8;t.from=parseInt(e.getAttribute("from")),t.to=parseInt(e.getAttribute("to")),e.attributes.has("curly")&&(t.curly=e.attributes.get("curly")==="true"),this._brackets.push(t)}parseLayoutStaves(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"staffLayout":this.parseStaffLayout(t);break}}parseStaffLayout(e){const t=new u8;t.description=e.getAttribute("description");for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"notation":i.attributes.has("defaultClef")&&(t.defaultClef=this.parseClef(i.attributes.get("defaultClef")));break;case"sound":i.attributes.has("percussion")&&(t.percussion=i.attributes.get("percussion")==="true"),i.attributes.has("instr")&&(t.instrument=parseInt(i.attributes.get("instr"))),i.attributes.has("volume")&&(t.volume=parseInt(i.attributes.get("volume"))),i.attributes.has("transpose")&&(t.transpose=parseInt(i.attributes.get("transpose")));break}this._staffLayoutLookup.set(t.description,t),t.index=this._staffLayouts.length,this._staffLayouts.push(t)}parseClef(e){switch(e){case"treble":return _t.G2;case"bass":return _t.F4;case"alto":return _t.C4;case"tenor":return _t.C4}return _t.G2}parseClefOttava(e){return e.endsWith("-")?hi._8vb:e.endsWith("+")?hi._8va:hi.Regular}parseSystems(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"system":this.parseSystem(t);break}}parseSystem(e){e.attributes.has("tempo")&&this.score.masterBars.length===0&&(this.score.tempo=parseInt(e.attributes.get("tempo"))),e.getAttribute("beamGrouping")==="0"&&(this._beamingMode=co.ForceSplitToNext);for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"staves":this.parseStaves(e,t);break}this._isFirstSystem=!1}parseStaves(e,t){let i=this.score.masterBars.length;for(let n of t.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"staff":this.parseStaff(e,i,n);break}}parseStaff(e,t,i){const n=i.getAttribute("layout");this._currentStaffLayout=this._staffLayoutLookup.get(n),this._timeSignature.timeSignatureNumerator=4,this._timeSignature.timeSignatureDenominator=4,this._timeSignature.timeSignatureCommon=!1,this.parseTime(i.getAttribute("defaultTime"));const s=this._staffLookup.get(this._currentStaffLayout.index);for(;s.bars.length<t;)this.addNewBar(s);for(let o of i.childNodes)if(o.nodeType===me.Element)switch(o.localName){case"voices":this.parseVoices(n,s,e,t,o);break}}parseTime(e){switch(e){case"allaBreve":case"C":this._timeSignature.timeSignatureNumerator=2,this._timeSignature.timeSignatureDenominator=2,this._timeSignature.timeSignatureCommon=!0;break;case"longAllaBreve":this._timeSignature.timeSignatureNumerator=4,this._timeSignature.timeSignatureDenominator=4,this._timeSignature.timeSignatureCommon=!0;break;default:if(e.indexOf("/")>0){const t=e.split("/");this._timeSignature.timeSignatureNumerator=parseInt(t[0]),this._timeSignature.timeSignatureDenominator=parseInt(t[1]),this._timeSignature.timeSignatureCommon=!1}break}}parseVoices(e,t,i,n,s){let o=0;for(let c of s.childNodes)if(c.nodeType===me.Element)switch(c.localName){case"voice":this.parseVoice(e,t,i,o,n,c),o++;break}}getOrCreateBar(e,t){return t<e.bars.length?e.bars[t]:this.addNewBar(e)}addNewBar(e){let t=new cu;if(e.bars.length>0?(t.clef=e.bars[e.bars.length-1].clef,t.clefOttava=e.bars[e.bars.length-1].clefOttava):t.clef=this._currentStaffLayout.defaultClef,e.addBar(t),e.bars.length>this.score.masterBars.length){let i=new ou;this.score.addMasterBar(i),i.index>0&&(i.keySignature=i.previousMasterBar.keySignature,i.keySignatureType=i.previousMasterBar.keySignatureType,i.tripletFeel=i.previousMasterBar.tripletFeel),i.timeSignatureDenominator=this._timeSignature.timeSignatureDenominator,i.timeSignatureNumerator=this._timeSignature.timeSignatureNumerator,i.timeSignatureCommon=this._timeSignature.timeSignatureCommon}return t}newBar(e,t){this._currentVoiceState.currentBarIndex++,this._currentBar=this.getOrCreateBar(e,this._currentVoiceState.currentBarIndex),this._currentVoiceState.currentBarDuration=this._currentBar.masterBar.calculateDuration(!1),this._currentVoiceState.currentBarComplete=!1,this._currentVoiceState.currentPosition=0,this.ensureVoice(e,t)}parseVoice(e,t,i,n,s,o){const c=e+"_"+n;if(this._currentVoiceState&&!this._currentVoiceState.currentBarComplete&&(this._currentBar.masterBar.isAnacrusis=!0),this._voiceStates.has(c)?(this._currentVoiceState=this._voiceStates.get(c),this._currentBar=this.getOrCreateBar(t,this._currentVoiceState.currentBarIndex),this.ensureVoice(t,n)):(this._currentVoiceState=new h8,this._currentVoiceState.currentBarIndex=s-1,this._voiceStates.set(c,this._currentVoiceState),this.newBar(t,n)),o.attributes.has("stemDir"))switch(o.attributes.get("stemDir")){case"up":this._currentVoiceState.voiceStemDir=Te.Up;break;case"down":this._currentVoiceState.voiceStemDir=Te.Down;break;default:this._currentVoiceState.voiceStemDir=null;break}else this._currentVoiceState.voiceStemDir=null;const h=o.findChildElement("noteObjects");if(i.attributes.has("tempo")&&(this._currentBar.masterBar.tempoAutomation=new yn,this._currentBar.masterBar.tempoAutomation.isLinear=!0,this._currentBar.masterBar.tempoAutomation.type=Ur.Tempo,this._currentBar.masterBar.tempoAutomation.value=parseInt(i.attributes.get("tempo"))),h){for(let p of h.childNodes)if(p.nodeType===me.Element)switch(this._currentVoiceState.currentBarComplete&&p.localName!=="barline"&&this.newBar(t,n),p.localName){case"clefSign":this._currentBar.clef=this.parseClef(p.getAttribute("clef")),this._currentBar.clefOttava=this.parseClefOttava(p.getAttribute("clef"));break;case"keySign":this._currentBar.masterBar.keySignature=parseInt(p.getAttribute("fifths"));break;case"timeSign":this.parseTime(p.getAttribute("time")),this._currentBar.masterBar.timeSignatureDenominator=this._timeSignature.timeSignatureDenominator,this._currentBar.masterBar.timeSignatureNumerator=this._timeSignature.timeSignatureNumerator,this._currentBar.masterBar.timeSignatureCommon=this._timeSignature.timeSignatureCommon,this._currentVoiceState.currentPosition=0,this._currentVoiceState.currentBarDuration=this._currentBar.masterBar.calculateDuration(!1);break;case"barline":switch(p.getAttribute("type")){case"double":this._currentBar.masterBar.isDoubleBar=!0,this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;case"end":this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0);break;case"repEnd":this._currentVoiceState.repeatEnd=this._currentBar.masterBar,this._currentBar.masterBar.repeatCount<this._currentVoiceState.repeatCount&&(this._currentBar.masterBar.repeatCount=this._currentVoiceState.repeatCount),this.parseBarDrawObject(p),this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;case"repBegin":this.newBar(t,n),this._currentBar.masterBar.isRepeatStart=!0,this._currentVoiceState.repeatEnd=null,this._currentVoiceState.repeatCount=0;break;case"repEndBegin":this._currentVoiceState.repeatEnd=this._currentBar.masterBar,this._currentBar.masterBar.repeatCount<this._currentVoiceState.repeatCount&&(this._currentBar.masterBar.repeatCount=this._currentVoiceState.repeatCount),this.parseBarDrawObject(p),this.newBar(t,n),this._currentBar.masterBar.isRepeatStart=!0;break;case"dashed":this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;default:this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break}break;case"chord":let g=new bn;this.initFromPreviousBeat(g,this._currentVoice),g.beamingMode=this._beamingMode,this._currentVoiceState.voiceStemDir&&(g.preferredBeamDirection=this._currentVoiceState.voiceStemDir),this.parseDuration(this._currentBar,g,p.findChildElement("duration")),g.updateDurations(),this._currentVoiceState.currentPosition+=g.playbackDuration,this._currentVoice.addBeat(g),this.parseChord(g,p),this._currentVoiceState.currentPosition>=this._currentVoiceState.currentBarDuration&&(this._currentVoiceState.currentBarComplete=!0);break;case"rest":const b=this.parseRestDurations(this._currentBar,p.findChildElement("duration"));b&&(this.initFromPreviousBeat(b,this._currentVoice),b.updateDurations(),this._currentVoiceState.currentPosition+=b.playbackDuration,this._currentVoice.addBeat(b),this._currentVoiceState.currentPosition>=this._currentVoiceState.currentBarDuration&&(this._currentVoiceState.currentBarComplete=!0));break}}}initFromPreviousBeat(e,t){let i=this.getLastBeat(t);i&&(e.dynamics=i.dynamics)}getLastBeat(e){if(e.beats.length>0)return e.beats[e.beats.length-1];if(e.bar.index>0){const t=e.bar.staff.bars[e.bar.index-1];if(e.index<t.voices.length){const i=t.voices[e.index];return this.getLastBeat(i)}}return null}ensureVoice(e,t){for(;this._currentBar.voices.length<t+1;)this._currentBar.addVoice(new ml);(!this._voiceCounts.has(e.track.index)||this._voiceCounts.get(e.track.index)<this._currentBar.voices.length)&&this._voiceCounts.set(e.track.index,this._currentBar.voices.length),this._currentVoice=this._currentBar.voices[t]}parseChord(e,t){const i=new fr;for(let n of t.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"stem":switch(n.getAttribute("dir")){case"up":e.preferredBeamDirection=Te.Up;break;case"down":e.preferredBeamDirection=Te.Down;break}break;case"articulation":switch(n.getAttribute("type")){case"staccato":i.isStaccato=!0;break;case"normalAccent":i.accentuated=Mr.Normal;break;case"strongAccent":i.accentuated=Mr.Heavy;break}break;case"lyric":this.parseLyric(e,n);break;case"drawObjects":this.parseBeatDrawObject(e,n);break;case"heads":this.parseHeads(e,i,n);break;case"beam":switch(n.getAttribute("group")){case"force":e.beamingMode=co.ForceMergeWithNext;break;case"divide":e.beamingMode=co.ForceSplitToNext;break}break}}parseHeads(e,t,i){for(let n of i.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"head":this.parseHead(e,t,n);break}}parseHead(e,t,i){const n=new fr,s=Fi.parseTuning(i.getAttribute("pitch"));n.octave=s.octave-1,n.tone=s.noteValue,n.isStaccato=t.isStaccato,n.accentuated=t.accentuated,e.addNote(n);for(let o of i.childNodes)if(o.nodeType===me.Element)switch(o.localName){case"alter":o.attributes.has("step")&&(n.tone+=parseInt(o.attributes.get("step")));break;case"tie":o.attributes.has("begin")?this._tieStartIds.has(n.id)||(this._tieStartIds.set(n.id,!0),this._tieStarts.push(n)):o.attributes.has("end")&&this._tieStarts.length>0&&!n.isTieDestination&&(n.isTieDestination=!0,n.tieOrigin=this._tieStarts[0],this._tieStarts.splice(0,1),this._tieStartIds.delete(n.id));break}}parseBeatDrawObject(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"drawObj":const n=this.parseDrawObj(i);if(n){if(n instanceof Ew)n.fontFace.startsWith("capella")?n.text==="u"?(e.fermata=new tS,e.fermata.type=fo.Medium):n.text==="f"?e.dynamics=Dt.F:n.text==="j"&&(e.dynamics=Dt.MF):this._isFirstSystem&&this.score.title===""&&n.align===at.Center&&n.height>16&&n.weight>400?this.score.title=n.text:this._isFirstSystem&&this.score.artist===""&&n.align===at.Center&&n.y<0?this.score.artist=n.text:this._isFirstSystem&&this.score.music===""&&n.align===at.Right&&n.y<0?this.score.music=n.text:n.text.startsWith("by capella")||(e.text=n.text);else if(!(n instanceof T_))if(n instanceof N_)e.vibrato=ni.Slight;else if(n instanceof P_)e.crescendo=n.decrescendo?bs.Decrescendo:bs.Crescendo,n.noteRange++,this._crescendo.set(e,n);else if(n instanceof C_){const s=n;this._slurs.set(e,s)}else n instanceof Rw&&this.applyVolta(n)}break}}parseBarDrawObject(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"drawObj":const i=this.parseDrawObj(t);i&&i instanceof Rw&&this.applyVolta(i);break}}applyVolta(e){if(e.lastNumber>0?(this._currentVoiceState.repeatCount=e.lastNumber,this._currentVoiceState.repeatEnd&&this._currentVoiceState.repeatEnd.repeatCount<this._currentVoiceState.repeatCount&&(this._currentVoiceState.repeatEnd.repeatCount=this._currentVoiceState.repeatCount)):e.firstNumber>0&&(this._currentVoiceState.repeatCount=e.firstNumber,this._currentVoiceState.repeatEnd&&this._currentVoiceState.repeatEnd.repeatCount<this._currentVoiceState.repeatCount&&(this._currentVoiceState.repeatEnd.repeatCount=this._currentVoiceState.repeatCount)),e.lastNumber>0&&e.firstNumber>0){let t=0;for(let i=e.firstNumber;i<=e.lastNumber;i++)t=t|1<<i-1;this._currentBar.masterBar.alternateEndings=t}else e.lastNumber>0?this._currentBar.masterBar.alternateEndings=1<<e.lastNumber-1:e.firstNumber>0&&(this._currentBar.masterBar.alternateEndings=1<<e.firstNumber-1)}parseLyric(e,t){for(let i of t.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"verse":e.lyrics||(e.lyrics=[]);let n=i.innerText;i.getAttribute("hyphen")==="true"&&(n+="-"),e.lyrics.push(n);break}}parseRestDurations(e,t){const i=t.getAttribute("base");if(i.indexOf("/")!==-1){let s=new bn;return s.beamingMode=this._beamingMode,this.parseDuration(e,s,t),s}if(parseInt(i)===1){let s=new bn;return s.beamingMode=this._beamingMode,s.duration=Y.Whole,s}else return ye.warning("Importer","Multi-Bar rests are not supported"),null}parseDurationValue(e){switch(e){case"2/1":return Y.DoubleWhole;case"1/1":return Y.Whole;case"1/2":return Y.Half;case"1/4":return Y.Quarter;case"1/8":return Y.Eighth;case"1/16":return Y.Sixteenth;case"1/32":return Y.ThirtySecond;case"1/64":return Y.SixtyFourth;case"1/128":return Y.OneHundredTwentyEighth;default:return ye.warning("Importer","Unsupported duration"),Y.Quarter}}parseDuration(e,t,i){const n=i.getAttribute("base");t.duration=this.parseDurationValue(n),i.attributes.has("dots")&&(t.dots=parseInt(i.attributes.get("dots")));const s=i.findChildElement("tuplet");if(s){t.tupletNumerator=parseInt(s.getAttribute("count"));const o=s.getAttribute("tripartite")==="true"?3:1,c=s.getAttribute("prolong")==="true"?0:1;let h=0;for(;o*Math.pow(2,h+c)<t.tupletNumerator;)h++;t.tupletDenominator=o*Math.pow(2,h)}}parsePageObjects(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"drawObj":const i=this.parseDrawObj(t);if(i&&i instanceof Ew)switch(i.align){case at.Center:this.score.title?this.score.subTitle||(this.score.subTitle=t.innerText):this.score.title=t.innerText;break;case at.Right:this.score.artist||(this.score.artist=t.innerText);break}break}}parseGallery(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"drawObj":const i=this.parseDrawObj(t);i&&this._galleryObjects.set(t.getAttribute("name"),i);break}}parseDrawObj(e){let t=null,i=1;for(let n of e.childNodes)if(n.nodeType===me.Element)switch(n.localName){case"text":t=this.parseText(n);break;case"guitar":t=this.parseGuitar(n);break;case"slur":t=this.parseSlur(n);break;case"wavyLine":t=this.parseWavyLine(n);break;case"bracket":t=this.parseTupletBracket(n);break;case"wedge":t=this.parseWedge(n);break;case"volta":t=this.parseVolta(n);break;case"octaveClef":t=this.parseOctaveClef(n);break;case"trill":t=this.parseTrill(n);break;case"basic":n.attributes.has("noteRange")&&(i=parseInt(n.attributes.get("noteRange")));break}return t&&(t.noteRange=i),t}parseTrill(e){return new l8}parseOctaveClef(e){const t=new o8;return e.attributes.has("octave")&&(t.octave=parseInt(e.attributes.get("octave"))),t}parseVolta(e){const t=new Rw;return t.allNumbers=e.attributes.get("allNumbers")==="true",e.attributes.has("firstNumber")&&(t.firstNumber=parseInt(e.attributes.get("firstNumber"))),e.attributes.has("lastNumber")&&(t.lastNumber=parseInt(e.attributes.get("lastNumber"))),t}parseWedge(e){const t=new P_;return t.decrescendo=e.attributes.get("decrescendo")==="true",t}parseTupletBracket(e){const t=new a8;return e.attributes.has("number")&&(t.number=parseInt(e.attributes.get("number"))),t}parseWavyLine(e){return new N_}parseSlur(e){return new C_}parseGuitar(e){const t=new T_,i=e.innerText.trim();for(let n=0;n<i.length;n++)i.charAt(n)==="/"?t.chord.strings.push(0):t.chord.strings.push(parseInt(i.charAt(n)));return t}parseText(e){const t=new Ew;switch(e.attributes.has("x")&&(t.x=parseFloat(e.attributes.get("x"))),e.attributes.has("x")&&(t.y=parseFloat(e.attributes.get("y"))),e.getAttribute("align")){case"left":t.align=at.Left;break;case"center":t.align=at.Center;break;case"right":t.align=at.Right;break}switch(e.getAttribute("frame")){case"rectangle":t.frame=Th.Rectangle;break;case"ellipse":t.frame=Th.Ellipse;break;case"circle":t.frame=Th.Circle;break;case"none":t.frame=Th.None;break}if(e.firstElement){for(let i of e.childNodes)if(i.nodeType===me.Element)switch(i.localName){case"font":t.fontFace=i.getAttribute("face"),i.attributes.has("weight")&&(t.weight=parseInt(i.attributes.get("weight"))),i.attributes.has("height")&&(t.height=parseInt(i.attributes.get("height")));break;case"content":t.text=i.innerText;break}}else t.text=e.innerText;return t}parseInfo(e){for(let t of e.childNodes)if(t.nodeType===me.Element)switch(t.localName){case"author":this.score.tab=t.firstChild.innerText;break;case"comment":this.score.notices=t.firstChild.innerText;break}}}class d8 extends Qf{get name(){return"Capella"}constructor(){super()}readScore(){ye.debug(this.name,"Loading ZIP entries");let e=new wC(this.data),t,i=null;if(t=e.read(),ye.debug(this.name,"Zip entries loaded"),t.length>0)for(let n of t)switch(n.fileName){case"score.xml":i=de.toString(n.data,this.settings.importer.encoding);break}else this.data.reset(),i=de.toString(this.data.readAll(),this.settings.importer.encoding);if(!i)throw new Or("No valid capella file");ye.debug(this.name,"Start Parsing score.xml");try{let n=new lb;return n.parseXml(i,this.settings),ye.debug(this.name,"score.xml parsed"),n.score}catch(n){throw new Or("Failed to parse CapXML",n)}}}class f8{constructor(e){this._targets=new Set,this._callback=e,window.addEventListener("resize",this.onWindowResize.bind(this),!1)}observe(e){this._targets.add(e)}unobserve(e){this._targets.delete(e)}disconnect(){this._targets.clear()}onWindowResize(){const e=[];for(const t of this._targets)e.push({target:t,contentRect:void 0,borderBoxSize:void 0,contentBoxSize:[],devicePixelContentBoxSize:[]});this._callback(e,this)}}class p8{constructor(e){this._elements=[];let t=null;const i=this._check.bind(this);this._check=()=>{t||(t=setTimeout(()=>{i(),t=null},100))},this._callback=e,window.addEventListener("resize",this._check,!0),document.addEventListener("scroll",this._check,!0)}observe(e){this._elements.indexOf(e)>=0||(this._elements.push(e),this._check())}unobserve(e){this._elements=this._elements.filter(t=>t!=e)}_check(){const e=[];this._elements.forEach(t=>{const i=t.getBoundingClientRect();i.top+i.height>=0&&i.top<=window.innerHeight&&i.left+i.width>=0&&i.left<=window.innerWidth&&e.push({target:t,isIntersecting:!0})}),e.length&&this._callback(e,this)}}function E_(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i;if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");r.stack.push({value:e,dispose:i,async:t})}return e}var g8=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var i=new Error(t);return i.name="SuppressedError",i.error=r,i.suppressed=e,i};function R_(r){function e(i){r.error=r.hasError?new g8(i,r.error,"An error was suppressed during disposal."):i,r.hasError=!0}function t(){for(;r.stack.length;){var i=r.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(t,function(s){return e(s),t()})}catch(s){e(s)}}if(r.hasError)throw r.error}return t()}class Yi{static enable(e,t){Yi.alphaSkia=t,Yi.initializeMusicFont(Yi.alphaSkia.AlphaSkiaTypeface.register(e))}static initializeMusicFont(e){Yi.musicFont=e}static registerFont(e,t){const i=Yi.alphaSkia.AlphaSkiaTypeface.register(e.buffer);t||(t=ri.withFamilyList([i.familyName],12,i.isItalic?lr.Italic:lr.Plain,i.isBold?Ms.Bold:Ms.Regular));for(const n of t.families)this.customTypeFaces.set(Yi.customTypefaceKey(n,t.isBold,t.isItalic),i);return t}static customTypefaceKey(e,t,i){return e.toLowerCase()+"_"+t+"_"+i}getTypeFace(){if(this._typeFaceCache!=this.font.toCssString(this.settings.display.scale)){if(this._typeFaceIsSystem){const t={stack:[],error:void 0,hasError:!1};try{const i=E_(t,this._typeFace,!1)}catch(i){t.error=i,t.hasError=!0}finally{R_(t)}}for(const t of this.font.families){var e=Yi.customTypefaceKey(t,this.font.isBold,this.font.isItalic);Yi.customTypeFaces.has(e)?(this._typeFaceIsSystem=!1,this._typeFace=Yi.customTypeFaces.get(e)):(this._typeFaceIsSystem=!0,this._typeFace=Yi.alphaSkia.AlphaSkiaTypeface.create(t,this.font.isBold,this.font.isItalic))}this._typeFaceCache=this.font.toCssString(this.settings.display.scale)}return this._typeFace}constructor(){this._color=new _i(0,0,0,0),this._lineWidth=0,this._typeFaceCache="",this._typeFaceIsSystem=!1,this._typeFace=null,this.font=new ri("Arial",10,lr.Plain),this.textAlign=at.Left,this.textBaseline=It.Top,this._canvas=new Yi.alphaSkia.AlphaSkiaCanvas,this.color=new _i(0,0,0,255)}destroy(){const e={stack:[],error:void 0,hasError:!1};try{const t=E_(e,this._canvas,!1)}catch(t){e.error=t,e.hasError=!0}finally{R_(e)}}onRenderFinished(){return null}beginRender(e,t){this._canvas.beginRender(e,t,Ce.HighDpiFactor)}endRender(){return this._canvas.endRender()}get color(){return this._color}set color(e){this._color.rgba!==e.rgba&&(this._color=e,this._canvas.color=Yi.alphaSkia.AlphaSkiaCanvas.rgbaToColor(e.r,e.g,e.b,e.a))}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this._canvas.lineWidth=e}fillRect(e,t,i,n){i>0&&this._canvas.fillRect(e|0,t|0,i,n)}strokeRect(e,t,i,n){this._canvas.strokeRect(e|0,t|0,i,n)}beginPath(){this._canvas.beginPath()}closePath(){this._canvas.closePath()}moveTo(e,t){this._canvas.moveTo(e,t)}lineTo(e,t){this._canvas.lineTo(e,t)}quadraticCurveTo(e,t,i,n){this._canvas.quadraticCurveTo(e,t,i,n)}bezierCurveTo(e,t,i,n,s,o){this._canvas.bezierCurveTo(e,t,i,n,s,o)}fillCircle(e,t,i){this._canvas.fillCircle(e,t,i)}strokeCircle(e,t,i){this._canvas.strokeCircle(e,t,i)}fill(){this._canvas.fill()}stroke(){this._canvas.stroke()}beginGroup(e){}endGroup(){}fillText(e,t,i){if(e.length==0)return;let n=Yi.alphaSkia.AlphaSkiaTextAlign.Left;switch(this.textAlign){case at.Left:n=Yi.alphaSkia.AlphaSkiaTextAlign.Left;break;case at.Center:n=Yi.alphaSkia.AlphaSkiaTextAlign.Center;break;case at.Right:n=Yi.alphaSkia.AlphaSkiaTextAlign.Right;break}let s=Yi.alphaSkia.AlphaSkiaTextBaseline.Top;switch(this.textBaseline){case It.Top:s=Yi.alphaSkia.AlphaSkiaTextBaseline.Top;break;case It.Middle:s=Yi.alphaSkia.AlphaSkiaTextBaseline.Middle;break;case It.Bottom:s=Yi.alphaSkia.AlphaSkiaTextBaseline.Bottom;break}this._canvas.fillText(e,this.getTypeFace(),this.font.size*this.settings.display.scale,t,i,n,s)}measureText(e){return this._canvas.measureText(e,this.getTypeFace(),this.font.size*this.settings.display.scale)}fillMusicFontSymbol(e,t,i,n,s){n!==N.None&&this.fillMusicFontSymbolText(e,t,i,String.fromCharCode(n),s)}fillMusicFontSymbols(e,t,i,n,s){let o="";for(let c of n)c!==N.None&&(o+=String.fromCharCode(c));this.fillMusicFontSymbolText(e,t,i,o,s)}fillMusicFontSymbolText(e,t,i,n,s){this._canvas.fillText(n,Yi.musicFont,Ce.MusicFontSize*this.settings.display.scale*i,e,t,s?Yi.alphaSkia.AlphaSkiaTextAlign.Center:Yi.alphaSkia.AlphaSkiaTextAlign.Left,Yi.alphaSkia.AlphaSkiaTextBaseline.Alphabetic)}beginRotate(e,t,i){this._canvas.beginRotate(e,t,i)}endRotate(){this._canvas.endRotate()}}Yi.musicFont=null;Yi.customTypeFaces=new Map;class L_{constructor(e,t){this.vertical=e,this.createLayout=t}}class Lw{constructor(e,t){this.supportsWorkers=e,this.createCanvas=t}}class Ce{static createStyleElement(e,t){let i=e.getElementById("alphaTabStyle");if(!i){if(!t){ye.error("AlphaTab","Font directory could not be detected, cannot create style element");return}i=e.createElement("style"),i.id="alphaTabStyle";let n=`
            @font-face {
                font-family: 'alphaTab';
                 src: url('${t}Bravura.eot');
                 src: url('${t}Bravura.eot?#iefix') format('embedded-opentype')
                      , url('${t}Bravura.woff') format('woff')
                      , url('${t}Bravura.otf') format('opentype')
                      , url('${t}Bravura.svg#Bravura') format('svg');
                 font-weight: normal;
                 font-style: normal;
            }
            .at-surface * {
                cursor: default;
                vertical-align: top;
                overflow: visible;
            }
            .at-surface-svg text {
                dominant-baseline: central;
            }             
            .at {
                 font-family: 'alphaTab';
                 speak: none;
                 font-style: normal;
                 font-weight: normal;
                 font-variant: normal;
                 text-transform: none;
                 line-height: 1;
                 line-height: 1;
                 -webkit-font-smoothing: antialiased;
                 -moz-osx-font-smoothing: grayscale;
                 font-size: ${Ce.MusicFontSize}px;
                 overflow: visible !important;
            }`;i.innerHTML=n,e.getElementsByTagName("head").item(0).appendChild(i),Ce.bravuraFontChecker.checkForFontAvailability()}}static get globalThis(){if(Ce._globalThis===void 0){try{Ce._globalThis=globalThis}catch{}typeof Ce._globalThis>"u"&&(Ce._globalThis=self),typeof Ce._globalThis>"u"&&(Ce._globalThis=global),typeof Ce._globalThis>"u"&&(Ce._globalThis=window),typeof Ce._globalThis>"u"&&(Ce._globalThis=Function("return this")())}return this._globalThis}static get isRunningInWorker(){return"WorkerGlobalScope"in Ce.globalThis}static get isRunningInAudioWorklet(){return"AudioWorkletGlobalScope"in Ce.globalThis}static throttle(e,t){let i=0;return()=>{Ce.globalThis.clearTimeout(i),i=Ce.globalThis.setTimeout(e,t)}}static detectScriptFile(){if(!Ce.isRunningInWorker&&Ce.globalThis.ALPHATAB_ROOT){let e=Ce.globalThis.ALPHATAB_ROOT;return e=Ce.ensureFullUrl(e),e=Ce.appendScriptName(e),e}try{const e=import.meta.url;if(e&&e.indexOf("file://")===-1)return e}catch{}return"document"in Ce.globalThis&&document.currentScript?document.currentScript.src:null}static ensureFullUrl(e){var t,i,n;if(!e)return"";if(!e.startsWith("http")&&!e.startsWith("https")&&!e.startsWith("file")){let s="",o=Ce.globalThis.location;if(s+=(t=o.protocol)==null?void 0:t.toString(),s+="//",o.hostname&&(s+=(i=o.hostname)==null?void 0:i.toString()),o.port&&(s+=":",s+=(n=o.port)==null?void 0:n.toString()),!e.startsWith("/")){let c=o.pathname.split("/").slice(0,-1).join("/");c.length>0&&(c.startsWith("/")||(s+="/"),s+=c==null?void 0:c.toString())}return e.startsWith("/")||(s+="/"),s+=e==null?void 0:e.toString(),s}return e}static appendScriptName(e){return e&&!e.endsWith(".js")&&(e.endsWith("/")||(e+="/"),e+="alphaTab.js"),e}static detectFontDirectory(){if(!Ce.isRunningInWorker&&Ce.globalThis.ALPHATAB_FONT)return Ce.ensureFullUrl(Ce.globalThis.ALPHATAB_FONT);const e=Ce.scriptFile;if(e){let t=e.lastIndexOf("/");if(t>=0)return e.substr(0,t)+"/font/"}return null}static registerJQueryPlugin(){if(!Ce.isRunningInWorker&&Ce.globalThis&&"jQuery"in Ce.globalThis){let e=Ce.globalThis.jQuery,t=new h_;e.fn.alphaTab=function(i){const n=Array.prototype.slice.call(arguments,1);return this.length===1?t.exec(this[0],i,n):this.each((s,o)=>{t.exec(o,i,n)})},e.alphaTab={restore:h_.restore},e.fn.alphaTab.fn=t}}static getRenderEngineFactory(e){return!e||!Ce.renderEngines.has(e)?Ce.renderEngines.get("default"):Ce.renderEngines.get(e)}static getLayoutEngineFactory(e){return!e||!Ce.layoutEngines.has(e)?Ce.layoutEngines.get(ru.Page):Ce.layoutEngines.get(e)}static buildImporters(){return[new rl,new Fz,new Lz,new Oz,new d8,new Un]}static createDefaultRenderEngines(){const e=new Map;return e.set("svg",new Lw(!0,()=>new dW)),e.set("default",e.get("svg")),e.set("skia",new Lw(!1,()=>new Yi)),Ce.createPlatformSpecificRenderEngines(e),e}static enableAlphaSkia(e,t){Yi.enable(e,t)}static registerAlphaSkiaCustomFont(e,t){return Yi.registerFont(e,t)}static createPlatformSpecificRenderEngines(e){e.set("html5",new Lw(!1,()=>new qz))}static createDefaultStaveProfiles(){const e=new Map;e.set(Os.ScoreTab,[new nc("score-effects",[new Tw,new Nw,new Sw,new Cw,new bw,new ww,new v_,new E0,new C0(!0),new R0,new N0,new L0,new P0,new F0,new yw]),new __,new nc("tab-effects",[new g_,new C0(!1),new m_,new T0,new E0,new R0,new N0,new L0,new P0,new b_,new vw,new na(Ze.Natural),new na(Ze.Artificial),new na(Ze.Pinch),new na(Ze.Tap),new na(Ze.Semi),new na(Ze.Feedback),new xw,new p_,new y_,new kw,new Bw,new _w,new F0]),new Pw(!1,!1,!1)]),e.set(Os.Score,[new nc("score-effects",[new Tw,new Nw,new Sw,new Cw,new bw,new ww,new v_,new E0,new C0(!0),new R0,new N0,new L0,new P0,new vw,new xw,new kw,new Bw,new _w,new F0,new yw]),new __,new nc("score-bottom-effects",[new g_,new C0(!1),new m_,new T0])]);let t=[new Tw,new Nw,new Sw,new Cw,new bw,new ww,new E0,new R0,new N0,new L0,new P0,new b_,new vw,new na(Ze.Artificial),new na(Ze.Pinch),new na(Ze.Tap),new na(Ze.Semi),new na(Ze.Feedback),new xw,new p_,new y_,new kw,new Bw,new _w,new F0,new yw];return e.set(Os.Tab,[new nc("tab-effects",t),new Pw(!0,!0,!0),new nc("tab-bottom-effects",[new T0])]),e.set(Os.TabMixed,[new nc("tab-effects",t),new Pw(!1,!1,!1),new nc("tab-bottom-effects",[new T0])]),e}static createDefaultLayoutEngines(){const e=new Map;return e.set(ru.Page,new L_(!0,t=>new Pm(t))),e.set(ru.Horizontal,new L_(!1,t=>new Nm(t))),e}static initializeMain(e,t){Ce.isRunningInWorker||Ce.isRunningInAudioWorklet||((Ce.webPlatform===la.Browser||Ce.webPlatform===la.BrowserModule)&&(Ce.registerJQueryPlugin(),Ce.HighDpiFactor=window.devicePixelRatio,"ResizeObserver"in Ce.globalThis||(Ce.globalThis.ResizeObserver=f8),"IntersectionObserver"in Ce.globalThis||(Ce.globalThis.IntersectionObserver=p8),"replaceChildren"in Element.prototype||(Element.prototype.replaceChildren=function(...i){this.innerHTML="",this.append(...i)},Document.prototype.replaceChildren=Element.prototype.replaceChildren,DocumentFragment.prototype.replaceChildren=Element.prototype.replaceChildren),"replaceAll"in String.prototype||(String.prototype.replaceAll=function(i,n){return this.replace(new RegExp(i,"g"),n)})),Ce.createWebWorker=e,Ce.createAudioWorklet=t)}static get alphaTabWorker(){return this.globalThis.Worker}static initializeWorker(){if(!Ce.isRunningInWorker)throw new sn(nn.General,"Not running in worker, cannot run worker initialization");lS.init(),aS.init(),Ce.createWebWorker=e=>{throw new sn(nn.General,"Nested workers are not supported")}}static initializeAudioWorklet(){if(!Ce.isRunningInAudioWorklet)throw new sn(nn.General,"Not running in audio worklet, cannot run worklet initialization");hm.init()}static detectWebPack(){try{if(typeof __webpack_require__=="function")return!0}catch{}return!1}static detectVite(){try{if(typeof __BASE__=="string")return!0}catch{}return!1}static detectWebPlatform(){try{if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return la.NodeJs}catch{}try{const e=import.meta.url;if(e&&typeof e=="string"&&!e.startsWith("file://"))return la.BrowserModule}catch{}return la.Browser}}Ce.MusicFontSize=34;Ce.HighDpiFactor=1;Ce._globalThis=void 0;Ce.webPlatform=Ce.detectWebPlatform();Ce.isWebPackBundled=Ce.detectWebPack();Ce.isViteBundled=Ce.detectVite();Ce.scriptFile=Ce.detectScriptFile();Ce.fontDirectory=Ce.detectFontDirectory();Ce.bravuraFontChecker=new GC(["alphaTab"]);Ce.renderEngines=Ce.createDefaultRenderEngines();Ce.layoutEngines=Ce.createDefaultLayoutEngines();Ce.staveProfiles=Ce.createDefaultStaveProfiles();class i2{constructor(){this.scriptFile=null,this.fontDirectory=null,this.file=null,this.tex=!1,this.tracks=null,this.enableLazyLoading=!0,this.engine="default",this.logLevel=Fa.Info,this.useWorkers=!0,this.includeNoteBounds=!1,this.scriptFile=Ce.scriptFile,this.fontDirectory=Ce.fontDirectory}}var be;(function(r){r[r.SteelGuitar=1]="SteelGuitar",r[r.AcousticGuitar=2]="AcousticGuitar",r[r.TwelveStringGuitar=3]="TwelveStringGuitar",r[r.ElectricGuitar=4]="ElectricGuitar",r[r.Bass=5]="Bass",r[r.ClassicalGuitar=23]="ClassicalGuitar",r[r.UprightBass=6]="UprightBass",r[r.Ukulele=7]="Ukulele",r[r.Banjo=8]="Banjo",r[r.Mandolin=9]="Mandolin",r[r.Piano=10]="Piano",r[r.Synth=12]="Synth",r[r.Strings=11]="Strings",r[r.Brass=13]="Brass",r[r.Reed=14]="Reed",r[r.Woodwind=15]="Woodwind",r[r.Vocal=16]="Vocal",r[r.PitchedIdiophone=17]="PitchedIdiophone",r[r.Fx=21]="Fx",r[r.PercussionKit=18]="PercussionKit",r[r.Idiophone=19]="Idiophone",r[r.Membraphone=20]="Membraphone"})(be||(be={}));class we{constructor(e,t,i=null){if(this.icon=be.Piano,this.icon=e,this.instrumentSetName=t,i)this.instrumentSetType=i;else{const n=t.split(" ");n[0]=n[0].substr(0,1).toLowerCase()+n[0].substr(1),this.instrumentSetType=n.join("")}}}new we(be.Piano,"Acoustic Piano"),new we(be.Piano,"Acoustic Piano"),new we(be.Piano,"Electric Piano"),new we(be.Piano,"Acoustic Piano"),new we(be.Piano,"Electric Piano"),new we(be.Piano,"Electric Piano"),new we(be.Piano,"Harpsichord"),new we(be.Piano,"Harpsichord"),new we(be.PitchedIdiophone,"Celesta"),new we(be.PitchedIdiophone,"Vibraphone"),new we(be.PitchedIdiophone,"Vibraphone"),new we(be.PitchedIdiophone,"Vibraphone"),new we(be.PitchedIdiophone,"Xylophone"),new we(be.PitchedIdiophone,"Xylophone"),new we(be.PitchedIdiophone,"Vibraphone"),new we(be.Banjo,"Banjo"),new we(be.Piano,"Electric Organ"),new we(be.Piano,"Electric Organ"),new we(be.Piano,"Electric Organ"),new we(be.Piano,"Electric Organ"),new we(be.Piano,"Electric Organ"),new we(be.Piano,"Electric Organ"),new we(be.Woodwind,"Recorder"),new we(be.Piano,"Electric Organ"),new we(be.ClassicalGuitar,"Nylon Guitar"),new we(be.SteelGuitar,"Steel Guitar"),new we(be.SteelGuitar,"Electric Guitar"),new we(be.ElectricGuitar,"Electric Guitar"),new we(be.ElectricGuitar,"Electric Guitar"),new we(be.ElectricGuitar,"Electric Guitar"),new we(be.SteelGuitar,"Electric Guitar"),new we(be.SteelGuitar,"Electric Guitar"),new we(be.Bass,"Acoustic Bass"),new we(be.Bass,"Electric Bass"),new we(be.Bass,"Electric Bass"),new we(be.Bass,"Acoustic Bass"),new we(be.Bass,"Electric Bass"),new we(be.Bass,"Electric Bass"),new we(be.Synth,"Synth Bass"),new we(be.Synth,"Synth Bass"),new we(be.Strings,"Violin"),new we(be.Strings,"Viola"),new we(be.Strings,"Cello"),new we(be.Strings,"Contrabass"),new we(be.Strings,"Violin"),new we(be.Strings,"Violin"),new we(be.Piano,"Harp"),new we(be.Membraphone,"Timpani"),new we(be.Strings,"Violin"),new we(be.Strings,"Violin"),new we(be.Strings,"Violin"),new we(be.Strings,"Violin"),new we(be.Vocal,"Voice"),new we(be.Vocal,"Voice"),new we(be.Vocal,"Voice"),new we(be.Synth,"Pad Synthesizer"),new we(be.Brass,"Trumpet"),new we(be.Brass,"Trombone"),new we(be.Brass,"Tuba"),new we(be.Brass,"Trumpet"),new we(be.Brass,"French Horn"),new we(be.Brass,"Trumpet"),new we(be.Brass,"Trumpet"),new we(be.Brass,"Trumpet"),new we(be.Reed,"Saxophone"),new we(be.Reed,"Saxophone"),new we(be.Reed,"Saxophone"),new we(be.Reed,"Saxophone"),new we(be.Reed,"Oboe"),new we(be.Reed,"English Horn"),new we(be.Reed,"Bassoon"),new we(be.Reed,"Clarinet"),new we(be.Reed,"Piccolo"),new we(be.Woodwind,"Flute"),new we(be.Woodwind,"Recorder"),new we(be.Woodwind,"Flute"),new we(be.Woodwind,"Recorder"),new we(be.Woodwind,"Flute"),new we(be.Woodwind,"Recorder"),new we(be.Woodwind,"Flute"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Lead Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Synth,"Pad Synthesizer"),new we(be.Fx,"Pad Synthesizer"),new we(be.Fx,"Pad Synthesizer"),new we(be.Fx,"Pad Synthesizer"),new we(be.Fx,"Pad Synthesizer"),new we(be.Fx,"Lead Synthesizer"),new we(be.Fx,"Lead Synthesizer"),new we(be.Fx,"Lead Synthesizer"),new we(be.Fx,"Trumpet"),new we(be.ElectricGuitar,"Banjo"),new we(be.Banjo,"Banjo"),new we(be.Ukulele,"Ukulele"),new we(be.Banjo,"Banjo"),new we(be.PitchedIdiophone,"Xylophone"),new we(be.Reed,"Bassoon"),new we(be.Strings,"Violin"),new we(be.Woodwind,"Flute"),new we(be.PitchedIdiophone,"Xylophone"),new we(be.Idiophone,"Celesta"),new we(be.PitchedIdiophone,"Vibraphone"),new we(be.Idiophone,"Xylophone"),new we(be.Membraphone,"Xylophone"),new we(be.Membraphone,"Xylophone"),new we(be.Membraphone,"Xylophone"),new we(be.Idiophone,"Celesta"),new we(be.Fx,"Steel Guitar"),new we(be.Fx,"Recorder"),new we(be.Fx,"Recorder"),new we(be.Fx,"Recorder"),new we(be.Fx,"Recorder"),new we(be.Fx,"Recorder"),new we(be.Fx,"Recorder"),new we(be.Fx,"Timpani");new we(be.PercussionKit,"Drums","drumKit");class Eh{static buildCrc32Lookup(){const t=new Uint32Array(256);for(let i=0;i<t.length;i++){let n=i;for(let s=0;s<8;s++)n=(n&1)===1?n>>>1^3988292384:n>>>1;t[i]=n}return t}get value(){return~this._checkValue}constructor(){this._checkValue=Eh.CrcInit,this.reset()}update(e,t,i){for(let n=0;n<i;n++)this._checkValue=Eh.Crc32Lookup[(this._checkValue^e[t+n])&255]^this._checkValue>>>8}reset(){this._checkValue=Eh.CrcInit}}Eh.Crc32Lookup=Eh.buildCrc32Lookup();Eh.CrcInit=4294967295;class cr{}cr.MAX_WBITS=15;cr.WSIZE=1<<cr.MAX_WBITS;cr.WMASK=cr.WSIZE-1;cr.MIN_MATCH=3;cr.MAX_MATCH=258;cr.DEFAULT_MEM_LEVEL=8;cr.PENDING_BUF_SIZE=1<<cr.DEFAULT_MEM_LEVEL+8;cr.HASH_BITS=cr.DEFAULT_MEM_LEVEL+7;cr.HASH_SIZE=1<<cr.HASH_BITS;cr.HASH_SHIFT=(cr.HASH_BITS+cr.MIN_MATCH-1)/cr.MIN_MATCH;cr.HASH_MASK=cr.HASH_SIZE-1;cr.MIN_LOOKAHEAD=cr.MAX_MATCH+cr.MIN_MATCH+1;cr.MAX_DIST=cr.WSIZE-cr.MIN_LOOKAHEAD;class oa{constructor(e,t,i,n){this.length=null,this.numCodes=0,this.codes=null,this.huffman=e,this.minNumCodes=i,this.maxLength=n,this.freqs=new Int16Array(t),this.bitLengthCounts=new Int32Array(n)}reset(){for(let e=0;e<this.freqs.length;e++)this.freqs[e]=0;this.codes=null,this.length=null}buildTree(){let e=this.freqs.length,t=new Int32Array(e),i=0,n=0;for(let p=0;p<e;p++){let g=this.freqs[p];if(g!==0){let b=i++;for(;b>0;){let v=Math.floor((b-1)/2);if(this.freqs[t[v]]>g)t[b]=t[v],b=v;else break}t[b]=p,n=p}}for(;i<2;){let p=n<2?++n:0;t[i++]=p}this.numCodes=Math.max(n+1,this.minNumCodes);let s=i,o=new Int32Array(4*i-2),c=new Int32Array(2*i-1),h=s;for(let p=0;p<i;p++){let g=t[p];o[2*p]=g,o[2*p+1]=-1,c[p]=this.freqs[g]<<8,t[p]=p}do{let p=t[0],g=t[--i],b=0,v=1;for(;v<i;)v+1<i&&c[t[v]]>c[t[v+1]]&&v++,t[b]=t[v],b=v,v=v*2+1;let S=c[g];for(;v=b,b>0;)if(b=Math.floor((v-1)/2),c[t[b]]>S)t[v]=t[b];else break;t[v]=g;let B=t[0];g=h++,o[2*g]=p,o[2*g+1]=B;let T=Math.min(c[p]&255,c[B]&255);for(S=c[p]+c[B]-T+1,c[g]=S,b=0,v=1;v<i;)v+1<i&&c[t[v]]>c[t[v+1]]&&v++,t[b]=t[v],b=v,v=b*2+1;for(;v=b,v>0;)if(b=Math.floor((v-1)/2),c[t[b]]>S)t[v]=t[b];else break;t[v]=g}while(i>1);this.buildLength(o)}buildLength(e){this.length=new Uint8Array(this.freqs.length);let t=Math.floor(e.length/2),i=Math.floor((t+1)/2),n=0;for(let h=0;h<this.maxLength;h++)this.bitLengthCounts[h]=0;let s=new Int32Array(t);s[t-1]=0;for(let h=t-1;h>=0;h--)if(e[2*h+1]!=-1){let p=s[h]+1;p>this.maxLength&&(p=this.maxLength,n++),s[e[2*h]]=p,s[e[2*h+1]]=p}else{let p=s[h];this.bitLengthCounts[p-1]++,this.length[e[2*h]]=s[h]}if(n==0)return;let o=this.maxLength-1;do{for(;this.bitLengthCounts[--o]==0;);do this.bitLengthCounts[o]--,this.bitLengthCounts[++o]++,n-=1<<this.maxLength-1-o;while(n>0&&o<this.maxLength-1)}while(n>0);this.bitLengthCounts[this.maxLength-1]+=n,this.bitLengthCounts[this.maxLength-2]-=n;let c=2*i;for(let h=this.maxLength;h!=0;h--){let p=this.bitLengthCounts[h-1];for(;p>0;){let g=2*e[c++];e[g+1]==-1&&(this.length[e[g]]=h,p--)}}}getEncodedLength(){let e=0;for(let t=0;t<this.freqs.length;t++)e+=this.freqs[t]*this.length[t];return e}calcBLFreq(e){let t,i,n,s=-1,o=0;for(;o<this.numCodes;){n=1;let c=this.length[o];for(c==0?(t=138,i=3):(t=6,i=3,s!=c&&(e.freqs[c]++,n=0)),s=c,o++;o<this.numCodes&&s==this.length[o]&&(o++,!(++n>=t)););n<i?e.freqs[s]+=n:s!=0?e.freqs[oa.Repeat3To6]++:n<=10?e.freqs[oa.Repeat3To10]++:e.freqs[oa.Repeat11To138]++}}setStaticCodes(e,t){this.codes=e,this.length=t}buildCodes(){let e=new Int32Array(this.maxLength),t=0;this.codes=new Int16Array(this.freqs.length);for(let i=0;i<this.maxLength;i++)e[i]=t,t+=this.bitLengthCounts[i]<<15-i;for(let i=0;i<this.numCodes;i++){let n=this.length[i];n>0&&(this.codes[i]=dt.bitReverse(e[n-1]),e[n-1]+=1<<16-n)}}writeTree(e){let t,i,n,s=-1,o=0;for(;o<this.numCodes;){n=1;let c=this.length[o];for(c==0?(t=138,i=3):(t=6,i=3,s!=c&&(e.writeSymbol(c),n=0)),s=c,o++;o<this.numCodes&&s==this.length[o]&&(o++,!(++n>=t)););if(n<i)for(;n-- >0;)e.writeSymbol(s);else s!=0?(e.writeSymbol(oa.Repeat3To6),this.huffman.pending.writeBits(n-3,2)):n<=10?(e.writeSymbol(oa.Repeat3To10),this.huffman.pending.writeBits(n-3,3)):(e.writeSymbol(oa.Repeat11To138),this.huffman.pending.writeBits(n-11,7))}}writeSymbol(e){this.huffman.pending.writeBits(this.codes[e]&65535,this.length[e])}}oa.Repeat3To6=16;oa.Repeat3To10=17;oa.Repeat11To138=18;class dt{static staticInit(){let e=0;for(;e<144;)dt.staticLCodes[e]=dt.bitReverse(48+e<<8),dt.staticLLength[e++]=8;for(;e<256;)dt.staticLCodes[e]=dt.bitReverse(256+e<<7),dt.staticLLength[e++]=9;for(;e<280;)dt.staticLCodes[e]=dt.bitReverse(-256+e<<9),dt.staticLLength[e++]=7;for(;e<dt.LITERAL_NUM;)dt.staticLCodes[e]=dt.bitReverse(-88+e<<8),dt.staticLLength[e++]=8;for(e=0;e<dt.DIST_NUM;e++)dt.staticDCodes[e]=dt.bitReverse(e<<11),dt.staticDLength[e]=5}static bitReverse(e){return dt.bit4Reverse[e&15]<<12|dt.bit4Reverse[e>>4&15]<<8|dt.bit4Reverse[e>>8&15]<<4|dt.bit4Reverse[e>>12]}constructor(e){this.last_lit=0,this.extra_bits=0,this.pending=e,this.literalTree=new oa(this,dt.LITERAL_NUM,257,15),this.distTree=new oa(this,dt.DIST_NUM,1,15),this.blTree=new oa(this,dt.BITLEN_NUM,4,7),this.d_buf=new Int16Array(dt.BUFSIZE),this.l_buf=new Uint8Array(dt.BUFSIZE)}isFull(){return this.last_lit>=dt.BUFSIZE}reset(){this.last_lit=0,this.extra_bits=0,this.literalTree.reset(),this.distTree.reset(),this.blTree.reset()}flushStoredBlock(e,t,i,n){this.pending.writeBits((dt.STORED_BLOCK<<1)+(n?1:0),3),this.pending.alignToByte(),this.pending.writeShort(i),this.pending.writeShort(~i),this.pending.writeBlock(e,t,i),this.reset()}flushBlock(e,t,i,n){this.literalTree.freqs[dt.EOF_SYMBOL]++,this.literalTree.buildTree(),this.distTree.buildTree(),this.literalTree.calcBLFreq(this.blTree),this.distTree.calcBLFreq(this.blTree),this.blTree.buildTree();let s=4;for(let h=18;h>s;h--)this.blTree.length[dt.BL_ORDER[h]]>0&&(s=h+1);let o=14+s*3+this.blTree.getEncodedLength()+this.literalTree.getEncodedLength()+this.distTree.getEncodedLength()+this.extra_bits,c=this.extra_bits;for(let h=0;h<dt.LITERAL_NUM;h++)c+=this.literalTree.freqs[h]*dt.staticLLength[h];for(let h=0;h<dt.DIST_NUM;h++)c+=this.distTree.freqs[h]*dt.staticDLength[h];o>=c&&(o=c),t>=0&&i+4<o>>3?this.flushStoredBlock(e,t,i,n):o==c?(this.pending.writeBits((dt.STATIC_TREES<<1)+(n?1:0),3),this.literalTree.setStaticCodes(dt.staticLCodes,dt.staticLLength),this.distTree.setStaticCodes(dt.staticDCodes,dt.staticDLength),this.compressBlock(),this.reset()):(this.pending.writeBits((dt.DYN_TREES<<1)+(n?1:0),3),this.sendAllTrees(s),this.compressBlock(),this.reset())}sendAllTrees(e){this.blTree.buildCodes(),this.literalTree.buildCodes(),this.distTree.buildCodes(),this.pending.writeBits(this.literalTree.numCodes-257,5),this.pending.writeBits(this.distTree.numCodes-1,5),this.pending.writeBits(e-4,4);for(let t=0;t<e;t++)this.pending.writeBits(this.blTree.length[dt.BL_ORDER[t]],3);this.literalTree.writeTree(this.blTree),this.distTree.writeTree(this.blTree)}compressBlock(){for(let e=0;e<this.last_lit;e++){let t=this.l_buf[e]&255,i=this.d_buf[e];if(i--!=0){let n=dt.Lcode(t);this.literalTree.writeSymbol(n);let s=Math.floor((n-261)/4);s>0&&s<=5&&this.pending.writeBits(t&(1<<s)-1,s);let o=dt.Dcode(i);this.distTree.writeSymbol(o),s=Math.floor(o/2)-1,s>0&&this.pending.writeBits(i&(1<<s)-1,s)}else this.literalTree.writeSymbol(t)}this.literalTree.writeSymbol(dt.EOF_SYMBOL)}tallyDist(e,t){this.d_buf[this.last_lit]=e,this.l_buf[this.last_lit++]=t-3;let i=dt.Lcode(t-3);this.literalTree.freqs[i]++,i>=265&&i<285&&(this.extra_bits+=Math.floor((i-261)/4));let n=dt.Dcode(e-1);return this.distTree.freqs[n]++,n>=4&&(this.extra_bits+=Math.floor(n/2)-1),this.isFull()}tallyLit(e){return this.d_buf[this.last_lit]=0,this.l_buf[this.last_lit++]=e,this.literalTree.freqs[e]++,this.isFull()}static Lcode(e){if(e==255)return 285;let t=257;for(;e>=8;)t+=4,e=e>>1;return t+e}static Dcode(e){let t=0;for(;e>=4;)t+=2,e=e>>1;return t+e}}dt.BUFSIZE=1<<cr.DEFAULT_MEM_LEVEL+6;dt.LITERAL_NUM=286;dt.STORED_BLOCK=0;dt.STATIC_TREES=1;dt.DYN_TREES=2;dt.DIST_NUM=30;dt.staticLCodes=new Int16Array(dt.LITERAL_NUM);dt.staticLLength=new Uint8Array(dt.LITERAL_NUM);dt.staticDCodes=new Int16Array(dt.DIST_NUM);dt.staticDLength=new Uint8Array(dt.DIST_NUM);dt.BL_ORDER=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];dt.bit4Reverse=new Uint8Array([0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]);dt.BITLEN_NUM=19;dt.EOF_SYMBOL=256;dt.staticInit();Ce.isRunningInWorker?Ce.initializeWorker():Ce.isRunningInAudioWorklet?Ce.initializeAudioWorklet():Ce.initializeMain(r=>{if(Ce.webPlatform==la.NodeJs)throw new sn(nn.General,"Workers not yet supported in Node.js");if(Ce.webPlatform==la.BrowserModule||Ce.isWebPackBundled||Ce.isViteBundled)return ye.debug("AlphaTab","Creating webworker"),new Ce.alphaTabWorker(new URL("data:text/javascript;base64,LyoqCiAqIGFscGhhVGFiIHYxLjMuMSAoLCBidWlsZCAxMSkKICogCiAqIENvcHlyaWdodCDCqSAyMDI0LCBEYW5pZWwgS3VzY2hueSBhbmQgQ29udHJpYnV0b3JzLCBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiAqIAogKiBTb3VuZEZvbnQgbG9hZGluZyBhbmQgQXVkaW8gU3ludGhlc2lzIGJhc2VkIG9uIFRpbnlTb3VuZEZvbnQgKGxpY2Vuc2VkIHVuZGVyIE1JVCkKICogQ29weXJpZ2h0IChDKSAyMDE3LCAyMDE4IEJlcm5oYXJkIFNjaGVsbGluZyAoaHR0cHM6Ly9naXRodWIuY29tL3NjaGVsbGluZ2IvVGlueVNvdW5kRm9udCkKICogCiAqIFRpbnlTb3VuZEZvbnQgaXMgYmFzZWQgb24gU0ZaZXJvIChsaWNlbnNlZCB1bmRlciBNSVQpCiAqIENvcHlyaWdodCAoQykgMjAxMiBTdGV2ZSBGb2x0YSAoaHR0cHM6Ly9naXRodWIuY29tL3N0ZXZlZm9sdGEvU0ZaZXJvKQogKi8KCmltcG9ydCAqIGFzIGFscGhhVGFiIGZyb20gJy4vYWxwaGFUYWIuY29yZS5tanMnOwoKLyoqQHRhcmdldCB3ZWIgKi8KYWxwaGFUYWIuRW52aXJvbm1lbnQuaW5pdGlhbGl6ZVdvcmtlcigpOwovLyMgc291cmNlTWFwcGluZ1VSTD1hbHBoYVRhYi53b3JrZXIubWpzLm1hcAo=",import.meta.url),{type:"module"});if(!r.core.scriptFile)throw new sn(nn.General,"Could not detect alphaTab script file, cannot initialize renderer");try{ye.debug("AlphaTab","Creating Blob worker");const e=`importScripts('${r.core.scriptFile}')`,t=new Blob([e]);return new Worker(URL.createObjectURL(t))}catch{return ye.warning("Rendering","Could not create inline worker, fallback to normal worker"),new Worker(r.core.scriptFile)}},(r,e)=>{if(Ce.webPlatform==la.NodeJs)throw new sn(nn.General,"Audio Worklets not yet supported in Node.js");return Ce.webPlatform==la.BrowserModule||Ce.isWebPackBundled||Ce.isViteBundled?(ye.debug("AlphaTab","Creating Module worklet"),r.audioWorklet.addModule(new URL("data:text/javascript;base64,LyoqCiAqIGFscGhhVGFiIHYxLjMuMSAoLCBidWlsZCAxMSkKICogCiAqIENvcHlyaWdodCDCqSAyMDI0LCBEYW5pZWwgS3VzY2hueSBhbmQgQ29udHJpYnV0b3JzLCBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiAqIAogKiBTb3VuZEZvbnQgbG9hZGluZyBhbmQgQXVkaW8gU3ludGhlc2lzIGJhc2VkIG9uIFRpbnlTb3VuZEZvbnQgKGxpY2Vuc2VkIHVuZGVyIE1JVCkKICogQ29weXJpZ2h0IChDKSAyMDE3LCAyMDE4IEJlcm5oYXJkIFNjaGVsbGluZyAoaHR0cHM6Ly9naXRodWIuY29tL3NjaGVsbGluZ2IvVGlueVNvdW5kRm9udCkKICogCiAqIFRpbnlTb3VuZEZvbnQgaXMgYmFzZWQgb24gU0ZaZXJvIChsaWNlbnNlZCB1bmRlciBNSVQpCiAqIENvcHlyaWdodCAoQykgMjAxMiBTdGV2ZSBGb2x0YSAoaHR0cHM6Ly9naXRodWIuY29tL3N0ZXZlZm9sdGEvU0ZaZXJvKQogKi8KCmltcG9ydCAqIGFzIGFscGhhVGFiIGZyb20gJy4vYWxwaGFUYWIuY29yZS5tanMnOwoKLyoqQHRhcmdldCB3ZWIgKi8KYWxwaGFUYWIuRW52aXJvbm1lbnQuaW5pdGlhbGl6ZUF1ZGlvV29ya2xldCgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1hbHBoYVRhYi53b3JrbGV0Lm1qcy5tYXAK",import.meta.url))):(ye.debug("AlphaTab","Creating Script worklet"),r.audioWorklet.addModule(e.core.scriptFile))});const m8=He("div")`
  overflow-y: auto;
  position: absolute;
  top: 96px;
  left: 120px;
  right: 0;
  bottom: 0;
  padding-right: 20px;

  /* These elements are created by AlphaTab */
  .at-cursor-bar {
    /* Defines the color of the bar background when a bar is played */
    background: rgba(255, 242, 0, 0.25);
  }

  .at-selection div {
    /* Defines the color of the selection background */
    background: rgba(64, 64, 255, 0.2);
  }

  .at-cursor-beat {
    /* Defines the beat cursor */
    background: rgba(64, 64, 255, 0.75);
    width: 3px;
  }
  ${r=>r.theme.palette.mode==="dark"?`
  fill: white;
  background-color: black;
  & rect {
      fill: white;
  }
  & text {
      fill: white;
  }
  & path {
      fill: white;
      stroke: white;
  }
  `:""}
`;function y8(r){return F.useEffect(()=>{const e=document.getElementById("alphaTab"),t={player:{enablePlayer:!0,enableCursor:!0,enableUserInteraction:!0,soundFont:"./alphatab/soundfont/sonivox.sf2",scrollElement:document.getElementById("alphatab-container")},core:{file:"samples/simple-2.gp",includeNoteBounds:!0,logLevel:Fa.Info}},i=new alphaTab.AlphaTabApi(e,t);return r.playerStateChanged&&i.playerStateChanged.on(r.playerStateChanged),r.renderFinished&&i.renderFinished.on(r.renderFinished),r.apiReady&&r.apiReady(i),function(){r.playerStateChanged&&i.playerStateChanged.off(r.playerStateChanged),r.renderFinished&&i.renderFinished.off(r.renderFinished),i.destroy()}},[]),w.jsx(m8,{id:"alphatab-container",children:w.jsx("div",{id:"alphaTab",children:r.children})})}function b8(r){const e=lt(r);return w.jsxs("svg",{id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),children:[w.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),w.jsx("path",{fill:e,d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"})]})}function v8(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Edit"),children:w.jsxs("svg",{id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})]})})}function w8(r){const e=lt(r),{t}=Tt();return w.jsx(xt,{title:t("Delete"),children:w.jsxs("svg",{id:r.id,height:"24px",viewBox:"0 0 24 24",width:"24px",onClick:r.onClick,xmlns:"http://www.w3.org/2000/svg",style:ut(r),fill:e,children:[w.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]})})}const x8=He(eT)(({theme:r})=>({color:r.palette.mode==="dark"?"white":"black"}));function S8({isSelected:r,onSelect:e,onEdit:t,track:i,isExpanded:n,canDelete:s,onExpand:o,onRemove:c}){const h=n?b8:Jx;return w.jsxs(w.Fragment,{children:[w.jsx(ZB,{selected:r,onClick:e,disablePadding:!0,children:w.jsxs(QB,{children:[w.jsx(x8,{children:i.shortName||i.name||"Unamed"}),w.jsx(h,{onClick:()=>{o(!n)},extraSvgStyles:{flexShrink:0},selected:!1,disabled:!1})]})}),w.jsx(GB,{in:n,children:w.jsxs("div",{style:{paddingLeft:"16px",display:"flex",gap:"10px"},children:[w.jsx(v8,{disabled:!1,selected:!1,onClick:t}),w.jsx(w8,{disabled:!s,selected:!1,onClick:s?c:void 0})]})})]})}function k8(r){const[e,t]=F.useState(null);return w.jsx(Yx,{style:{width:"100%"},disablePadding:!0,children:r.tracks.map((i,n)=>w.jsx(S8,{isExpanded:n===e,canDelete:r.tracks.length>1,onExpand:s=>{t(s?n:null)},track:i,isSelected:r.selectedTrackIndex===n,onSelect:()=>{r.onTrackSelected(r.tracks[n])},onEdit:()=>r.onTrackEdit(i),onRemove:()=>r.onTrackRemove(i)},i.index))})}const I_=alphaTab.model.Tuning._sixStrings,F_=alphaTab.model.Tuning._defaultTunings.get(6);function _8(r){const[e,t]=F.useState(""),[i,n]=F.useState(0),[s,o]=F.useState(F_),{t:c}=Tt();F.useEffect(()=>{var v,S,B;const b=(v=r.currentTrack)==null?void 0:v.staves[0].stringTuning;b&&o(I_.find(T=>T.name===b.name)??F_),t(((S=r.currentTrack)==null?void 0:S.shortName)??c("New Track")),n(((B=r.currentTrack)==null?void 0:B.staves[0].capo)??0)},[r.currentTrack]);const h=b=>{t(b.target.value)},p=b=>{o(b.target.value)},g=b=>{n(Number.parseInt(b.target.value,10)||0)};return w.jsxs(Oh,{open:r.isOpen,onClose:r.onClose,children:[w.jsx(qf,{children:r.currentTrack?c("Edit Track"):c("New Track")}),w.jsxs(Mh,{children:[w.jsx(Ea,{autoFocus:!0,fullWidth:!0,placeholder:"Untitled",margin:"normal",type:"text",label:c("Track name"),value:e,onChange:h}),w.jsxs(ND,{sx:{display:"flex",flexDirection:"row",marginTop:"12px"},children:[w.jsxs(XB,{fullWidth:!0,children:[w.jsx(KB,{id:"demo-simple-select-label",children:c("Tuning Preset")}),w.jsx(Cb,{labelId:"demo-simple-select-label",id:"demo-simple-select-label",fullWidth:!0,label:c("Tuning Preset"),onChange:p,value:s,children:I_.map(b=>w.jsx(Zo,{value:b,children:b.name},b.name))})]}),w.jsx(Ea,{style:{width:"100px",marginLeft:"12px"},label:c("Capo"),type:"number",InputProps:{inputProps:{min:0}},value:i,onChange:g})]})]}),w.jsxs(_m,{children:[w.jsx(au,{title:c("Cancel"),onClick:r.onClose,children:c("Cancel")}),w.jsx(au,{title:c("Save"),onClick:()=>r.onSave({name:e,capo:i,tuning:s}),children:c("Save")})]})]})}const B8=He("div")(({theme:r})=>({position:"absolute",top:0,left:0,bottom:0,width:"120px",display:"flex",alignContent:"stretch",zIndex:"1001",overflow:"hidden",borderRight:"1px solid rgba(0, 0, 0, 0.12)",backgroundColor:r.palette.mode==="dark"?r.palette.grey[700]:"inherit"}));function T8({tracks:r,selectedTrackIndex:e,selectTrack:t,onNewTrack:i,onTrackEdit:n,onRemoveTrack:s}){const{closeDialog:o,isDialogOpen:c,openDialog:h}=Sh(),p=v=>{r&&n(r[e],v),o()},g=v=>{t(v)},b=v=>{h()};return w.jsxs(w.Fragment,{children:[r&&w.jsx(_8,{isOpen:c,onClose:o,currentTrack:r[e],onSave:p}),w.jsx(B8,{children:r&&w.jsx(k8,{onNewTrack:h,selectedTrackIndex:e,onTrackSelected:g,onTrackEdit:b,onTrackRemove:s,tracks:r})})]})}class C8{constructor(e,t,i){ti(this,"batchResult",null);ti(this,"api");ti(this,"selectedBeat",()=>{var e,t;return((t=(e=this.selectedNoteController)==null?void 0:e.getSelectedSlot())==null?void 0:t.beat)??null});ti(this,"selectedNote",()=>{var e,t;return((t=(e=this.selectedNoteController)==null?void 0:e.getSelectedSlot())==null?void 0:t.note)??null});ti(this,"doAction",e=>{const t=this.actions.doAction(e);this.batchResult===null?this.batchResult=t:(this.batchResult.requiresMidiUpdate=this.batchResult.requiresMidiUpdate||t.requiresMidiUpdate,this.batchResult.requiresRerender=this.batchResult.requiresRerender||t.requiresRerender)});ti(this,"applyActions",()=>{this.batchResult&&this.onResult(this.batchResult),this.batchResult=null});ti(this,"doAndApplyAction",e=>{const t=this.actions.doAction(e);this.onResult(t)});ti(this,"setHammer",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-hammer",data:{note:t,value:e}})});ti(this,"setSlide",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-slide",data:{note:t,value:e}})});ti(this,"setSlideIn",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-slide-in",data:{note:t,value:e}})});ti(this,"setSlideOut",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-slide-out",data:{note:t,value:e}})});ti(this,"setStaccato",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-staccato",data:{note:t,value:e}})});ti(this,"setDynamics",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-dynamics",data:{beat:t,value:e}})});ti(this,"setTempo",e=>{var t;(t=this.api)!=null&&t.score&&this.doAndApplyAction({type:"set-tempo",data:{tempo:e,score:this.api.score}})});ti(this,"setGhostNote",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-ghost-note",data:{note:t,value:e}})});ti(this,"setAccentuationNote",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-accentuation",data:{note:t,value:e}})});ti(this,"setPickStroke",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-pick-stroke",data:{beat:t,value:e}})});ti(this,"setHarmonicType",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-harmonic",data:{note:t,value:e}})});ti(this,"setScoreInfo",e=>{var i;const t=(i=this.api)==null?void 0:i.score;t&&this.doAndApplyAction({type:"set-score-info",data:{score:t,scoreInfo:e}})});ti(this,"setDuration",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-duration",data:{beat:t,value:e}})});ti(this,"setDeadNote",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-dead-note",data:{note:t,value:e}})});ti(this,"setTapNote",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-tap",data:{note:t,value:e}})});ti(this,"setTieNote",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-tie",data:{note:t,value:e}})});ti(this,"setVibratoNote",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-vibrato",data:{note:t,value:e}})});ti(this,"setText",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-text",data:{value:e,beat:t}})});ti(this,"setBend",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-bend",data:{value:e,note:t}})});ti(this,"setPalmMute",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-palm-mute",data:{note:t,value:e}})});ti(this,"setLetRing",e=>{const t=this.selectedNote();t&&this.doAndApplyAction({type:"set-let-ring",data:{note:t,value:e}})});ti(this,"newTrack",e=>{var t;(t=this.api)!=null&&t.score&&this.doAndApplyAction({type:"add-track",data:{score:this.api.score,trackInfo:e}})});ti(this,"setOpenRepeat",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-open-repeat",data:{beat:t,value:e}})});ti(this,"setCloseRepeat",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-close-repeat",data:{beat:t,value:e}})});ti(this,"editTrack",(e,t)=>{var i;(i=this.api)!=null&&i.score&&this.doAndApplyAction({type:"edit-track",data:{track:e,trackInfo:t}})});ti(this,"removeTrack",e=>{this.doAndApplyAction({type:"remove-track",data:{track:e}})});ti(this,"setFret",e=>{const t=this.selectedNoteController.getSelectedSlot();if(t)if(t!=null&&t.note)this.doAndApplyAction({type:"set-fret",data:{note:t.note,value:e}});else{const i=new alphaTab.model.Note;i.fret=e,i.string=t==null?void 0:t.string,this.doAndApplyAction({type:"add-note",data:{beat:t.beat,note:i}}),this.selectedNoteController.updateCurrentSelection()}});ti(this,"removeNote",()=>{const e=this.selectedNote();e&&(this.doAndApplyAction({type:"remove-note",data:{note:e}}),this.selectedNoteController.setSelectedSlot({beat:e.beat,string:e.string}))});ti(this,"addBeat",()=>{const e=this.selectedBeat();if(e)if(e.voice.beats.length===e.voice.bar.masterBar.timeSignatureNumerator){const t=e.voice.bar;this.doAndApplyAction({type:"add-bar",data:{currentBar:t}})}else{const t=new alphaTab.model.Beat;this.doAndApplyAction({type:"add-beat",data:{currentBeat:e,newBeat:t}})}});ti(this,"addBar",()=>{let e=this.selectedBeat();if(e){const t=e.voice.bar.masterBar.timeSignatureNumerator-e.voice.beats.length;for(let n=0;n<t;n++){const s=new alphaTab.model.Beat;this.doAction({type:"add-beat",data:{currentBeat:e,newBeat:s}}),e=s}const i=e.voice.bar;this.doAction({type:"add-bar",data:{currentBar:i}}),this.applyActions()}});ti(this,"setChord",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-chord",data:{beat:t,value:e}})});ti(this,"setFermata",e=>{const t=this.selectedBeat();t&&this.doAndApplyAction({type:"set-fermata",data:{beat:t,value:e}})});ti(this,"undo",()=>{const e=this.actions.undoAction();this.onResult(e)});ti(this,"redo",()=>{const e=this.actions.redoAction();this.onResult(e)});this.actions=e,this.selectedNoteController=t,this.onResult=i}}class Iw{constructor(e){this.selectedNoteController=e}get hasSelectedNote(){var e,t;return!!((t=(e=this.selectedNoteController)==null?void 0:e.getSelectedSlot())!=null&&t.note)}get hasSelectedBeat(){var e,t;return!!((t=(e=this.selectedNoteController)==null?void 0:e.getSelectedSlot())!=null&&t.beat)}get selectedBeat(){var e,t;return((t=(e=this.selectedNoteController)==null?void 0:e.getSelectedSlot())==null?void 0:t.beat)??null}get selectedNote(){var e,t;return((t=(e=this.selectedNoteController)==null?void 0:e.getSelectedSlot())==null?void 0:t.note)??null}get selectionIsOpenRepeat(){var e;return((e=this.selectedBeat)==null?void 0:e.voice.bar.masterBar.isRepeatStart)??!1}get selectionNumberOfRepetitions(){var e;return((e=this.selectedBeat)==null?void 0:e.voice.bar.masterBar.repeatCount)??0}get selectionFret(){var e;return((e=this.selectedNote)==null?void 0:e.fret)??null}get selectionText(){var e;return((e=this.selectedBeat)==null?void 0:e.text)??null}get selectionIsPalmMute(){var e;return((e=this.selectedNote)==null?void 0:e.isPalmMute)??!1}get selectionIsStaccato(){var e;return((e=this.selectedNote)==null?void 0:e.isStaccato)??!1}get selectionIsLetRing(){var e;return((e=this.selectedNote)==null?void 0:e.isLetRing)??!1}get selectionIsTie(){var e;return((e=this.selectedNote)==null?void 0:e.isTieOrigin)??!1}get selectionIsLeftHandTap(){var e;return((e=this.selectedNote)==null?void 0:e.isLeftHandTapped)??!1}get selectionIsVibrato(){var e;return((e=this.selectedNote)==null?void 0:e.vibrato)!==0}get selectionVibrato(){var e;return((e=this.selectedNote)==null?void 0:e.vibrato)??null}get selectionBeatDuration(){var e;return((e=this.selectedBeat)==null?void 0:e.duration)??null}get selectionBeatDynamics(){var e;return((e=this.selectedBeat)==null?void 0:e.dynamics)??null}get selectionBeatPickStroke(){var e;return((e=this.selectedBeat)==null?void 0:e.pickStroke)??null}get selectionFermata(){var e;return((e=this.selectedBeat)==null?void 0:e.fermata)??null}get selectionNoteIsGhost(){var e;return((e=this.selectedNote)==null?void 0:e.isGhost)??null}get selectionNoteAccentuation(){var e;return((e=this.selectedNote)==null?void 0:e.accentuated)??null}get selectionNoteHarmonicType(){var e;return((e=this.selectedNote)==null?void 0:e.harmonicType)??null}get selectionChord(){var e;return((e=this.selectedBeat)==null?void 0:e.chord)??null}get selectionNoteDead(){var e;return((e=this.selectedNote)==null?void 0:e.isDead)??null}get selectionNoteHammerOrPull(){var e;return((e=this.selectedNote)==null?void 0:e.isHammerPullOrigin)??null}get selectionNoteSlide(){var e;return((e=this.selectedNote)==null?void 0:e.slideTarget)!==null}get selectionSlideIn(){var e;return((e=this.selectedNote)==null?void 0:e.slideInType)??null}get selectionSlideOut(){var e;return((e=this.selectedNote)==null?void 0:e.slideOutType)??null}get selectiondBend(){return this.selectedNote?pT(this.selectedNote):null}}function N8(r){var n;if(!(r!=null&&r.score))return;const t=new alphaTab.exporter.Gp7Exporter().export(r.score,r.settings),i=document.createElement("a");i.download=`${((n=r==null?void 0:r.score)==null?void 0:n.title)||"File"}.gp`,i.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(i),i.click(),document.body.removeChild(i)}function P8(r){r&&(r==null||r.downloadMidi())}function E8(){const[r,e]=F.useState(0);return()=>e(t=>t+1)}const Gg=new Y6;let ji;const ra=new C8(Gg,ji,()=>{}),R8=He("div")({height:"calc(100vh - 2px)",margin:"0 auto",border:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"}),L8=He("div")({position:"relative",overflow:"hidden",flex:"1 1 auto"}),I8=He("div")({position:"absolute",left:"120px",right:0,zIndex:999});function F8({hasDialog:r}){var re;const e=E8(),[t,i]=F.useState(0),[n,s]=F.useState(new Iw(ji)),[o,c,h]=C5(null),p=j=>{var oe;j.requiresRerender&&((oe=h.current)==null||oe.render(),s(new Iw(ji))),j.requiresMidiUpdate&&h.current.loadMidiForScore()},g=j=>{c(j),new R5(j.renderer,b),ji=new N5(null),ra.api=j,ra.onResult=p,ra.selectedNoteController=ji,e()},b=j=>{console.log(j),j.type==="string-mouse-down"&&ji.setSelectedSlot({string:j.data.stringNumber,beat:j.data.beat}),j.type==="note-mouse-down"&&ji.toggleNoteSelection(j.data.note),j.type==="delete-selected-note"&&ra.removeNote(),j.type==="move-cursor-next-bar"&&ji.hasSelectedSlot()&&(j.rawEvent.preventDefault(),ji.moveNextBar()||(ra.addBar(),ji.moveNextBar())),j.type==="move-cursor-previous-bar"&&ji.hasSelectedSlot()&&(j.rawEvent.preventDefault(),ji.movePreviousBar()||ji.moveStartOfCurrentBar()),j.type==="move-cursor-right"&&ji.hasSelectedSlot()&&(j.rawEvent.preventDefault(),ji.moveNextBeat()||(ra.addBeat(),ji.moveNextBeat())),j.type==="move-cursor-left"&&ji.hasSelectedSlot()&&(j.rawEvent.preventDefault(),ji.movePreviousBeat()),j.type==="move-cursor-up"&&ji.hasSelectedSlot()&&(j.rawEvent.preventDefault(),ji.moveSelectedNoteUp()),j.type==="move-cursor-down"&&ji.hasSelectedSlot()&&(j.rawEvent.preventDefault(),ji.moveSelectedNoteDown()),j.type==="deselect-cursor"&&ji.hasSelectedSlot()&&(j.rawEvent.preventDefault(),ji.setSelectedSlot(null)),j.type==="undo-action"&&ra.undo(),j.type==="redo-action"&&ra.redo(),e(),s(new Iw(ji))},v=()=>{setTimeout(()=>{e()},50)},S=()=>{o==null||o.playPause(),e()},B=j=>{o&&(o.countInVolume=j?1:0,e())},T=j=>{o&&(o.metronomeVolume=j?1:0,e())},C=j=>{o&&(o.isLooping=j,e())},L=()=>{var oe;const j=(oe=o==null?void 0:o.score)==null?void 0:oe.tracks[0].staves[0].chords;return Array.from((j==null?void 0:j.values())??[])},O=()=>{o==null||o.print("",null)},I=()=>(o==null?void 0:o.score)??null,V=j=>{o&&(o.masterVolume=j)},P=j=>{o&&(o.playbackSpeed=j)},G=j=>{var ge;if((o==null?void 0:o.tracks.length)===1&&o.tracks[0].index===j.index)return;o==null||o.renderTracks([j]),i(j.index);const oe=(ge=j.staves[0])==null?void 0:ge.standardNotationLineCount;ji.setSelectedSlot(null),oe&&ji.setNumberOfStrings(oe)},W=j=>{const oe=new FileReader;oe.onload=ge=>{var he;o==null||o.load((he=ge.target)==null?void 0:he.result,[0])},Gg.clearUndoAndRedoHistory(),oe.readAsArrayBuffer(j)},J=()=>{o==null||o.tex("\\title 'New score' . 3.3.4"),Gg.clearUndoAndRedoHistory()};return w.jsxs(R8,{children:[w.jsxs(L8,{children:[w.jsx(T8,{tracks:((re=o==null?void 0:o.score)==null?void 0:re.tracks)??null,onNewTrack:ra.newTrack,onTrackEdit:ra.editTrack,onRemoveTrack:ra.removeTrack,selectedTrackIndex:t,selectTrack:G}),w.jsx(I8,{children:w.jsx(nz,{newFile:J,open:W,score:I(),selectedTrackIndex:t,currentAvailableChords:L(),editorScoreState:n,actionDispatcher:ra,exportGuitarPro:()=>N8(o),exportMidi:()=>P8(o),print:O,canRedo:Gg.canRedo(),canUndo:Gg.canUndo()})}),w.jsx(y8,{apiReady:g,renderFinished:v,playerStateChanged:()=>e(),children:w.jsx(az,{hasDialogOpen:r,fret:n.selectionFret,setFret:ra.setFret,bounds:ji==null?void 0:ji.getNoteBounds(o==null?void 0:o.renderer)})})]}),w.jsx(Bz,{onSpeedChange:P,onVolumeChange:V,playPause:S,onCountInChange:B,onMetronomeChange:T,onLoopingChange:C,isCountIn:(o==null?void 0:o.countInVolume)!==0,isMetronome:(o==null?void 0:o.metronomeVolume)!==0,isPlaying:(o==null?void 0:o.playerState)===1,isLooping:(o==null?void 0:o.isLooping)??!1})]})}const O8=He("div")(({theme:r})=>({backgroundColor:r.palette.mode==="dark"?r.palette.grey[900]:"inherit",height:"100vh"}));function M8(){const[r,e]=F.useState(!1),[t,i]=F.useState("dark"),n=Mn.useMemo(()=>({toggleColorMode:()=>{i(c=>c==="light"?"dark":"light")}}),[]),s=Mn.useMemo(()=>Dx({palette:{mode:t}}),[t]),o=Mn.useMemo(()=>({hasDialog:r,setHasDialog:e}),[]);return w.jsx(cT.Provider,{value:n,children:w.jsx(hT.Provider,{value:o,children:w.jsx(tF,{theme:s,children:w.jsx(O8,{children:w.jsx(F8,{hasDialog:r})})})})})}Mg.render(w.jsx(Mn.StrictMode,{children:w.jsx(M8,{})}),document.getElementById("root"));
